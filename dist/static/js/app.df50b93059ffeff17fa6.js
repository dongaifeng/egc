webpackJsonp([6],{"+a6k":function(e,t){},"+i6w":function(e,t){},"/iK1":function(e,t){},"/l+T":function(e,t){},"0TTt":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAPVJREFUOBGlkrFLQlEUxn/3+cCcJFyVUJxsdWsJB5docfIv6Z9oCScHlxykrS1HcQoKrCXBEAXRLEqHBFvM47mbwx3e853lXg7f+Tj8vmNEiwjlzVfw8A6b7WEupnAj0v+C2iVUTiF7Hdwo5oGfPYbBN2SSEPfh7CScgdkqg+UfpBLBB/eVJjLEf81g+rvvGe5vSg2RzgjuqnCeg4vb4AYxoxB/1mAvYaGvjXK4CGeggyLdsYiFeUhFhxh8YbfSrz9BswcthZg8gqu2W+jqehbi/Rs8TuD1A4ppaDy7pO6ePWXzuRJ5mUM5r2mobhbiJnQBIkPcAdcFjHKj1BNqAAAAAElFTkSuQmCC"},"0xKX":function(e,t){},"1UdG":function(e,t){},"2uz9":function(e,t){},"3ZI3":function(e,t){},"3zzE":function(e,t){},"5DT/":function(e,t){},"5owx":function(e,t){},"6JvK":function(e,t){},"6hk9":function(e,t){},"8edG":function(e,t){},"8oDy":function(e,t){},"9P6M":function(e,t){},"9mUZ":function(e,t){},AWPb:function(e,t,a){"use strict";var i=a("//Fk"),s=a.n(i),o=a("Dd8w"),l=a.n(o),r=a("mtWM"),n=a.n(r),c=a("LOkV"),d=n.a.create({timeout:6e4});d.defaults.headers["Cache-Control"]="no-cache",d.defaults.headers.Pragma="no-cache",d.defaults.headers.Expires="-1",d.interceptors.request.use(function(e){return sessionStorage.token&&(e.headers.Authorization=sessionStorage.token),e.headers.FrontType="egc-admin-ui","get"===e.method&&(e.params=l()({_t:Date.parse(new Date)/1e3},e.params)),e},function(e){return s.a.reject(e)}),d.interceptors.response.use(function(e){return e},function(e){return Object(c.b)(e)}),t.a=d},AZQe:function(e,t){},BAHs:function(e,t){},Bfyo:function(e,t){},DCHd:function(e,t){},DfO4:function(e,t){},DtMI:function(e,t){},E6up:function(e,t){},FGP2:function(e,t){},G2hd:function(e,t){},G7kK:function(e,t){},Gcy2:function(e,t){},Grge:function(e,t){},H1Un:function(e,t){},H1no:function(e,t){},H5UB:function(e,t){},HGBZ:function(e,t){},HMEu:function(e,t){},HlSF:function(e,t){},Ho0G:function(e,t){},ICF1:function(e,t){},KHiU:function(e,t){},Km2L:function(e,t){},KwND:function(e,t){},L5YW:function(e,t){},L9H2:function(e,t){},LOkV:function(e,t,a){"use strict";a.d(t,"c",function(){return c}),a.d(t,"d",function(){return d}),a.d(t,"b",function(){return u}),a.d(t,"a",function(){return p});var i=a("//Fk"),s=a.n(i),o=a("mvHQ"),l=(a.n(o),a("pFYg")),r=(a.n(l),a("7+uW")),n=a("zL8q");a.n(n);r.default.component(n.Message.name,n.Message);var c=function(e,t){var a="",i=e.uiResources;return null!==i&&void 0!==i&&i.forEach(function(e){void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=a+"_"+e.url),void 0!==e.menus&&null!==e.menus&&e.menus.forEach(function(e){void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=a+"_"+e.url),void 0!==e.items&&null!==e.items&&e.items.forEach(function(e){t[e]=!0}),void 0!==e.submenus&&null!==e.submenus&&e.submenus.forEach(function(e){void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=a+"_"+e.url),void 0!==e.items&&null!==e.items&&e.items.forEach(function(e){t[e]=!0}),void 0!==e.submenus&&null!==e.submenus&&e.submenus.forEach(function(e){void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=a+"_"+e.url),void 0!==e.items&&null!==e.items&&e.items.forEach(function(e){t[e]=!0})})})})}),a},d=function(e,t){var a="",i=e.uiResources;return null!==i&&void 0!==i&&i.forEach(function(e){void 0!==e.title&&null!==e.title&&e.title===t&&(void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=e.url),void 0!==e.menus&&null!==e.menus&&e.menus.forEach(function(e,t){0===t&&(void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=e.url),void 0!==e.submenus&&null!==e.submenus&&e.submenus.forEach(function(e,t){0===t&&(void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=e.url),void 0!==e.submenus&&null!==e.submenus&&e.submenus.forEach(function(e,t){0===t&&void 0!==e.url&&null!==e.url&&e.url.length>0&&(a=e.url)}))}))}))}),a},u=function(e){if(e.response){var t=e.response.data.message;switch(null!==t&&""!==t&&void 0!==t||(t=e.response.data),void 0===t||-1===t.indexOf("499")&&-1===t.indexOf("00499")&&-1===t.indexOf("非法请求【缓存无效】")||(window.location.href="/login"),e.response.status){case 400:r.default.prototype.$message({message:t||"请求参数异常",type:"error"});break;case 401:r.default.prototype.$message({message:t||"密码错误或账号不存在！",type:"warning"});break;case 403:r.default.prototype.$message({message:t||"无访问权限，请联系企业管理员",type:"warning"});break;case 404:r.default.prototype.$message({message:t||"404错误，访问路径没找到，请联系技术支持",type:"error"});break;case 500:r.default.prototype.$message({message:t||"500服务器内部错误，请联系技术支持",type:"error"});break;case 499:window.location.href="/login";break;default:r.default.prototype.$message({message:t||"服务端异常，请联系技术支持",type:"error"})}}return s.a.reject(e)},p=function(e,t,a){e.addEventListener?e.addEventListener(t,a):e.attachEvent("on"+t,a)}},NHnr:function(e,t,a){"use strict";function i(e){a("pGp6")}function s(e){a("5DT/")}function o(e){a("hSND")}function l(e){a("R7rF")}function r(e){a("S9Mz")}function n(e){a("9P6M")}function c(e){a("H1no")}function d(e){a("0xKX")}function u(e){a("HGBZ")}function p(e){a("todT")}function m(e){a("ROXV")}function h(e){a("/l+T")}function f(e){a("3zzE")}function g(e){a("a63x")}function v(e){a("RUd5")}function b(e){a("Tgmq")}function D(e){a("ztsp")}function y(e){a("c/Op")}function C(e){a("Ho0G")}function _(e){a("V4w5")}function w(e){a("6JvK")}function S(e){a("ICF1")}function x(e){a("+i6w")}function k(e){a("Km2L")}function T(e){a("6hk9")}function L(e){a("Yf3Q")}function N(e){a("Xit+")}function V(e){a("E6up")}function I(e){a("HMEu")}function E(e){a("2uz9")}function P(e){a("tugZ")}function M(e){a("3ZI3")}function $(e){a("1UdG")}function U(e){a("FGP2")}function F(e){a("woQt")}function R(e){a("U4Lg")}function z(e){a("jjAq")}function A(e){a("NSss"),a("5owx")}function O(e){a("wTjo")}function q(e){a("mKfZ"),a("G2hd")}function B(e){a("V0Z8")}function W(e){a("P1PD"),a("H5UB")}function Q(e){a("xmwT")}function G(e){a("o6Ha"),a("XrzA")}function H(e){a("u8/i")}function j(e){a("ltFl")}function J(e){a("Rd7u")}function Z(e){a("Gcy2")}function K(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in a){var s=a[i]+"";new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?s:Y(s)))}return t}function Y(e){return("00"+e).substr(e.length)}function X(e){a("TW/6"),a("oXOz")}function ee(e){a("DtMI")}function te(e){a("DCHd")}function ae(e){a("xlaU")}function ie(e){a("n7eO")}function se(e){a("Xm31")}function oe(e){a("aYyN")}function le(e){a("L9H2")}function re(e){a("kN+3")}function ne(e){a("uL5P")}function ce(e){a("kO6s")}function de(e){a("BAHs")}function ue(e){a("HlSF"),a("oP9q")}function pe(e){a("bZVm")}function me(e){a("Rl25")}function he(e){a("+a6k")}function fe(e){a("p87K")}function ge(e){a("X8ql")}function ve(e){a("XXB+")}function be(e){a("G7kK")}function De(e){a("UDos")}function ye(e){a("Bfyo")}function Ce(e){a("r1qB")}function _e(e){a("AZQe")}function we(e){a("KwND")}function Se(e){a("DfO4")}function xe(e){a("iQ58")}function ke(e){a("YoQs")}function Te(e){a("/iK1")}function Le(e){a("KHiU")}function Ne(e){a("8edG")}function Ve(e){a("lBdV")}function Ie(e){a("PLYA")}function Ee(e){a("jFbp")}function Pe(e){a("mZ47")}function Me(e){a("L5YW")}function $e(e){a("9mUZ")}function Ue(e){a("8oDy")}function Fe(e){a("goBI")}function Re(e){a("g2i7")}function ze(e){a("UG6m")}function Ae(e){a("Grge")}Object.defineProperty(t,"__esModule",{value:!0});var Oe=(a("j1ja"),a("7+uW")),qe=a("zL8q"),Be=a.n(qe),We=(a("tvR6"),{name:"app"}),Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},Ge=[],He={render:Qe,staticRenderFns:Ge},je=He,Je=a("VU/8"),Ze=i,Ke=Je(We,je,!1,Ze,null,null),Ye=Ke.exports,Xe=a("Gu7T"),et=a.n(Xe),tt=a("/ocq"),at=a("jV5P"),it=a.n(at),st={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App index , ",now:(new Date).toLocaleString(),logopngPath:it.a}}},ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[e._v("\n "+e._s(e.now)+" HelloWorld ! "+e._s(e.msg)+"\n "),a("br"),e._v(" "),a("img",{attrs:{src:e.logopngPath}})])},lt=[],rt={render:ot,staticRenderFns:lt},nt=rt,ct=a("VU/8"),dt=s,ut=ct(st,nt,!1,dt,"data-v-f137f472",null),pt=ut.exports,mt=a("AWPb"),ht=function(e){return mt.a.post("/demo/user/create",e).then(function(e){return e.data})},ft=function(e){return mt.a.get("/demo/user/delete?userId="+e).then(function(e){return e.data})},gt=function(e){return mt.a.post("/demo/user/update",e).then(function(e){return e.data})},vt=function(e,t,a){return mt.a.get("/demo/user/queryPageData?currentPage="+e+"&pageSize="+t+"&userId="+a).then(function(e){return e.data})},bt={data:function(){return{tableData:[],formInline:{name:"",address:"",id:""},isAddUser:!0,updateUserRow:0,currentPage:1,total:0,pageSize:10,addressList:[],pickerOptions0:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},selectDate:"",dialogFormVisible:!1,formLabelWidth:"120px",form:{name:"",address:"",id:""},loading2:!1,options:[],selectedOptions:[],multipleSelection:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){this.loading2=!0,vt(this.currentPage,this.pageSize,9008).then(function(e){console.log("get data by page"),this.tableData=e.user,this.total=e.pageCount,this.loading2=!1}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e,this.loadData()},showAddDialog:function(){this.isAddUser=!0,this.form.id="",this.form.name="",this.dialogFormVisible=!0},showEditDialog:function(e){this.isAddUser=!1,this.updateUserRow=e;var t=this.tableData[e];this.form.id=t.id,this.form.name=t.userName,this.form.address=t.address,this.dialogFormVisible=!0},update:function(){if(""===this.form.name)return void this.$message.error("姓名不能为空");var e={id:this.form.id,userCode:this.form.id,userName:this.form.name};this.isAddUser?(console.log("is add user"),ht(e).then(function(e){console.log(this.tableData.length),this.tableData.splice(0,0,{id:this.form.id,userName:this.form.name,userCode:this.form.id})}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))):(console.log("is update user"),console.log(this.tableData.length),gt(e).then(function(e){console.log("name:"+this.form.name),console.log("id:"+this.form.id),this.tableData.splice(this.updateUserRow,1),this.tableData.splice(0,0,{id:this.form.id,userName:this.form.name,userCode:this.form.id}),this.$message({message:"修改成功",type:"success"})}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))),this.dialogFormVisible=!1},removeData:function(e){var t=this,a=this.tableData[e];this.$confirm('确定要删除"'+a.userName+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除操作1"),t.delete(a.id,e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){console.log("删除操作2"),ft(e).then(function(a){console.log(e),this.tableData.splice(t,1),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},batchRemove:function(){this.multipleSelection.forEach(function(e){console.log(e.id)})},deleteHttpModeth:function(e){var t=this.tableData[e];console.log(" deleteHttpModeth 删除操作 row.id:"+t.id),this.$http.get("/demo/user/delete?userId="+t.id).then(function(t){console.log(e.id),this.tableData.splice(e,1),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))}}},Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"users"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAddDialog()}}},[e._v("添加用户")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"序号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userCode",label:"用户编码",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showEditDialog(t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.removeData(t.$index)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteHttpModeth(t.$index)}}},[e._v("删除1")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("div",{staticClass:"r_page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[1*e.pageSize,2*e.pageSize,3*e.pageSize,4*e.pageSize],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"用户信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ID","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)],1)],1)},yt=[],Ct={render:Dt,staticRenderFns:yt},_t=Ct,wt=a("VU/8"),St=o,xt=wt(bt,_t,!1,St,"data-v-2c53c8a0",null),kt=xt.exports,Tt=[{path:"/viewdemo/index",name:"index",component:pt},{path:"/viewdemo/index2",name:"index2",component:kt},{path:"/viewdemo/index1",component:function(e){return a.e(3).then(function(){var t=[a("R0pk")];e.apply(null,t)}.bind(this)).catch(a.oe)}}],Lt=a("mUOH"),Nt=a("Av7u"),Vt=a.n(Nt),It=a("kgOi"),Et={name:"pwdedit",data:function(){var e=this,t=function(t,a,i){""===a?i(new Error("请再次输入密码")):a!==e.changeForm.newPwd?i(new Error("两次输入密码不一致!")):i()};return{userId:void 0,userUuid:void 0,userPwdFlag:!1,ruleText:"密码长度至少 8 位，必须包括数字、字母（区分大小写）以及“！# & $ ”等特殊符号",changeForm:{originalPwd:void 0,newPwd:void 0,repeatPwd:void 0},rules:{originalPwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{validator:function(t,a,i){var s=sessionStorage.getItem("login_username"),o=Vt.a.enc.Utf8.parse(a),l=Vt.a.enc.Base64.stringify(o);e.validateOriginalPwd(s,l),e.userPwdFlag?i():i(new Error("输入原密码有误"))}}],newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:8,max:20,message:"长度在 8 到 20 个字符"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/,message:"必须包括数字、字母以及 <! # & $ %> 等特殊符号"}],repeatPwd:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:t}]}}},methods:{validateOriginalPwd:function(e,t){console.log("start validating... "),Object(It.a)(e,t).then(function(e){this.userPwdFlag="1"==e}.bind(this)).catch(function(e){console.log(e)})},handleSave:function(e){var t=this;console.log(this.$store.state.mutations.userinfo.uuid),this.$refs[e].validate(function(a){var i=t.$store.state.mutations.userinfo.uuid;a&&Object(It.d)(i,t.changeForm.newPwd).then(function(t){this.$message({message:"修改成功",type:"success"}),this.$refs[e].resetFields(),this.$router.push("/login")}.bind(t)).catch(function(e){console.log("错误："+e),this.$message({message:"修改不成功",type:"info"})}.bind(t))})},handleCancel:function(e){this.$refs[e].resetFields(),this.$router.push("/login")}}},Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common",staticStyle:{"text-align":"center",width:"800px","margin-top":"10%","margin-left":"20%"}},[a("el-form",{ref:"changeForm",staticStyle:{margin:"0 auto"},attrs:{rules:e.rules,model:e.changeForm,"status-icon":""}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"原密码",prop:"originalPwd"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.changeForm.originalPwd,callback:function(t){e.$set(e.changeForm,"originalPwd",t)},expression:"changeForm.originalPwd"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"新密码",prop:"newPwd"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.changeForm.newPwd,callback:function(t){e.$set(e.changeForm,"newPwd",t)},expression:"changeForm.newPwd"}})],1),e._v(" "),a("p",{attrs:{id:"ruleText"}},[e._v(" "+e._s(e.ruleText))]),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"重复新密码",prop:"repeatPwd"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.changeForm.repeatPwd,callback:function(t){e.$set(e.changeForm,"repeatPwd",t)},expression:"changeForm.repeatPwd"}})],1)],1),e._v(" "),a("div",[a("el-row",[a("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(t){e.handleCancel("changeForm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleSave("changeForm")}}},[e._v("提交")])],1)])],1)],1)},Mt=[],$t={render:Pt,staticRenderFns:Mt},Ut=$t,Ft=a("VU/8"),Rt=l,zt=Ft(Et,Ut,!1,Rt,"data-v-b3d7e8cc",null),At=zt.exports,Ot=[{path:"/userMgmtLogin",name:"登录",component:Lt.default},{path:"/usermgmt/userManagement/pwdedit",name:"修改密码",component:At}],qt=a("mvHQ"),Bt=a.n(qt),Wt={name:"gridList",props:{params:void 0,tableData:void 0,editable:!1,deletable:!0,viewable:!1,showOperation:!0,total:void 0},data:function(){return{deleteImg:a("y55A"),editImg:a("sDj5")}},methods:{handleClickDelete:function(e){var t=this;this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$emit("listenToDeleteEvent",t.tableData[e])}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleClickEdit:function(e){this.$emit("listenToEditEvent",this.tableData[e]),console.log("gridlist 编辑"+e+"行")},handleClickView:function(e){this.$emit("listenToViewEvent",this.tableData[e]),console.log("gridlist 查看"+e+"行")},handleClickSelect:function(e){this.$emit("listenToClickEvent",this.tableData[e]),console.log("gridlist 选择"+e+"行")}},created:function(){}},Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":!0,data:e.tableData,stripe:"","max-height":"680"}},[e._l(e.params,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.title,"show-overflow-tooltip":e.showTooltip}})}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑",placement:"top-start"}},[e.editable?a("span",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","margin-right":"10px"},on:{click:function(a){e.handleClickEdit(t.$index)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"top-start"}},[e.deletable?a("span",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:function(a){e.handleClickDelete(t.$index)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"查看",placement:"top-start"}},[e.viewable?a("span",{staticClass:"el-icon-view",staticStyle:{cursor:"pointer"},on:{click:function(a){e.handleClickView(t.$index)}}}):e._e()])]}}])}):e._e()],2)},Gt=[],Ht={render:Qt,staticRenderFns:Gt},jt=Ht,Jt=a("VU/8"),Zt=r,Kt=Jt(Wt,jt,!1,Zt,null,null),Yt=Kt.exports,Xt="/egc-usermgmtcomponent",ea=function(){return mt.a.get(Xt+"/usermgmt/maindata/getDictData?dictType=CLOUD_USER_TYPE").then(function(e){return e.data})},ta=function(){return mt.a.get(Xt+"/usermgmt/maindata/getCourts").then(function(e){return e.data})},aa=function(e){var t={headers:{"Content-Type":"multipart/form-data"}};return mt.a.post(Xt+"/usermgmt/user/upload/excel",e,t).then(function(e){return console.log("---------------upload excel files result ---------- "),console.info(e),e.data})},ia=function(e){return mt.a.get(Xt+"/usermgmt/user/download/template?type="+e,{responseType:"arraybuffer"}).then(function(t){if("1"===e)var a="用户信息.xls";else"2"===e&&(a="用户信息.xlsm");var i=new Blob([t.data],{type:"application/x-xls"});if(navigator.appVersion.toString().indexOf(".NET")>0)window.navigator.msSaveBlob(i,a);else{var s=document.createElement("a");s.href=window.URL.createObjectURL(i),s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s)}return t.data})},sa=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/list?userGroupName="+encodeURI(e.userGroupName)+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize+"&cloudFlag="+e.cloudFlag+"&courtUuid="+e.courtUuid+"&userType="+e.userType).then(function(e){return e.data})},oa=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/create",e).then(function(e){return e.data})},la=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/update",e).then(function(e){return e.data})},ra=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/updateUGroupNameisNull",e).then(function(e){return e.data})},na=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/get?usergroupUuid="+e.usergroupUuid+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},ca=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/listDirChildrenUsergroup?parentUsergroupUuid="+e.parentUsergroupUuid+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},da=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/listDirChildrenUsergroup?parentUsergroupUuid="+e+"&currentPage=1&pageSize=1000000").then(function(e){return e.data})},ua=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/listUsergroupUser?usergroupUuid="+e.usergroupUuid+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},pa=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/listUsergroupUser?usergroupUuid="+e+"&currentPage=1&pageSize=1000000").then(function(e){return e.data})},ma=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/listUsergroupRole?usergroupUuid="+e.usergroupUuid+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},ha=function(e){return mt.a.get(Xt+"/usermgmt/usergroup/listUsergroupRole?usergroupUuid="+e+"&currentPage=1&pageSize=1000000").then(function(e){return e.data})},fa=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/delete?uuid="+e).then(function(e){return e.data})},ga=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/deleteUsergroupUser?uuid="+e).then(function(e){return e.data})},va=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/deleteUsergroupRole?usergroupRoleUuid="+e).then(function(e){return e.data})},ba=function(e,t,a){return mt.a.post(Xt+"/usermgmt/usergroup/checkUsergroupName?usergroupName="+encodeURI(t)+"&usergroupUuid="+e+"&userType="+a).then(function(e){return e.data})},Da=function(e){return mt.a.post(Xt+"/usermgmt/department/create",e).then(function(e){return e.data})},ya=function(e){return console.log("<<<<<q_departName:"+e.q_departName),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),console.log("<<<<<listQuery.cloudFlag:"+e.cloudFlag),console.log("<<<<<listQuery.q_courtUuid:"+e.q_courtUuid),mt.a.get(Xt+"/usermgmt/department/list?currentPage="+e.page+"&pageSize="+e.limit+"&departmentName="+encodeURI(e.q_departName)+"&cloudFlag="+e.cloudFlag+"&courtUuid="+e.q_courtUuid).then(function(e){return e.data})},Ca=function(e){return console.log("deleteDepartment:>>>>>>>>>>>>>"+e),mt.a.post(Xt+"/usermgmt/department/delete?departmentUuid="+e).then(function(e){return e.data})},_a=function(e){return console.log("updateDepartment:>>>>>>>>"+Bt()(e)),mt.a.post(Xt+"/usermgmt/department/updateSuperiorDepartment",e).then(function(e){return e.data})},wa=function(e){return console.log("getDepartmentDetail<<<<<uuid:"+e),mt.a.get(Xt+"/usermgmt/department/get?departmentUuid="+e+"&currentPage=1&pageSize=10").then(function(e){return e.data})},Sa=function(e,t,a){return console.log("getDirectDepartmentSelect<<<<<uuid:"+e),mt.a.get(Xt+"/usermgmt/department/listExAllparSelfDirDep?departmentUuid="+e+"&cloudFlag="+t+"&departmentType="+a).then(function(e){return e.data})},xa=function(e,t,a){return console.log("getParenetDepartmentSelect<<<<<uuid:"+e),mt.a.get(Xt+"/usermgmt/department/listExDirparSelfChildrenDep?departmentUuid="+e+"&cloudFlag="+t+"&departmentType="+a).then(function(e){return e.data})},ka=function(e){return console.log("<<<<<q_userName:"+e.departmentUuid),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),console.log("<<<<<listQuery.cloudFlag:"+e.cloudFlag),mt.a.get(Xt+"/usermgmt/department/listChildrenDepartment?currentPage="+e.page+"&pageSize="+e.limit+"&departmentUuid="+e.departmentUuid+"&cloudFlag="+e.cloudFlag+"&courtUuid="+e.courtUuid+"&departmentType="+e.departmentType).then(function(e){return e.data})},Ta=function(e){return console.log("createDirectDepartment<<<<<<<<<<<<<<:"+Bt()(e)),mt.a.post(Xt+"/usermgmt/department/createDirDepartment",e).then(function(e){return e.data})},La=function(e){return console.log("小区uuid<<<<<<<<<<<<<<:"+e.q_courtUuid),mt.a.get(Xt+"/usermgmt/department/getDepartmentTree?courtUuid="+e.q_courtUuid+"&cloudFlag="+e.cloudFlag).then(function(e){return e.data})},Na=function(e){return console.log("<<<<<departmentUuid:"+e.departmentUuid),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),console.log("<<<<<listQuery.cloudFlag:"+e.cloudFlag),mt.a.get(Xt+"/usermgmt/department/listDepartmentUser?currentPage="+e.page+"&pageSize="+e.limit+"&departmentUuid="+e.departmentUuid+"&cloudFlag="+e.cloudFlag).then(function(e){return e.data})},Va=function(e){return console.log("<<nopage<<<q_userName:"+e.departmentUuid),console.log("<<nopage<<<listQuery.page:"+e.page),console.log("<<nopage<<<listQuery.limit:"+e.limit),mt.a.get(Xt+"/usermgmt/department/listDepartmentUser?currentPage=1&pageSize=1000000&departmentUuid="+e.departmentUuid+"&cloudFlag="+e.cloudFlag+"&courtUuid="+e.courtUuid).then(function(e){return e.data})},Ia=function(e){return console.log("createDirectUser<<<<<<<<<<<<<<:"+Bt()(e)),mt.a.post(Xt+"/usermgmt/department/createDirUser",e).then(function(e){return e.data})},Ea=function(e){return mt.a.get(Xt+"/usermgmt/role/list?currentPage="+e.currentPage+"&pageSize="+e.pageSize+"&cloudFlag="+e.cloudFlag+"&courtUuid="+e.courtUuid+"&userType="+e.userType).then(function(e){return e.data})},Pa=function(e,t){return mt.a.get(Xt+"/usermgmt/maindata/listRole?cloudFlag="+e+"&userType="+t).then(function(e){return e.data})},Ma=function(e){return mt.a.get(Xt+"/usermgmt/maindata/listRole?cloudFlag="+e).then(function(e){return e.data})},$a=function(e){return console.log("新建角色数据："+e),mt.a.post(Xt+"/usermgmt/role/create",e).then(function(e){return e.data})},Ua=function(e){return console.log("入参 roleId: "+e),mt.a.post(Xt+"/usermgmt/role/delete?roleUuid="+e).then(function(e){return e.data})},Fa=function(e){return console.log("入参 roleId: "+e.roleId),mt.a.get(Xt+"/usermgmt/role/get?roleUuid="+e.roleId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},Ra=function(e){return console.log("更新角色数据："+e),mt.a.post(Xt+"/usermgmt/role/update",e).then(function(e){return e.data})},za=function(e,t){return mt.a.get(Xt+"/usermgmt/maindata/listUsergroup?cloudFlag="+e+"&userType="+t).then(function(e){return e.data})},Aa=function(e){return mt.a.get(Xt+"/usermgmt/role/listRoleUsergroup?roleUuid="+e+"&currentPage=1&pageSize=1000000").then(function(e){return e.data})},Oa=function(e){return mt.a.get(Xt+"/usermgmt/role/listRoleUser?roleUuid="+e+"&currentPage=1&pageSize=1000000").then(function(e){return e.data})},qa=function(e){return mt.a.get(Xt+"/usermgmt/role/listRoleUsergroup?roleUuid="+e.roleId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},Ba=function(e){return mt.a.get(Xt+"/usermgmt/role/listRoleUser?roleUuid="+e.roleId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},Wa=function(e){return mt.a.get(Xt+"/usermgmt/role/listRoleAuthResource?roleUuid="+e.roleId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},Qa=function(e,t){return mt.a.get(Xt+"/usermgmt/maindata/listUser?cloudFlag="+e+"&userType="+t).then(function(e){return e.data})},Ga=function(e){return mt.a.get(Xt+"/usermgmt/role/listRoleAuthResource?roleUuid="+e.roleId+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize).then(function(e){return e.data})},Ha=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/createUsergroupRole",e).then(function(e){return e.data})},ja=function(e){return mt.a.post(Xt+"/usermgmt/usergroup/deleteUsergroupRole?usergroupRoleUuid="+e).then(function(e){return e.data})},Ja=function(e){return mt.a.post(Xt+"/usermgmt/user/createUserRole",e).then(function(e){return e.data})},Za=function(e){return mt.a.post(Xt+"/usermgmt/user/deleteUserRole?userRoleUuid="+e).then(function(e){return e.data})},Ka=function(e){return mt.a.post(Xt+"/usermgmt/authority/delete?uuid="+e).then(function(e){return e.data})},Ya=function(e,t,a){return mt.a.post(Xt+"/usermgmt/role/checkRoleName?roleName="+encodeURI(t)+"&roleUuid="+e+"&userType="+a).then(function(e){return e.data})},Xa=function(e){return console.log("新增用户数据："+Bt()(e)),mt.a.post(Xt+"/usermgmt/user/create",e).then(function(e){return e.data})},ei=function(e){return mt.a.post(Xt+"/usermgmt/user/delete?userUuid="+e).then(function(e){return e.data})},ti=function(e){return mt.a.post(Xt+"/usermgmt/user/update",e).then(function(e){return e.data})},ai=function(e,t){return mt.a.post(Xt+"/usermgmt/user/resetPasswordByAdmin?userUuid="+e+"&passWord="+t).then(function(e){return e.data})},ii=function(e){return console.log("<<<<<uuid:"+e),mt.a.get(Xt+"/usermgmt/user/get?userUuid="+e+"&currentPage=1&pageSize=10").then(function(e){return e.data})},si=function(e){return mt.a.get(Xt+"/usermgmt/user/list?currentPage="+e.page+"&pageSize="+e.limit+"&userName="+encodeURI(e.q_userName)+"&fullName="+encodeURI(e.q_fullName)+"&primaryPhone="+e.q_primaryPhone+"&cloudFlag="+e.cloudFlag+"&courtUuid="+e.courtUuid+"&userType="+e.userType).then(function(e){return e.data})},oi=function(e,t,a){return mt.a.post(Xt+"/usermgmt/user/checkUserName?userName="+encodeURI(t)+"&userUuid="+e+"&userType="+a).then(function(e){return e.data})},li=function(e){return mt.a.get(Xt+"/usermgmt/maindata/listDepartment?cloudFlag="+e.cloudFlag+"&departmentType="+e.departmentType).then(function(e){return e.data})},ri=function(e){return mt.a.get(Xt+"/usermgmt/maindata/getDictData?dictType="+e.userStatusDict).then(function(e){return e.data})},ni=function(e){return console.log("<<<<<userUuid:"+e.userUuid),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),mt.a.get(Xt+"/usermgmt/user/listUserContact?userUuid="+e.userUuid+"&currentPage="+e.page+"&pageSize="+e.limit).then(function(e){return e.data})},ci=function(e){return mt.a.post(Xt+"/usermgmt/user/deleteUserContact?contactUuid="+e).then(function(e){return e.data})},di=function(e){return mt.a.post(Xt+"/usermgmt/user/createUserContact",e).then(function(e){return e.data})},ui=function(e){return mt.a.get(Xt+"/usermgmt/maindata/getDictData?dictType="+e.contactTypeDict).then(function(e){return e.data})},pi=function(e,t){return mt.a.get(Xt+"/usermgmt/maindata/listUsergroup?cloudFlag="+e+"&userType="+t).then(function(e){return e.data})},mi=function(e){return console.log("createUserUsergroup<<<<<<<<<<<<<<:"+Bt()(e)),mt.a.post(Xt+"/usermgmt/user/createUserUsergroup",e).then(function(e){return e.data})},hi=function(e){return console.log("<<<<<userUuid:"+e.userUuid),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),mt.a.get(Xt+"/usermgmt/user/listUserUsergroup?userUuid="+e.userUuid+"&currentPage="+e.page+"&pageSize="+e.limit).then(function(e){return e.data})},fi=function(e){return console.log("<<<<<userUuid-noPage:"+e.userUuid),console.log("<<<<<listQuery.page-noPage:"+e.page),console.log("<<<<<listQuery.limit-noPage:"+e.limit),mt.a.get(Xt+"/usermgmt/user/listUserUsergroupNoPage?userUuid="+e.userUuid).then(function(e){return e.data})},gi=function(e){return mt.a.post(Xt+"/usermgmt/user/deleteUsergroup?userUsergroupUuid="+e).then(function(e){return e.data})},vi=function(e,t){return mt.a.get(Xt+"/usermgmt/maindata/listRole?cloudFlag="+e+"&userType="+t).then(function(e){return e.data})},bi=function(e){return console.log("createUserRole<<<<<<<<<<<<<<:"+Bt()(e)),mt.a.post(Xt+"/usermgmt/user/createUserRole",e).then(function(e){return e.data})},Di=function(e){return console.log("<<<<<userUuid:"+e.userUuid),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),mt.a.get(Xt+"/usermgmt/user/listUserRole?userUuid="+e.userUuid+"&currentPage="+e.page+"&pageSize="+e.limit).then(function(e){return e.data})},yi=function(e){return console.log("<<<<<userUuid-noPage:"+e.userUuid),console.log("<<<<<listQuery.page-noPage:"+e.page),console.log("<<<<<listQuery.limit-noPage:"+e.limit),mt.a.get(Xt+"/usermgmt/user/listUserRoleNoPage?userUuid="+e.userUuid).then(function(e){return e.data})},Ci=function(e){return mt.a.post(Xt+"/usermgmt/user/deleteUserRole?userRoleUuid="+e).then(function(e){return e.data})},_i=function(e){return console.log("<<<<<q_resourceType:"+e.q_resourceType),console.log("<<<<<q_resourceName:"+e.q_resourceName),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),console.log("<<<<<listQuery.cloudFlag:"+e.cloudFlag),console.log("<<<<<listQuery.q_courtUuid:"+e.q_courtUuid),mt.a.get(Xt+"/usermgmt/resource/listPage?currentPage="+e.page+"&pageSize="+e.limit+"&resourceType="+e.q_resourceType+"&resourceName="+encodeURI(e.q_resourceName)+"&appCode="+e.q_appCode+"&cloudFlag="+e.cloudFlag+"&courtUuid="+e.q_courtUuid).then(function(e){return e.data})},wi=function(e,t){return mt.a.get(Xt+"/usermgmt/resource/list?resourceType=1&cloudFlag="+e+"&courtUuid="+t).then(function(e){return e.data})},Si=function(e){return console.log("新增资源实体："+Bt()(e)),mt.a.post(Xt+"/usermgmt/resource/create",e).then(function(e){return e.data})},xi=function(e){return mt.a.post(Xt+"/usermgmt/resource/delete?uuid="+e).then(function(e){return e.data})},ki=function(e){return console.log("修改资源实体："+Bt()(e)),mt.a.post(Xt+"/usermgmt/resource/update",e).then(function(e){return e.data})},Ti=function(e){return console.log("<<<<<uuid:"+e),mt.a.get(Xt+"/usermgmt/resource/get?uuid="+e).then(function(e){return e.data})},Li=function(e){return mt.a.get(Xt+"/usermgmt/maindata/getDictData?dictType="+e.actionType).then(function(e){return e.data})},Ni=function(e){return console.log("dictData.resourceTypeDict:"+e.resourceTypeDict),mt.a.get(Xt+"/usermgmt/maindata/getDictData?dictType="+e.resourceTypeDict).then(function(e){return e.data})},Vi=function(e){return console.log("<<<<<resourceType:"+e.resourceType),console.log("<<<<<resourceName:"+e.resourceName),console.log("<<<<<uuid:"+e.uuid),mt.a.get(Xt+"/usermgmt/resource/isExist?resourceType="+e.resourceType+"&resourceName="+encodeURI(e.resourceName)+"&uuid="+e.uuid+"&cloudFlag="+e.cloudFlag).then(function(e){return e.data})},Ii=function(e){return console.log("<<<<<resourceType:"+e.resourceType),console.log("<<<<<resourceName:"+e.resourceName),console.log("<<<<<uuid:"+e.uuid),mt.a.get(Xt+"/usermgmt/resource/isExist?resourceType="+e.resourceType+"&uuid="+e.uuid+"&appCode="+encodeURI(e.appCode)+"&cloudFlag="+e.cloudFlag).then(function(e){return e.data})},Ei=function(e){return mt.a.get(Xt+"/usermgmt/maindata/listDeviceTypes").then(function(e){return e.data})},Pi=function(){return mt.a.get(Xt+"/usermgmt/maindata/getMdmDictData?dictType=5").then(function(e){return e.data})},Mi=function(e){return mt.a.get(Xt+"/usermgmt/resource/getMenuTree?appCode="+e+"&cloudFlag=1").then(function(e){return e.data})},$i=function(e){return mt.a.get(Xt+"/usermgmt/maindata/getOrg?courtUuid="+e).then(function(e){return e.data})},Ui=function(e){return console.log("<<<<<resourceUuid:"+e.resourceUuid),console.log("<<<<<listQuery.page:"+e.page),console.log("<<<<<listQuery.limit:"+e.limit),mt.a.get(Xt+"/usermgmt/authority/listRolePage?resourceUuid="+e.resourceUuid+"&currentPage="+e.page+"&pageSize="+e.limit).then(function(e){return e.data})},Fi=function(e){return console.log("<<<noPage<<resourceUuid:"+e),mt.a.get(Xt+"/usermgmt/authority/listRolePage?resourceUuid="+e+"&currentPage=1&pageSize=100000").then(function(e){return e.data})},Ri=function(e){return console.log("新增资源角色实体："+Bt()(e)),mt.a.post(Xt+"/usermgmt/authority/create",e).then(function(e){return e.data})},zi=function(e){return mt.a.post(Xt+"/usermgmt/authority/delete?uuid="+e).then(function(e){return e.data})},Ai=function(e){return console.log("Axios getTreeResourceData tree:"),mt.a.get(Xt+"/usermgmt/resource/getMenuTree?appCode="+e.appCode+"&hasAuthority="+e.hasAuthority+"&hasButton="+e.hasButton+"&roleUuid="+e.uuid+"&cloudFlag="+e.cloudFlag).then(function(e){return e.data})},Oi=function(e){return console.log("Axios getResourceList:"),mt.a.get(Xt+"/usermgmt/resource/list?resourceType="+e.type+"&cloudFlag="+e.cloudFlag).then(function(e){return e.data})},qi=function(e){return console.log("Axios createAuthority："+Bt()(e)),mt.a.post(Xt+"/usermgmt/authority/createMenuAuthority",e).then(function(e){return e.data})},Bi=function(e){return console.log("Axios createService"+Bt()(e)),mt.a.post(Xt+"/usermgmt/authority/createList",e).then(function(e){return e.data})},Wi=function(e){return console.log("Axios getServiceListPage"+Bt()(e)),mt.a.get(Xt+"/usermgmt/resource/listPage?resourceType="+e.resourceType+"&appCode="+e.appCode+"&resourceName="+encodeURI(e.resourceName)+"&delAuthority="+e.delAuthority+"&roleUuid="+e.roleUuid+"&currentPage="+e.currentPage+"&pageSize="+e.pageSize+"&cloudFlag="+e.cloudFlag).then(function(e){return e.data})},Qi=function(){return mt.a.get(Xt+"/usermgmt/maindata/getProvince").then(function(e){return e.data})},Gi=function(e){return console.log("get city list, param is  --\x3e   "+Bt()(e)),console.log("get city list param: province is  --\x3e   "+Bt()(e.province)),mt.a.get(Xt+"/usermgmt/maindata/getCity?province="+encodeURI(e.province)).then(function(e){return e.data})},Hi=function(e){return console.log("get district, the param  province is --\x3e   "+e.province+" the param  city is ---- >"+e.city),mt.a.get(Xt+"/usermgmt/maindata/getDistrict?province="+encodeURI(e.province)+"&city="+encodeURI(e.city)).then(function(e){return e.data})},ji=function(e){return console.log("get district, the param  province is --\x3e   "+e.province+" the param  city is ---- >"+e.city),mt.a.get(Xt+"/usermgmt/maindata/getCourts?province="+encodeURI(e.province)+"&city="+encodeURI(e.city)+"&district="+encodeURI(e.district)).then(function(e){return e.data})},Ji={props:{usergroupUuid:void 0,userGroupDetailData:void 0,dirUsergroupDetailData:void 0,dirUserDetailData:void 0,roleDetailData:void 0,editForm:{usergroupName:void 0,remark:void 0,userType:void 0,uuid:void 0},userTypeList:void 0},components:{gridList:Yt},methods:{getParUsergroupOptionList:function(){this.query.usergroupUuid=this.usergroupUuid,console.log(this.query.usergroupUuid),za(1).then(function(e){this.tmpUserGroupList=e,da(this.usergroupUuid).then(function(e){if(this.userGroupFilterList=e.usergroupBaseVoList,e.pageCount>0)for(var t=0;t<this.userGroupFilterList.length;t++)this.disableUserGroup(this.userGroupFilterList[t].uuid);this.userGroupList=this.tmpUserGroupList.filter(function(e){return!e.isDisabled})}.bind(this)).catch(function(e){console.log(e)}),console.log("用户组："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},getDirUsergroupOptionList:function(){this.query.usergroupUuid=this.usergroupUuid,console.log(this.query.usergroupUuid),za(1).then(function(e){this.tmpUserGroupList=e,da(this.usergroupUuid).then(function(e){if(this.userGroupFilterList=e.usergroupBaseVoList,e.pageCount>0)for(var t=0;t<this.userGroupFilterList.length;t++)this.disableUserGroup(this.userGroupFilterList[t].uuid);this.userGroupList=this.tmpUserGroupList.filter(function(e){return!e.isDisabled})}.bind(this)).catch(function(e){console.log(e)}),console.log("用户组："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},disableUserGroup:function(e){for(var t=0;t<this.tmpUserGroupList.length;t++)e===this.tmpUserGroupList[t].uuid&&(this.tmpUserGroupList[t].isDisabled=!0,console.log("success"))},getUserOptionList:function(){this.query.usergroupUuid=this.usergroupUuid,console.log("userType: "+this.editForm.userType),Qa(1,this.editForm.userType).then(function(e){this.tmpUserList=e,pa(this.usergroupUuid).then(function(e){if(this.userFilterList=e.usergroupUserVoList,console.log("清单："+Bt()(this.userFilterList)),e.pageCount>0)for(var t=0;t<this.userFilterList.length;t++)this.disableUser(this.userFilterList[t].userUuid);this.userList=this.tmpUserList.filter(function(e){return!e.isDisabled}),console.log("筛选后清单："+Bt()(this.userList))}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},disableUser:function(e){for(var t=0;t<this.tmpUserList.length;t++)e===this.tmpUserList[t].uuid&&(this.tmpUserList[t].isDisabled=!0,console.log(t))},getRoleOptionList:function(){this.query.usergroupUuid=this.usergroupUuid,Pa(1,this.editForm.userType).then(function(e){this.tmpRoleList=e,console.log(this.tmpRoleList),ha(this.usergroupUuid).then(function(e){if(this.roleFilterList=e.usergroupRoleVoList,e.pageCount>0)for(var t=0;t<this.roleFilterList.length;t++)this.disableRole(this.roleFilterList[t].roleUuid);this.roleList=this.tmpRoleList.filter(function(e){return!e.isDisabled})}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},disableRole:function(e){for(var t=0;t<this.tmpRoleList.length;t++)e===this.tmpRoleList[t].uuid&&(this.tmpRoleList[t].isDisabled=!0,console.log("success"))},usergroupBoxSelected:function(e){this.queryUsergroup.parentUsergroupUuid=this.usergroupUuid,this.queryParent.parentUsergroupUuid=this.usergroupUuid,this.queryUsergroup.uuid=e,ra(this.queryUsergroup).then(function(t){this.$emit("listenToChildEditEvent",e),ca(this.queryParent).then(function(e){this.dirUsergroupDetailData.usergroupBaseVoList=e.usergroupBaseVoList,this.dirUsergroupDetailData.pageCount=e.pageCount}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},userBoxSelected:function(e){this.queryUser.usergroupUuid=this.usergroupUuid,this.query.usergroupUuid=this.usergroupUuid,this.queryUser.userUuid=e,console.log("添加用户"+Bt()(this.queryUser)),mi(this.queryUser).then(function(t){this.$emit("listenToChildEditEvent",e),ua(this.query).then(function(e){console.log("result:"+Bt()(e)),this.dirUserDetailData.usergroupUserVoList=e.usergroupUserVoList,this.dirUserDetailData.pageCount=e.pageCount}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},roleBoxSelected:function(e){this.queryRole.usergroupUuid=this.usergroupUuid,this.query.usergroupUuid=this.usergroupUuid,this.queryRole.roleUuid=e,console.log("添加角色"+Bt()(this.queryRole)),Ha(this.queryRole).then(function(t){this.$emit("listenToEditEvent",e),ma(this.query).then(function(e){this.roleDetailData.usergroupRoleVoList=e.usergroupRoleVoList,this.roleDetailData.pageCount=e.pageCount,console.log(e)}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},handleSubTabClick:function(e,t){this.tabTitle=this.textMap[e.name-1],this.showSummary="0"===e.name,this.showDirUserGroup="1"===e.name,this.showUser="2"===e.name,this.showRole="3"===e.name},userDeleteEvent:function(e){console.log(Bt()(e)),ga(e.usergroupUserUuid).then(function(t){this.$emit("listenToChildDeleteEvent",this.usergroupUuid),this.query.usergroupUuid=this.usergroupUuid,this.$message({type:"success",message:"删除成功!"}),ua(this.query).then(function(e){console.log("result:"+Bt()(e)),this.dirUserDetailData.usergroupUserVoList=e.usergroupUserVoList,this.dirUserDetailData.pageCount=e.pageCount}.bind(this)).catch(function(e){console.log(e)}),console.log("解除了直属用户："+e.usergroupUserUuid)}.bind(this)).catch(function(e){console.log(e),this.$message.error(e.response.data.message)})},roleDeleteEvent:function(e){console.log(Bt()(e)),va(e.usergroupRoleUuid).then(function(t){this.$emit("listenToChildDeleteEvent",this.usergroupUuid),this.query.usergroupUuid=this.usergroupUuid,this.$message({type:"success",message:"删除成功!"}),ma(this.query).then(function(e){this.roleDetailData.usergroupRoleVoList=e.usergroupRoleVoList,this.roleDetailData.pageCount=e.pageCount,console.log(e)}.bind(this)).catch(function(e){console.log(e)}),console.log("解除了关联角色："+e.usergroupRoleUuid)}.bind(this)).catch(function(e){console.log(e),this.$message.error(e.response.data.message)})},handleSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.editForm.usergroupName=t.trim(t.editForm.usergroupName),la(t.editForm).then(function(e){this.$message({message:"保存成功！",type:"success"}),this.$emit("listenToChildEditEvent",this.editForm),this.$emit("listenToChildCloseEvent")}.bind(t)).catch(function(e){console.log("错误："+e)})})},handleUserSizeChange:function(e){this.query.pageSize=e,this.query.usergroupUuid=this.usergroupUuid,ua(this.query).then(function(e){console.log("result:"+Bt()(e)),this.dirUserDetailData.usergroupUserVoList=e.usergroupUserVoList,this.dirUserDetailData.pageCount=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},handleUserCurrentChange:function(e){this.query.currentPage=e,this.query.usergroupUuid=this.usergroupUuid,console.log("翻页："+Bt()(this.query)),ua(this.query).then(function(e){console.log("result:"+Bt()(e)),this.dirUserDetailData.usergroupUserVoList=e.usergroupUserVoList,this.dirUserDetailData.pageCount=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},handleRoleSizeChange:function(e){this.query.pageSize=e,this.query.usergroupUuid=this.usergroupUuid,ma(this.query).then(function(e){this.roleDetailData.usergroupRoleVoList=e.usergroupRoleVoList,this.roleDetailData.pageCount=e.pageCount,console.log(e)}.bind(this)).catch(function(e){console.log(e)})},handleRoleCurrentChange:function(e){this.query.currentPage=e,this.query.usergroupUuid=this.usergroupUuid,console.log("翻页："+Bt()(this.query)),ma(this.query).then(function(e){this.roleDetailData.usergroupRoleVoList=e.usergroupRoleVoList,this.roleDetailData.pageCount=e.pageCount,console.log(e)}.bind(this)).catch(function(e){console.log(e)})},handleCancel:function(e){this.$emit("listenToChildCloseEvent")},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}},mounted:function(){this.subActiveName=0},watch:{"editForm.uuid":function(e,t){console.log("watch: editForm!!!!!!!!!!!!!!!!"),this.subActiveName="0",this.showSummary=!0,this.showDirUserGroup=!1,this.showUser=!1,this.showRole=!1},deep:!0},data:function(){var e=this;return{subActiveName:0,rules:{usergroupName:[{required:!0,message:"请填写用户组名称",trigger:"blur"},{validator:function(t,a,i){var s=e.trim(a),o=s.length;if(""===s)i(new Error("用户组名称不能为空"));else if(o>32||o<2)i(new Error("长度在 2 到 32 个字符"));else{var l=e.editForm.userType,r=e.editForm.uuid;ba(r,s,l).then(function(e){e?i():i(new Error("用户组名称已存在"))})}}}],remark:[{min:3,max:256,message:"长度在 3 到 256 个字符"}]},userTypeList:void 0,formData:void 0,userGroupNameFlag:!0,userGroupFilterList:void 0,userFilterList:void 0,roleFilterList:void 0,tmpUserGroupList:void 0,tmpUserList:void 0,tmpRoleList:void 0,selectedValue:void 0,showSummary:!0,showDirUserGroup:!1,showUser:!1,showRole:!1,editable:!0,tabTitle:"下属用户组",textMap:{0:"下属用户组",1:"直属用户",2:"关联角色"},query:{currentPage:1,pageSize:5,usergroupUuid:void 0},queryCancel:{currentPage:1,pageSize:5,usergroupUuid:void 0},queryParent:{currentPage:1,pageSize:5,parentUsergroupUuid:void 0},queryUsergroup:{parentUsergroupUuid:void 0,uuid:void 0},queryUser:{usergroupUuid:void 0,uuid:void 0},queryRole:{roleUuid:void 0,usergroupUuid:void 0},listUserQuery:{cloudFlag:1,courtUuid:"",userType:""},listRoleQuery:{cloudFlag:1,courtUuid:"",userType:""},listUsergroupQuery:{courtUuid:"",userType:"",cloudFlag:1},userGroupList:void 0,userList:void 0,roleList:void 0,tabPlaceholder:"添加下属用户组",selectedName:null,addUserList:void 0,gridTableData:void 0,gridParams:void 0,dirUsergroupParam:[{title:"用户组名称",prop:"usergroupName"},{title:"直属用户",prop:"dirUsersName"}],userParam:[{title:"用户姓名",prop:"fullName"},{title:"登录 ID",prop:"userName"},{title:"职务",prop:"position"},{title:"部门",prop:"departmentName"},{title:"手机号",prop:"primaryPhone"},{title:"身份证",prop:"idenNum"}],roleParam:[{title:"角色名称",prop:"roleName"},{title:"角色说明",prop:"roleRemark"},{title:"角色已有成员",prop:"roleUsergroupsName"}]}}},Zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"用户组概要",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"直属用户",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"关联角色",name:"3"}})],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSummary,expression:"showSummary"}],ref:"editForm",staticStyle:{margin:"0 auto"},attrs:{"label-width":"100px",model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{staticStyle:{width:"650px"},attrs:{placeholder:"请选择用户类型",disabled:""},on:{"visible-change":e.getUserTypeList},model:{value:e.editForm.userType,callback:function(t){e.$set(e.editForm,"userType",t)},expression:"editForm.userType"}},e._l(e.userTypeList,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode,disabled:!0}})}))],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"用户组名称",prop:"usergroupName"}},[a("el-input",{attrs:{placeholder:"请输入用户组名称"},model:{value:e.editForm.usergroupName,callback:function(t){e.$set(e.editForm,"usergroupName",t)},expression:"editForm.usergroupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组说明",prop:"remark"}},[a("el-input",{staticStyle:{width:"650px"},attrs:{type:"textarea",rows:"3"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCancel("editForm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.handleSave("editForm")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUser,expression:"showUser"}],staticStyle:{"margin-top":"-5px"}},[a("div",{staticStyle:{float:"left","margin-top":"10px"},attrs:{size:"small"}},[e._v("添加直属用户")]),e._v(" "),a("el-select",{staticStyle:{"margin-left":"30px",width:"200px"},attrs:{placeholder:"请选择需要添加的直属用户"},on:{"visible-change":e.getUserOptionList,change:e.userBoxSelected}},e._l(e.userList,function(e,t){return a("el-option",{key:t,attrs:{label:e.fullName,value:e.uuid}})})),e._v(" "),a("grid-list",{staticStyle:{"margin-top":"10px"},attrs:{id:"userTable",editable:!1,deletable:!0,showOperation:!0,tableData:e.dirUserDetailData.usergroupUserVoList,params:e.userParam},on:{listenToDeleteEvent:e.userDeleteEvent}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:e.dirUserDetailData.pageCount,"page-size":e.query.pageSize},on:{"size-change":e.handleUserSizeChange,"current-change":e.handleUserCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showRole,expression:"showRole"}],staticStyle:{"margin-top":"-5px"}},[a("div",{staticStyle:{float:"left","margin-top":"10px"},attrs:{size:"small"}},[e._v("添加关联角色")]),e._v(" "),a("el-select",{staticStyle:{"margin-left":"30px",width:"200px"},attrs:{placeholder:"请选择需要添加的关联角色"},on:{"visible-change":e.getRoleOptionList,change:e.roleBoxSelected}},e._l(e.roleList,function(e,t){return a("el-option",{key:t,attrs:{label:e.roleName,value:e.uuid}})})),e._v(" "),a("grid-list",{staticStyle:{"margin-top":"10px"},attrs:{id:"roleTable",editable:!1,deletable:!0,showOperation:!0,tableData:e.roleDetailData.usergroupRoleVoList,params:e.roleParam},on:{listenToDeleteEvent:e.roleDeleteEvent}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:e.roleDetailData.pageCount,"page-size":e.query.pageSize},on:{"size-change":e.handleRoleSizeChange,"current-change":e.handleRoleCurrentChange}})],1)],1)},Ki=[],Yi={render:Zi,staticRenderFns:Ki},Xi=Yi,es=a("VU/8"),ts=n,as=es(Ji,Xi,!1,ts,"data-v-28296a5e",null),is=as.exports,ss={props:{userTypeList:void 0},methods:{initData:function(){this.createForm={userType:"",usergroupName:"",remark:""},this.$refs.createForm.resetFields()},handleSave:function(e){var t=this;this.$refs[e].validate(function(a){a&&(t.createForm.usergroupName=t.trim(t.createForm.usergroupName),oa(t.createForm).then(function(t){this.$message({message:"保存成功！",type:"success"}),this.$emit("listenToAddEvent",this.createForm),this.createForm.usergroupName="",this.createForm.remark="",this.createForm.userType="",this.$refs[e].resetFields()}.bind(t)).catch(function(e){console.log("错误："+e)}))})},handleCancel:function(e){this.createForm={usergroupName:void 0,remark:void 0,uuid:void 0,userType:void 0},this.$refs[e].resetFields(),this.$emit("listenToAddEvent",this.createForm)},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}},mounted:function(){this.initData()},data:function(){var e=this;return{rules:{usergroupName:[{required:!0,message:"请填写用户组名称",trigger:"blur"},{validator:function(t,a,i){var s=e.trim(a),o=s.length;if(""===s)i(new Error("用户组名称不能为空"));else if(o>32||o<2)i(new Error("长度在 2 到 32 个字符"));else{var l=e.createForm.userType;ba("",s,l).then(function(e){e?i():i(new Error("用户组名称已存在"))})}}}],remark:[{min:3,max:256,message:"长度在 3 到 256 个字符"}],userType:[{required:!0,message:"请选择用户类型",trigger:"blur"}]},fields:[],userGroupNameFlag:!0,selectedValue:void 0,createForm:{usergroupName:void 0,remark:void 0,uuid:void 0,userType:void 0}}}},os=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","text-align":"center"}},[a("el-form",{ref:"createForm",staticStyle:{margin:"0 auto"},attrs:{"label-width":"100px",model:e.createForm,rules:e.rules}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{staticStyle:{width:"650px"},attrs:{placeholder:"请选择用户类型"},model:{value:e.createForm.userType,callback:function(t){e.$set(e.createForm,"userType",t)},expression:"createForm.userType"}},e._l(e.userTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"用户组名称",prop:"usergroupName"}},[a("el-input",{attrs:{placeholder:"请输入用户组名称"},model:{value:e.createForm.usergroupName,callback:function(t){e.$set(e.createForm,"usergroupName",t)},expression:"createForm.usergroupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组说明",prop:"remark"}},[a("el-input",{staticStyle:{width:"650px"},attrs:{type:"textarea",rows:"3",placeholder:"请输入用户组说明"},model:{value:e.createForm.remark,callback:function(t){e.$set(e.createForm,"remark",t)},expression:"createForm.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCancel("createForm")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.handleSave("createForm")}}},[e._v("保存")])],1)],1)],1)],1)},ls=[],rs={render:os,staticRenderFns:ls},ns=rs,cs=a("VU/8"),ds=cs(ss,ns,!1,null,null,null),us=ds.exports,ps={name:"userGroup",data:function(){return{userTypeOptions:void 0,searchText:"",showCreate:!1,showEdit:!1,dirChildrenUserGroupData:void 0,userData:void 0,roleData:void 0,userGroupList:void 0,userGroupListParam:void 0,total:0,dialogFormAddVisible:!1,dialogFormEditVisible:!1,showGrid:!0,showSubGrid:!1,activeName:"0",userGroupForm:{usergroupName:void 0,parentUsergroupName:void 0,remark:void 0,uuid:void 0,userType:void 0},usergroupUuid:void 0,treeData:void 0,treeHighlight:!0,subUserGroupData:void 0,filterText:"",gridListParam:void 0,gridListTableData:void 0,dialogAddStatus:void 0,dialogEditStatus:void 0,query:{currentPage:1,pageSize:10,usergroupUuid:"",userGroupName:"",cloudFlag:1,courtUuid:"",userType:""},queryEdit:{currentPage:1,pageSize:5,usergroupUuid:""}}},components:{gridList:Yt,userGroupEdit:is,userGroupCreate:us},methods:{initData:function(){this.searchText=""},getUserGroupListTable:function(){sa(this.query).then(function(e){this.userGroupList=e.usergroupBaseVoList,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},loadData:function(){this.userGroupListParam=[{title:"用户组名称",prop:"usergroupName"},{title:"用户类型",prop:"userTypeName"},{title:"用户组说明",prop:"remark"},{title:"直属用户",prop:"dirUsersName"}],this.getUserGroupListTable(),ea().then(function(e){this.userTypeOptions=e,console.log("user types: "+e)}.bind(this)).catch(function(e){console.log("错误："+e)}),this.initData()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleFilter:function(){this.query.userGroupName=this.searchText,this.getUserGroupListTable()},handleFilterReset:function(){this.searchText="",this.query.userGroupName="",this.userType="",this.query.userType="",this.getUserGroupListTable()},handleCreate:function(){this.dialogAddStatus="添加用户组",this.showCreate=!0,this.showEdit=!1,this.dialogFormAddVisible=!0},handleTabClick:function(e,t){this.showGrid="0"===e.name,console.log("*******************************************"+e,t)},handleNodeClick:function(e){console.log("node data : *******************************************"+e.label),this.showSubGrid=!0},handleTreeCreate:function(){this.handleCreate()},handleTreeSave:function(){},handleTreeDelete:function(){this.showSubGrid=!1,this.treeHighlight=!1},handleSizeChange:function(e){this.query.pageSize=e,this.query.usergroupName=this.searchText,this.getUserGroupListTable()},handleCurrentChange:function(e){this.query.currentPage=e,this.query.usergroupName=this.searchText,this.getUserGroupListTable()},userGroupDeleteEvent:function(e){console.log("userGroup：删除了第"+e.uuid+"行"),this.usergroupUuid=e.uuid,this.query.usergroupUuid=this.usergroupUuid,fa(this.usergroupUuid).then(function(e){this.$message({type:"success",message:"删除成功!"}),this.getUserGroupListTable()}.bind(this)).catch(function(e){console.log(e),this.$message.error(e.response.data.message)})},gridEditEvent:function(e){console.log("userGroup：编辑了第"+e.uuid+"行"),this.dialogFormEditVisible=!0,this.showEdit=!0,this.showCreate=!1,this.dialogEditStatus="编辑用户组",this.usergroupUuid=e.uuid,this.query.usergroupUuid=this.usergroupUuid,console.log(this.query.usergroupUuid),console.log(Bt()(this.query)),this.queryEdit.usergroupUuid=this.usergroupUuid,na(this.queryEdit).then(function(e){this.subUserGroupData=e,this.dirChildrenUserGroupData=this.subUserGroupData.dirChildrenUsergroupPageVo||[],this.userData=this.subUserGroupData.usergroupUserPageVo||[],this.roleData=this.subUserGroupData.usergroupRolePageVo||[],this.userGroupForm.usergroupName=e.usergroupBaseVo.usergroupName,this.userGroupForm.uuid=e.usergroupBaseVo.uuid,this.userGroupForm.remark=e.usergroupBaseVo.remark,this.userGroupForm.userType=e.usergroupBaseVo.userType,this.usergroupUuid=e.usergroupBaseVo.uuid}.bind(this)).catch(function(e){console.log(e)})},childEditEvent:function(e){this.getUserGroupListTable()},childDeleteEvent:function(e){this.getUserGroupListTable()},userGroupAddEvent:function(e){this.getUserGroupListTable(),this.dialogFormAddVisible=!1,this.showCreate=!1},childCloseEvent:function(){this.dialogFormEditVisible=!1},userTypeSelected:function(e){this.query.userType=e,this.getUserGroupListTable()}},created:function(){this.loadData()}},ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"app-container flex-1 flex-c",attrs:{"calendar-list-container":""}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showGrid,expression:"showGrid == true"}],staticClass:"flex-1 flex-c"},[a("div",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleCreate}},[e._v("添加")]),e._v(" "),a("span",{staticStyle:{float:"right"}},[a("el-select",{staticStyle:{width:"260px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请选择用户类型"},on:{change:e.userTypeSelected},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},e._l(e.userTypeOptions,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})})),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"360px",display:"inline-block"},attrs:{placeholder:"请输入用户组名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),e._v(" "),a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleFilterReset}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"table-container"},[a("grid-list",{staticStyle:{"margin-top":"15px"},attrs:{id:"usergroupTable",editable:!0,deletable:!0,showOperation:!0,tableData:e.userGroupList,params:e.userGroupListParam},on:{listenToDeleteEvent:e.userGroupDeleteEvent,listenToEditEvent:e.gridEditEvent}})],1),e._v(" "),a("div",[a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[5,10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-size":e.query.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogAddStatus,"close-on-click-modal":!1,"show-close":!0,"before-close":e.userGroupAddEvent,visible:e.dialogFormAddVisible},on:{"update:visible":function(t){e.dialogFormAddVisible=t}}},[a("user-group-create",{directives:[{name:"show",rawName:"v-show",value:e.showCreate,expression:"showCreate"}],attrs:{userTypeList:e.userTypeOptions},on:{listenToAddEvent:e.userGroupAddEvent}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogEditStatus,visible:e.dialogFormEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormEditVisible=t}}},[a("user-group-edit",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],attrs:{userGroupDetailData:e.subUserGroupData,dirUsergroupDetailData:e.dirChildrenUserGroupData,dirUserDetailData:e.userData,roleDetailData:e.roleData,editForm:e.userGroupForm,userTypeList:e.userTypeOptions,usergroupUuid:e.usergroupUuid},on:{listenToChildEditEvent:e.childEditEvent,listenToChildDeleteEvent:e.childDeleteEvent,listenToChildCloseEvent:e.childCloseEvent}})],1)],1)])},hs=[],fs={render:ms,staticRenderFns:hs},gs=fs,vs=a("VU/8"),bs=c,Ds=vs(ps,gs,!1,bs,"data-v-0eeb0416",null),ys=Ds.exports,Cs={props:{usergroupUuid:void 0,userGroupDetailData:void 0,dirUsergroupDetailData:void 0,dirUserDetailData:void 0,roleDetailData:void 0,editForm:{usergroupName:void 0,remark:void 0,uuid:void 0}},components:{gridList:Yt},methods:{handleSubTabClick:function(e,t){this.tabTitle=this.textMap[e.name-1],this.showSummary="0"===e.name,this.showDirUserGroup="1"===e.name,this.showUser="2"===e.name,this.showRole="3"===e.name},handleUserCurrentChange:function(e){this.query.currentPage=e,this.query.usergroupUuid=this.usergroupUuid,console.log("翻页："+Bt()(this.query)),ua(this.query).then(function(e){console.log("result:"+Bt()(e)),this.dirUserDetailData.usergroupUserVoList=e.usergroupUserVoList,this.dirUserDetailData.pageCount=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},handleUserSizeChange:function(e){this.query.pageSize=e,this.query.usergroupUuid=this.usergroupUuid,ua(this.query).then(function(e){console.log("result:"+Bt()(e)),this.dirUserDetailData.usergroupUserVoList=e.usergroupUserVoList,this.dirUserDetailData.pageCount=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},handleRoleCurrentChange:function(e){this.query.currentPage=e,this.query.usergroupUuid=this.usergroupUuid,console.log("翻页："+Bt()(this.query)),ma(this.query).then(function(e){this.roleDetailData.usergroupRoleVoList=e.usergroupRoleVoList,this.roleDetailData.pageCount=e.pageCount,console.log(e)}.bind(this)).catch(function(e){console.log(e)})},handleRoleSizeChange:function(e){this.query.pageSize=e,this.query.usergroupUuid=this.usergroupUuid,ma(this.query).then(function(e){this.roleDetailData.usergroupRoleVoList=e.usergroupRoleVoList,this.roleDetailData.pageCount=e.pageCount,console.log(e)}.bind(this)).catch(function(e){console.log(e)})}},data:function(){return{formData:void 0,userGroupNameFlag:!0,userGroupFilterList:void 0,userFilterList:void 0,roleFilterList:void 0,tmpUserGroupList:void 0,tmpUserList:void 0,tmpRoleList:void 0,selectedValue:void 0,showSummary:!0,showDirUserGroup:!1,showUser:!1,showRole:!1,editable:!0,tabTitle:"下属用户组",textMap:{0:"下属用户组",1:"直属用户",2:"关联角色"},query:{currentPage:1,pageSize:5,usergroupUuid:void 0},queryParent:{currentPage:1,pageSize:5,parentUsergroupUuid:void 0},queryUsergroup:{parentUsergroupUuid:void 0,uuid:void 0},queryUser:{usergroupUuid:void 0,uuid:void 0},queryRole:{roleUuid:void 0,usergroupUuid:void 0},listUsergroupQuery:{courtUuid:"",userType:"",cloudFlag:0},userGroupList:void 0,userList:void 0,roleList:void 0,tabPlaceholder:"添加下属用户组",selectedName:null,addUserList:void 0,subActiveName:"0",gridTableData:void 0,gridParams:void 0,dirUsergroupParam:[{title:"用户组名称",prop:"usergroupName"},{title:"直属用户",prop:"dirUsersName"}],userParam:[{title:"用户姓名",prop:"fullName"},{title:"登录 ID",prop:"userName"},{title:"职务",prop:"position"},{title:"部门",prop:"departmentName"},{title:"手机号",prop:"primaryPhone"},{title:"身份证",prop:"idenNum"}],roleParam:[{title:"角色名称",prop:"roleName"},{title:"角色说明",prop:"roleRemark"},{title:"角色已有成员",prop:"roleUsergroupsName"}]}}},_s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{prop:"…"},on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"用户组概要",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"直属用户",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"关联角色",name:"3"}})],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"20px"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSummary,expression:"showSummary"}],ref:"editForm",attrs:{"label-width":"100px",model:e.editForm}},[a("el-form-item",{attrs:{label:"用户组名称",prop:"usergroupName"}},[a("el-input",{attrs:{placeholder:"无数据",readonly:""},model:{value:e.editForm.usergroupName,callback:function(t){e.$set(e.editForm,"usergroupName",t)},expression:"editForm.usergroupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组说明",prop:"remark"}},[a("el-input",{staticStyle:{width:"650px"},attrs:{type:"textarea",rows:"3",placeholder:"无数据",readonly:""},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUser,expression:"showUser"}],staticStyle:{"margin-top":"-5px"}},[a("grid-list",{attrs:{id:"userTable",showOperation:!1,tableData:e.dirUserDetailData.usergroupUserVoList,params:e.userParam}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:e.dirUserDetailData.pageCount,"page-size":e.query.pageSize},on:{"size-change":e.handleUserSizeChange,"current-change":e.handleUserCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showRole,expression:"showRole"}],staticStyle:{"margin-top":"-5px"}},[a("grid-list",{attrs:{id:"roleTable",editable:!1,deletable:!0,showOperation:!1,tableData:e.roleDetailData.usergroupRoleVoList,params:e.roleParam},on:{listenToDeleteEvent:e.roleDeleteEvent}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:e.roleDetailData.pageCount,"page-size":e.query.pageSize},on:{"size-change":e.handleRoleSizeChange,"current-change":e.handleRoleCurrentChange}})],1)],1)},ws=[],Ss={render:_s,staticRenderFns:ws},xs=Ss,ks=a("VU/8"),Ts=d,Ls=ks(Cs,xs,!1,Ts,"data-v-24f57568",null),Ns=Ls.exports,Vs={name:"CommunityUserGroup",data:function(){return{selectedCommunity:void 0,communityList:void 0,searchText:"",showCreate:!1,showEdit:!1,dirChildrenUserGroupData:void 0,userData:void 0,roleData:void 0,userGroupList:void 0,userGroupListParam:void 0,total:0,dialogFormAddVisible:!1,dialogFormEditVisible:!1,showGrid:!0,showSubGrid:!1,activeName:"0",userGroupForm:{usergroupName:void 0,parentUsergroupName:void 0,remark:void 0,uuid:void 0},usergroupUuid:void 0,treeData:void 0,treeHighlight:!0,subUserGroupData:void 0,filterText:"",gridListParam:void 0,gridListTableData:void 0,dialogAddStatus:void 0,dialogEditStatus:void 0,query:{currentPage:1,pageSize:10,usergroupUuid:"",userGroupName:"",cloudFlag:0,courtUuid:"",userType:""}}},components:{gridList:Yt,UserGroupView:Ns},methods:{loadData:function(){this.userGroupListParam=[{title:"用户组名称",prop:"usergroupName"},{title:"用户组说明",prop:"remark"},{title:"直属用户",prop:"dirUsersName"}]},getUserGroupListFunction:function(){sa(this.query).then(function(e){this.userGroupList=e.usergroupBaseVoList,this.total=e.pageCount,console.log("用户组："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},getCommunityList:function(){ta().then(function(e){this.communityList=e}.bind(this)).catch(function(e){console.log(e)})},communitySelected:function(e){this.query.courtUuid=e,this.getUserGroupListFunction()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleFilter:function(){this.query.userGroupName=this.searchText,this.getUserGroupListFunction()},handleFilterReset:function(){this.searchText="",this.query.userGroupName="",this.query.courtUuid="",this.userGroupList=""},handleTabClick:function(e,t){this.showGrid="0"===e.name,console.log("*******************************************"+e,t)},handleSizeChange:function(e){this.query.pageSize=e,this.query.usergroupName=this.searchText,this.getUserGroupListFunction()},handleCurrentChange:function(e){this.query.currentPage=e,this.query.usergroupName=this.searchText,this.getUserGroupListFunction()},userGroupDeleteEvent:function(e){console.log("userGroup：删除了第"+e.uuid+"行"),this.usergroupUuid=e.uuid,this.query.usergroupUuid=this.usergroupUuid,fa(this.usergroupUuid).then(function(e){this.getUserGroupListFunction()}.bind(this)).catch(function(e){console.log(e)})},userGroupEditEvent:function(e){console.log("userGroup：编辑了第"+e.uuid+"行"),this.usergroupUuid=e.uuid,this.query.usergroupUuid=this.usergroupUuid,console.log(this.query.usergroupUuid),na(this.query).then(function(e){this.subUserGroupData=e,this.dirChildrenUserGroupData=this.subUserGroupData.dirChildrenUsergroupPageVo||[],this.userData=this.subUserGroupData.usergroupUserPageVo||[],this.roleData=this.subUserGroupData.usergroupRolePageVo||[],this.userGroupForm.usergroupName=e.usergroupBaseVo.usergroupName,this.userGroupForm.uuid=e.usergroupBaseVo.uuid,this.userGroupForm.remark=e.usergroupBaseVo.remark,this.usergroupUuid=e.usergroupBaseVo.uuid,console.log("角色组信息："+Bt()(this.dirChildrenUserGroupData)),console.log("角色信息："+Bt()(this.userData))}.bind(this)).catch(function(e){console.log(e)})},gridViewEvent:function(e){console.log("userGroup：编辑了第"+e.uuid+"行"),this.dialogFormEditVisible=!0,this.showEdit=!0,this.showCreate=!1,this.dialogEditStatus="查看用户组",this.usergroupUuid=e.uuid,this.query.usergroupUuid=this.usergroupUuid,console.log(this.query.usergroupUuid),console.log(Bt()(this.query)),this.query.currentPage=1,this.query.pageSize=5,na(this.query).then(function(e){this.subUserGroupData=e,this.dirChildrenUserGroupData=this.subUserGroupData.dirChildrenUsergroupPageVo||[],this.userData=this.subUserGroupData.usergroupUserPageVo||[],this.roleData=this.subUserGroupData.usergroupRolePageVo||[],this.userGroupForm.usergroupName=e.usergroupBaseVo.usergroupName,this.userGroupForm.uuid=e.usergroupBaseVo.uuid,this.userGroupForm.remark=e.usergroupBaseVo.remark,this.usergroupUuid=e.usergroupBaseVo.uuid,console.log("用户组信息："+Bt()(this.dirChildrenUserGroupData)),console.log("用户信息："+Bt()(this.userData))}.bind(this)).catch(function(e){console.log(e)})},childEditEvent:function(e){this.getUserGroupListFunction()},childDeleteEvent:function(e){this.getUserGroupListFunction()},userGroupAddEvent:function(e){console.log("用户组：添加了 "+e),this.getUserGroupListFunction(),this.dialogFormAddVisible=!1,this.showCreate=!1}},created:function(){this.loadData()}},Is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-c flex-1"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showGrid,expression:"showGrid == true"}],staticClass:"flex-1 flex-c"},[a("div",[a("span",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-select",{staticStyle:{width:"360px"},attrs:{filterable:"",placeholder:"请选择小区"},on:{"visible-change":e.getCommunityList,change:e.communitySelected},model:{value:e.query.courtUuid,callback:function(t){e.$set(e.query,"courtUuid",t)},expression:"query.courtUuid"}},e._l(e.communityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"filter-item",staticStyle:{width:"360px",display:"inline-block"},attrs:{placeholder:"请输入用户组名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),a("span",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleFilterReset}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"table-container"},[a("grid-list",{staticStyle:{"margin-top":"15px"},attrs:{id:"usergroupTable",viewable:!0,deletable:!1,showOperation:!0,tableData:e.userGroupList,params:e.userGroupListParam},on:{listenToViewEvent:e.gridViewEvent}})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[5,10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-size":e.query.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogEditStatus,visible:e.dialogFormEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormEditVisible=t}}},[a("user-group-view",{directives:[{name:"show",rawName:"v-show",value:e.showEdit,expression:"showEdit"}],attrs:{userGroupDetailData:e.subUserGroupData,dirUsergroupDetailData:e.dirChildrenUserGroupData,dirUserDetailData:e.userData,roleDetailData:e.roleData,editForm:e.userGroupForm,usergroupUuid:e.usergroupUuid},on:{listenToChildEditEvent:e.childEditEvent,listenToChildDeleteEvent:e.childDeleteEvent}})],1)],1)])},Es=[],Ps={render:Is,staticRenderFns:Es},Ms=Ps,$s=a("VU/8"),Us=u,Fs=$s(Vs,Ms,!1,Us,"data-v-4e685772",null),Rs=Fs.exports,zs={props:{params:void 0,tableData:void 0,editable:!0,deletable:!0,viewable:!1},data:function(){return{deleteImg:a("y55A"),editImg:a("sDj5")}},methods:{handleClickDelete:function(e){this.$emit("listenDeleteEvent",e),console.log("userlist 删除"+e+"行")},handleClickEdit:function(e){this.$emit("listenEditEvent",this.tableData[e]),console.log("userlist 编辑"+e+"行")},handleClickView:function(e){this.$emit("listenViewEvent",this.tableData[e]),console.log("userlist 查看"+e+"行")}},created:function(){}},As=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.tableData,height:"680"}},[e._l(e.params,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.title}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑",placement:"top-start"}},[e.editable?a("span",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","margin-right":"10px"},on:{click:function(a){e.handleClickEdit(t.$index)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"top-start"}},[e.deletable?a("span",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:function(a){e.handleClickDelete(t.$index)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"查看",placement:"top-start"}},[e.viewable?a("span",{staticClass:"el-icon-view",staticStyle:{cursor:"pointer"},on:{click:function(a){e.handleClickView(t.$index)}}}):e._e()])]}}])})],2)},Os=[],qs={render:As,staticRenderFns:Os},Bs=qs,Ws=a("VU/8"),Qs=Ws(zs,Bs,!1,null,null,null),Gs=Qs.exports,Hs={props:{contactTypeOptionsProp:void 0,userUuidValue:void 0,showButton:void 0,showOperation:void 0},watch:{contactDetailData:function(e){console.log("watch: contactDetailData!!!!!!!!!!!!!!!!"),this.contactFlag=!1}},data:function(){var e=this,t=function(t,a,i){var s=/^1[34578]\d{9}$/,o=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,l=/(\(\d{3,4}\)|\d{3,4}-|\s)?\d{8}/;console.log("<<<<<<<this.contact.contactType:"+e.contact.contactType),console.log("<<<<<<<value:"+a),""===a?i(new Error("请输入联系方式")):"1"!==e.contact.contactType||s.test(a)?"4"!==e.contact.contactType||o.test(a)?"2"!==e.contact.contactType&&"3"!==e.contact.contactType||l.test(a)?i():i(new Error("请输入正确的固定电话联系方式")):i(new Error("请输入正确的邮箱联系方式")):i(new Error("请输入正确的手机联系方式"))};return{deleteImg:a("y55A"),contact:{contactType:"",userContact:"",userUuid:"",uuid:""},listQuery:{page:1,limit:5,userUuid:""},total:0,contactDetailData:void 0,contactFlag:!1,rules:{contactType:[{required:!0,message:"请输入联系类别",trigger:"blur,change"}],userContact:[{required:!0,message:"请输入联系方式",trigger:"blur,change"},{max:200,message:"长度不能超过200个字符"},{validator:t}]}}},methods:{initContactInfo:function(){this.contact={contactType:"",userContact:"",uuid:""}},createContact:function(){this.contactFlag=!0,this.initContactInfo(),this.contact.userUuid=this.userUuidValue},cancelContact:function(){this.contactFlag=!1,this.initContactInfo()},handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.userUuid=this.userUuidValue,this.findUserContactList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.userUuid=this.userUuidValue,this.findUserContactList(this.listQuery)},findUserContactList:function(e){ni(e).then(function(e){this.contactDetailData=e.userContactVoList,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},saveContact:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("保存联系方式失败..."),!1;di(t.contact).then(function(e){console.log("<<<<<createUserContact:"+e),this.listQuery.userUuid=this.userUuidValue,this.findUserContactList(this.listQuery),this.contactFlag=!1,this.initContactInfo(),this.$message({message:"保存成功！",type:"success"})}.bind(t)).catch(function(e){console.log(e)})})},handleDelete:function(e){var t=this,a=this.contactDetailData[e];console.log("row:"+e),console.log("data:"+Bt()(a)),this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除操作"),t.delete(a.uuid,e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){console.log("删除操作:"+e),ci(e).then(function(e){this.listQuery.userUuid=this.userUuidValue,this.findUserContactList(this.listQuery),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){console.log(e)})},contactTypeFormat:function(e,t,a){for(var i="",s=0;s<this.contactTypeOptionsProp.length;s++){var o=this.contactTypeOptionsProp[s];if(o.itemCode===a){i=o.itemName;break}}return i},handleChangeContactFlag:function(){this.contactFlag=!1}}},js=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.contactFlag?[a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.cancelContact}},[e._v("取消添加")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.saveContact("contact")}}},[e._v("保存")])]:[e.showButton?a("el-button",{staticStyle:{"margin-center":"10px","margin-bottom":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.createContact}},[e._v("添加")]):e._e()],e._v(" "),e.contactFlag?a("el-form",{ref:"contact",attrs:{model:e.contact,inline:!0,rules:e.rules}},[a("el-form-item",{attrs:{label:"联系类别",prop:"contactType"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择"},model:{value:e.contact.contactType,callback:function(t){e.$set(e.contact,"contactType",t)},expression:"contact.contactType"}},e._l(e.contactTypeOptionsProp,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式",prop:"userContact"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入联系方式"},model:{value:e.contact.userContact,callback:function(t){e.$set(e.contact,"userContact",t)},expression:"contact.userContact"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"用户Uuid",prop:"userContact"}},[a("el-input",{staticClass:"user_el-input",attrs:{disabled:!0},model:{value:e.contact.userUuid,callback:function(t){e.$set(e.contact,"userUuid",t)},expression:"contact.userUuid"}})],1)],1):e._e(),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.contactDetailData,"max-height":"580","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"contactType",label:"类别",formatter:e.contactTypeFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"userContact",label:"联系方式"}}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},attrs:{content:"删除"},on:{click:function(a){e.handleDelete(t.$index)}}})]}}])}):e._e()],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],2)},Js=[],Zs={render:js,staticRenderFns:Js},Ks=Zs,Ys=a("VU/8"),Xs=Ys(Hs,Ks,!1,null,null,null),eo=Xs.exports,to={props:{userUuidValue:void 0,showSelect:void 0,cloudFlag:"",userType:"",showOperation:void 0},watch:{associtedUserGroupData:function(e){console.log("watch: associtedUserGroupData!!!!!!!!!!!!!!!!")}},data:function(){return{deleteImg:a("y55A"),associtedUserGroupData:void 0,associtedUserGroupAllData:void 0,userGroupListSelect:void 0,selectedName:"",total:0,listQuery:{page:1,limit:5,userUuid:""},userUsergroupInVo:{userUuid:"",usergroupUuid:""}}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.listQuery.userUuid=this.userUuidValue,this.findUserGroupList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.userUuid=this.userUuidValue,this.findUserGroupList(this.listQuery)},findUserGroupList:function(e){hi(e).then(function(t){this.associtedUserGroupData=t.userUsergroupVoList,this.total=t.pageCount,pi(this.cloudFlag,this.userType).then(function(t){this.userGroupListSelect=t,fi(e).then(function(e){if(this.associtedUserGroupAllData=e.userUsergroupVoList,this.associtedUserGroupAllData)for(var t=0;t<this.associtedUserGroupAllData.length;t++)this.disabledChangeOption(this.associtedUserGroupAllData[t].usergroupUuid)}.bind(this))}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},boxSelected:function(e){this.userUsergroupInVo.userUuid=this.userUuidValue,this.userUsergroupInVo.usergroupUuid=e,mi(this.userUsergroupInVo).then(function(e){this.selectedName="",this.listQuery.userUuid=this.userUuidValue,this.findUserGroupList(this.listQuery)}.bind(this)).catch(function(e){console.log(e)})},handleDelete:function(e){var t=this,a=this.associtedUserGroupData[e];console.log("row:"+e),console.log("data:"+Bt()(a)),this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("移除操作"),t.delete(a.userUsergroupUuid,e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){console.log("移除操作:"+e),gi(e).then(function(e){this.listQuery.userUuid=this.userUuidValue,this.findUserGroupList(this.listQuery),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){console.log(e)})},handleChangeSelectedName:function(){this.selectedName=""},disabledChangeOption:function(e){for(var t=0;t<this.userGroupListSelect.length;t++)if(e===this.userGroupListSelect[t].uuid){this.userGroupListSelect[t].isDisabled=!0;break}}}},ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showSelect?a("el-form",[a("el-form-item",{attrs:{label:"添加用户组"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择需要添加的用户组"},on:{change:e.boxSelected},model:{value:e.selectedName,callback:function(t){e.selectedName=t},expression:"selectedName"}},e._l(e.userGroupListSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.usergroupName,value:e.uuid,disabled:e.isDisabled,filterable:""}})}))],1)],1):e._e(),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.associtedUserGroupData,"max-height":"580","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"usergroupName",label:"用户组名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"usergroupRemark",label:"用户组说明","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"usergroupUsers",label:"组成员","show-overflow-tooltip":""}}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},attrs:{content:"删除"},on:{click:function(a){e.handleDelete(t.$index)}}})]}}])}):e._e()],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},io=[],so={render:ao,staticRenderFns:io},oo=so,lo=a("VU/8"),ro=lo(to,oo,!1,null,null,null),no=ro.exports,co={props:{userUuidValue:void 0,showSelect:void 0,cloudFlag:"",userType:"",showOperation:void 0},watch:{associtedUserRoleData:function(e){console.log("watch: associtedUserRoleData!!!!!!!!!!!!!!!!")}},data:function(){return{deleteImg:a("y55A"),associtedUserRoleData:void 0,associtedUserRoleAllData:[],userRoleListSelect:void 0,selectedName:"",total:0,listQueryUserRole:{page:1,limit:5,userUuid:""},userUserRoleInVo:{userUuid:"",roleUuid:""}}},methods:{handleSizeChange:function(e){this.listQueryUserRole.limit=e,this.listQueryUserRole.page=1,this.listQueryUserRole.userUuid=this.userUuidValue,this.findUserRoleList(this.listQueryUserRole)},handleCurrentChange:function(e){this.listQueryUserRole.page=e,this.listQueryUserRole.userUuid=this.userUuidValue,this.findUserRoleList(this.listQueryUserRole)},findUserRoleList:function(e){Di(e).then(function(t){this.associtedUserRoleData=t.userRoleVoList,this.total=t.pageCount,vi(this.cloudFlag,this.userType).then(function(t){this.userRoleListSelect=t,yi(e).then(function(e){if(this.associtedUserRoleAllData=e.userRoleVoList,this.associtedUserRoleAllData)for(var t=0;t<this.associtedUserRoleAllData.length;t++)this.disabledChangeOption(this.associtedUserRoleAllData[t].roleUuid)}.bind(this))}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},boxSelected:function(e){this.userUserRoleInVo.userUuid=this.userUuidValue,this.userUserRoleInVo.roleUuid=e,bi(this.userUserRoleInVo).then(function(e){this.selectedName="",this.listQueryUserRole.userUuid=this.userUuidValue,this.findUserRoleList(this.listQueryUserRole)}.bind(this)).catch(function(e){console.log(e)})},handleDelete:function(e){var t=this,a=this.associtedUserRoleData[e];console.log("row:"+e),console.log("data:"+Bt()(a)),this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("移除操作"),t.delete(a.userRoleUuid,e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){console.log("移除操作:"+e),Ci(e).then(function(e){this.listQueryUserRole.userUuid=this.userUuidValue,this.findUserRoleList(this.listQueryUserRole),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){console.log(e)})},handleChangeSelectedName:function(){this.selectedName=""},disabledChangeOption:function(e){for(var t=0;t<this.userRoleListSelect.length;t++)if(e===this.userRoleListSelect[t].uuid){console.log("禁用:"+e),this.userRoleListSelect[t].isDisabled=!0;break}}}},uo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showSelect?a("el-form",[a("el-form-item",{attrs:{label:"添加关联角色"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择需要添加的角色"},on:{change:e.boxSelected},model:{value:e.selectedName,callback:function(t){e.selectedName=t},expression:"selectedName"}},e._l(e.userRoleListSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.roleName,value:e.uuid,disabled:e.isDisabled,filterable:""}})}))],1)],1):e._e(),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.associtedUserRoleData,"max-height":"580","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleRemark",label:"角色说明","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleUsers",label:"角色已有成员","show-overflow-tooltip":""}}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},attrs:{content:"删除"},on:{click:function(a){e.handleDelete(t.$index)}}})]}}])}):e._e()],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQueryUserRole.page,"page-sizes":[5,10,15],"page-size":e.listQueryUserRole.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQueryUserRole,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},po=[],mo={render:uo,staticRenderFns:po},ho=mo,fo=a("VU/8"),go=fo(co,ho,!1,null,null,null),vo=go.exports,bo={props:{isAddFlag:!1,userAccStatusSelect:void 0,contactTypeSelect:void 0,departmentSelect:void 0,userTypeSelect:void 0,tableData:void 0,tableDataUserUserGroup:void 0,curUserUuidParm:void 0,user:{fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"",uuid:"",userType:""}},components:{contactList:eo,assUserGroup:no,assUserRole:vo},watch:{user:function(e,t){console.log("watch: userDetailData!!!!!!!!!!!!!!!!"),console.log("userUuid<<<<<<<:"+this.user.uuid),this.subActiveName="0",this.gridUser=!0,this.gridContact=!1,this.gridUserGroup=!1,this.gridUserRole=!1}},data:function(){var e=this,t=function(e,t,a){var i=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,s=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;""!==t&&null!==t&&void 0!==t?15===t.length?i.test(t)?a():a(new Error("请输入有效的身份证号码")):s.test(t)?a():a(new Error("请输入有效的身份证号码")):a()};return{subActiveName:"0",formLabelWidth:"120px",gridUser:!0,gridContact:!1,gridUserGroup:!1,gridUserRole:!1,userNameFlag:!0,subUserUuid:"",subContactFlag:!1,pickerOptionsStart:{disabledDate:function(e){return e.getTime()<new Date-864e5}},pickerOptionsEnd:{disabledDate:function(t){return t.getTime()<new Date(e.user.effectiveDate).getTime()}},rules:{fullName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],idenNum:[{validator:t,trigger:"blur,change"}],primaryEmail:[{type:"email",message:"请输入有效的邮箱地址",trigger:"blur,change"},{max:128,message:"长度不能超过128个字符"}],primaryPhone:[{pattern:/^1[34578]\d{9}$/,message:"请输入有效的手机号"}],effectiveDate:[{required:!0,message:"请选择生效日期",trigger:"change"}],position:[{max:16,message:"长度不能超过16个字符",trigger:"blur"}]},listQueryUserEditVue:{page:1,limit:5,userUuid:""}}},methods:{handleSubTabClick:function(e,t){"0"===e.name?(this.gridUser=!0,this.gridContact=!1,this.gridUserGroup=!1,this.gridUserRole=!1):"1"===e.name?(this.gridContact=!0,this.gridUser=!1,this.gridUserGroup=!1,this.gridUserRole=!1,this.listQueryUserEditVue.userUuid=this.curUserUuidParm,this.$refs.userContactVue.findUserContactList(this.listQueryUserEditVue)):"2"===e.name?(this.gridContact=!1,this.gridUser=!1,this.gridUserRole=!1,this.gridUserGroup=!0,this.listQueryUserEditVue.userUuid=this.curUserUuidParm,this.$refs.associtedUserGroupVue.findUserGroupList(this.listQueryUserEditVue)):"3"===e.name&&(this.gridContact=!1,this.gridUser=!1,this.gridUserRole=!0,this.gridUserGroup=!1,this.listQueryUserEditVue.userUuid=this.curUserUuidParm,this.$refs.associtedUserRoleVue.findUserRoleList(this.listQueryUserEditVue))},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridCreateEvent",t.user)})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridSaveEvent",t.user)})},resetPass:function(){var e=this;this.$prompt("请输入密码",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;console.log("重置密码操作："+a);var i=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/;""===a||null===a?e.$message({message:"重置密码失败! 请输入需要重置的密码值!",type:"error",showClose:!0}):i.test(a)?(ai(e.user.uuid,encodeURIComponent(a)),e.user.password=a,e.user.userAccStatus="5",e.$message({type:"success",message:"重置密码成功"})):e.$message({message:"重置密码失败! 密码长度至少8位，必须包括数字、字母(区分大小写)以及 <! # & $ %> 等特殊符号!",type:"error",showClose:!0,duration:5e3})}).catch(function(){e.$message({type:"info",message:"已取消密码重置"})})},changeContanctFlag:function(){this.$refs.userContactVue.handleChangeContactFlag(),this.$refs.associtedUserGroupVue.handleChangeSelectedName(),this.$refs.associtedUserRoleVue.handleChangeSelectedName()},changeDate:function(){this.user.expiryDate="",console.log("生效日期："+this.user.effectiveDate),console.log("失效日期："+this.user.expiryDate)},cancelEvent:function(e){console.log("cancelEvent"),this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("canelDialogEvent")},reset:function(e){console.log("userEdit-reset start"),this.$refs.effectiveDate.focus(),this.$refs.expiryDate.focus(),console.log("userEdit-reset end")}}},Do=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[e.isAddFlag?a("el-tab-pane",{attrs:{label:"用户概要",name:"0"}}):e._e(),e._v(" "),e.isAddFlag?a("el-tab-pane",{attrs:{label:"联系方式",name:"1"}}):e._e(),e._v(" "),e.isAddFlag?a("el-tab-pane",{attrs:{label:"用户组",name:"2"}}):e._e(),e._v(" "),e.isAddFlag?a("el-tab-pane",{attrs:{label:"关联角色",name:"3"}}):e._e()],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.gridUser,expression:"gridUser"}],ref:"user",attrs:{inline:!0,rules:e.rules,model:e.user}},[a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"用户类型","label-width":e.formLabelWidth,prop:"userType"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择",disabled:""},model:{value:e.user.userType,callback:function(t){e.$set(e.user,"userType",t)},expression:"user.userType"}},e._l(e.userTypeSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode,disabled:!0}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"登录 ID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入登录 ID",disabled:!0},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"fullName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.user.fullName,callback:function(t){e.$set(e.user,"fullName",t)},expression:"user.fullName"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{type:"password","auto-complete":"off",disabled:!0},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("el-button",{on:{click:e.resetPass}},[e._v("重置密码")])],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth,prop:"primaryPhone"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.user.primaryPhone,callback:function(t){e.$set(e.user,"primaryPhone",t)},expression:"user.primaryPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码","label-width":e.formLabelWidth,prop:"idenNum"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入有效身份证号码"},model:{value:e.user.idenNum,callback:function(t){e.$set(e.user,"idenNum",t)},expression:"user.idenNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮件","label-width":e.formLabelWidth,prop:"primaryEmail"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入有效电子邮件"},model:{value:e.user.primaryEmail,callback:function(t){e.$set(e.user,"primaryEmail",t)},expression:"user.primaryEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门","label-width":e.formLabelWidth,prop:"departmentUuid"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择"},model:{value:e.user.departmentUuid,callback:function(t){e.$set(e.user,"departmentUuid",t)},expression:"user.departmentUuid"}},e._l(e.departmentSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"职务","label-width":e.formLabelWidth,prop:"position"}},[a("el-input",{staticClass:"user_el-select",attrs:{"auto-complete":"off",placeholder:"请输入职务名称"},model:{value:e.user.position,callback:function(t){e.$set(e.user,"position",t)},expression:"user.position"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择",disabled:""},model:{value:e.user.userAccStatus,callback:function(t){e.$set(e.user,"userAccStatus",t)},expression:"user.userAccStatus"}},e._l(e.userAccStatusSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"生效日期","label-width":e.formLabelWidth,prop:"effectiveDate"}},[a("el-date-picker",{ref:"effectiveDate",staticStyle:{width:"280px"},attrs:{placeholder:"选择日期",type:"date",editable:!1,"picker-options":e.pickerOptionsStart},on:{change:e.changeDate},model:{value:e.user.effectiveDate,callback:function(t){e.$set(e.user,"effectiveDate",t)},expression:"user.effectiveDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"失效日期","label-width":"120px",prop:"expiryDate"}},[a("el-date-picker",{ref:"expiryDate",staticStyle:{width:"280px"},attrs:{placeholder:"选择日期",type:"date",editable:!1,"picker-options":e.pickerOptionsEnd},model:{value:e.user.expiryDate,callback:function(t){e.$set(e.user,"expiryDate",t)},expression:"user.expiryDate"}})],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",[a("el-col",[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.cancelEvent("user")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.update("user")}}},[e._v("保 存")])],1)])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridContact,expression:"gridContact"}]},[a("div",{staticClass:"flex-1"},[a("contact-list",{ref:"userContactVue",attrs:{contactTypeOptionsProp:e.contactTypeSelect,userUuidValue:e.curUserUuidParm,showButton:!0,showOperation:!0}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridUserGroup,expression:"gridUserGroup"}]},[a("ass-user-group",{ref:"associtedUserGroupVue",attrs:{userUuidValue:e.curUserUuidParm,showSelect:!0,cloudFlag:1,showOperation:!0,userType:this.user.userType}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridUserRole,expression:"gridUserRole"}]},[a("ass-user-role",{ref:"associtedUserRoleVue",attrs:{userUuidValue:e.curUserUuidParm,showSelect:!0,cloudFlag:1,showOperation:!0,userType:this.user.userType}})],1)],1)},yo=[],Co={render:Do,staticRenderFns:yo},_o=Co,wo=a("VU/8"),So=wo(bo,_o,!1,null,null,null),xo=So.exports,ko={props:{userAccStatusSelect:void 0,userTypeSelect:void 0},mounted:function(){this.initUserInfo()},data:function(){var e=this,t=this,a=function(t,a,i){""===a||void 0===a?i(new Error("请输入密码")):a!==e.user.password?i(new Error("两次输入密码不一致")):i()},i=function(t,a,i){if(""===a||void 0===a)i(new Error("登录 ID不能为空"));else{var s=e.user.userType;oi("",a,s).then(function(e){console.log("<<<<<userNameFlag:"+e),e?i():i(new Error("登录 ID已存在"))})}},s=function(e,t,a){var i=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,s=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;""!==t&&null!==t&&void 0!==t?15===t.length?i.test(t)?a():a(new Error("请输入有效的身份证号码")):s.test(t)?a():a(new Error("请输入有效的身份证号码")):a()};return{subActiveName:"0",formLabelWidth:"120px",departmentSelect:void 0,user:{fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"2",uuid:"",userType:""},pickerOptionsStart:{disabledDate:function(e){return e.getTime()<new Date-864e5}},pickerOptionsEnd:{disabledDate:function(e){return e.getTime()<new Date(t.user.effectiveDate).getTime()}},rules:{fullName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],userName:[{required:!0,validator:i,trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符"},{pattern:/^[A-Za-z0-9]+$/,message:"登录 ID只能为字母和数字"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:20,message:"长度在 8 到 20 个字符"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/,message:"必须包括数字、字母以及 <! # & $ %> 等特殊符号"}],checkPass:[{required:!0,validator:a,trigger:"blur"}],idenNum:[{validator:s,trigger:"blur,change"}],primaryEmail:[{type:"email",message:"请输入有效的邮箱地址",trigger:"blur,change"},{max:128,message:"长度不能超过128个字符"}],primaryPhone:[{pattern:/^1[34578]\d{9}$/,message:"请输入有效的手机号"}],effectiveDate:[{required:!0,message:"请选择生效日期",trigger:"change"}],position:[{max:16,message:"长度不能超过16个字符",trigger:"blur"}]},listQueryUserEditVue:{page:1,limit:5,userUuid:""},dictData:{cloudFlag:1,departmentType:""}}},methods:{create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridCreateEvent",t.user)})},changeDate:function(){this.user.expiryDate=""},cancelEvent:function(e){console.log("cancelEvent"),this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("canelDialogEvent")},initUserInfo:function(){this.user={fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"2",uuid:""}},reset:function(){console.log("reset"),this.user.expiryDate="",this.user.effectiveDate="",console.log("reset")},changeUserType:function(e){this.departmentSelect=[],this.user.departmentUuid="",this.dictData.departmentType=e,this.getDepartmentSelect(this.dictData)},getDepartmentSelect:function(e){li(e).then(function(e){console.log("<<<<<departmentSelect:"+Bt()(e)),this.departmentSelect=e}.bind(this)).catch(function(e){console.log(e)})}}},To=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"user",attrs:{inline:!0,rules:e.rules,model:e.user}},[a("el-form-item",{staticClass:"is-required",staticStyle:{display:"block"},attrs:{label:"用户类型","label-width":e.formLabelWidth,prop:"userType"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择"},on:{change:e.changeUserType},model:{value:e.user.userType,callback:function(t){e.$set(e.user,"userType",t)},expression:"user.userType"}},e._l(e.userTypeSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"登录 ID","label-width":e.formLabelWidth,prop:"userName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入登录 ID"},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"fullName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入姓名"},model:{value:e.user.fullName,callback:function(t){e.$set(e.user,"fullName",t)},expression:"user.fullName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{staticClass:"user_el-input",attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"checkPass"}},[a("el-input",{staticClass:"user_el-input",attrs:{type:"password","auto-complete":"off",placeholder:"再次输入密码"},model:{value:e.user.checkPass,callback:function(t){e.$set(e.user,"checkPass",t)},expression:"user.checkPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth,prop:"primaryPhone"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.user.primaryPhone,callback:function(t){e.$set(e.user,"primaryPhone",t)},expression:"user.primaryPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码","label-width":e.formLabelWidth,prop:"idenNum"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入有效身份证号码"},model:{value:e.user.idenNum,callback:function(t){e.$set(e.user,"idenNum",t)},expression:"user.idenNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮件","label-width":e.formLabelWidth,prop:"primaryEmail"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入有效电子邮件"},model:{value:e.user.primaryEmail,callback:function(t){e.$set(e.user,"primaryEmail",t)},expression:"user.primaryEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门","label-width":e.formLabelWidth,prop:"departmentUuid"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择"},model:{value:e.user.departmentUuid,callback:function(t){e.$set(e.user,"departmentUuid",t)},expression:"user.departmentUuid"}},e._l(e.departmentSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"职务","label-width":e.formLabelWidth,prop:"position"}},[a("el-input",{staticClass:"user_el-select",attrs:{"auto-complete":"off",placeholder:"请输入职务名称"},model:{value:e.user.position,callback:function(t){e.$set(e.user,"position",t)},expression:"user.position"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择",disabled:""},model:{value:e.user.userAccStatus,callback:function(t){e.$set(e.user,"userAccStatus",t)},expression:"user.userAccStatus"}},e._l(e.userAccStatusSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"生效日期","label-width":e.formLabelWidth,prop:"effectiveDate"}},[a("el-date-picker",{staticStyle:{width:"280px"},attrs:{type:"date",placeholder:"选择日期",editable:!1,"picker-options":e.pickerOptionsStart},on:{change:e.changeDate},model:{value:e.user.effectiveDate,callback:function(t){e.$set(e.user,"effectiveDate",t)},expression:"user.effectiveDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"失效日期","label-width":"120px"}},[a("el-date-picker",{staticStyle:{width:"280px"},attrs:{type:"date",placeholder:"选择日期",editable:!1,"picker-options":e.pickerOptionsEnd},model:{value:e.user.expiryDate,callback:function(t){e.$set(e.user,"expiryDate",t)},expression:"user.expiryDate"}})],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",[a("el-col",[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.cancelEvent("user")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.create("user")}}},[e._v("保 存")])],1)])],1)],1)],1)],1)},Lo=[],No={render:To,staticRenderFns:Lo},Vo=No,Io=a("VU/8"),Eo=Io(ko,Vo,!1,null,null,null),Po=Eo.exports,Mo={data:function(){return{fileList:[],userList:void 0,userListParam:void 0,total:0,dialogFormVisible:!1,dialogCreateFormVisible:!1,dialogStatus:void 0,curUserUuid:void 0,addFlag:!1,userForm:{fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"",uuid:"",userType:""},listQuery:{page:1,limit:10,q_userName:"",q_fullName:"",q_primaryPhone:"",cloudFlag:1,courtUuid:"",userType:""},formLabelWidth:"120px",dictData:{userStatusDict:"CLOUD_USER_ACC_STATUS",contactTypeDict:"CLOUD_CONTACT_TYPE",cloudFlag:1,departmentType:""},userAccStatusOptions:void 0,contactTypeOptions:void 0,departmentOptions:void 0,userTypeOptions:void 0,uploadFiles:void 0,showFirstTab:!0,showSecondTab:!1,activeName:0,errorMsg:"",errorList:""}},components:{userList:Gs,userEdit:xo,userCreate:Po},mounted:function(){this.loadData(),this.loadSelectData(),this.userListParam=[{title:"用户姓名",prop:"fullName"},{title:"登录 ID",prop:"userName"},{title:"用户类型",prop:"userTypeName"},{title:"职务",prop:"position"},{title:"部门",prop:"departmentName"},{title:"手机号",prop:"primaryPhone"},{title:"身份证号码",prop:"idenNum"}]},methods:{loadData:function(){si(this.listQuery).then(function(e){this.userList=e.baseUserVoList,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},initData:function(){this.listQuery.q_fullName="",this.listQuery.q_userName="",this.listQuery.q_primaryPhone=""},loadSelectData:function(){ea().then(function(e){console.log("<<<<<userTypeOptions:"+Bt()(e)),this.userTypeOptions=e}.bind(this)).catch(function(e){console.log(e)}),ri(this.dictData).then(function(e){console.log("<<<<<userStatusOptions:"+Bt()(e)),this.userAccStatusOptions=e}.bind(this)).catch(function(e){console.log(e)}),ui(this.dictData).then(function(e){console.log("<<<<<getContactTypeOptions:"+Bt()(e)),this.contactTypeOptions=e}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))},initUserInfo:function(){this.userForm={fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"",uuid:""}},handleTabClick:function(e,t){this.showFirstTab="0"===e.name,this.showSecondTab="1"===e.name},resetForm:function(){this.listQuery={page:1,limit:10,q_userName:"",q_fullName:"",q_primaryPhone:"",cloudFlag:1,userType:""},this.loadData()},handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.loadData()},handleCurrentChange:function(e){this.listQuery.page=e,this.loadData()},handleFilter:function(){this.listQuery.page=1,this.loadData()},handleCreate:function(){this.initUserInfo(),this.dialogStatus="添加用户",this.dialogFormVisible=!1,this.dialogCreateFormVisible=!0,this.$refs.userCreateVue&&(this.$refs.userCreateVue.reset(),this.$refs.userCreateVue.initUserInfo()),this.addFlag=!1},userDeleteEvent:function(e){var t=this,a=this.userList[e];this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除操作"),t.delete(a.uuid,e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){console.log("删除操作:"+e),ei(e).then(function(t){console.log("删除成功:"+e),this.loadData(),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){console.log(e)})},userCreateEvent:function(e){console.log("新增用户"),Xa(e).then(function(e){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.loadData(),this.$message({message:"保存成功！",type:"success"})}.bind(this)).catch(function(e){console.log(".....新增失败"),console.log(e)})},userSaveEvent:function(e){console.log("user：保存了第"+e.userName+"行"),ti(e).then(function(e){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.loadData(),this.$message({message:"保存成功！",type:"success"})}.bind(this)).catch(function(e){console.log(e)})},userEditEvent:function(e){console.log("user：编辑了第"+e.userName+"行"),this.curUserUuid=e.uuid,ii(e.uuid).then(function(e){this.userForm=e.baseUser,console.log("用户基本信息:"+Bt()(e.baseUser)),this.dialogStatus="编辑用户",this.dialogFormVisible=!0,this.dialogCreateFormVisible=!1,this.$refs.userEditVue&&this.$refs.userEditVue.reset(),this.userForm.userType&&(this.dictData.departmentType=this.userForm.userType,li(this.dictData).then(function(e){console.log("<<<<<departmentOptions:"+Bt()(e)),this.departmentOptions=e}.bind(this)).catch(function(e){console.log(e)})),this.addFlag=!0}.bind(this)).catch(function(e){console.log(".....失败"),console.log(e)})},handleClose:function(){this.addFlag&&this.$refs.userEditVue.changeContanctFlag(),this.initUserInfo(),this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},submitUpload:function(){this.errorList="",this.errorMsg="",this.$refs.upload._data.uploadFiles.length>0?aa(this.uploadFiles).then(function(e){if("0"===e.code){if(this.errorMsg=e.msg,this.errorList="<span><strong>"+e.msg+"</strong></span>",null!=e.errorList){this.errorList+="<br><ul>";for(var t=0;t<e.errorList.length;t++)this.errorMsg+=e.errorList[t].errorMsg+"、",this.errorList+="<li>"+e.errorList[t].errorMsg+"</li>";var a=this.errorMsg.length;this.errorMsg=this.errorMsg.substr(0,a-1),this.errorList+="</ul></span>"}this.$message({message:e.msg,showClose:!0,type:"error",duration:2e3})}else"1"===e.code?this.$message({message:"用户导入成功！",type:"success"}):this.$message({message:"用户导入失败！",type:"error"});this.fileList=[]}.bind(this)).catch(function(e){this.fileList=[],this.$message({message:"用户导入失败！",center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)}):this.$message({message:"请先选择需要上传的文件",type:"error",duration:2e3,center:!0,showClose:!0})},handleOnchange:function(e,t){this.errorList="",this.errorMsg="",this.beforeUpload(e)&&(this.uploadFiles=new FormData,this.uploadFiles.append("file",t[0].raw))},beforeUpload:function(e){var t=e.name.split(".");console.log("Xls[1] --- > "+t);var a="xls"===t[t.length-1]||"xlsx"===t[t.length-1]||"xlsm"===t[t.length-1];console.log("Xls[Xls.length - 1] --- > "+t[1]);var i=e.size/1024/1024<100;return a?i?e:(this.$message.error("上传文件大小不能超过 1MB!"),this.fileList=[],!1):(this.$message.error("上传文件只能是 xls/xlsx/xlsm 格式！"),this.fileList=[],!1)},handleCommand:function(e){ia(e).then(function(e){}).catch(function(e){console.log(".....失败"),console.log(e)})},userTypeSelected:function(e){this.listQuery.userType=e,this.loadData()}}},$o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-tabs",{attrs:{prop:"…"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"导入用户",name:"1"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showFirstTab,expression:"showFirstTab"}],staticClass:"flex-1 flex-c"},[a("el-form",{ref:"listQuery",attrs:{inline:!0,model:e.listQuery}},[a("div",{staticClass:"search-container"},[a("el-form-item",[a("el-select",{staticStyle:{width:"260px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请选择用户类型"},on:{change:e.userTypeSelected},model:{value:e.listQuery.userType,callback:function(t){e.$set(e.listQuery,"userType",t)},expression:"listQuery.userType"}},e._l(e.userTypeOptions,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入用户姓名"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_fullName,callback:function(t){e.$set(e.listQuery,"q_fullName",t)},expression:"listQuery.q_fullName"}})],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入登录ID"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_userName,callback:function(t){e.$set(e.listQuery,"q_userName",t)},expression:"listQuery.q_userName"}})],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入手机号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_primaryPhone,callback:function(t){e.$set(e.listQuery,"q_primaryPhone",t)},expression:"listQuery.q_primaryPhone"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.resetForm}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleCreate}},[e._v("添加")])],1)]),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"table-container"},[a("user-list",{staticStyle:{"margin-top":"15px"},attrs:{tableData:e.userList,params:e.userListParam,deletable:!0,editable:!0},on:{listenDeleteEvent:e.userDeleteEvent,listenEditEvent:e.userEditEvent}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogCreateFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreateFormVisible=t}}},[a("user-create",{ref:"userCreateVue",attrs:{userAccStatusSelect:e.userAccStatusOptions,contactTypeSelect:e.contactTypeOptions,userTypeSelect:e.userTypeOptions},on:{gridCreateEvent:e.userCreateEvent,canelDialogEvent:e.handleClose}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("user-edit",{ref:"userEditVue",attrs:{user:e.userForm,isAddFlag:e.addFlag,userAccStatusSelect:e.userAccStatusOptions,contactTypeSelect:e.contactTypeOptions,departmentSelect:e.departmentOptions,userTypeSelect:e.userTypeOptions,curUserUuidParm:e.curUserUuid},on:{gridSaveEvent:e.userSaveEvent,canelDialogEvent:e.handleClose}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showSecondTab,expression:"showSecondTab"}]},[a("div",{staticStyle:{"text-align":"center","margin-top":"40px"},attrs:{id:"fileUpload"}},[a("div",{staticStyle:{width:"360px",margin:"0 auto"}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"",drag:"",limit:1,"show-file-list":!0,"on-exceed":e.handleExceed,"on-change":e.handleOnchange,"auto-upload":!1,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 excel 文件，且不超过 1M")])]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{margin:"0 auto","margin-top":"20px",display:"block"},attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:e.submitUpload}},[e._v("上传服务器")]),e._v(" "),a("el-dropdown",{on:{command:e.handleCommand}},[a("el-button",{staticClass:"action-btn",staticStyle:{margin:"0 auto","margin-top":"10px"},attrs:{icon:"el-icon-download",type:"primary"}},[e._v("\n        下载模板"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[e._v(".xls")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"2"}},[e._v(".xlsm")])],1)],1),e._v(" "),a("div",{attrs:{id:"errorList"},domProps:{innerHTML:e._s(e.errorList)}})],1)])])],1)},Uo=[],Fo={render:$o,staticRenderFns:Uo},Ro=Fo,zo=a("VU/8"),Ao=p,Oo=zo(Mo,Ro,!1,Ao,"data-v-a199aa82",null),qo=Oo.exports,Bo={props:{form:{roleName:void 0,remark:void 0,uuid:void 0}},data:function(){return{appResourceList:void 0,appResource:"",treeData:[],items:[],parentItem:[],saveItem:{appCode:"",authorityExtList:[],resourceType:"",resourceUuid:"",roleUuid:""},expandedKeys:[],checkedKeys:[],defaultProps:{children:"children",label:"resourceName"},treeParam:{appCode:"",hasButton:!0,hasAuthority:!0,uuid:"",cloudFlag:1},isShowTree:!0,isShowAppType:!0,val:"1"}},components:{},mounted:function(){this.loadData()},methods:{loadData:function(){console.log("<<<<<loadData app start:");var e={cloudFlag:1,type:this.val};Oi(e).then(function(e){console.log("<<<<<getAppResourceList:"+e),this.appResourceList=e}.bind(this)).catch(function(e){console.log(e)})},created:function(){this.loadData()},handleChange:function(){console.log("handleChange"),console.log(this.form.uuid),this.treeParam.appCode=this.appResource,this.treeParam.uuid=this.form.uuid,console.log(this.treeParam),Ai(this.treeParam).then(function(e){this.treeData=e,this.checkedKeys=[],this.deepJsonData(e),console.log("树形数据："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},handleCheckChange:function(e,t,a){console.log("handleCheckChange "+t),this.deepChangeCheckedJsonData(e.children,t)},handleNodeClick:function(){console.log("node click")},isContainsData:function(e,t){for(var a=e.length;a--;)if(e[a]===t)return!0;return!1},deepChangeCheckedJsonData:function(e,t){if(e instanceof Array)for(var a=0;a<e.length;a++){var i=e[a];this.deepChangeCheckedJsonData(i,t)}else if(e instanceof Object)for(var s in e)"uuid"===s&&(console.log("deepChangeCheckedJsonData...checkedchange uuid: "+e.uuid.toString()),console.log(e.uuid.toString()),this.$refs.tree.setChecked(e.uuid.toString(),t,!0)),"children"===s&&this.deepChangeCheckedJsonData(e.children,t);else console.log("other")},deepParentJsonData:function(e,t){if(console.log("deepParentJsonData start: "),e instanceof Array)for(var a=0;a<e.length;a++){var i=e[a];console.log("deepParentJsonData start: Array "),this.deepParentJsonData(i,t)}else if(e instanceof Object){console.log("deepParentJsonData start: Object");for(var s in e)if("uuid"===s)if(t===e.uuid.toString()){if(console.log("deepParentJsonData...push: "+e.uuid.toString()),!this.isContainsData(this.parentItem,e.uuid.toString())){if(null===e.parentResourceUuid)return;this.parentItem.push(e.uuid.toString()),this.deepParentJsonData(this.treeData,e.parentResourceUuid.toString())}}else this.deepParentJsonData(e.children,t)}else console.log("other")},deepJsonData:function(e){if(e instanceof Array){console.log("deepJsonData...Array...");for(var t=0;t<e.length;t++){var a=e[t];this.deepJsonData(a)}}else if(e instanceof Object)for(var i in e)console.log("key...Loop "+i),"true"!==e.hasAutho.toString()||this.isContainsData(this.checkedKeys,e.hasAutho.toString())||this.checkedKeys.push(e.uuid.toString()),this.deepJsonData(e[i]);else console.log("other");console.log("checked"+this.checkedKeys)},cancelEvent:function(){console.log("cancelEvent"),this.$emit("canelDialogEvent")},refresh:function(){console.log("refresh uuid:"+this.form.uuid),this.reset()},reset:function(){console.log("addApp reset"),this.treeData=[],this.appResource=""},saveData:function(){if(null==this.appResource||""===this.appResource||"false"===this.appResource)return void this.$msgbox({title:"消息",message:"请选择至少一个所属应用"});console.log("getCheckedNodes:"),console.log(this.$refs.tree.getCheckedNodes()),console.log("getCheckedKeys:"),console.log(this.$refs.tree.getCheckedKeys()),console.log(this.appResource),this.items=[],this.parentItem=[],this.$refs.tree.getCheckedNodes().length>0&&(console.log("Top uuid : "+this.treeData[0].uuid),this.isContainsData(this.parentItem,this.treeData[0].uuid)||this.parentItem.push(this.treeData[0].uuid));for(var e=0;e<this.$refs.tree.getCheckedNodes().length;e++){var t=this.$refs.tree.getCheckedNodes()[e];this.deepParentJsonData(this.treeData,t.parentResourceUuid),console.log("parentResourceUuid : "+t.parentResourceUuid),console.log("node:"),console.log(t),console.log("appResource:appResource"),console.log(this.appResource),this.items.push({actionType:"1",actionTypeName:"",appCode:this.appResource,authority:!0,resourceName:"",resourceType:"1",resourceTypeName:"",resourceUrl:"",resourceUuid:t.uuid,roleName:"",roleUuid:this.form.uuid,uuid:""})}console.log("parentItem........"),console.log(Bt()(this.parentItem));for(var a=0;a<this.parentItem.length;a++){var i=this.parentItem[a];console.log("appResource:appResource"),console.log(this.appResource),this.items.push({actionType:"1",actionTypeName:"",appCode:this.appResource,authority:!0,resourceName:"",resourceType:"2",resourceTypeName:"",resourceUrl:"",resourceUuid:i,roleName:"",roleUuid:this.form.uuid,uuid:""})}console.log("this.items........"),console.log(Bt()(this.items)),this.saveItem.authorityExtList=this.items,this.saveItem.appCode=this.appResource,this.saveItem.resourceType="2",this.saveItem.resourceUuid="",this.saveItem.roleUuid=this.form.uuid,this.$emit("createAppAuthorityEvent",this.saveItem)}}},Wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",[a("el-row",[e.isShowAppType?a("el-col",[a("div",[a("el-form-item",{attrs:{label:"所属应用"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择所属应用"},on:{change:e.handleChange},model:{value:e.appResource,callback:function(t){e.appResource=t},expression:"appResource"}},e._l(e.appResourceList,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1)],1)]):e._e()],1),e._v(" "),a("el-row",[e.isShowTree?a("el-col",[a("span",[e._v("菜单树")]),e._v(" "),a("div",[a("el-tree",{ref:"tree",staticClass:"el-menu-tree",attrs:{data:e.treeData,"node-key":"uuid","check-strictly":!0,props:e.defaultProps,"default-expanded-keys":e.expandedKeys,"default-checked-keys":e.checkedKeys,"show-checkbox":"","default-expand-all":""},on:{"node-click":e.handleNodeClick,"check-change":e.handleCheckChange}})],1)]):e._e()],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"15px"},attrs:{align:"center"}},[a("el-col",{attrs:{align:"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.cancelEvent}},[e._v("\n            取消\n          ")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.saveData}},[e._v("\n            保存\n          ")])],1)],1)],1)],1)},Qo=[],Go={render:Wo,staticRenderFns:Qo},Ho=Go,jo=a("VU/8"),Jo=m,Zo=jo(Bo,Ho,!1,Jo,"data-v-5abb48c1",null),Ko=Zo.exports,Yo=(a("H1Un"),{props:{form:{roleName:void 0,remark:void 0,uuid:void 0}},data:function(){return{appResourceList:void 0,appResource:"",treeData:[],searchServiceTxt:"",items:[],defaultProps:{children:"children",label:"resourceName"},currentPage:1,total:0,pageSize:10,listPageParm:{cloudFlag:"1",resourceType:"3",appCode:"",delAuthority:!0,roleUuid:this.form.uuid,resourceName:"",currentPage:"1",pageSize:"10"},emptyData:{appCode:"",resourceName:""},appVal:"1",serviceVal:"3",showGrid:!0,tabPlaceholder:void 0,selectedName:null,tableData:void 0,serviceCount:0,roleServiceList:void 0,multipleSelection:void 0,params:[{title:"应用名称",prop:"appName"},{title:"服务名称",prop:"resourceName"},{title:"服务URI",prop:"resourceUrl"}]}},methods:{getAppList:function(){var e={type:this.appVal,cloudFlag:1};Oi(e).then(function(e){console.log("<<<<<getAppList:"+e),e.unshift(this.emptyData),this.appResourceList=e}.bind(this)).catch(function(e){console.log(e)})},mounted:function(){this.loadData()},getServiceList:function(){this.listPageParm.appCode=this.appResource,this.listPageParm.resourceName=this.searchServiceTxt,this.listPageParm.roleUuid=this.form.uuid,console.log("listPageParm:"+this.searchServiceTxt),console.log(this.listPageParm),Wi(this.listPageParm).then(function(e){console.log("<<<<<getServiceList:"+e),this.tableData=e.resource,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},cancelEvent:function(){console.log("cancelEvent"),this.$emit("canelDialogEvent")},handleSave:function(){if(this.multipleSelection&&this.multipleSelection.length>0){this.items=[];for(var e=0;e<this.multipleSelection.length;e++){var t=this.multipleSelection[e];console.log("handleSave.....SAVE"),console.log(t.uuid),console.log(this.form.uuid),this.items.push({actionType:"1",authority:!0,authorityType:"1",courtUuid:"",desc:"",houseOrgCode:"",houseOrgName:"",logicalAddress:"",resourceName:"",resourceType:"3",resourceTypeName:"",resourceUrl:"",resourceUuid:t.uuid,roleName:"",roleUuid:this.form.uuid,uuid:""})}this.$emit("createServiceAuthorityEvent",this.items)}else this.$msgbox({title:"消息",message:"请选择至少一个服务"})},handleSelectionChange:function(e){console.log("handleSelectionChange"),console.log(e),this.multipleSelection=e},handleSizeChange:function(e){console.log("handleSelectionChange:"+e),this.pageSize=e,this.listPageParm.pageSize=this.pageSize,this.listPageParm.currentPage=this.currentPage,this.getServiceList()},handleCurrentChange:function(e){console.log("handleCurrentChange:"+e),this.currentPage=e,this.listPageParm.pageSize=this.pageSize,this.listPageParm.currentPage=this.currentPage,this.getServiceList()},handleFilter:function(){this.getServiceList()},refresh:function(){console.log("refresh uuid:"+this.form.uuid),this.handleFilter()},reset:function(){console.log("addSevice reset"),this.appResource="",this.searchServiceTxt="",this.total=0,this.pageSize=5,this.tableData.length>0&&(this.tableData=[])}}}),Xo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-row",{attrs:{align:"left"}},[a("el-form",{attrs:{align:"left",inline:!0}},[a("el-form-item",{attrs:{label:"所属应用 "}},[a("el-select",{attrs:{placeholder:"请选择所属应用"},on:{"visible-change":e.getAppList},model:{value:e.appResource,callback:function(t){e.appResource=t},expression:"appResource"}},e._l(e.appResourceList,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"　　服务名称"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入服务名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.searchServiceTxt,callback:function(t){e.searchServiceTxt=t},expression:"searchServiceTxt"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showGrid,expression:"showGrid"}]},[a("el-table",{ref:"multipleTable",staticStyle:{"margin-top":"10px"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"选择",type:"selection"}}),e._v(" "),e._l(e.params,function(e,t){return a("el-table-column",{key:t,attrs:{label:e.title,prop:e.prop}})})],2),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[5,10,15],"page-size":e.pageSize,"current-page":e.currentPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{align:"center"}},[a("el-col",{attrs:{align:"center"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.cancelEvent}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)],1)],1)},el=[],tl={render:Xo,staticRenderFns:el},al=tl,il=a("VU/8"),sl=h,ol=il(Yo,al,!1,sl,"data-v-0236c3a5",null),ll=ol.exports,rl={props:{form:{roleName:void 0,remark:void 0,uuid:void 0}},data:function(){return{appResourceList:void 0,appResource:"",treeData:[],searchServiceTxt:"",items:[],defaultProps:{children:"children",label:"resourceName"},currentPage:1,total:0,pageSize:10,listPageParm:{cloudFlag:"1",resourceType:"4",appCode:"",delAuthority:!0,roleUuid:this.form.uuid,resourceName:"",currentPage:"1",pageSize:"10"},emptyData:{appCode:"",resourceName:""},appVal:"1",serviceVal:"3",showGrid:!0,tabPlaceholder:void 0,selectedName:null,tableData:void 0,serviceCount:0,roleServiceList:void 0,multipleSelection:void 0,params:[{title:"区域数据名称",prop:"resourceName"},{title:"所属应用",prop:"appName"},{title:"区域",prop:"regionName"}]}},methods:{getAppList:function(){var e={type:this.appVal,cloudFlag:1};Oi(e).then(function(e){console.log("<<<<<getAppList:"+e),e.unshift(this.emptyData),this.appResourceList=e}.bind(this)).catch(function(e){console.log(e)})},mounted:function(){this.loadData()},getServiceList:function(){this.listPageParm.appCode=this.appResource,this.listPageParm.resourceName=this.searchServiceTxt,this.listPageParm.roleUuid=this.form.uuid,console.log("listPageParm:"+this.searchServiceTxt),console.log(this.listPageParm),Wi(this.listPageParm).then(function(e){console.log("<<<<<getServiceList:"+e),this.tableData=e.resource,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},cancelEvent:function(){console.log("cancelEvent"),this.$emit("canelDialogEvent")},handleSave:function(){if(this.multipleSelection&&this.multipleSelection.length>0){this.items=[];for(var e=0;e<this.multipleSelection.length;e++){var t=this.multipleSelection[e];console.log("handleSave.....SAVE"),console.log(t.uuid),console.log(this.form.uuid),this.items.push({authority:!0,authorityType:"1",resourceType:"4",resourceUuid:t.uuid,roleUuid:this.form.uuid})}this.$emit("createRegionalDataAuthorityEvent",this.items)}else this.$msgbox({title:"消息",message:"请选择至少一个区域数据"})},handleSelectionChange:function(e){console.log("handleSelectionChange"),console.log(e),this.multipleSelection=e},handleSizeChange:function(e){console.log("handleSelectionChange:"+e),this.pageSize=e,this.listPageParm.pageSize=this.pageSize,this.listPageParm.currentPage=this.currentPage,this.getServiceList()},handleCurrentChange:function(e){console.log("handleCurrentChange:"+e),this.currentPage=e,this.listPageParm.pageSize=this.pageSize,this.listPageParm.currentPage=this.currentPage,this.getServiceList()},handleFilter:function(){this.getServiceList()},refresh:function(){console.log("refresh uuid:"+this.form.uuid),this.handleFilter()},reset:function(){console.log("addSevice reset"),this.appResource="",this.searchServiceTxt="",this.total=0,this.pageSize=5,this.tableData.length>0&&(this.tableData=[])}}},nl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-row",{attrs:{align:"left"}},[a("el-form",{attrs:{align:"left",inline:!0}},[a("el-form-item",{attrs:{label:"所属应用 "}},[a("el-select",{attrs:{placeholder:"请选择所属应用"},on:{"visible-change":e.getAppList},model:{value:e.appResource,callback:function(t){e.appResource=t},expression:"appResource"}},e._l(e.appResourceList,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"　　区域数据名称"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入区域数据名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.searchServiceTxt,callback:function(t){e.searchServiceTxt=t},expression:"searchServiceTxt"}})],1),e._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showGrid,expression:"showGrid"}]},[a("el-table",{ref:"multipleTable",staticStyle:{"margin-top":"10px"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"选择",type:"selection"}}),e._v(" "),e._l(e.params,function(e,t){return a("el-table-column",{key:t,attrs:{label:e.title,prop:e.prop}})})],2),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{layout:"total, sizes, prev, pager, next, jumper",total:e.total,"page-sizes":[5,10,15],"page-size":e.pageSize,"current-page":e.currentPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{align:"center"}},[a("el-col",{attrs:{align:"center"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.cancelEvent}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)],1)],1)},cl=[],dl={render:nl,staticRenderFns:cl},ul=dl,pl=a("VU/8"),ml=f,hl=pl(rl,ul,!1,ml,"data-v-211554f5",null),fl=hl.exports,gl={props:{roleUserData:{roleUserVoList:void 0,pageCount:void 0},roleUsergroupData:{roleUsergroupVoList:void 0,pageCount:void 0},roleResourceData:{roleAuthResourceVoList:void 0,pageCount:void 0},form:{roleName:void 0,remark:void 0,uuid:void 0,userType:void 0},userTypeList:void 0},components:{gridList:Yt,addApp:Ko,addService:ll,addRegionalData:fl},methods:{getRoleUserGroupList:function(){za(1,this.form.userType).then(function(e){this.tmpRoleUserGroupList=e,Aa(this.form.uuid).then(function(e){if(this.userGroupFilterList=e.roleUsergroupVoList,e.pageCount>0)for(var t=0;t<this.userGroupFilterList.length;t++)this.disableUserGroup(this.userGroupFilterList[t].usergroupUuid);this.roleUserGroupList=this.tmpRoleUserGroupList.filter(function(e){return!e.isDisabled})}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},disableUserGroup:function(e){for(var t=0;t<this.tmpRoleUserGroupList.length;t++)e===this.tmpRoleUserGroupList[t].uuid&&(this.tmpRoleUserGroupList[t].isDisabled=!0)},disableUser:function(e){for(var t=0;t<this.tmpRoleUserList.length;t++)e===this.tmpRoleUserList[t].uuid&&(this.tmpRoleUserList[t].isDisabled=!0)},getRoleUserList:function(){Qa(1,this.form.userType).then(function(e){this.tmpRoleUserList=e,Oa(this.form.uuid).then(function(e){if(console.log("获取筛选数据："+e.pageCount),this.userFilterList=e.roleUserVoList,e.pageCount>0){for(var t=0;t<this.userFilterList.length;t++)console.log("改变isDisabled状态："+this.userFilterList[t].userUuid),this.disableUser(this.userFilterList[t].userUuid);console.log(this.tmpRoleUserList)}this.roleUserList=this.tmpRoleUserList.filter(function(e){return!e.isDisabled})}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},userGroupBoxSelected:function(e){this.postRoleUserGroup.usergroupUuid=e,this.postRoleUserGroup.roleUuid=this.form.uuid,this.postRoleUserGroup=Bt()(this.postRoleUserGroup),this.postRoleUserGroup=JSON.parse(this.postRoleUserGroup),Ha(this.postRoleUserGroup).then(function(e){this.query.roleId=this.postRoleUserGroup.roleUuid,qa(this.query).then(function(e){this.roleUsergroupData=e}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},userBoxSelected:function(e){this.postRoleUser.userUuid=e,this.postRoleUser.roleUuid=this.form.uuid,this.postRoleUser=Bt()(this.postRoleUser),this.postRoleUser=JSON.parse(this.postRoleUser),Ja(this.postRoleUser).then(function(e){this.query.roleId=this.postRoleUser.roleUuid,Ba(this.query).then(function(e){this.roleUserData=e}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},handleUserGroupSizeChange:function(e){this.query.pageSize=e,this.query.roleId=this.form.uuid,qa(this.query).then(function(e){this.roleUsergroupData=e}.bind(this)).catch(function(e){console.log(e)})},handleUserGroupCurrentChange:function(e){this.query.currentPage=e,this.query.roleId=this.form.uuid,qa(this.query).then(function(e){this.roleUsergroupData=e}.bind(this)).catch(function(e){console.log(e)})},handleUserSizeChange:function(e){this.query.pageSize=e,this.query.roleId=this.form.uuid,Ba(this.query).then(function(e){this.roleUserData=e}.bind(this)).catch(function(e){console.log(e)})},handleUserCurrentChange:function(e){this.query.currentPage=e,this.query.roleId=this.form.uuid,Ba(this.query).then(function(e){this.roleUserData=e}.bind(this)).catch(function(e){console.log(e)})},handleResourceSizeChange:function(e){this.query.pageSize=e,this.query.roleId=this.form.uuid,Wa(this.query).then(function(e){this.roleResourceData=e}.bind(this)).catch(function(e){console.log(e)})},handleResourceCurrentChange:function(e){this.query.currentPage=e,this.query.roleId=this.form.uuid,Wa(this.query).then(function(e){this.roleResourceData=e}.bind(this)).catch(function(e){console.log(e)})},handleSubTabClick:function(e,t){this.showSummary="0"===e.name,this.showUserGroup="1"===e.name,this.showUser="2"===e.name,this.showResource="3"===e.name},userGroupDeleteEvent:function(e){this.usergroupRoleUuid=e.usergroupRoleUuid,ja(this.usergroupRoleUuid).then(function(t){this.$emit("userGroupDeleteEvent",e),this.query.roleId=this.form.uuid,this.$message({type:"success",message:"删除成功!"}),qa(this.query).then(function(e){this.roleUsergroupData=e}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e),this.$message.error(e.response.data.message)})},userDeleteEvent:function(e){this.userRoleUuid=e.userRoleUuid,Za(this.userRoleUuid).then(function(t){this.$emit("userDeleteEvent",e),this.query.roleId=this.form.uuid,this.$message({type:"success",message:"删除成功!"}),Ba(this.query).then(function(e){this.roleUserData=e}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e),this.$message.error(e.response.data.message)})},resourceDeleteEvent:function(e){this.authorityUuid=e.authorityUuid,Ka(this.authorityUuid).then(function(t){this.$emit("resourceDeleteEvent",e),this.query.roleId=this.form.uuid,this.$message({type:"success",message:"删除成功!"}),Wa(this.query).then(function(e){this.roleResourceData=e,this.$refs.addapp.refresh(),this.$refs.addservice.refresh(),this.$refs.adddevice.refresh()}.bind(this)).catch(function(e){console.log(e),this.$message.error(e.response.data.message)})}.bind(this)).catch(function(e){console.log(e)})},handleAddApp:function(e){this.dialogStatus="添加"+this.form.roleName+"角色的应用程序权限",this.dialogFormVisible=!0,this.showApp=!0,this.showRegionalData=!1,this.showService=!1},handleAddService:function(e){this.dialogStatus="添加"+this.form.roleName+"角色的应用服务权限",this.dialogFormVisible=!0,this.showApp=!1,this.showRegionalData=!1,this.showService=!0},handleAddRegionalData:function(e){this.dialogStatus="添加"+this.form.roleName+"角色的区域数据权限",this.dialogFormVisible=!0,this.showApp=!1,this.showRegionalData=!0,this.showService=!1},handleSave:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.form.roleName=t.trim(t.form.roleName),Ra(t.form).then(function(e){this.$emit("listenToEditEvent",this.form),this.$emit("listenToCloseEvent"),this.$message({message:"保存成功！",type:"success"})}.bind(t)).catch(function(e){console.log(e)}))})},handleCancel:function(e){this.$emit("listenToCloseEvent")},createAppEvent:function(e){console.log("createAppEvent Start"),qi(e).then(function(e){this.$message({message:"保存成功！",type:"success"}),this.$refs.addapp.refresh(),this.query.roleId=this.form.uuid,console.log(this.query),Ga(this.query).then(function(e){console.log(Bt()(e)),this.roleResourceData=e}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)}),console.log("createAppEvent End"),this.dialogFormVisible=!1,this.showApp=!1},createServiceEvent:function(e){console.log("createServiceEvent Start"),console.log(Bt()(e)),Bi(e).then(function(e){this.$message({message:"保存成功！",type:"success"}),this.$refs.addservice.refresh(),this.query.roleId=this.form.uuid,console.log(this.query),Ga(this.query).then(function(e){console.log(Bt()(e)),this.roleResourceData=e}.bind(this)).catch(function(e){console.log(e)})}.bind(this)),console.log("createServiceEvent End"),this.dialogFormVisible=!1,this.showService=!1},createRegionalDataEvent:function(e){console.log("createRegionalDataEvent Start"),Bi(e).then(function(e){this.$message({message:"保存成功！",type:"success"}),this.$refs.addregionaldata.refresh(),this.query.roleId=this.form.uuid,console.log(this.query),Ga(this.query).then(function(e){console.log(Bt()(e)),this.roleResourceData=e}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)}),console.log("createRegionalDataEvent End"),this.dialogFormVisible=!1,this.showRegionalData=!1},cancelEvent:function(){console.log("dialog cancelEvent Start"),this.dialogFormVisible=!1,this.showApp=!1,this.showService=!1,this.showDevice=!1,null!=this.$refs.addapp&&void 0!==this.$refs.addapp&&this.$refs.addapp.reset(),null!=this.$refs.adddevice&&void 0!==this.$refs.adddevice&&this.$refs.adddevice.reset(),null!=this.$refs.addservice&&void 0!==this.$refs.addservice&&this.$refs.addservice.reset(),console.log("dialog cancelEvent End")},changeRoleEditDiaLogEvent:function(){console.log("dialog changeRoleEditDiaLogEvent Start"),null!=this.$refs.addapp&&void 0!==this.$refs.addapp&&this.$refs.addapp.reset(),null!=this.$refs.adddevice&&void 0!==this.$refs.adddevice&&this.$refs.adddevice.reset(),null!=this.$refs.addservice&&void 0!==this.$refs.addservice&&this.$refs.addservice.reset(),console.log("dialog changeRoleEditDiaLogEvent End")},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}},mounted:function(){this.subActiveName=0},watch:{"form.uuid":function(e,t){console.log("watch: form!!!!!!!!!!!!!!!!"),this.subActiveName="0",this.showSummary=!0,this.showUserGroup=!1,this.showUser=!1,this.showResource=!1},deep:!0},data:function(){var e=this;return{rules:{roleName:[{required:!0,message:"请填写角色名称",trigger:"blur"},{validator:function(t,a,i){var s=e.trim(a),o=s.length;if(""===s)i(new Error("角色名称不能为空"));else if(o>32||o<2)i(new Error("长度在 2 到 32 个字符"));else{var l=e.form.userType,r=e.form.uuid;Ya(r,s,l).then(function(e){e?i():i(new Error("角色名称已存在"))})}}}],remark:[{min:3,max:256,message:"长度在 3 到 256 个字符"}]},userTypeList:void 0,roleNameFlag:!0,showSummary:!0,showUserGroup:!1,showUser:!1,showResource:!1,roleName:void 0,subActiveName:"0",tabTitle:"角色概要",textMap:{0:"角色概要",1:"关联用户组",2:"关联用户",3:"资源权限"},query:{currentPage:1,pageSize:5,roleId:void 0},postRoleUserGroup:{roleUuid:void 0,usergroupUuid:void 0},postRoleUser:{roleUuid:void 0,userUuid:void 0},listUsergroupQuery:{courtUuid:"",userType:"",cloudFlag:1},selectedName:null,roleUserGroupList:void 0,tmpRoleUserGroupList:void 0,tmpRoleUserList:void 0,roleUserList:void 0,dialogStatus:void 0,dialogFormVisible:!1,showApp:!1,showService:!1,showDevice:!1,showRegionalData:!1,formData:void 0,userGroupParams:[{title:"用户组名称",prop:"usergroupName"},{title:"直属用户",prop:"dirctUsers"}],userParams:[{title:"姓名",prop:"fullName"},{title:"登录 ID",prop:"userName"},{title:"职务",prop:"position"},{title:"部门",prop:"departmentName"},{title:"手机号",prop:"primaryPhone"},{title:"身份证号码",prop:"idenNum"}],resourceParams:[{title:"资源类别",prop:"resourceTypeName"},{title:"资源名称",prop:"resourceName"},{title:"URI",prop:"resourceUrl"},{title:"区域",prop:"regionName"}]}}},vl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"角色概要",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"关联用户组",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"关联用户",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"资源权限",name:"3"}})],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"20px","text-align":"center"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSummary,expression:"showSummary"}],ref:"form",staticStyle:{margin:"0 auto"},attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{staticStyle:{width:"650px"},attrs:{placeholder:"请选择用户类型",disabled:""},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},e._l(e.userTypeList,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode,disabled:!0}})}))],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入角色名称"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"角色说明",prop:"remark"}},[a("el-input",{staticStyle:{width:"650px"},attrs:{type:"textarea",placeholder:"请输入角色说明",rows:"3"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCancel("form")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.handleSave("form")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUserGroup,expression:"showUserGroup"}]},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("添加关联用户组")]),e._v(" "),a("el-select",{staticStyle:{"margin-left":"30px",width:"230px"},attrs:{filterable:"",placeholder:"请选择需要添加的关联用户组"},on:{"visible-change":e.getRoleUserGroupList,change:e.userGroupBoxSelected}},e._l(e.roleUserGroupList,function(e,t){return a("el-option",{key:t,attrs:{label:e.usergroupName,value:e.uuid,userGroupId:e.uuid}})})),e._v(" "),a("grid-list",{staticStyle:{"margin-top":"20px",height:"100%"},attrs:{id:"usergroupTable",tableData:e.roleUsergroupData.roleUsergroupVoList,params:e.userGroupParams,editable:!1,deletable:!0,showOperation:!0},on:{listenToDeleteEvent:e.userGroupDeleteEvent}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleUsergroupData.pageCount},on:{"size-change":e.handleUserGroupSizeChange,"current-change":e.handleUserGroupCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUser,expression:"showUser"}]},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("添加关联用户")]),e._v(" "),a("el-select",{staticStyle:{"margin-left":"30px",width:"230px"},attrs:{filterable:"",placeholder:"请选择需要添加的关联用户"},on:{"visible-change":e.getRoleUserList,change:e.userBoxSelected}},e._l(e.roleUserList,function(e,t){return a("el-option",{key:t,attrs:{label:e.fullName,value:e.uuid,userId:e.uuid}})})),e._v(" "),a("grid-list",{staticStyle:{"margin-top":"20px"},attrs:{id:"userTable",tableData:e.roleUserData.roleUserVoList,params:e.userParams,editable:!1,deletable:!0,showOperation:!0},on:{listenToDeleteEvent:e.userDeleteEvent}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleUserData.pageCount},on:{"size-change":e.handleUserSizeChange,"current-change":e.handleUserCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showResource,expression:"showResource"}]},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("已经分配给本角色的资源权限")]),e._v(" "),a("el-button-group",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"info",plain:"",size:"small"},on:{click:e.handleAddApp}},[e._v("添加应用程序资源权限")]),e._v(" "),a("el-button",{attrs:{type:"info",plain:"",size:"small"},on:{click:e.handleAddService}},[e._v("添加服务权限")]),e._v(" "),a("el-button",{attrs:{type:"info",plain:"",size:"small"},on:{click:e.handleAddRegionalData}},[e._v("添加区域数据权限")])],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("add-app",{directives:[{name:"show",rawName:"v-show",value:e.showApp,expression:"showApp"}],ref:"addapp",attrs:{form:e.form,cloudFlag:1},on:{createAppAuthorityEvent:e.createAppEvent,canelDialogEvent:e.cancelEvent}}),e._v(" "),a("add-service",{directives:[{name:"show",rawName:"v-show",value:e.showService,expression:"showService"}],ref:"addservice",attrs:{form:e.form,cloudFlag:1},on:{createServiceAuthorityEvent:e.createServiceEvent,canelDialogEvent:e.cancelEvent}}),e._v(" "),a("add-regional-data",{directives:[{name:"show",rawName:"v-show",value:e.showRegionalData,expression:"showRegionalData"}],ref:"addregionaldata",attrs:{form:e.form,cloudFlag:1},on:{createRegionalDataAuthorityEvent:e.createRegionalDataEvent,canelDialogEvent:e.cancelEvent}})],1),e._v(" "),a("grid-list",{staticStyle:{"margin-top":"20px"},attrs:{id:"resourceTable",tableData:e.roleResourceData.roleAuthResourceVoList,params:e.resourceParams,editable:!1,deletable:!0,showOperation:!0},on:{listenToDeleteEvent:e.resourceDeleteEvent}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleResourceData.pageCount},on:{"size-change":e.handleResourceSizeChange,"current-change":e.handleResourceCurrentChange}})],1)],1)},bl=[],Dl={render:vl,staticRenderFns:bl},yl=Dl,Cl=a("VU/8"),_l=g,wl=Cl(gl,yl,!1,_l,"data-v-72d5ecaa",null),Sl=wl.exports,xl={props:{userTypeList:void 0},data:function(){var e=this;return{rules:{roleName:[{required:!0,message:"请填写角色名称",trigger:"blur"},{validator:function(t,a,i){var s=e.trim(a),o=s.length;if(""===s)i(new Error("角色名称不能为空"));else if(o>32||o<2)i(new Error("长度在 2 到 32 个字符"));else{var l=e.form.userType;Ya("",s,l).then(function(e){e?i():i(new Error("角色名称已存在"))})}}}],remark:[{min:3,max:256,message:"长度在 3 到 256 个字符"}],userType:[{required:!0,message:"请选择用户类型",trigger:"blur"}]},roleNameFlag:!0,formData:void 0,form:{roleName:"",remark:"",uuid:"",userType:""}}},methods:{initData:function(){this.form={userType:"",roleName:"",remark:""},this.$refs.form.resetFields()},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},handleSave:function(e){var t=this;this.$refs[e].validate(function(a){a&&(t.form.roleName=t.trim(t.form.roleName),$a(t.form).then(function(t){this.$message({message:"保存成功！",type:"success"}),this.$emit("listenToAddEvent",this.form),this.form.roleName="",this.form.remark="",this.form.userType="",this.$refs[e].resetFields()}.bind(t)).catch(function(e){console.log("错误："+e)}))})},handleCancel:function(e){this.form={roleName:"",remark:"",uuid:"",userType:""},this.$refs[e].resetFields(),this.$emit("listenToAddEvent",this.form)}},created:function(){this.initData()}},kl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center"}},[a("el-container",{staticStyle:{"text-align":"center"}},[a("el-form",{ref:"form",staticStyle:{margin:"0 auto"},attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"用户类型",prop:"userType"}},[a("el-select",{staticStyle:{width:"650px"},attrs:{placeholder:"请选择用户类型"},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},e._l(e.userTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{staticClass:"is-required",attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入角色名称"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"角色说明",prop:"remark"}},[a("el-input",{staticStyle:{width:"650px"},attrs:{type:"textarea",rows:"3",placeholder:"请输入角色说明"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCancel("form")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.handleSave("form")}}},[e._v("保存")])],1)],1)],1)],1)},Tl=[],Ll={render:kl,staticRenderFns:Tl},Nl=Ll,Vl=a("VU/8"),Il=v,El=Vl(xl,Nl,!1,Il,"data-v-ba39dc82",null),Pl=El.exports,Ml={name:"role",props:{roleName:void 0},data:function(){return{showCreate:!1,showGrid:!1,total:0,roleId:void 0,roleData:{pageCount:void 0,roleBaseVoList:void 0},roleListParam:void 0,subUserData:{roleUserVoList:void 0,pageCount:void 0},subUsergroupData:{roleUsergroupVoList:void 0,pageCount:void 0},subResourceData:{roleAuthResourceVoList:void 0,pageCount:void 0},dialogFormVisible:!1,gridListParam:void 0,gridListTableData:void 0,dialogStatus:void 0,userGroupData:void 0,query:{roleId:"",currentPage:1,pageSize:10,cloudFlag:1,courtUuid:"",userType:""},editQuery:{roleId:"",currentPage:1,pageSize:5},roleForm:{roleName:void 0,remark:void 0,uuid:void 0,userType:void 0},userTypeOptions:void 0}},components:{gridList:Yt,roleEdit:Sl,roleAdd:Pl},methods:{getRoleListTable:function(){Ea(this.query).then(function(e){this.roleData=e}.bind(this)).catch(function(e){console.log(e)})},loadData:function(){this.roleListParam=[{title:"角色名称",prop:"roleName"},{title:"用户类型",prop:"userTypeName"},{title:"角色说明",prop:"remark"}],this.getRoleListTable(),ea().then(function(e){this.userTypeOptions=e,console.log(this.userTypeOptions)}.bind(this)).catch(function(e){console.log("错误："+e)})},roleDeleteEvent:function(e){console.log(e),console.log("role：删除了第"+e.roleName+"行"),this.roleId=e.uuid,Ua(e.uuid).then(function(e){this.$message({type:"success",message:"删除成功!"}),this.showGrid=!1,this.getRoleListTable()}.bind(this)).catch(function(e){this.$message.error(e.response.data.message),console.log("error:"+Bt()(e.response.data.message))})},roleEditEvent:function(e){console.log("role：编辑了第"+e.roleName+"行"),this.showCreate=!1,this.showGrid=!0,this.roleId=e.uuid,this.editQuery.roleId=e.uuid,Fa(this.editQuery).then(function(e){this.subUsergroupData=e.roleUsergroupPageVo,this.subUserData=e.roleUserPageVo,this.subResourceData=e.roleAuthResourcePageVo,this.roleForm.roleName=e.roleBaseVo.roleName,this.roleForm.remark=e.roleBaseVo.remark,this.roleForm.uuid=e.roleBaseVo.uuid,this.roleForm.userType=e.roleBaseVo.userType,this.roleName=e.roleBaseVo.roleName}.bind(this)).catch(function(e){console.log(e)}),this.$refs.roleedit.changeRoleEditDiaLogEvent()},roleAddEvent:function(e){this.getRoleListTable(),this.dialogFormVisible=!1,this.showCreate=!1},roleBaseVoEditEvent:function(e){this.getRoleListTable()},roleCloseEvent:function(){this.showGrid=!1},handleRoleCurrentChange:function(e){this.query.currentPage=e,this.getRoleListTable()},handleRoleSizeChange:function(e){this.query.pageSize=e,this.getRoleListTable()},handleCreate:function(){this.showCreate=!0,this.showGrid=!1,this.dialogStatus="添加角色",this.roleForm.roleName=void 0,this.roleForm.remark=void 0,this.roleForm.uuid=void 0,this.roleForm.userType=void 0,this.dialogFormVisible=!0},userTypeSelected:function(e){this.query.userType=e,this.getRoleListTable()}},created:function(){this.loadData()}},$l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-c flex-1"},[a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{staticClass:"flex-c",staticStyle:{height:"100%"},attrs:{span:10}},[a("div",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleCreate}},[e._v("添加")]),e._v(" "),a("el-select",{staticStyle:{width:"260px",float:"right"},attrs:{clearable:"",placeholder:"请选择用户类型"},on:{change:e.userTypeSelected},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}},e._l(e.userTypeOptions,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("div",{staticClass:"flex-1 flex-c"},[a("grid-list",{staticStyle:{"margin-top":"15px","max-height":"100%"},attrs:{id:"roleTable",editable:!0,deletable:!0,showOperation:!0,tableData:e.roleData.roleBaseVoList,params:e.roleListParam},on:{listenToDeleteEvent:e.roleDeleteEvent,listenToEditEvent:e.roleEditEvent}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleData.pageCount},on:{"size-change":e.handleRoleSizeChange,"current-change":e.handleRoleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,"close-on-click-modal":!1,"show-close":!0,"before-close":e.roleAddEvent,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("role-add",{directives:[{name:"show",rawName:"v-show",value:e.showCreate,expression:"showCreate"}],attrs:{form:e.roleForm,userTypeList:e.userTypeOptions},on:{listenToAddEvent:e.roleAddEvent}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showGrid,expression:"showGrid"}],staticStyle:{"margin-top":"40px"},attrs:{span:14}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"10px","margin-top":"15px"}},[a("role-edit",{ref:"roleedit",staticStyle:{"margin-top":"20px"},attrs:{roleUserData:e.subUserData,roleUsergroupData:e.subUsergroupData,roleResourceData:e.subResourceData,form:e.roleForm,userTypeList:e.userTypeOptions},on:{listenToEditEvent:e.roleBaseVoEditEvent,listenToCloseEvent:e.roleCloseEvent}})],1)],1)],1)],1)])},Ul=[],Fl={render:$l,staticRenderFns:Ul},Rl=Fl,zl=a("VU/8"),Al=b,Ol=zl(Ml,Rl,!1,Al,"data-v-bf7b143c",null),ql=Ol.exports,Bl={props:{roleUserData:{roleUserVoList:void 0,pageCount:void 0},roleUsergroupData:{roleUsergroupVoList:void 0,pageCount:void 0},roleResourceData:{roleAuthResourceVoList:void 0,pageCount:void 0},form:{roleName:void 0,remark:void 0,uuid:void 0}},components:{gridList:Yt},methods:{handleUserGroupCurrentChange:function(e){this.query.currentPage=e,this.query.roleId=this.form.uuid,qa(this.query).then(function(e){this.roleUsergroupData=e}.bind(this)).catch(function(e){console.log(e)})},handleUserGroupSizeChange:function(e){this.query.pageSize=e,this.query.roleId=this.form.uuid,qa(this.query).then(function(e){this.roleUsergroupData=e}.bind(this)).catch(function(e){console.log(e)})},handleUserCurrentChange:function(e){this.query.currentPage=e,this.query.roleId=this.form.uuid,Ba(this.query).then(function(e){this.roleUserData=e}.bind(this)).catch(function(e){console.log(e)})},handleUserSizeChange:function(e){this.query.pageSize=e,this.query.roleId=this.form.uuid,Ba(this.query).then(function(e){this.roleUserData=e}.bind(this)).catch(function(e){console.log(e)})},handleResourceCurrentChange:function(e){this.query.currentPage=e,this.query.roleId=this.form.uuid,Wa(this.query).then(function(e){this.roleResourceData=e}.bind(this)).catch(function(e){console.log(e)})},handleResourceSizeChange:function(e){this.query.pageSize=e,this.query.roleId=this.form.uuid,Wa(this.query).then(function(e){this.roleResourceData=e}.bind(this)).catch(function(e){console.log(e)})},handleSubTabClick:function(e,t){this.showSummary="0"===e.name,this.showUserGroup="1"===e.name,this.showUser="2"===e.name,this.showResource="3"===e.name}},data:function(){return{textMap:{0:"角色概要",1:"关联用户组",2:"关联用户",3:"资源权限"},roleNameFlag:!0,showSummary:!0,showUserGroup:!1,showUser:!1,showResource:!1,roleName:void 0,subActiveName:"0",tabTitle:"角色概要",query:{currentPage:1,pageSize:5,roleId:void 0},postRoleUserGroup:{roleUuid:void 0,usergroupUuid:void 0},postRoleUser:{roleUuid:void 0,userUuid:void 0},listUsergroupQuery:{courtUuid:"",userType:"",cloudFlag:0},selectedName:null,roleUserGroupList:void 0,tmpRoleUserGroupList:void 0,tmpRoleUserList:void 0,roleUserList:void 0,dialogStatus:void 0,dialogFormVisible:!1,showApp:!1,showService:!1,showDevice:!1,formData:void 0,userGroupParams:[{title:"用户组名称",prop:"usergroupName"},{title:"直属用户",prop:"dirctUsers"}],userParams:[{title:"姓名",prop:"fullName"},{title:"登录 ID",prop:"userName"},{title:"职务",prop:"position"},{title:"部门",prop:"departmentName"},{title:"手机号",prop:"primaryPhone"},{title:"身份证号码",prop:"idenNum"}],resourceParams:[{title:"资源类别",prop:"resourceTypeName"},{title:"资源名称",prop:"resourceName"},{title:"URI",prop:"resourceUrl"},{title:"操作类型",prop:"actionTypeName"},{title:"逻辑地址",prop:"logicalAddress"}]}}},Wl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"角色概要",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"关联用户组",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"关联用户",name:"2"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"资源权限",name:"3"}})],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"20px"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSummary,expression:"showSummary"}],ref:"form",attrs:{"label-width":"70px",model:e.form}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{type:"text",placeholder:"无数据",readonly:""},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"block"},attrs:{label:"角色说明",prop:"remark"}},[a("el-input",{staticStyle:{width:"650px"},attrs:{type:"textarea",placeholder:"无数据",rows:"3",readonly:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUserGroup,expression:"showUserGroup"}]},[a("grid-list",{staticStyle:{"margin-top":"20px"},attrs:{id:"usergroupTable",tableData:e.roleUsergroupData.roleUsergroupVoList,params:e.userGroupParams,editable:!1,deletable:!1,showOperation:!1}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleUsergroupData.pageCount},on:{"size-change":e.handleUserGroupSizeChange,"current-change":e.handleUserGroupCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUser,expression:"showUser"}]},[a("grid-list",{staticStyle:{"margin-top":"20px"},attrs:{id:"userTable",tableData:e.roleUserData.roleUserVoList,params:e.userParams,editable:!1,deletable:!1,showOperation:!1}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleUserData.pageCount},on:{"size-change":e.handleUserSizeChange,"current-change":e.handleUserCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showResource,expression:"showResource"}]},[a("grid-list",{staticStyle:{"margin-top":"20px"},attrs:{id:"resourceTable",tableData:e.roleResourceData.roleAuthResourceVoList,params:e.resourceParams,editable:!1,deletable:!1,showOperation:!1}}),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleResourceData.pageCount},on:{"size-change":e.handleResourceSizeChange,"current-change":e.handleResourceCurrentChange}})],1)],1)},Ql=[],Gl={render:Wl,staticRenderFns:Ql},Hl=Gl,jl=a("VU/8"),Jl=D,Zl=jl(Bl,Hl,!1,Jl,"data-v-2dcd9bc6",null),Kl=Zl.exports,Yl={name:"CommunityRole",props:{roleName:void 0},data:function(){return{communityList:void 0,showCreate:!1,showGrid:!1,total:0,roleId:void 0,roleData:{pageCount:void 0,roleBaseVoList:void 0},roleListParam:void 0,subUserData:{roleUserVoList:void 0,pageCount:void 0},subUsergroupData:{roleUsergroupVoList:void 0,pageCount:void 0},subResourceData:{roleAuthResourceVoList:void 0,pageCount:void 0},dialogFormVisible:!1,gridListParam:void 0,gridListTableData:void 0,dialogStatus:void 0,userGroupData:void 0,query:{roleId:"",currentPage:1,pageSize:10,cloudFlag:0,courtUuid:"",userType:""},editQuery:{roleId:void 0,currentPage:1,pageSize:5},roleForm:{roleName:void 0,remark:void 0,uuid:void 0}}},components:{gridList:Yt,RoleView:Kl},methods:{loadData:function(){this.roleListParam=[{title:"角色名称",prop:"roleName"},{title:"角色说明",prop:"remark"}]},getCommunityList:function(){ta().then(function(e){this.communityList=e,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},communitySelected:function(e){this.query.courtUuid=e,this.getRoleListFunction()},getRoleListFunction:function(){Ea(this.query).then(function(e){this.roleData=e}.bind(this)).catch(function(e){console.log(e)})},roleViewEvent:function(e){console.log(e),console.log("role：编辑了第"+e.roleName+"行"),this.showCreate=!1,this.showGrid=!0,this.roleId=e.uuid,this.editQuery.roleId=e.uuid,Fa(this.editQuery).then(function(e){this.subUsergroupData=e.roleUsergroupPageVo,this.subUserData=e.roleUserPageVo,this.subResourceData=e.roleAuthResourcePageVo,this.roleForm.roleName=e.roleBaseVo.roleName,console.log(this.roleForm.roleName),this.roleForm.remark=e.roleBaseVo.remark,this.roleForm.uuid=e.roleBaseVo.uuid,this.roleName=e.roleBaseVo.roleName}.bind(this)).catch(function(e){console.log(e)})},roleAddEvent:function(e){console.log("role：添加了 "+e),this.getRoleListFunction(),this.dialogFormVisible=!1,this.showCreate=!1},handleRoleCurrentChange:function(e){this.query.currentPage=e,this.getRoleListFunction()},handleRoleSizeChange:function(e){this.query.pageSize=e,this.getRoleListFunction()},handleFilterReset:function(){this.query.courtUuid="",this.roleData.roleBaseVoList=""}},created:function(){this.loadData()}},Xl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-c flex-1"},[a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{staticClass:"flex-c",staticStyle:{height:"100%"},attrs:{span:10}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-select",{staticStyle:{width:"260px"},attrs:{filterable:"",placeholder:"请选择小区"},on:{"visible-change":e.getCommunityList,change:e.communitySelected},model:{value:e.query.courtUuid,callback:function(t){e.$set(e.query,"courtUuid",t)},expression:"query.courtUuid"}},e._l(e.communityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.uuid}})}))],1),e._v(" "),a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-left":"10px",float:"right"},attrs:{type:"primary"},on:{click:e.handleFilterReset}},[e._v("清空")])],1),e._v(" "),a("div",{staticClass:"table-container",staticStyle:{"margin-top":"20px"}},[a("grid-list",{staticStyle:{"margin-top":"15px"},attrs:{id:"usergroupTable",viewable:!0,deletable:!1,showOperation:!0,tableData:e.roleData.roleBaseVoList,params:e.roleListParam},on:{listenToViewEvent:e.roleViewEvent}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"page-sizes":[5,10,15],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.roleData.pageCount},on:{"size-change":e.handleRoleSizeChange,"current-change":e.handleRoleCurrentChange}})],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showGrid,expression:"showGrid"}],staticStyle:{"margin-top":"75px"},attrs:{span:14}},[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"10px","margin-top":"20px"}},[a("role-view",{staticStyle:{"margin-top":"20px"},attrs:{roleUserData:e.subUserData,roleUsergroupData:e.subUsergroupData,roleResourceData:e.subResourceData,form:e.roleForm,userTypeList:e.userTypeOptions}})],1)],1)],1)],1)])},er=[],tr={render:Xl,staticRenderFns:er},ar=tr,ir=a("VU/8"),sr=y,or=ir(Yl,ar,!1,sr,"data-v-e214a304",null),lr=or.exports,rr={props:{isAddFlag:!1,userAccStatusSelect:void 0,contactTypeSelect:void 0,departmentSelect:void 0,userTypeSelect:void 0,tableData:void 0,tableDataUserUserGroup:void 0,curUserUuidParm:void 0,user:{fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"",uuid:"",userType:""},userTypeList:void 0},components:{contactList:eo,assUserGroup:no,assUserRole:vo},watch:{user:function(e,t){console.log("watch: userDetailData!!!!!!!!!!!!!!!!"),console.log("userUuid<<<<<<<:"+this.user.uuid),this.subActiveName="0",this.gridUser=!0,this.gridContact=!1,this.gridUserGroup=!1,this.gridUserRole=!1}},data:function(){var e=this;return{subActiveName:"0",formLabelWidth:"120px",gridUser:!0,gridContact:!1,gridUserGroup:!1,gridUserRole:!1,userNameFlag:!0,subUserUuid:"",subContactFlag:!1,pickerOptionsStart:{disabledDate:function(e){return e.getTime()<new Date-864e5}},pickerOptionsEnd:{disabledDate:function(t){return t.getTime()<new Date(e.user.effectiveDate).getTime()+864e5}},listQueryUserEditVue:{page:1,limit:5,userUuid:""}}},methods:{handleSubTabClick:function(e,t){"0"===e.name?(this.gridUser=!0,this.gridContact=!1,this.gridUserGroup=!1,this.gridUserRole=!1):"1"===e.name?(this.gridContact=!0,this.gridUser=!1,this.gridUserGroup=!1,this.gridUserRole=!1,this.listQueryUserEditVue.userUuid=this.curUserUuidParm,this.$refs.userContactVue.findUserContactList(this.listQueryUserEditVue)):"2"===e.name?(this.gridContact=!1,this.gridUser=!1,this.gridUserRole=!1,this.gridUserGroup=!0,this.listQueryUserEditVue.userUuid=this.curUserUuidParm,this.$refs.associtedUserGroupVue.findUserGroupList(this.listQueryUserEditVue)):"3"===e.name&&(this.gridContact=!1,this.gridUser=!1,this.gridUserRole=!0,this.gridUserGroup=!1,this.listQueryUserEditVue.userUuid=this.curUserUuidParm,this.$refs.associtedUserRoleVue.findUserRoleList(this.listQueryUserEditVue))},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridCreateEvent",t.user)})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridSaveEvent",t.user)})},changeContanctFlag:function(){this.$refs.userContactVue.handleChangeContactFlag(),this.$refs.associtedUserGroupVue.handleChangeSelectedName(),this.$refs.associtedUserRoleVue.handleChangeSelectedName()},changeDate:function(){this.user.expiryDate="",console.log("生效日期："+this.user.effectiveDate),console.log("失效日期："+this.user.expiryDate)},cancelEvent:function(e){console.log("cancelEvent"),this.$emit("canelDialogEvent")},reset:function(e){console.log("userEdit-reset start"),this.$refs.effectiveDate.focus(),this.$refs.expiryDate.focus(),console.log("userEdit-reset end")}}},nr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[e.isAddFlag?a("el-tab-pane",{attrs:{label:"用户概要",name:"0"}}):e._e(),e._v(" "),e.isAddFlag?a("el-tab-pane",{attrs:{label:"联系方式",name:"1"}}):e._e(),e._v(" "),e.isAddFlag?a("el-tab-pane",{attrs:{label:"用户组",name:"2"}}):e._e(),e._v(" "),e.isAddFlag?a("el-tab-pane",{attrs:{label:"关联角色",name:"3"}}):e._e()],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.gridUser,expression:"gridUser"}],ref:"user",attrs:{inline:!0,model:e.user}},[a("el-form-item",{attrs:{label:"登录 ID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"无数据",readonly:""},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"fullName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"无数据",readonly:""},model:{value:e.user.fullName,callback:function(t){e.$set(e.user,"fullName",t)},expression:"user.fullName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth,prop:"primaryPhone"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"无数据",readonly:""},model:{value:e.user.primaryPhone,callback:function(t){e.$set(e.user,"primaryPhone",t)},expression:"user.primaryPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号码","label-width":e.formLabelWidth,prop:"idenNum"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"无数据",readonly:""},model:{value:e.user.idenNum,callback:function(t){e.$set(e.user,"idenNum",t)},expression:"user.idenNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮件","label-width":e.formLabelWidth,prop:"primaryEmail"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"无数据",readonly:""},model:{value:e.user.primaryEmail,callback:function(t){e.$set(e.user,"primaryEmail",t)},expression:"user.primaryEmail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门","label-width":e.formLabelWidth,prop:"departmentUuid"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"无数据",disabled:""},model:{value:e.user.departmentUuid,callback:function(t){e.$set(e.user,"departmentUuid",t)},expression:"user.departmentUuid"}},e._l(e.departmentSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"职务","label-width":e.formLabelWidth,prop:"position"}},[a("el-input",{staticClass:"user_el-select",attrs:{"auto-complete":"off",placeholder:"无数据",readonly:""},model:{value:e.user.position,callback:function(t){e.$set(e.user,"position",t)},expression:"user.position"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"无数据",disabled:""},model:{value:e.user.userAccStatus,callback:function(t){e.$set(e.user,"userAccStatus",t)},expression:"user.userAccStatus"}},e._l(e.userAccStatusSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"生效日期","label-width":e.formLabelWidth,prop:"effectiveDate"}},[a("el-date-picker",{ref:"effectiveDate",staticStyle:{width:"280px"},attrs:{placeholder:"无数据",type:"date",readonly:"","picker-options":e.pickerOptionsStart},on:{change:e.changeDate},model:{value:e.user.effectiveDate,callback:function(t){e.$set(e.user,"effectiveDate",t)},expression:"user.effectiveDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"失效日期","label-width":"120px",prop:"expiryDate"}},[a("el-date-picker",{ref:"expiryDate",staticStyle:{width:"280px"},attrs:{placeholder:"无数据",type:"date",readonly:"","picker-options":e.pickerOptionsEnd},model:{value:e.user.expiryDate,callback:function(t){e.$set(e.user,"expiryDate",t)},expression:"user.expiryDate"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridContact,expression:"gridContact"}]},[a("div",{staticClass:"flex-1"},[a("contact-list",{ref:"userContactVue",attrs:{contactTypeOptionsProp:e.contactTypeSelect,userUuidValue:e.curUserUuidParm,showButton:!1,showOperation:!1}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridUserGroup,expression:"gridUserGroup"}]},[a("ass-user-group",{ref:"associtedUserGroupVue",attrs:{userUuidValue:e.curUserUuidParm,showSelect:!1,cloudFlag:0,showOperation:!1}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridUserRole,expression:"gridUserRole"}]},[a("ass-user-role",{ref:"associtedUserRoleVue",attrs:{userUuidValue:e.curUserUuidParm,showSelect:!1,cloudFlag:0,showOperation:!1}})],1)],1)},cr=[],dr={render:nr,staticRenderFns:cr},ur=dr,pr=a("VU/8"),mr=C,hr=pr(rr,ur,!1,mr,"data-v-2e4b4491",null),fr=hr.exports,gr={data:function(){return{userList:void 0,userListParam:void 0,total:0,dialogFormVisible:!1,dialogCreateFormVisible:!1,dialogStatus:void 0,curUserUuid:void 0,addFlag:!1,userForm:{fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"",uuid:"",userType:""},listQuery:{page:1,limit:10,q_userName:"",q_fullName:"",q_primaryPhone:"",cloudFlag:0,courtUuid:"",userType:""},formLabelWidth:"120px",dictData:{userStatusDict:"COURT_USER_ACC_STATUS",contactTypeDict:"COURT_CONTACT_TYPE",cloudFlag:0,departmentType:""},userAccStatusOptions:void 0,contactTypeOptions:void 0,departmentOptions:void 0,userTypeOptions:void 0,communityList:void 0,userListQuery:{cloudFlag:0,courtUuid:"",userType:""}}},components:{userList:Gs,userView:fr},created:function(){this.loadData(),this.userListParam=[{title:"用户姓名",prop:"fullName"},{title:"登录 ID",prop:"userName"},{title:"职务",prop:"position"},{title:"部门",prop:"departmentName"},{title:"手机号",prop:"primaryPhone"},{title:"身份证号码",prop:"idenNum"}]},methods:{loadData:function(){li(this.dictData).then(function(e){this.departmentOptions=e}.bind(this)).catch(function(e){console.log(e)}),ri(this.dictData).then(function(e){this.userAccStatusOptions=e}.bind(this)).catch(function(e){console.log(e)}),ui(this.dictData).then(function(e){this.contactTypeOptions=e}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))},getUserList:function(){si(this.listQuery).then(function(e){console.log("success getting user list"),this.userList=e.baseUserVoList,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},initUserInfo:function(){this.userForm={fullName:"",userName:"",position:"",departmentUuid:"",primaryPhone:"",idenNum:"",password:"",checkPass:"",primaryEmail:"",effectiveDate:"",expiryDate:"",userAccStatus:"",uuid:""}},getCommunityList:function(){ta().then(function(e){this.communityList=e}.bind(this)).catch(function(e){console.log(e)})},communitySelected:function(e){this.listQuery.courtUuid=e,this.getUserList()},resetForm:function(){this.listQuery.page=1,this.listQuery.cloudFlag=0,this.listQuery.q_userName="",this.listQuery.q_fullName="",this.listQuery.q_primaryPhone="",this.listQuery.courtUuid="",this.userList=""},handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.getUserList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getUserList()},handleFilter:function(){this.listQuery.page=1,this.listQuery.courtUuid?this.getUserList():this.$message({type:"error",message:"请先选择需要查询的小区！"})},userViewEvent:function(e){console.log("user：查看了第"+e.userName+"行"),this.curUserUuid=e.uuid,ii(e.uuid).then(function(e){this.userForm=e.baseUser,console.log("用户基本信息:"+Bt()(e.baseUser)),console.log("生效日期>>>>>>>>>>>>>>："+e.baseUser.effectiveDate),console.log("失效日期>>>>>>>>："+e.baseUser.expiryDate),this.dialogStatus="查看用户",this.dialogFormVisible=!0,this.dialogCreateFormVisible=!1,this.$refs.userEditVue&&this.$refs.userEditVue.reset(),this.addFlag=!0}.bind(this)).catch(function(e){console.log(".....失败"),console.log(e)})},handleClose:function(){this.addFlag&&this.$refs.userEditVue.changeContanctFlag(),this.initUserInfo(),this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1}}},vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{ref:"listQuery",staticStyle:{"margin-top":"15px"},attrs:{inline:!0,model:e.listQuery}},[a("div",{staticClass:"search-container"},[a("el-form-item",[a("el-select",{staticClass:"user_el-select",attrs:{filterable:"",placeholder:"请选择小区"},on:{"visible-change":e.getCommunityList,change:e.communitySelected},model:{value:e.listQuery.courtUuid,callback:function(t){e.$set(e.listQuery,"courtUuid",t)},expression:"listQuery.courtUuid"}},e._l(e.communityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入用户姓名"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_fullName,callback:function(t){e.$set(e.listQuery,"q_fullName",t)},expression:"listQuery.q_fullName"}})],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入登录ID"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_userName,callback:function(t){e.$set(e.listQuery,"q_userName",t)},expression:"listQuery.q_userName"}})],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入手机号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_primaryPhone,callback:function(t){e.$set(e.listQuery,"q_primaryPhone",t)},expression:"listQuery.q_primaryPhone"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.resetForm}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"table-container"},[a("user-list",{staticStyle:{"margin-top":"10px"},attrs:{tableData:e.userList,params:e.userListParam,viewable:!0,editable:!1,deletable:!1},on:{listenViewEvent:e.userViewEvent}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("user-view",{ref:"userEditVue",attrs:{user:e.userForm,isAddFlag:e.addFlag,userAccStatusSelect:e.userAccStatusOptions,contactTypeSelect:e.contactTypeOptions,departmentSelect:e.departmentOptions,userTypeSelect:e.userTypeOptions,userTypeList:e.userTypeOptions,curUserUuidParm:e.curUserUuid},on:{canelDialogEvent:e.handleClose}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1)],1)},br=[],Dr={render:vr,staticRenderFns:br},yr=Dr,Cr=a("VU/8"),_r=_,wr=Cr(gr,yr,!1,_r,"data-v-406ca7d1",null),Sr=wr.exports,xr={props:{params:void 0,tableData:void 0,editable:!1,deletable:!1,viewable:!1},data:function(){return{}},methods:{handleClickDelete:function(e){this.$emit("listenDeleteEvent",this.tableData[e]),console.log("resourcelist 删除"+e+"行")},handleClickEdit:function(e){this.$emit("listenEditEvent",this.tableData[e]),console.log("resourcelist 编辑"+e+"行")}},created:function(){}},kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.tableData,"max-height":"680"}},[e._l(e.params,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.title,width:e.width,"show-overflow-tooltip":""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"编辑",placement:"top-start"}},[e.editable?a("span",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","margin-right":"10px"},on:{click:function(a){e.handleClickEdit(t.$index)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"删除",placement:"top-start"}},[e.deletable?a("span",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:function(a){e.handleClickDelete(t.$index)}}}):e._e()]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"查看",placement:"top-start"}},[e.viewable?a("span",{staticClass:"el-icon-view",staticStyle:{cursor:"pointer"},on:{click:function(a){e.handleClickEdit(t.$index)}}}):e._e()])]}}])})],2)},Tr=[],Lr={render:kr,staticRenderFns:Tr},Nr=Lr,Vr=a("VU/8"),Ir=Vr(xr,Nr,!1,null,null,null),Er=Ir.exports,Pr={props:{provincesSelect:void 0,appCodeSelectOption:void 0,isAddFlagParm:!1,resourceDeviceGroupVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[],province:void 0,provinceAbbr:void 0,city:void 0,cityAbbr:void 0,district:void 0,districtAbbr:void 0,courtAbbr:void 0,courtName:void 0}},components:{},watch:{},mounted:function(){this.methodsOfUpdate()},data:function(){var e=this;return{formLabelWidth:"120px",meunCodeFlag:!1,listParm:{cloudFlag:"1",resourceType:void 0,resourceName:void 0,uuid:""},rules:{resourceName:[{required:!0,trigger:"blur",validator:function(t,a,i){""===a||void 0===a?i(new Error("请输入区域数据名称")):(e.listParm.resourceType="4",e.listParm.uuid=e.resourceDeviceGroupVue.uuid,e.listParm.resourceName=a,e.validateName(e.listParm),e.meunCodeFlag?i(new Error("区域数据名称已存在，请修改!")):i())}},{max:20,message:"长度不能超过20个字符"}],appCode:[{required:!0,message:"请选择所属应用",trigger:"change"}],province:[{required:!0,message:"请选择省份",trigger:"change"}]},citys:[],districts:[],courts:[],provParams:{}}},methods:{validateName:function(e){Vi(e).then(function(e){console.log("<<<<<checkMenuCode:"+e),this.meunCodeFlag=e}.bind(this)).catch(function(e){console.log(e)})},handleCreate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.resourceDeviceGroupVue.resourceType="4",t.changeProvince(),t.changeCity(),t.changeDistrict(),t.changeCourtName(),console.log("新增区域数据："+Bt()(t.resourceDeviceGroupVue)),t.$emit("createDialogEvent",t.resourceDeviceGroupVue)})},handleUpdate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.resourceDeviceGroupVue.resourceType="4",t.changeProvince(),t.changeCity(),t.changeDistrict(),t.changeCourtName(),console.log("修改区域数据："+Bt()(t.resourceDeviceGroupVue)),t.$emit("saveDialogEvent",t.resourceDeviceGroupVue)})},handelCancel:function(e){this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("cancelDialogEvent")},loadCityData:function(){var e=this;if(""!==e.resourceDeviceGroupVue.city&&(e.resourceDeviceGroupVue.city=""),""!==e.resourceDeviceGroupVue.district&&(e.resourceDeviceGroupVue.district=""),e.citys=[],e.districts=[],e.courts=[],e.provParams.province=this.resourceDeviceGroupVue.province.trim(),Gi(e.provParams).then(function(t){console.log("city -- > "+Bt()(t));for(var a=t,i=0;i<a.length;i++)e.citys.push({label:a[i].city,value:a[i].cityAbbr})}).catch(function(e){console.log(e)}),e.loadCourtsData(),-1===e.courts.indexOf("")){var t={label:"",value:""};e.citys.unshift(t)}},loadDistrictData:function(){var e=this;if(e.districts=[],e.courts=[],e.provParams.province=e.resourceDeviceGroupVue.province.trim(),e.provParams.city=e.resourceDeviceGroupVue.city.trim(),""!==e.resourceDeviceGroupVue.city){if(e.resourceDeviceGroupVue.district="",e.districts=[],Hi(e.provParams).then(function(t){console.log("district -- > "+Bt()(t));for(var a=t,i=0;i<a.length;i++)e.districts.push({label:a[i].district,value:a[i].districtAbbr})}).catch(function(e){console.log(e)}),e.loadCourtsData(),-1===e.courts.indexOf("")){var t={label:"",value:""};e.districts.unshift(t)}}else e.resourceDeviceGroupVue.district=""},loadCourtsData:function(){var e=this;e.provParams.province=e.resourceDeviceGroupVue.province.trim(),e.provParams.city=e.resourceDeviceGroupVue.city.trim(),e.provParams.district=e.resourceDeviceGroupVue.district.trim(),e.resourceDeviceGroupVue.courtName="",ji(e.provParams).then(function(t){e.courts=[];for(var a=t,i=0;i<a.length;i++)e.courts.push({label:a[i].name,value:a[i].nameAbbr,keyValue:a[i].uuid});if(-1===e.courts.indexOf("")){var s={label:"",value:""};e.courts.unshift(s)}}).catch(function(e){console.log(e)})},changeProvince:function(){for(var e=0;e<this.provincesSelect.length;e++){var t=this.provincesSelect[e];if(t.label===this.resourceDeviceGroupVue.province){console.log("ok--changeProvince"),this.resourceDeviceGroupVue.provinceAbbr=t.value;break}}},changeCity:function(){for(var e=0;e<this.citys.length;e++){var t=this.citys[e];if(t.label===this.resourceDeviceGroupVue.city){console.log("ok--changeCity"),this.resourceDeviceGroupVue.cityAbbr=t.value;break}}},changeDistrict:function(){for(var e=0;e<this.districts.length;e++){var t=this.districts[e];if(t.label===this.resourceDeviceGroupVue.district){console.log("ok--changeDistrict"),this.resourceDeviceGroupVue.districtAbbr=t.value;break}}},changeCourtName:function(){for(var e=0;e<this.courts.length;e++){console.log("this.courts:"+Bt()(this.courts)),console.log("this.resourceDeviceGroupVue.courtName:"+this.resourceDeviceGroupVue.courtName);var t=this.courts[e];if(t.label===this.resourceDeviceGroupVue.courtName){console.log("ok--changeCourtName"),this.resourceDeviceGroupVue.courtAbbr=t.value;break}}},methodsOfUpdate:function(){this.loadCityData(),this.loadDistrictData(),this.loadCourtsData()}}},Mr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceDeviceGroupVue",attrs:{inline:!0,model:e.resourceDeviceGroupVue,rules:e.rules}},[a("el-form-item",{attrs:{label:"区域数据名称","label-width":e.formLabelWidth,prop:"resourceName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入区域数据名称"},model:{value:e.resourceDeviceGroupVue.resourceName,callback:function(t){e.$set(e.resourceDeviceGroupVue,"resourceName",t)},expression:"resourceDeviceGroupVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属应用","label-width":e.formLabelWidth,prop:"appCode"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择所属应用"},model:{value:e.resourceDeviceGroupVue.appCode,callback:function(t){e.$set(e.resourceDeviceGroupVue,"appCode",t)},expression:"resourceDeviceGroupVue.appCode"}},e._l(e.appCodeSelectOption,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择省","label-width":e.formLabelWidth,prop:"province"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择省份"},on:{change:e.loadCityData},model:{value:e.resourceDeviceGroupVue.province,callback:function(t){e.$set(e.resourceDeviceGroupVue,"province",t)},expression:"resourceDeviceGroupVue.province"}},e._l(e.provincesSelect,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择市","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择城市"},on:{change:e.loadDistrictData},model:{value:e.resourceDeviceGroupVue.city,callback:function(t){e.$set(e.resourceDeviceGroupVue,"city",t)},expression:"resourceDeviceGroupVue.city"}},e._l(e.citys,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择区","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择区县"},on:{change:e.loadCourtsData},model:{value:e.resourceDeviceGroupVue.district,callback:function(t){e.$set(e.resourceDeviceGroupVue,"district",t)},expression:"resourceDeviceGroupVue.district"}},e._l(e.districts,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择小区","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择小区"},model:{value:e.resourceDeviceGroupVue.courtName,callback:function(t){e.$set(e.resourceDeviceGroupVue,"courtName",t)},expression:"resourceDeviceGroupVue.courtName"}},e._l(e.courts,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",{attrs:{align:"center"}},[a("el-col",{attrs:{align:"center"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handelCancel("resourceDeviceGroupVue")}}},[e._v("取消")]),e._v(" "),e.isAddFlagParm?a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleUpdate("resourceDeviceGroupVue")}}},[e._v("保 存")]):a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCreate("resourceDeviceGroupVue")}}},[e._v("保 存")])],1)])],1)],1)],1)],1)},$r=[],Ur={render:Mr,staticRenderFns:$r},Fr=Ur,Rr=a("VU/8"),zr=Rr(Pr,Fr,!1,null,null,null),Ar=zr.exports,Or={props:{appCodeSelectOption:void 0,isAddFlagParm:void 0,resourceServiceVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]}},data:function(){var e=this;return{formLabelWidth:"120px",meunCodeFlag:!1,listParm:{cloudFlag:"1",resourceType:void 0,resourceName:void 0,uuid:""},rules:{resourceName:[{required:!0,trigger:"blur",validator:function(t,a,i){""===a||void 0===a?i(new Error("请输入服务名称")):(e.listParm.resourceType="3",e.listParm.uuid=e.resourceServiceVue.uuid,e.listParm.resourceName=a,e.validateName(e.listParm),e.meunCodeFlag?i(new Error("服务名称已存在，请修改!")):i())}},{max:20,message:"长度不能超过20个字符"}],appCode:[{required:!0,message:"请选择所属应用",trigger:"blur"}],resourceUrl:[{required:!0,message:"请输入服务URI",trigger:"blur"},{max:100,message:"长度不能超过100个字符"}]}}},methods:{validateName:function(e){Vi(e).then(function(e){console.log("<<<<<checkMenuCode:"+e),this.meunCodeFlag=e}.bind(this)).catch(function(e){console.log(e)})},handleCreate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.resourceServiceVue.resourceType="3",t.$emit("createDialogEvent",t.resourceServiceVue)})},handleUpdate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.resourceServiceVue.resourceType="3",t.$emit("saveDialogEvent",t.resourceServiceVue)})},handelCancel:function(e){this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("cancelDialogEvent")}}},qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceServiceVue",attrs:{inline:!0,model:e.resourceServiceVue,rules:e.rules}},[a("el-form-item",{attrs:{label:"所属应用","label-width":e.formLabelWidth,prop:"appCode"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择所属应用"},model:{value:e.resourceServiceVue.appCode,callback:function(t){e.$set(e.resourceServiceVue,"appCode",t)},expression:"resourceServiceVue.appCode"}},e._l(e.appCodeSelectOption,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"服务名称","label-width":e.formLabelWidth,prop:"resourceName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入服务名称"},model:{value:e.resourceServiceVue.resourceName,callback:function(t){e.$set(e.resourceServiceVue,"resourceName",t)},expression:"resourceServiceVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务URI","label-width":e.formLabelWidth,prop:"resourceUrl"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入服务URI"},model:{value:e.resourceServiceVue.resourceUrl,callback:function(t){e.$set(e.resourceServiceVue,"resourceUrl",t)},expression:"resourceServiceVue.resourceUrl"}})],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",{attrs:{align:"center"}},[a("el-col",{attrs:{align:"center"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handelCancel("resourceServiceVue")}}},[e._v("取消")]),e._v(" "),e.isAddFlagParm?a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleUpdate("resourceServiceVue")}}},[e._v("保 存")]):a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCreate("resourceServiceVue")}}},[e._v("保 存")])],1)])],1)],1)],1)],1)},Br=[],Wr={render:qr,staticRenderFns:Br},Qr=Wr,Gr=a("VU/8"),Hr=Gr(Or,Qr,!1,null,null,null),jr=Hr.exports,Jr={props:{isAddFlagParm:void 0,resourceAppVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]}},data:function(){var e=this;return{formLabelWidth:"120px",meunCodeFlag:!1,appCodeFlag:!1,currentValue:"",listParm:{cloudFlag:"1",resourceType:"",resourceName:"",appCode:"",uuid:""},rules:{resourceName:[{required:!0,trigger:"blur",validator:function(t,a,i){""===a||void 0===a?i(new Error("请输入应用名称")):(e.listParm.resourceType="1",e.listParm.uuid=e.resourceAppVue.uuid,e.listParm.resourceName=a,e.validateName(e.listParm),e.meunCodeFlag?i(new Error("应用名称已存在，请修改!")):i())}},{max:20,message:"长度不能超过20个字符"}],appCode:[{required:!0,validator:function(t,a,i){""===a||void 0===a?i(new Error("请输入应用代码")):(e.listParm.resourceType="1",e.listParm.uuid=e.resourceAppVue.uuid,e.listParm.appCode=a,e.validateCode(e.listParm),e.appCodeFlag?i(new Error("应用代码已存在，请修改!")):(e.isShow=!1,i()))},trigger:"blur"},{max:32,message:"长度不能超过32个字符"}],sort:[{required:!0,validator:function(t,a,i){""===a||void 0===a?i(new Error("请输入数字型排序值")):(console.log(a),e.isValueNumber(a)?a>999?i(new Error("不能超过3位有效数字")):(e.currentValue=a,i()):e.resourceAppVue.sort=e.currentValue)},trigger:"blur"}]}}},methods:{validateName:function(e){Vi(e).then(function(e){console.log("<<<<<checkMenuCode:"+e),this.meunCodeFlag=e}.bind(this)).catch(function(e){console.log(e)})},validateCode:function(e){Ii(e).then(function(e){console.log("<<<<<appCodeFlag:"+e),this.appCodeFlag=e}.bind(this)).catch(function(e){console.log(e)})},handleCreate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.resourceAppVue.resourceType="1",t.$emit("createDialogEvent",t.resourceAppVue)})},handleUpdate:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.resourceAppVue.resourceType="1",t.$emit("saveDialogEvent",t.resourceAppVue)})},handelCancel:function(e){this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("cancelDialogEvent")},isValueNumber:function(e){return/^[0-9]*$/.test(e)}}},Zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceAppVue",attrs:{inline:!0,model:e.resourceAppVue,rules:e.rules}},[a("el-form-item",{attrs:{label:"应用名称","label-width":e.formLabelWidth,prop:"resourceName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入应用名称"},model:{value:e.resourceAppVue.resourceName,callback:function(t){e.$set(e.resourceAppVue,"resourceName",t)},expression:"resourceAppVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用代码","label-width":e.formLabelWidth,prop:"appCode"}},[e.isAddFlagParm?a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入应用代码",disabled:""},model:{value:e.resourceAppVue.appCode,callback:function(t){e.$set(e.resourceAppVue,"appCode",t)},expression:"resourceAppVue.appCode"}}):a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入应用代码"},model:{value:e.resourceAppVue.appCode,callback:function(t){e.$set(e.resourceAppVue,"appCode",t)},expression:"resourceAppVue.appCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"sort"}},[a("el-input",{staticClass:"user_el-input",attrs:{type:"Number","auto-complete":"off",placeholder:"请输入排序序号"},model:{value:e.resourceAppVue.sort,callback:function(t){e.$set(e.resourceAppVue,"sort",t)},expression:"resourceAppVue.sort"}})],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",{attrs:{align:"center"}},[a("el-col",{attrs:{align:"center"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handelCancel("resourceAppVue")}}},[e._v("取消")]),e._v(" "),e.isAddFlagParm?a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleUpdate("resourceAppVue")}}},[e._v("保 存")]):a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCreate("resourceAppVue")}}},[e._v("保 存")])],1)])],1)],1)],1)],1)},Kr=[],Yr={render:Zr,staticRenderFns:Kr},Xr=Yr,en=a("VU/8"),tn=en(Jr,Xr,!1,null,null,null),an=tn.exports,sn={props:{appCodeSelectOption:void 0,isAddFlagParm:void 0,resourceMenuVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]},appCodeParm:void 0},components:{},mounted:function(){this.initMenuTree(this.appCodeParm)},data:function(){var e=this,t=function(t,a,i){""===a||void 0===a?i(new Error("请输入数字型排序值")):(console.log(a),e.isValueNumber(a)?a>999?i(new Error("不能超过3位有效数字")):(e.currentValue=a,i()):e.resourceMenuVue.sort=e.currentValue)},a=function(e,t,a){""===t||void 0===t?a(new Error("请选择所属应用")):a()};return{showMenuDialog:!1,menuTreeData:void 0,formLabelWidth:"120px",currentValue:"",defaultProps:{children:"children",label:"resourceName"},rules:{resourceName:[{required:!0,trigger:"blur",validator:function(e,t,a){""===t||void 0===t?a(new Error("请输入资源名称")):a()}},{max:20,message:"长度不能超过20个字符"}],appCode:[{required:!0,validator:a,trigger:"blur"}],sort:[{required:!0,validator:t,trigger:"blur"}],resourceUrl:[{required:!0,message:"请输入资源URI",trigger:"blur"},{max:100,message:"长度不能超过100个字符"}]}}},methods:{_selectMenuTree:function(){this.showMenuDialog=!0},getCheckedNodes:function(){this.resourceMenuVue.parentResourceUuid=this.treeUuid,this.resourceMenuVue.parentResourceName=this.treeName,this.parentCode=this.treeId,this.showMenuDialog=!1},changeAppCode:function(){""!==this.resourceMenuVue.appCode&&(console.log("菜单树正在查询中....."),this.resourceMenuVue.parentResourceName="",this.resourceMenuVue.parentResourceUuid="",this.getMenuTree(this.resourceMenuVue.appCode))},initMenuTree:function(e){e&&this.getMenuTree(JSON.parse(Bt()(e)))},handleNodeClick:function(e,t,a){this.treeId=t.data.menuCode,this.treeName=t.data.resourceName,this.treeUuid=t.data.uuid,console.log("this.treeId:"+this.treeId),console.log("this.treeName:"+this.treeName)},getMenuTree:function(e){console.log("菜单树正在查询中...appCodeParm.."+JSON.parse(Bt()(e))),Mi(e).then(function(e){console.log("-----result-----"+Bt()(e)),this.menuTreeData=e,console.log("-----menuTreeData-----"+Bt()(this.menuTreeData))}.bind(this)).catch(function(e){console.log(e)})},_cleanParentResource:function(){this.resourceMenuVue.parentResourceName="",this.resourceMenuVue.parentResourceUuid=""},handleCreate:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(!t.resourceMenuVue.button||void 0!==t.resourceMenuVue.parentResourceName&&""!==t.resourceMenuVue.parentResourceName?(t.resourceMenuVue.resourceType="2",void t.$emit("createDialogEvent",t.resourceMenuVue)):(t.$msgbox({title:"消息",message:"由于打开了【是否按钮】，请选择上级菜单"}),!1))})},handleUpdate:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(!t.resourceMenuVue.button||void 0!==t.resourceMenuVue.parentResourceName&&""!==t.resourceMenuVue.parentResourceName?(t.resourceMenuVue.resourceType="2",void t.$emit("saveDialogEvent",t.resourceMenuVue)):(t.$msgbox({title:"消息",message:"由于打开了【是否按钮】，请选择上级菜单"}),!1))})},handelCancel:function(e){this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("cancelDialogEvent")},isValueNumber:function(e){return/^[0-9]*$/.test(e)}}},on=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceMenuVue",attrs:{inline:!0,model:e.resourceMenuVue,rules:e.rules}},[a("el-form-item",{attrs:{label:"资源名称","label-width":e.formLabelWidth,prop:"resourceName"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入资源名称"},model:{value:e.resourceMenuVue.resourceName,callback:function(t){e.$set(e.resourceMenuVue,"resourceName",t)},expression:"resourceMenuVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源代码","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入资源代码"},model:{value:e.resourceMenuVue.menuCode,callback:function(t){e.$set(e.resourceMenuVue,"menuCode",t)},expression:"resourceMenuVue.menuCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源URI","label-width":e.formLabelWidth,prop:"resourceUrl"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入资源URI"},model:{value:e.resourceMenuVue.resourceUrl,callback:function(t){e.$set(e.resourceMenuVue,"resourceUrl",t)},expression:"resourceMenuVue.resourceUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ICON","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入ICON"},model:{value:e.resourceMenuVue.icon,callback:function(t){e.$set(e.resourceMenuVue,"icon",t)},expression:"resourceMenuVue.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属应用","label-width":e.formLabelWidth,prop:"appCode"}},[e.isAddFlagParm?a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择所属应用",disabled:""},model:{value:e.resourceMenuVue.appCode,callback:function(t){e.$set(e.resourceMenuVue,"appCode",t)},expression:"resourceMenuVue.appCode"}},e._l(e.appCodeSelectOption,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})})):a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择所属应用"},on:{change:e.changeAppCode},model:{value:e.resourceMenuVue.appCode,callback:function(t){e.$set(e.resourceMenuVue,"appCode",t)},expression:"resourceMenuVue.appCode"}},e._l(e.appCodeSelectOption,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"上级菜单","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off",placeholder:"请选择上级菜单",disabled:!0},model:{value:e.resourceMenuVue.parentResourceName,callback:function(t){e.$set(e.resourceMenuVue,"parentResourceName",t)},expression:"resourceMenuVue.parentResourceName"}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"auto-complete":"off",placeholder:"请选择上级菜单"},model:{value:e.resourceMenuVue.parentResourceUuid,callback:function(t){e.$set(e.resourceMenuVue,"parentResourceUuid",t)},expression:"resourceMenuVue.parentResourceUuid"}})],1),e._v(" "),a("el-button",{on:{click:e._selectMenuTree}},[e._v("选择")]),e._v(" "),a("el-button",{on:{click:e._cleanParentResource}},[e._v("清除")]),e._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"sort"}},[a("el-input",{staticClass:"user_el-input",attrs:{type:"Number","auto-complete":"off",placeholder:"请输入排序序号"},model:{value:e.resourceMenuVue.sort,callback:function(t){e.$set(e.resourceMenuVue,"sort",t)},expression:"resourceMenuVue.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否按钮","label-width":e.formLabelWidth}},[a("el-switch",{model:{value:e.resourceMenuVue.button,callback:function(t){e.$set(e.resourceMenuVue,"button",t)},expression:"resourceMenuVue.button"}})],1),e._v(" "),a("el-dialog",{attrs:{title:"选择菜单",visible:e.showMenuDialog,modal:!1,"modal-append-to-body":!0,width:"40%"},on:{"update:visible":function(t){e.showMenuDialog=t}}},[a("el-tree",{ref:"tree",attrs:{data:e.menuTreeData,props:e.defaultProps,"node-key":"uuid","highlight-current":"","default-expand-all":""},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",{attrs:{align:"right"}},[a("el-col",{attrs:{align:"right"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.getCheckedNodes}},[e._v("确 定")])],1)])],1)],1)],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",{attrs:{align:"center"}},[a("el-col",{attrs:{align:"center"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.handelCancel("resourceMenuVue")}}},[e._v("取消")]),e._v(" "),e.isAddFlagParm?a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleUpdate("resourceMenuVue")}}},[e._v("保 存")]):a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.handleCreate("resourceMenuVue")}}},[e._v("保 存")])],1)])],1)],1)],1)],1)},ln=[],rn={render:on,staticRenderFns:ln},nn=rn,cn=a("VU/8"),dn=cn(sn,nn,!1,null,null,null),un=dn.exports,pn={props:{resourceUuidValue:void 0,resourceType:void 0},watch:{resourceRoleDetailData:function(e){console.log("watch: resourceRoleDetailData!!!!!!!!!!!!!!!!"),console.log(e)}},mounted:function(){this.listQuery.resourceUuid=this.resourceUuidValue},data:function(){return{resourceRoleDetailData:void 0,formLabelWidth:"120px",selectRole:"",authority:{resourceUuid:"",roleUuid:""},roleDeviceAuthorityRequestVo:{resourceUuidList:void 0,actionTypeList:void 0,roleUuid:void 0},roleSelectOptions:void 0,tmpRoleList:void 0,total:0,listQuery:{page:1,limit:5,resourceUuid:""}}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.listQuery.resourceUuid=this.resourceUuidValue,this.handResourceRoleList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.resourceUuid=this.resourceUuidValue,this.handResourceRoleList(this.listQuery)},handResourceRoleList:function(e){Ui(e).then(function(e){console.log("<<<<<getResourceRoleList:"+Bt()(e)),this.resourceRoleDetailData=e.authorityExt,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},handResourceRoleSelect:function(){Ma(1).then(function(e){this.tmpRoleList=e,console.log("this.tmpRoleList"+Bt()(e)),Fi(this.resourceUuidValue).then(function(e){var t=e.authorityExt;if(console.log("roleFilterList:"+Bt()(e.authorityExt)),e.pageCount>0)for(var a=0;a<t.length;a++)this.disableRole(t[a].roleUuid);this.roleSelectOptions=this.tmpRoleList.filter(function(e){return!e.isDisabled})}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},disableRole:function(e){console.log("roleUuid:"+e);for(var t=0;t<this.tmpRoleList.length;t++)e===this.tmpRoleList[t].uuid&&(this.tmpRoleList[t].isDisabled=!0,console.log("success"))},saveResourceRole:function(e){var t=this;this.authority.resourceUuid=this.resourceUuidValue,this.authority.roleUuid=e,console.log("this.authority.resourceUuid:"+this.authority.resourceUuid),this.selectRole="",Ri(this.authority).then(function(){t.listQuery.resourceUuid=t.resourceUuidValue,t.handResourceRoleList(t.listQuery),t.handResourceRoleSelect(),t.$message({message:"保存成功",type:"success"})})},handleDelete:function(e){var t=this,a=this.resourceRoleDetailData[e];this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("移除操作"),t.delete(a.uuid,e)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){console.log("移除操作"),zi(e).then(function(t){console.log(e),this.listQuery.resourceUuid=this.resourceUuidValue,this.handResourceRoleList(this.listQuery),this.handResourceRoleSelect(),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){console.log(e)})}}},mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"authority",attrs:{model:e.authority,inline:!0}},[a("el-form-item",{attrs:{label:"添加角色"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择需要添加的角色",filterable:""},on:{change:e.saveResourceRole},model:{value:e.selectRole,callback:function(t){e.selectRole=t},expression:"selectRole"}},e._l(e.roleSelectOptions,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.roleName,value:e.uuid}})}))],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourceRoleDetailData,"max-height":"580","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"320"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"角色说明",width:"478"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},attrs:{content:"删除"},on:{click:function(a){e.handleDelete(t.$index)}}})]}}])})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},hn=[],fn={render:mn,staticRenderFns:hn},gn=fn,vn=a("VU/8"),bn=vn(pn,gn,!1,null,null,null),Dn=bn.exports,yn={props:{isAddFlag:!1,tableData:void 0,provincesOptions:void 0,resource:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[],province:void 0,provinceAbbr:void 0,city:void 0,cityAbbr:void 0,district:void 0,districtAbbr:void 0,courtAbbr:void 0,courtName:void 0},resourceTypeSelect:void 0,appCodeSelect:void 0},components:{resourceRoleList:Dn,resourceMenu:un,resourceApp:an,resourceService:jr,resourceDeviceGroup:Ar},mounted:function(){this.handleChange(this.resource.resourceType),this.appCodeValue=this.resource.appCode},watch:{resource:function(e){console.log("watch: resource!!!!!!!!!!!!!!!!"),this.subActiveName="0",this.gridResource=!0,this.gridResourceRole=!1}},data:function(){return{subActiveName:"0",formLabelWidth:"120px",gridResource:!0,gridResourceRole:!1,_resourceType:"",selectedVaue:{},showDialog:!1,curResourceType:void 0,expandedKeys:void 0,menuTreeData:void 0,curResourceUuid:void 0,treeId:void 0,treeName:void 0,treeUuid:void 0,showApplication:!1,showMenu:!1,showService:!1,showDeviceGroup:!1,showDevice:!1,meunCodeFlag:!1,parentCode:"",listQuery:{page:1,limit:5,resourceUuid:""},appCodeValue:void 0}},methods:{handleSubTabClick:function(e,t){"0"===e.name?(this.gridResource=!0,this.gridResourceRole=!1,this.handleChange(this.resource.resourceType)):(this.initCreateResource(),this.gridResource=!1,this.gridResourceRole=!0,this.curResourceUuid=this.resource.uuid,this.listQuery.resourceUuid=this.resource.uuid,this.curResourceType=this.resource.resourceType,console.log("this.listQuery:"+Bt()(this.listQuery)),this.$refs.resourceRoleVue.handResourceRoleList(this.listQuery),this.$refs.resourceRoleVue.handResourceRoleSelect(this.listQuery))},handleChange:function(e){"1"===e?(this.showApplication=!0,this.showMenu=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1):"2"===e?(this.showMenu=!0,this.showApplication=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1):"3"===e?(this.showService=!0,this.showMenu=!1,this.showApplication=!1,this.showDeviceGroup=!1,this.showDevice=!1):"4"===e&&(this.showDeviceGroup=!0,this.showService=!1,this.showMenu=!1,this.showApplication=!1,this.showDevice=!1,this.$refs.resourceMenuVue&&this.$refs.resourceDeviceGroupVue.methodsOfUpdate())},initCreateResource:function(){this.showApplication=!1,this.showMenu=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1},create:function(e){this.$emit("gridCreateEvent",e)},update:function(e){this.$emit("gridEditEvent",e)},cancelEvent:function(){this.$emit("canelDialogEvent")},initMenuTree:function(e){this.$refs.resourceMenuVue&&this.$refs.resourceMenuVue.initMenuTree(e)}}},Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"resourcesEdit"}},[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[e.isAddFlag?a("el-tab-pane",{attrs:{label:"资源概要",name:"0"}}):e._e(),e._v(" "),e.isAddFlag?a("el-tab-pane",{attrs:{label:"拥有该资源权限的角色",name:"1"}}):e._e()],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.gridResource,expression:"gridResource"}],ref:"resource",attrs:{inline:!0,model:e.resource}},[a("el-form-item",{attrs:{label:"资源类别","label-width":e.formLabelWidth,prop:"resourceType"}},[e.isAddFlag?a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择",disabled:""},model:{value:e.resource.resourceType,callback:function(t){e.$set(e.resource,"resourceType",t)},expression:"resource.resourceType"}},e._l(e.resourceTypeSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})})):e._e()],1)],1),e._v(" "),e.showMenu?a("resource-menu",{ref:"resourceMenuVue",attrs:{appCodeSelectOption:e.appCodeSelect,isAddFlagParm:e.isAddFlag,appCodeParm:e.appCodeValue,resourceMenuVue:e.resource},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e(),e._v(" "),e.showApplication?a("resource-app",{ref:"resourceAppVue",attrs:{isAddFlagParm:e.isAddFlag,resourceAppVue:e.resource},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e(),e._v(" "),e.showService?a("resource-service",{ref:"resourceServiceVue",attrs:{isAddFlagParm:e.isAddFlag,appCodeSelectOption:e.appCodeSelect,resourceServiceVue:e.resource},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e(),e._v(" "),e.showDeviceGroup?a("resource-device-group",{ref:"resourceDeviceGroupVue",attrs:{isAddFlagParm:e.isAddFlag,provincesSelect:e.provincesOptions,resourceDeviceGroupVue:e.resource,appCodeSelectOption:e.appCodeSelect},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridResourceRole,expression:"gridResourceRole"}]},[a("div",{staticClass:"flex-1"},[a("resource-role-list",{ref:"resourceRoleVue",attrs:{resourceUuidValue:e.curResourceUuid,resourceType:e.curResourceType}})],1)])],1)},_n=[],wn={render:Cn,staticRenderFns:_n},Sn=wn,xn=a("VU/8"),kn=xn(yn,Sn,!1,null,null,null),Tn=kn.exports,Ln={props:{isAddFlag:!1,tableData:void 0,defaultResourceTypeParm:void 0,resourceTypeSelect:void 0,appCodeSelect:void 0,provincesOptions:void 0},components:{resourceMenu:un,resourceApp:an,resourceService:jr,resourceDeviceGroup:Ar},mounted:function(){this.handleChange(this.defaultResourceTypeParm)},data:function(){return{subActiveName:"0",formLabelWidth:"120px",gridResource:!0,_resourceType:"",selectedVaue:{},showDialog:!1,curResourceType:void 0,resource:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[],province:void 0,provinceAbbr:void 0,city:void 0,cityAbbr:void 0,district:void 0,districtAbbr:void 0,courtAbbr:void 0,courtName:void 0},expandedKeys:void 0,menuTreeData:void 0,curResourceUuid:void 0,treeId:void 0,treeName:void 0,treeUuid:void 0,showApplication:!1,showMenu:!1,showService:!1,showDeviceGroup:!1,showDevice:!1,meunCodeFlag:!1,parentCode:"",listQuery:{page:1,limit:5,resourceUuid:""},appCodeValue:void 0}},methods:{handleChange:function(e){"1"===e?(this.showApplication=!0,this.showMenu=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1):"2"===e?(this.showMenu=!0,this.showApplication=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1):"3"===e?(this.showService=!0,this.showMenu=!1,this.showApplication=!1,this.showDeviceGroup=!1,this.showDevice=!1):"4"===e&&(this.showDeviceGroup=!0,this.showService=!1,this.showMenu=!1,this.showApplication=!1,this.showDevice=!1),this.initResource(e)},initResource:function(e){this.resource={resourceType:e,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[],province:void 0,provinceAbbr:void 0,city:void 0,cityAbbr:void 0,district:void 0,districtAbbr:void 0,courtAbbr:void 0,courtName:void 0}},create:function(e){this.$emit("gridCreateEvent",e)},update:function(e){this.$emit("gridEditEvent",e)},cancelEvent:function(){this.resource.resourceType="1",this.$emit("canelDialogEvent")},initMenuTree:function(e){this.$refs.resourceMenuVue&&this.$refs.resourceMenuVue.initMenuTree(e)}}},Nn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"resourcesEdit"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.gridResource,expression:"gridResource"}],ref:"resource",attrs:{inline:!0,model:e.resource}},[a("el-form-item",{attrs:{label:"资源类别","label-width":e.formLabelWidth,prop:"resourceType"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择"},on:{change:e.handleChange},model:{value:e.resource.resourceType,callback:function(t){e.$set(e.resource,"resourceType",t)},expression:"resource.resourceType"}},e._l(e.resourceTypeSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1)],1),e._v(" "),e.showMenu?a("resource-menu",{ref:"resourceMenuVue",attrs:{appCodeSelectOption:e.appCodeSelect,isAddFlagParm:e.isAddFlag,appCodeParm:e.appCodeValue,resourceMenuVue:e.resource},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e(),e._v(" "),e.showApplication?a("resource-app",{ref:"resourceAppVue",attrs:{isAddFlagParm:e.isAddFlag,resourceAppVue:e.resource},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e(),e._v(" "),e.showService?a("resource-service",{ref:"resourceServiceVue",attrs:{isAddFlagParm:e.isAddFlag,appCodeSelectOption:e.appCodeSelect,resourceServiceVue:e.resource},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e(),e._v(" "),e.showDeviceGroup?a("resource-device-group",{ref:"resourceDeviceGroupVue",attrs:{isAddFlagParm:e.isAddFlag,appCodeSelectOption:e.appCodeSelect,resourceDeviceGroupVue:e.resource,provincesSelect:e.provincesOptions},on:{saveDialogEvent:e.update,createDialogEvent:e.create,cancelDialogEvent:e.cancelEvent}}):e._e()],1)},Vn=[],In={render:Nn,staticRenderFns:Vn},En=In,Pn=a("VU/8"),Mn=Pn(Ln,En,!1,null,null,null),$n=Mn.exports,Un={data:function(){return{provinces:[],resourceList:[],defaultResourceType:void 0,resourceListParam:void 0,total:0,dialogFormVisible:!1,dialogCreateFormVisible:!1,dialogStatus:void 0,resourceForm:{resourceType:"",resourceName:"",resourceUrl:"",appCode:"",serviceId:"",menuCode:"",parentResourceUuid:"",parentResourceName:"",parentResourceCode:"",deviceCode:"",deviceType:"",providerCode:"",houseOrgCode:"",logicalAddress:"",uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[],province:void 0,provinceAbbr:void 0,city:void 0,cityAbbr:void 0,district:void 0,districtAbbr:void 0,courtAbbr:void 0,courtName:void 0},dictData:{resourceTypeDict:"CLOUD_RESC_TYPE",actionType:"CLOUD_ACT_TYPE"},listQuery:{page:1,limit:10,cloudFlag:1,q_resourceType:"2",q_resourceName:"",q_courtUuid:"",q_appCode:""},formLabelWidth:"120px",resourceTypeOptions:void 0,appCodeOptions:void 0,addFlag:!1,menuListParm:void 0,appCodeListParm:void 0,serviceListParm:void 0,deviceGroupListParm:void 0,labelTitle:void 0,appLabelTitle:void 0,showQueryParm:!0,showQueryApp:!0}},components:{resourceList:Er,resourceEdit:Tn,resourceCreate:$n},mounted:function(){this.loadSelectData(),this.loadData(),this.initListParm(),this.loadProvinceData(),this.labelTitle="菜单名称",this.appLabelTitle="所属应用"},methods:{initListParm:function(){this.menuListParm=[{title:"所属应用",prop:"appName",width:180},{title:"菜单名称",prop:"resourceName",width:210},{title:"菜单代码",prop:"menuCode",width:270},{title:"URI",prop:"resourceUrl",width:250},{title:"ICON",prop:"icon",width:110},{title:"类型",prop:"button",width:77},{title:"排序",prop:"sort",width:77},{title:"已授权角色",prop:"roleNames",width:380}],this.appCodeListParm=[{title:"应用名称",prop:"appName"},{title:"应用代码",prop:"appCode"},{title:"排序",prop:"sort"},{title:"已授权角色",prop:"roleNames"}],this.serviceListParm=[{title:"所属应用",prop:"appName"},{title:"服务名称",prop:"resourceName"},{title:"服务URI",prop:"resourceUrl"},{title:"已授权角色",prop:"roleNames"}],this.deviceGroupListParm=[{title:"所属应用",prop:"appName"},{title:"区域数据名称",prop:"resourceName"},{title:"省份",prop:"province"},{title:"市",prop:"city"},{title:"区县",prop:"district"},{title:"小区",prop:"courtName"},{title:"已授权角色",prop:"roleNames"}],this.resourceListParam=this.menuListParm},loadData:function(){_i(this.listQuery).then(function(e){console.log("get data by page:"+Bt()(e.resource));var t="";console.log("result.resource.length>>>>>>>>>>>>>>>>>:"+e.resource.length);for(var a=0;a<e.resource.length;a++)t=e.resource[a].button,e.resource[a].button=!1===t?"菜单":"按钮";this.resourceList=e.resource,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)}),wi(1).then(function(e){console.log("<<<<<getAppCodeOptions:"+Bt()(e)),this.appCodeOptions=e}.bind(this)).catch(function(e){console.log(e)})},initData:function(){this.listQuery.q_resourceName=""},loadSelectData:function(){Ni(this.dictData).then(function(e){console.log("<<<<<resourceTypeOptions:"+Bt()(e)),this.resourceTypeOptions=e}.bind(this)).catch(function(e){console.log(e)})},initResourceInfo:function(){this.resourceForm={resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:void 0}},resetForm:function(){this.listQuery={page:1,limit:10,cloudFlag:1,q_resourceType:"2",q_resourceName:"",q_courtUuid:"",q_appCode:""},this.handleFilter()},handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.loadData()},handleCurrentChange:function(e){this.listQuery.page=e,this.loadData()},handleFilter:function(){"1"===this.listQuery.q_resourceType?(this.showQueryParm=!1,this.showQueryApp=!0,this.resourceListParam=this.appCodeListParm,this.listQuery.q_resourceName="",this.appLabelTitle="应用名称"):"2"===this.listQuery.q_resourceType?(this.labelTitle="菜单名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.resourceListParam=this.menuListParm):"3"===this.listQuery.q_resourceType?(this.labelTitle="服务名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.resourceListParam=this.serviceListParm):"4"===this.listQuery.q_resourceType&&(this.labelTitle="区域数据名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!1,this.resourceListParam=this.deviceGroupListParm),this.listQuery.page=1,this.loadData()},handleCreate:function(){this.initResourceInfo(),this.defaultResourceType=this.listQuery.q_resourceType,this.$refs.resourCreateVue&&this.$refs.resourCreateVue.handleChange(this.defaultResourceType),this.dialogStatus="添加资源",this.dialogFormVisible=!1,this.dialogCreateFormVisible=!0,this.addFlag=!1},resourceDeleteEvent:function(e){var t=this;this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delete(e.uuid)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delete:function(e){xi(e).then(function(t){console.log(e),this.handleFilter(),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){this.$message.error(e.response.data.message),console.log("error:"+Bt()(e.response.data.message))})},resourceEditEvent:function(e){console.log("resource：编辑了第"+e.resourceName+"行"),console.log("resource："+Bt()(e)),Ti(e.uuid).then(function(e){console.log("resourceForm:"+Bt()(e)),this.resourceForm=e,e.parentResource&&(this.resourceForm.parentResourceUuid=e.parentResource.uuid,this.resourceForm.parentResourceName=e.parentResource.resourceName,this.resourceForm.parentResourceCode=e.parentResource.menuCode),this.$refs.resourceEditVue&&(this.$refs.resourceEditVue.handleChange(this.resourceForm.resourceType),this.$refs.resourceEditVue.initMenuTree(e.appCode)),this.dialogStatus="编辑资源",this.dialogFormVisible=!0,this.dialogCreateFormVisible=!1,this.addFlag=!0}.bind(this)).catch(function(e){console.log(e)})},resourceSaveEvent:function(e){console.log("resource"+e.resourceName+"行"),ki(e).then(function(e){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.handleFilter(),this.$message({message:"保存成功！",type:"success"})}.bind(this)).catch(function(e){console.log(e)})},resourceCreateEvent:function(e){Si(e).then(function(e){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,console.log("createResource:"+Bt()(e)),this.handleFilter(),this.$message({message:"保存成功！",type:"success"})}.bind(this)).catch(function(e){console.log(e)})},handleClose:function(){console.log("关闭窗口。。。。"),this.initResourceInfo(),this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.handleFilter()},changeResourceType:function(){this.defaultResourceType=this.listQuery.q_resourceType,"1"===this.listQuery.q_resourceType?(this.showQueryParm=!1,this.showQueryApp=!0,this.listQuery.q_resourceName="",this.listQuery.q_appCode="",this.appLabelTitle="应用名称"):"2"===this.listQuery.q_resourceType?(this.labelTitle="菜单名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.listQuery.q_appCode="",this.listQuery.q_resourceName=""):"3"===this.listQuery.q_resourceType?(this.labelTitle="服务名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.listQuery.q_appCode="",this.listQuery.q_resourceName=""):"4"===this.listQuery.q_resourceType&&(this.labelTitle="区域数据名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!1,this.listQuery.q_appCode="",this.listQuery.q_resourceName="")},loadProvinceData:function(){Qi().then(function(e){this.provinces=[],console.log("province --- > "+Bt()(e));for(var t=e,a=0;a<t.length;a++)this.provinces.push({label:t[a].province,value:t[a].provinceAbbr})}.bind(this)).catch(function(e){console.log(e)})}}},Fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{ref:"listQuery",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.listQuery}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"资源类别"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择"},on:{change:e.changeResourceType},model:{value:e.listQuery.q_resourceType,callback:function(t){e.$set(e.listQuery,"q_resourceType",t)},expression:"listQuery.q_resourceType"}},e._l(e.resourceTypeOptions,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),e.showQueryApp?a("el-form-item",[a("span",{staticClass:"sub-title",staticStyle:{"margin-left":"24px"}},[e._v(e._s(e.appLabelTitle)+"  ")]),e._v(" "),a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择应用"},model:{value:e.listQuery.q_appCode,callback:function(t){e.$set(e.listQuery,"q_appCode",t)},expression:"listQuery.q_appCode"}},e._l(e.appCodeOptions,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1):e._e(),e._v(" "),e.showQueryParm?a("el-form-item",[a("span",{staticClass:"sub-title",staticStyle:{"margin-left":"24px"}},[e._v(e._s(e.labelTitle)+"  ")]),e._v(" "),a("el-input",{staticClass:"user_el-input",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_resourceName,callback:function(t){e.$set(e.listQuery,"q_resourceName",t)},expression:"listQuery.q_resourceName"}})],1):e._e(),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.resetForm("listQuery")}}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleCreate}},[e._v("添加")])],1)]),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"table-container"},[a("resource-list",{staticStyle:{"margin-top":"15px"},attrs:{tableData:e.resourceList,params:e.resourceListParam,editable:!0,deletable:!0,viewable:!1},on:{listenDeleteEvent:e.resourceDeleteEvent,listenEditEvent:e.resourceEditEvent}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("resource-edit",{ref:"resourceEditVue",attrs:{tableData:e.resourceList,resource:e.resourceForm,resourceTypeSelect:e.resourceTypeOptions,isAddFlag:e.addFlag,appCodeSelect:e.appCodeOptions,provincesOptions:e.provinces},on:{gridDeleteEvent:e.resourceDeleteEvent,gridEditEvent:e.resourceSaveEvent,gridCreateEvent:e.resourceCreateEvent,canelDialogEvent:e.handleClose}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogCreateFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreateFormVisible=t}}},[a("resource-create",{ref:"resourCreateVue",attrs:{resourceTypeSelect:e.resourceTypeOptions,isAddFlag:e.addFlag,appCodeSelect:e.appCodeOptions,defaultResourceTypeParm:e.defaultResourceType,provincesOptions:e.provinces},on:{gridDeleteEvent:e.resourceDeleteEvent,gridEditEvent:e.resourceSaveEvent,gridCreateEvent:e.resourceCreateEvent,canelDialogEvent:e.handleClose}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1)],1)},Rn=[],zn={render:Fn,staticRenderFns:Rn},An=zn,On=a("VU/8"),qn=w,Bn=On(Un,An,!1,qn,null,null),Wn=Bn.exports,Qn={props:{departmentTypeSelect:void 0},methods:{getDepartmentList:function(e){li(e).then(function(e){this.departmentSelect=e}.bind(this)).catch(function(e){console.log(e)})},deptTypeSelected:function(e){this.department.parentDepartmentUuid="",this.dictData.departmentType=this.department.departmentType,this.getDepartmentList(this.dictData)},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridCreateEvent",t.department)})},cancelEvent:function(e){console.log("cancelEvent"),this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("canelDialogEvent")},initParentDepartmentUuid:function(e){console.log("<<<<<<<<<<<<<<<<<<<<<::"+e),this.department={departmentName:void 0,parentDepartmentUuid:e,remark:void 0}},initDepartmentInfo:function(){this.department={departmentName:void 0,parentDepartmentUuid:"",departmentType:void 0,remark:void 0}}},data:function(){return{departmentSelect:void 0,formLabelWidth:"120px",department:{departmentName:void 0,parentDepartmentUuid:"",departmentType:void 0,remark:void 0},rules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"blur"},{max:64,message:"长度不能超过64个字符"}],departmentType:[{required:!0,message:"请选择部门类别",trigger:"change"}]},dictData:{cloudFlag:1,departmentType:""}}}},Gn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"department",attrs:{model:e.department,rules:e.rules,inline:!0}},[a("el-form-item",{attrs:{label:"用户类型",prop:"departmentType","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择用户类型"},on:{change:e.deptTypeSelected},model:{value:e.department.departmentType,callback:function(t){e.$set(e.department,"departmentType",t)},expression:"department.departmentType"}},e._l(e.departmentTypeSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"部门名称",prop:"departmentName","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{placeholder:"请输入部门名称"},model:{value:e.department.departmentName,callback:function(t){e.$set(e.department,"departmentName",t)},expression:"department.departmentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级部门","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",model:{value:e.department.parentDepartmentUuid,callback:function(t){e.$set(e.department,"parentDepartmentUuid",t)},expression:"department.parentDepartmentUuid"}},e._l(e.departmentSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid}})}))],1)],1),e._v(" "),a("div",{staticClass:"el-textarea"},[a("el-form-item",{attrs:{label:"部门说明","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入部门说明"},model:{value:e.department.remark,callback:function(t){e.$set(e.department,"remark",t)},expression:"department.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",[a("el-col",[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.cancelEvent("department")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.create("department")}}},[e._v("保 存")])],1)])],1)],1)],1)],1)},Hn=[],jn={render:Gn,staticRenderFns:Hn},Jn=jn,Zn=a("VU/8"),Kn=S,Yn=Zn(Qn,Jn,!1,Kn,"data-v-56b15b0e",null),Xn=Yn.exports,ec={props:{departmentUuidValue:void 0,departmentTypeValue:void 0},data:function(){return{directDepartmentData:void 0,associtedUserRoleAllData:[],directDepartmentListSelect:void 0,selectedName:"",total:0,listQuery:{page:1,limit:5,cloudFlag:1,departmentUuid:"",departmentType:""},directDepartmentInVo:{parentDepartmentUuid:"",uuid:""}}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.departmentType=this.departmentTypeValue,this.findDirectDepartmentList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.departmentType=this.departmentTypeValue,this.findDirectDepartmentList(this.listQuery)},findDirectDepartmentList:function(e){ka(e).then(function(e){this.directDepartmentData=e.childrenDepartmentVoList,this.total=e.pageCount,Sa(this.departmentUuidValue,1,this.departmentTypeValue).then(function(e){if(this.directDepartmentListSelect=e,this.directDepartmentData)for(var t=0;t<this.directDepartmentData.length;t++)this.disabledChangeOption(this.directDepartmentData[t].uuid)}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},boxSelected:function(e){this.directDepartmentInVo.parentDepartmentUuid=this.departmentUuidValue,this.directDepartmentInVo.uuid=e,Ta(this.directDepartmentInVo).then(function(e){this.selectedName="",this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.departmentType=this.departmentTypeValue,this.findDirectDepartmentList(this.listQuery),this.$emit("gridDirecDepCreateEvent")}.bind(this)).catch(function(e){console.log(e)})},handleChangeSelectedName:function(){this.selectedName=""},disabledChangeOption:function(e){for(var t=0;t<this.directDepartmentListSelect.length;t++)if(e===this.directDepartmentListSelect[t].uuid){console.log("禁用:"+e),this.directDepartmentListSelect[t].disabled=!0;break}}}},tc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",[a("el-form-item",{attrs:{label:"添加下级部门"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择需要添加的部门"},on:{change:e.boxSelected},model:{value:e.selectedName,callback:function(t){e.selectedName=t},expression:"selectedName"}},e._l(e.directDepartmentListSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid,disabled:e.disabled,filterable:""}})}))],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.directDepartmentData,"max-height":"580","element-loading-text":"拼命加载中",id:"directTable"}},[a("el-table-column",{attrs:{prop:"departmentName",label:"部门名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentTypeName",label:"部门类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentDepartmentName",label:"上级部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"childrenDepartments",label:"下级部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directUsers",label:"直属用户"}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},ac=[],ic={render:tc,staticRenderFns:ac},sc=ic,oc=a("VU/8"),lc=x,rc=oc(ec,sc,!1,lc,"data-v-43497c5e",null),nc=rc.exports,cc={props:{departmentUuidValue:void 0,departmentTypeValue:void 0},data:function(){return{deleteImg:a("y55A"),directUserData:void 0,associtedUserRoleAllData:[],directUserListSelect:void 0,directAllUserData:void 0,selectedName:"",total:0,listQuery:{page:1,limit:5,cloudFlag:1,departmentUuid:"",departmentType:""},directUserInVo:{parentDepartmentUuid:"",uuid:""}}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.departmentType=this.departmentTypeValue,this.findDirectUserList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.departmentType=this.departmentTypeValue,this.findDirectUserList(this.listQuery)},findDirectUserList:function(e){Na(e).then(function(t){this.directUserData=t.departmentUserVoList,this.total=t.pageCount,Qa(1,this.departmentTypeValue).then(function(t){this.directUserListSelect=t,Va(e).then(function(e){if(this.directAllUserData=e.departmentUserVoList,console.log("directAllUserData:>>>>>>>>>>>>>>>>"+Bt()(this.directAllUserData)),this.directAllUserData)for(var t=0;t<this.directAllUserData.length;t++)this.disabledChangeOption(this.directAllUserData[t].userUuid)}.bind(this))}.bind(this)).catch(function(e){console.log(e)})}.bind(this)).catch(function(e){console.log(e)})},boxSelected:function(e){this.directUserInVo.parentDepartmentUuid=this.departmentUuidValue,this.directUserInVo.uuid=e,Ia(this.directUserInVo).then(function(e){this.selectedName="",this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.departmentType=this.departmentTypeValue,this.findDirectUserList(this.listQuery)}.bind(this)).catch(function(e){console.log(e)})},handleChangeSelectedName:function(){this.selectedName=""},disabledChangeOption:function(e){for(var t=0;t<this.directUserListSelect.length;t++)if(e===this.directUserListSelect[t].uuid){console.log("禁用:"+e),this.directUserListSelect[t].isDisabled=!0;break}}}},dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",[a("el-form-item",{attrs:{label:"添加直属用户"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择需要添加的用户"},on:{change:e.boxSelected},model:{value:e.selectedName,callback:function(t){e.selectedName=t},expression:"selectedName"}},e._l(e.directUserListSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.fullName,value:e.uuid,disabled:e.isDisabled,filterable:""}})}))],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.directUserData,"max-height":"580","element-loading-text":"拼命加载中",id:"directTable"}},[a("el-table-column",{attrs:{prop:"fullName",label:"用户姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"登录 ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"职务"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentName",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"primaryPhone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idenNum",label:"身份证号码"}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},uc=[],pc={render:dc,staticRenderFns:uc},mc=pc,hc=a("VU/8"),fc=k,gc=hc(cc,mc,!1,fc,"data-v-3933aabf",null),vc=gc.exports,bc={props:{department:{departmentName:void 0,parentDepartmentUuid:void 0,remark:void 0,departmentType:void 0,userType:void 0,uuid:""},curDepartmentUuidParm:void 0,departmentSelect:void 0,departmentTypeSelect:void 0,curDepartmentTypeParm:void 0},components:{gridList:Yt,directDepartment:nc,directUser:vc},methods:{handleSubTabClick:function(e,t){"0"===e.name?(this.showMainDepartment=!0,this.showDirectDepartment=!1,this.showUserDepartment=!1):"1"===e.name?(this.showDirectDepartment=!0,this.showMainDepartment=!1,this.showUserDepartment=!1,this.listQuery.departmentUuid=this.curDepartmentUuidParm,this.listQuery.departmentType=this.curDepartmentTypeParm,this.$refs.directDepartmentVue.findDirectDepartmentList(this.listQuery)):"2"===e.name&&(this.showDirectDepartment=!1,this.showMainDepartment=!1,this.showUserDepartment=!0,this.listQuery.departmentUuid=this.curDepartmentUuidParm,this.listQuery.departmentType=this.curDepartmentTypeParm,this.$refs.directUserVue.findDirectUserList(this.listQuery))},cancelEvent:function(e){console.log("cancelEvent"),this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("canelDialogEvent")},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridCreateEvent",t.department)})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("gridSaveEvent",t.department)})},refreshDir:function(){this.$emit("gridRefreshDir")}},watch:{department:function(e){console.log("watch: department!!!!!!!!!!!!!!!!"),this.subActiveName="0",this.showMainDepartment=!0,this.showDirectDepartment=!1,this.showUserDepartment=!1}},data:function(){return{formLabelWidth:"120px",selectedName:null,adddepartmentList:void 0,subActiveName:"0",gridParams:void 0,gridTableData:void 0,showDirectDepartment:!1,showMainDepartment:!0,showUserDepartment:!1,departNameFlag:!0,rules:{departmentName:[{required:!0,message:"请输入部门名称",trigger:"blur"},{max:64,message:"长度不能超过64个字符"}]},listQuery:{page:1,limit:5,cloudFlag:1,departmentUuid:"",departmentType:""}}}},Dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"usermgn"},[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"部门概要",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"直属部门",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"直属用户",name:"2"}})],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showMainDepartment,expression:"showMainDepartment"}],ref:"department",attrs:{model:e.department,rules:e.rules,inline:!0}},[a("el-form-item",{attrs:{label:"用户类型",prop:"departmentType","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择用户类型",disabled:""},model:{value:e.department.departmentType,callback:function(t){e.$set(e.department,"departmentType",t)},expression:"department.departmentType"}},e._l(e.departmentTypeSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"部门名称",prop:"departmentName","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{placeholder:"请输入部门名称"},model:{value:e.department.departmentName,callback:function(t){e.$set(e.department,"departmentName",t)},expression:"department.departmentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级部门","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",model:{value:e.department.parentDepartmentUuid,callback:function(t){e.$set(e.department,"parentDepartmentUuid",t)},expression:"department.parentDepartmentUuid"}},e._l(e.departmentSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid}})}))],1)],1),e._v(" "),a("div",{staticClass:"el-textarea"},[a("el-form-item",{attrs:{label:"部门说明","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入部门说明"},model:{value:e.department.remark,callback:function(t){e.$set(e.department,"remark",t)},expression:"department.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"user-button",attrs:{align:"center"}},[a("el-row",[a("el-col",[a("span",{staticClass:"dialog-footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.cancelEvent("department")}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e.update("department")}}},[e._v("保 存")])],1)])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDirectDepartment,expression:"showDirectDepartment"}]},[a("direct-department",{ref:"directDepartmentVue",attrs:{departmentUuidValue:e.curDepartmentUuidParm,departmentTypeValue:e.curDepartmentTypeParm},on:{gridDirecDepCreateEvent:e.refreshDir}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUserDepartment,expression:"showUserDepartment"}]},[a("direct-user",{ref:"directUserVue",attrs:{departmentUuidValue:e.curDepartmentUuidParm,departmentTypeValue:e.curDepartmentTypeParm}})],1)],1)},yc=[],Cc={render:Dc,staticRenderFns:yc},_c=Cc,wc=a("VU/8"),Sc=T,xc=wc(bc,_c,!1,Sc,"data-v-16f4c3a0",null),kc=xc.exports,Tc={data:function(){return{showCreate:!1,departmentList:void 0,departmentListParam:[{title:"部门名称",prop:"departmentName"},{title:"用户类型",prop:"departmentTypeName"},{title:"上级部门",prop:"parentDepartmentName"},{title:"下级部门",prop:"childrenDepartments"},{title:"直属用户",prop:"directUsers",showTooltip:!0}],listQuery:{page:1,limit:10,cloudFlag:1,q_departName:"",q_courtUuid:""},defaultProps:{children:"children",label:"name"},total:0,showEditTree:!1,showCreateTree:!1,selectDepartmentData:void 0,dialogFormVisible:!1,dialogCreateFormVisible:!1,showGrid:!0,showSubGrid:!1,activeName:"0",departmentForm:{departmentName:void 0,parentDepartmentUuid:"",remark:void 0,departmentType:void 0,userType:void 0,uuid:""},treeData:[],treeHighlight:!0,filterText:"",gridListTableData:void 0,dialogStatus:void 0,addFlag:!1,departmentOptions:[],curDepartmentUuid:"",curDepartmentType:"",dictData:{userStatusDict:"CLOUD_USER_TYPE"},departmentTypeOptions:void 0}},components:{gridList:Yt,departmentEdit:kc,departmentCreate:Xn},mounted:function(){this.loadData(),this.getDepartmentType()},methods:{loadData:function(){ya(this.listQuery).then(function(e){this.departmentList=e.childrenDepartmentVoList,this.total=e.pageCount,console.log("部门列表："+Bt()(e.childrenDepartmentVoList))}.bind(this)).catch(function(e){console.log(e)})},initData:function(){this.listQuery.q_departName=""},loadDepartmentTree:function(){La(this.listQuery).then(function(e){this.treeData=[],this.treeData.push(e),console.log("部门树形数据："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.listQuery.limit=e,this.loadData()},handleCurrentChange:function(e){this.listQuery.page=e,this.loadData()},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleFilter:function(){this.listQuery.page=1,this.loadData()},handleCreate:function(){this.dialogStatus="添加部门",this.showCreate=!0,this.showEdit=!1,this.dialogFormVisible=!1,this.dialogCreateFormVisible=!0,this.addFlag=!1,this.$refs.departmentCreateVue&&this.$refs.departmentCreateVue.initDepartmentInfo()},getDepartmentSelect:function(e,t,a){xa(e,t,a).then(function(e){console.log("<<<<<departmentOptions:"+Bt()(e));var t={departmentName:"",disabled:!1};e.unshift(t),this.departmentOptions=e}.bind(this)).catch(function(e){console.log(e)})},handleTabClick:function(e,t){"0"===e.name?(this.showGrid=!0,this.showSubGrid=!1,this.loadData()):"1"===e.name&&(this.showGrid=!1,this.loadDepartmentTree())},handleNodeClick:function(e){if(console.log("data : *******************************************"+Bt()(e)),this.departmentOptions=[],this.selectDepartmentData=e,this.showSubGrid=!0,this.curDepartmentType=e.departmentType,!e.pid)return this.showEditTree=!1,void(this.showCreateTree=!1);this.showEditTree=!0,this.showCreateTree=!1,this.curDepartmentUuid=e.id,this.getDepartmentSelect(e.id,1,e.departmentType),wa(e.id).then(function(e){if(this.departmentForm=e.departmentBaseVo,e.departmentBaseVo.parentDepartmentUuid){var t={uuid:e.departmentBaseVo.parentDepartmentUuid,departmentName:e.departmentBaseVo.parentDepartmentName,disabled:!1};this.departmentOptions.push(t)}this.dialogStatus="编辑部门",this.addFlag=!0}.bind(this)).catch(function(e){console.log(e)})},handleTreeCreate:function(){this.departmentOptions=[],this.departmentOptions.push({uuid:this.selectDepartmentData.id,departmentName:this.selectDepartmentData.name,disabled:!1}),this.showEditTree=!1,this.showCreateTree=!0,this.$refs.departmentCreateTreeVue.initParentDepartmentUuid(this.selectDepartmentData.id)},handleFilterReset:function(){this.listQuery={page:1,limit:10,cloudFlag:1,q_departName:"",q_courtUuid:""},this.loadData()},handleTreeDelete:function(){var e=this;console.log("部门：删除了 "+this.selectDepartmentData.id),console.log("是否叶子节点 "+this.selectDepartmentData.leaf),this.selectDepartmentData.leaf?this.$confirm("确定删除此项？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除操作"),e.delete(e.selectDepartmentData.id)}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({type:"error",message:"删除失败! 存在下级部门，请先删除下级部门！"})},delete:function(){Ca(this.selectDepartmentData.id).then(function(e){this.showEditTree=!1,this.showCreateTree=!1,this.loadData(),this.loadDepartmentTree(),this.$message({message:"删除成功",type:"success"})}.bind(this)).catch(function(e){console.log(e)})},initDepartmentForm:function(){this.departmentForm={departmentName:void 0,parentDepartmentUuid:"",remark:void 0,departmentType:void 0,userType:void 0,uuid:""}},departmentDeleteEvent:function(e){this.deptDeleteEvent(e.uuid)},departmentEditEvent:function(e){console.log("department：编辑了第"+e.uuid),this.curDepartmentUuid=e.uuid,this.curDepartmentType=e.departmentType,this.getDepartmentSelect(e.uuid,1,e.departmentType),wa(e.uuid).then(function(e){if(console.log("<<<<<departmentOptions:"+Bt()(this.departmentOptions)),this.departmentForm=e.departmentBaseVo,e.departmentBaseVo.parentDepartmentUuid){var t={uuid:e.departmentBaseVo.parentDepartmentUuid,departmentName:e.departmentBaseVo.parentDepartmentName,disabled:!1};this.departmentOptions.push(t)}this.dialogStatus="编辑部门",this.addFlag=!0,this.dialogFormVisible=!0,this.dialogCreateFormVisible=!1}.bind(this)).catch(function(e){console.log(e)})},deptDeleteEvent:function(e){console.log("部门：删除了 "+e),Ca(e).then(function(e){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.loadData(),this.loadDepartmentTree(),this.$message({message:"删除成功",type:"success"})}.bind(this)).catch(function(e){console.log(e)})},deptUpdateEvent:function(e){console.log("部门：修改了 "+Bt()(e)),_a(e).then(function(e){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.loadData(),this.loadDepartmentTree(),this.$message({message:"保存成功！",type:"success"})}.bind(this)).catch(function(e){console.log(e)})},deptAddEvent:function(e){console.log("部门：添加了 "+Bt()(e)),"CREATION_VIRTUAL_UUID"===e.parentDepartmentUuid&&(e.parentDepartmentUuid=null),Da(e).then(function(e){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.showEditTree=!1,this.showCreateTree=!1,this.loadData(),this.loadDepartmentTree(),this.$message({message:"保存成功！",type:"success"})}.bind(this)).catch(function(e){console.log(e)})},handleClose:function(){this.dialogFormVisible=!1,this.dialogCreateFormVisible=!1,this.showEditTree=!1,this.showCreateTree=!1,this.filterText="",this.loadData(),this.loadDepartmentTree()},getDepartmentType:function(){ri(this.dictData).then(function(e){console.log("<<<<<departmentTypeOptions:"+Bt()(e)),this.departmentTypeOptions=e}.bind(this)).catch(function(e){console.log(e)})}},watch:{filterText:function(e){this.$refs.departmentTree.filter(e)}}},Lc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"部门列表",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"部门树形结构",name:"1"}})],1),e._v(" "),a("div",{staticClass:"flex-1 flex-c"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showGrid,expression:"showGrid == true"}],staticClass:"flex-c flex-1"},[a("div",[a("el-form",{ref:"listQuery",attrs:{model:e.listQuery}},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleCreate}},[e._v("添加")]),e._v(" "),a("span",{staticStyle:{float:"right"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"360px",display:"inline-block"},attrs:{placeholder:"请输入部门名称查询"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_departName,callback:function(t){e.$set(e.listQuery,"q_departName",t)},expression:"listQuery.q_departName"}}),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("el-input")],1),e._v(" "),a("el-button",{staticClass:"cancel-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleFilterReset}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"table-container"},[a("grid-list",{staticStyle:{"margin-top":"15px"},attrs:{editable:!0,deletable:!0,showOperation:!0,tableData:e.departmentList,params:e.departmentListParam},on:{listenToDeleteEvent:e.departmentDeleteEvent,listenToEditEvent:e.departmentEditEvent}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogCreateFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreateFormVisible=t}}},[a("department-create",{ref:"departmentCreateVue",attrs:{departmentSelect:e.departmentOptions,departmentTypeSelect:e.departmentTypeOptions},on:{gridCreateEvent:e.deptAddEvent,canelDialogEvent:e.handleClose}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("department-edit",{ref:"departmentEditVue",attrs:{isAddFlag:e.addFlag,department:e.departmentForm,departmentSelect:e.departmentOptions,departmentTypeSelect:e.departmentTypeOptions,curDepartmentUuidParm:e.curDepartmentUuid,curDepartmentTypeParm:e.curDepartmentType},on:{canelDialogEvent:e.handleClose,gridSaveEvent:e.deptUpdateEvent}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.showGrid,expression:"showGrid == false"}]},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:8}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("div",{staticClass:"departmentTree"},[a("el-tree",{ref:"departmentTree",staticClass:"el-department-tree",staticStyle:{"margin-top":"10px"},attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showSubGrid,expression:"showSubGrid"}],staticStyle:{"margin-top":"30px"}},[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleTreeCreate}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleTreeDelete}},[e._v("删除")])],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showSubGrid,expression:"showSubGrid"}],staticStyle:{"margin-top":"15px"},attrs:{span:16}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showEditTree,expression:"showEditTree"}],staticClass:"box-card",staticStyle:{"margin-left":"10px"}},[a("department-edit",{ref:"departmentEditTreeVue",attrs:{department:e.departmentForm,departmentSelect:e.departmentOptions,curDepartmentUuidParm:e.curDepartmentUuid,departmentTypeSelect:e.departmentTypeOptions,curDepartmentTypeParm:e.curDepartmentType},on:{canelDialogEvent:e.handleClose,gridSaveEvent:e.deptUpdateEvent,gridRefreshDir:e.loadDepartmentTree}})],1),e._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showCreateTree,expression:"showCreateTree"}],staticClass:"box-card",staticStyle:{"margin-left":"10px"}},[a("department-create",{ref:"departmentCreateTreeVue",attrs:{departmentTypeSelect:e.departmentTypeOptions},on:{gridCreateEvent:e.deptAddEvent,canelDialogEvent:e.handleClose}})],1)],1)],1)],1)])],1)},Nc=[],Vc={render:Lc,staticRenderFns:Nc},Ic=Vc,Ec=a("VU/8"),Pc=L,Mc=Ec(Tc,Ic,!1,Pc,"data-v-c6d6af8e",null),$c=Mc.exports,Uc={props:{departmentUuidValue:void 0,courtUuidValue:void 0},data:function(){return{directDepartmentData:void 0,associtedUserRoleAllData:[],directDepartmentListSelect:void 0,selectedName:"",total:0,listQuery:{page:1,limit:5,cloudFlag:0,departmentUuid:"",courtUuid:""},directDepartmentInVo:{parentDepartmentUuid:"",uuid:""}}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.courtUuid=this.courtUuidValue,this.findDirectDepartmentList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.courtUuid=this.courtUuidValue,this.findDirectDepartmentList(this.listQuery)},findDirectDepartmentList:function(e){ka(e).then(function(e){this.directDepartmentData=e.childrenDepartmentVoList,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})}}},Fc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.directDepartmentData,"max-height":"580","element-loading-text":"拼命加载中",id:"directTable"}},[a("el-table-column",{attrs:{prop:"departmentName",label:"部门名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentDepartmentName",label:"上级部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"childrenDepartments",label:"下级部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"directUsers",label:"直属用户"}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},Rc=[],zc={render:Fc,staticRenderFns:Rc},Ac=zc,Oc=a("VU/8"),qc=N,Bc=Oc(Uc,Ac,!1,qc,"data-v-dea3bbfc",null),Wc=Bc.exports,Qc={props:{departmentUuidValue:void 0,courtUuidValue:void 0},data:function(){return{directUserData:void 0,total:0,listQuery:{page:1,limit:5,cloudFlag:0,departmentUuid:"",courtUuid:""}}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.courtUuid=this.courtUuidValue,this.findDirectUserList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.departmentUuid=this.departmentUuidValue,this.listQuery.courtUuid=this.courtUuidValue,this.findDirectUserList(this.listQuery)},findDirectUserList:function(e){Na(e).then(function(e){this.directUserData=e.departmentUserVoList,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})}}},Gc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.directUserData,"max-height":"580","element-loading-text":"拼命加载中",id:"directTable"}},[a("el-table-column",{attrs:{prop:"fullName",label:"用户姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"登录 ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"职务"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentName",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"primaryPhone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idenNum",label:"身份证号码"}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},Hc=[],jc={render:Gc,staticRenderFns:Hc},Jc=jc,Zc=a("VU/8"),Kc=V,Yc=Zc(Qc,Jc,!1,Kc,"data-v-6328edb5",null),Xc=Yc.exports,ed={props:{department:{departmentName:void 0,parentDepartmentUuid:void 0,remark:void 0,departmentType:void 0,userType:void 0,uuid:""},curDepartmentUuidParm:void 0,curCourtUuidParm:void 0,departmentSelect:void 0},components:{directDepartmentView:Wc,directUserView:Xc},methods:{handleSubTabClick:function(e,t){"0"===e.name?(this.showMainDepartment=!0,this.showDirectDepartment=!1,this.showUserDepartment=!1):"1"===e.name?(this.showDirectDepartment=!0,this.showMainDepartment=!1,this.showUserDepartment=!1,this.listQuery.departmentUuid=this.curDepartmentUuidParm,this.listQuery.courtUuid=this.curCourtUuidParm,this.$refs.directDepartmentViewVue.findDirectDepartmentList(this.listQuery)):"2"===e.name&&(this.showDirectDepartment=!1,this.showMainDepartment=!1,this.showUserDepartment=!0,this.listQuery.departmentUuid=this.curDepartmentUuidParm,this.listQuery.courtUuid=this.curCourtUuidParm,this.$refs.directUserViewVue.findDirectUserList(this.listQuery))},cancelEvent:function(e){console.log("cancelEvent"),this.$refs[e].clearValidate(),this.$refs[e].resetFields(),this.$emit("canelDialogEvent")}},watch:{department:function(e){console.log("watch: department!!!!!!!!!!!!!!!!"),this.subActiveName="0",this.showMainDepartment=!0,this.showDirectDepartment=!1,this.showUserDepartment=!1}},data:function(){return{formLabelWidth:"120px",selectedName:null,adddepartmentList:void 0,subActiveName:"0",gridParams:void 0,gridTableData:void 0,showDirectDepartment:!1,showMainDepartment:!0,showUserDepartment:!1,departNameFlag:!0,listQuery:{page:1,limit:5,cloudFlag:0,departmentUuid:"",courtUuid:""}}}},td=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"部门概要",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"直属部门",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"直属用户",name:"2"}})],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showMainDepartment,expression:"showMainDepartment"}],ref:"department",attrs:{model:e.department}},[a("el-form-item",{attrs:{label:"部门名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{placeholder:"无数据",readonly:""},model:{value:e.department.departmentName,callback:function(t){e.$set(e.department,"departmentName",t)},expression:"department.departmentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级部门","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"无数据",disabled:""},model:{value:e.department.parentDepartmentUuid,callback:function(t){e.$set(e.department,"parentDepartmentUuid",t)},expression:"department.parentDepartmentUuid"}},e._l(e.departmentSelect,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.departmentName,value:e.uuid,disabled:""}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"部门说明","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"el-textarea",attrs:{type:"textarea",rows:3,placeholder:"无数据",readonly:""},model:{value:e.department.remark,callback:function(t){e.$set(e.department,"remark",t)},expression:"department.remark"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDirectDepartment,expression:"showDirectDepartment"}]},[a("direct-department-view",{ref:"directDepartmentViewVue",attrs:{departmentUuidValue:e.curDepartmentUuidParm,courtUuidValue:e.curCourtUuidParm}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUserDepartment,expression:"showUserDepartment"}]},[a("direct-user-view",{ref:"directUserViewVue",attrs:{departmentUuidValue:e.curDepartmentUuidParm,courtUuidValue:e.curCourtUuidParm}})],1)],1)},ad=[],id={render:td,staticRenderFns:ad},sd=id,od=a("VU/8"),ld=od(ed,sd,!1,null,null,null),rd=ld.exports,nd={data:function(){return{showCreate:!1,communityName:void 0,departmentList:void 0,communityList:void 0,departmentListParam:[{title:"部门名称",prop:"departmentName"},{title:"上级部门",prop:"parentDepartmentName"},{title:"下级部门",prop:"childrenDepartments"},{title:"直属员工",prop:"directUsers"}],listQuery:{page:1,limit:10,cloudFlag:0,q_departName:"",q_courtUuid:""},listTreeQuery:{cloudFlag:0,q_courtUuid:""},defaultProps:{children:"children",label:"name"},total:0,showEditTree:!1,selectDepartmentData:void 0,dialogFormVisible:!1,showGrid:!0,showSubGrid:!1,activeName:"0",departmentForm:{departmentName:void 0,parentDepartmentUuid:void 0,remark:void 0,departmentType:void 0,userType:void 0,uuid:""},treeData:[],treeHighlight:!0,filterText:"",gridListTableData:void 0,dialogStatus:void 0,addFlag:!1,departmentOptions:[],curDepartmentUuid:"",curCourtUuid:"",dictData:{userStatusDict:"CLOUD_USER_TYPE"},departmentTypeOptions:void 0}},components:{gridList:Yt,departmentView:rd},mounted:function(){this.getDepartmentType(),this.getCommunityList()},methods:{loadData:function(){ya(this.listQuery).then(function(e){this.departmentList=e.childrenDepartmentVoList,this.total=e.pageCount,console.log("部门列表："+Bt()(e.childrenDepartmentVoList))}.bind(this)).catch(function(e){console.log(e)})},loadDepartmentTree:function(e){La(e).then(function(e){this.treeData=[],this.treeData.push(e),console.log("部门树形数据："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.loadData()},handleCurrentChange:function(e){this.listQuery.page=e,this.loadData()},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleFilter:function(){this.listQuery.page=1,this.listQuery.q_courtUuid?this.loadData():this.$message.error("请先选择需要查询的小区!")},getDepartmentSelect:function(e,t){xa(e,t).then(function(e){console.log("<<<<<departmentOptions:"+Bt()(e)),this.departmentOptions=e}.bind(this)).catch(function(e){console.log(e)})},handleTabClick:function(e,t){"0"===e.name?(this.showGrid=!0,this.showSubGrid=!1,this.departmentList=[],this.listQuery.q_courtUuid="",this.listQuery.q_departName=""):"1"===e.name&&(this.showGrid=!1,this.listTreeQuery.q_courtUuid="",this.communityName="",this.filterText="",this.treeData=[])},handleNodeClick:function(e){if(console.log("data : *******************************************"+Bt()(e)),this.departmentOptions=[],this.selectDepartmentData=e,this.showSubGrid=!0,!e.pid)return void(this.showEditTree=!1);this.showEditTree=!0,this.curDepartmentUuid=e.id,this.getDepartmentSelect(e.id,0),wa(e.id).then(function(e){if(this.departmentForm=e.departmentBaseVo,e.departmentBaseVo.parentDepartmentUuid){var t={uuid:e.departmentBaseVo.parentDepartmentUuid,departmentName:e.departmentBaseVo.parentDepartmentName,disabled:!1};this.departmentOptions.push(t)}this.dialogStatus="查看部门",this.addFlag=!0}.bind(this)).catch(function(e){console.log(e)})},handleFilterReset:function(){this.listQuery={page:1,limit:10,cloudFlag:0,q_departName:"",q_courtUuid:this.listQuery.q_courtUuid},this.listQuery.q_courtUuid&&this.loadData()},departmentEditEvent:function(e){console.log("department：编辑了第"+e.uuid),this.curDepartmentUuid=e.uuid,this.getDepartmentSelect(e.uuid,0),wa(e.uuid).then(function(e){if(console.log("<<<<<departmentOptions:"+Bt()(this.departmentOptions)),this.departmentForm=e.departmentBaseVo,e.departmentBaseVo.parentDepartmentUuid){var t={uuid:e.departmentBaseVo.parentDepartmentUuid,departmentName:e.departmentBaseVo.parentDepartmentName,disabled:!1};this.departmentOptions.push(t)}this.dialogStatus="查看部门",this.addFlag=!0,this.dialogFormVisible=!0}.bind(this)).catch(function(e){console.log(e)})},handleClose:function(){this.dialogFormVisible=!1,this.showEditTree=!1,this.filterText=""},getDepartmentType:function(){ri(this.dictData).then(function(e){console.log("<<<<<departmentTypeOptions:"+Bt()(e)),this.departmentTypeOptions=e}.bind(this)).catch(function(e){console.log(e)})},getCommunityList:function(){ta().then(function(e){this.communityList=e,console.log("小区列表："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},communitySelected:function(e){console.log("communitySelected-----"+Bt()(e)),this.listQuery.q_courtUuid=e,this.curCourtUuid=e,this.loadData(this.listQuery)},communityTreeSelected:function(e){console.log("communityTreeSelected-----"+Bt()(e)),this.listTreeQuery.q_courtUuid=e,this.curCourtUuid=e,this.showEditTree=!1,this.filterText="",this.loadDepartmentTree(this.listTreeQuery)}},watch:{filterText:function(e){this.showEditTree=!1,this.$refs.departmentTree.filter(e)}}},cd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-1 flex-c"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"部门列表",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"部门树形结构",name:"1"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.showGrid,expression:"showGrid == true"}],staticClass:"flex-c flex-1"},[a("div",[a("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"小区列表"}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择需要查询的小区",filterable:""},on:{change:e.communitySelected},model:{value:e.listQuery.q_courtUuid,callback:function(t){e.$set(e.listQuery,"q_courtUuid",t)},expression:"listQuery.q_courtUuid"}},e._l(e.communityList,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"　　部门名称"}},[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入部门名称查询"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_departName,callback:function(t){e.$set(e.listQuery,"q_departName",t)},expression:"listQuery.q_departName"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.handleFilterReset}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"table-container"},[a("grid-list",{staticStyle:{"margin-top":"15px"},attrs:{editable:!1,deletable:!1,viewable:!0,showOperation:!0,tableData:e.departmentList,params:e.departmentListParam},on:{listenToViewEvent:e.departmentEditEvent}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("department-view",{ref:"departmentEditVue",attrs:{isAddFlag:e.addFlag,department:e.departmentForm,departmentSelect:e.departmentOptions,departmentTypeSelect:e.departmentTypeOptions,curDepartmentUuidParm:e.curDepartmentUuid,curCourtUuidParm:e.curCourtUuid},on:{canelDialogEvent:e.handleClose}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.showGrid,expression:"showGrid == false"}]},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:8}},[a("div",[a("el-select",{staticClass:"user_el-select",staticStyle:{width:"48%"},attrs:{placeholder:"请选择需要查询的小区"},on:{change:e.communityTreeSelected},model:{value:e.communityName,callback:function(t){e.communityName=t},expression:"communityName"}},e._l(e.communityList,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})})),e._v(" "),a("el-input",{staticStyle:{width:"51%"},attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),a("div",{staticClass:"departmentTree"},[a("el-tree",{ref:"departmentTree",staticClass:"el-department-tree",staticStyle:{"margin-top":"10px"},attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)]),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.showSubGrid,expression:"showSubGrid"}],staticStyle:{"margin-top":"15px"},attrs:{span:16}},[a("el-card",{directives:[{name:"show",rawName:"v-show",value:e.showEditTree,expression:"showEditTree"}],staticClass:"box-card",staticStyle:{"margin-left":"10px"}},[a("department-view",{ref:"departmentEditTreeVue",attrs:{department:e.departmentForm,departmentSelect:e.departmentOptions,curCourtUuidParm:e.curCourtUuid,curDepartmentUuidParm:e.curDepartmentUuid,departmentTypeSelect:e.departmentTypeOptions},on:{canelDialogEvent:e.handleClose}})],1)],1)],1)],1)],1)])},dd=[],ud={render:cd,staticRenderFns:dd},pd=ud,md=a("VU/8"),hd=I,fd=md(nd,pd,!1,hd,"data-v-2cf5f7fd",null),gd=fd.exports,vd={props:{courtUuidTree:void 0},data:function(){return{orgsData:[],orgsDataTree:[],defaultProps:{children:"children",label:"name"},filterText:"",dialogTableVisible:!1,expandedKeys:[],defaultChecked:[],houseOrgCodeList:[],isfilterNode:!1}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this._loadALlOrgs()},methods:{_loadALlOrgs:function(){$i(this.courtUuidTree).then(function(e){this.orgsDataTree=[],this.expandedKeys=[],this.expandedKeys.push(e.uuid),this.orgsDataTree.push(e),this.orgsData=this.orgsDataTree}.bind(this)).catch(function(e){console.log(e)})},_onSubmit:function(){console.log("获取树节点值：=-----------------"),this.houseOrgCodeList=[];for(var e=0;e<this.$refs.tree.getCheckedNodes().length;e++){var t=this.$refs.tree.getCheckedNodes()[e];this.houseOrgCodeList.push(t.uuid)}this.$emit("changeDialogStatus",this.houseOrgCodeList)},setCheckNodes:function(e){this._loadALlOrgs(),this.defaultChecked=e},filterNode:function(e,t){return e?(this.isfilterNode=!0,-1!==t.name.indexOf(e)):(this.isfilterNode=!1,!0)},handleCheckChange:function(e,t,a){this.isfilterNode||this.deepChangeCheckedJsonData(e.children,t)},deepChangeCheckedJsonData:function(e,t){if(e instanceof Array)for(var a=0;a<e.length;a++){var i=e[a];this.deepChangeCheckedJsonData(i,t)}else if(e instanceof Object)for(var s in e)"uuid"===s&&this.$refs.tree.setChecked(e.uuid.toString(),t,!0),"children"===s&&this.deepChangeCheckedJsonData(e.children,t)}}},bd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"请输入查询关键字"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("div",{staticClass:"tree"},[a("el-tree",{ref:"tree",staticClass:"el-org-tree",attrs:{"node-key":"uuid",data:e.orgsData,props:e.defaultProps,"show-checkbox":"","check-strictly":!0,"filter-node-method":e.filterNode,"default-expanded-keys":e.expandedKeys,"default-checked-keys":e.defaultChecked},on:{"check-change":e.handleCheckChange}})],1)],1)},Dd=[],yd={render:bd,staticRenderFns:Dd},Cd=yd,_d=a("VU/8"),wd=_d(vd,Cd,!1,null,null,null),Sd=wd.exports,xd={props:{deviceOptions:void 0,providerOptions:void 0,isAddFlagParm:void 0,courtUuid:void 0,resourceDeviceGroupVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]}},components:{orgTree:Sd},mounted:function(){this.setCheckNodes(this.resourceDeviceGroupVue.houseOrgCodeList)},data:function(){return{formLabelWidth:"120px"}},methods:{setCheckNodes:function(e){this.$refs.orgTree.setCheckNodes(e)}}},kd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceDeviceGroupVue",attrs:{inline:!0,model:e.resourceDeviceGroupVue}},[a("el-form-item",{attrs:{label:"设备组名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入设备组名称",readonly:""},model:{value:e.resourceDeviceGroupVue.resourceName,callback:function(t){e.$set(e.resourceDeviceGroupVue,"resourceName",t)},expression:"resourceDeviceGroupVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择设备类型",disabled:""},model:{value:e.resourceDeviceGroupVue.deviceType,callback:function(t){e.$set(e.resourceDeviceGroupVue,"deviceType",t)},expression:"resourceDeviceGroupVue.deviceType"}},e._l(e.deviceOptions,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"选择关联组织","label-width":e.formLabelWidth}},[a("org-tree",{ref:"orgTree",attrs:{courtUuidTree:e.courtUuid}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择供应商",disabled:""},model:{value:e.resourceDeviceGroupVue.providerCode,callback:function(t){e.$set(e.resourceDeviceGroupVue,"providerCode",t)},expression:"resourceDeviceGroupVue.providerCode"}},e._l(e.providerOptions,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1)],1)],1)],1)},Td=[],Ld={render:kd,staticRenderFns:Td},Nd=Ld,Vd=a("VU/8"),Id=Vd(xd,Nd,!1,null,null,null),Ed=Id.exports,Pd={props:{resourceDeviceVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]}},data:function(){return{formLabelWidth:"120px"}},methods:{}},Md=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceDeviceVue",attrs:{inline:!0,model:e.resourceDeviceVue}},[a("el-form-item",{attrs:{label:"设备代码","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入设备代码",readonly:""},model:{value:e.resourceDeviceVue.deviceCode,callback:function(t){e.$set(e.resourceDeviceVue,"deviceCode",t)},expression:"resourceDeviceVue.deviceCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入设备名称",readonly:""},model:{value:e.resourceDeviceVue.resourceName,callback:function(t){e.$set(e.resourceDeviceVue,"resourceName",t)},expression:"resourceDeviceVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"逻辑(IP)地址","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入逻辑(IP)地址",readonly:""},model:{value:e.resourceDeviceVue.logicalAddress,callback:function(t){e.$set(e.resourceDeviceVue,"logicalAddress",t)},expression:"resourceDeviceVue.logicalAddress"}})],1)],1)],1)},$d=[],Ud={render:Md,staticRenderFns:$d},Fd=Ud,Rd=a("VU/8"),zd=Rd(Pd,Fd,!1,null,null,null),Ad=zd.exports,Od={props:{appCodeSelectOption:void 0,isAddFlagParm:void 0,resourceServiceVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]}},data:function(){return{formLabelWidth:"120px"}},methods:{}},qd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceServiceVue",attrs:{inline:!0,model:e.resourceServiceVue}},[a("el-form-item",{attrs:{label:"所属应用","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择所属应用",disabled:""},model:{value:e.resourceServiceVue.appCode,callback:function(t){e.$set(e.resourceServiceVue,"appCode",t)},expression:"resourceServiceVue.appCode"}},e._l(e.appCodeSelectOption,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"服务名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入服务名称",readonly:""},model:{value:e.resourceServiceVue.resourceName,callback:function(t){e.$set(e.resourceServiceVue,"resourceName",t)},expression:"resourceServiceVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务URI","label-width":e.formLabelWidth,prop:"resourceUrl"}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入服务URI",readonly:""},model:{value:e.resourceServiceVue.resourceUrl,callback:function(t){e.$set(e.resourceServiceVue,"resourceUrl",t)},expression:"resourceServiceVue.resourceUrl"}})],1)],1)],1)},Bd=[],Wd={render:qd,staticRenderFns:Bd},Qd=Wd,Gd=a("VU/8"),Hd=Gd(Od,Qd,!1,null,null,null),jd=Hd.exports,Jd={props:{resourceAppVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]}},data:function(){return{formLabelWidth:"120px"}},methods:{}},Zd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceAppVue",attrs:{inline:!0,model:e.resourceAppVue}},[a("el-form-item",{attrs:{label:"应用名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入应用名称",readonly:""},model:{value:e.resourceAppVue.resourceName,callback:function(t){e.$set(e.resourceAppVue,"resourceName",t)},expression:"resourceAppVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用代码","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入应用代码",readonly:""},model:{value:e.resourceAppVue.appCode,callback:function(t){e.$set(e.resourceAppVue,"appCode",t)},expression:"resourceAppVue.appCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{type:"Number","auto-complete":"off",placeholder:"请输入排序序号",readonly:""},model:{value:e.resourceAppVue.sort,callback:function(t){e.$set(e.resourceAppVue,"sort",t)},expression:"resourceAppVue.sort"}})],1)],1)],1)},Kd=[],Yd={render:Zd,staticRenderFns:Kd},Xd=Yd,eu=a("VU/8"),tu=eu(Jd,Xd,!1,null,null,null),au=tu.exports,iu={props:{appCodeSelectOption:void 0,isAddFlagParm:void 0,resourceMenuVue:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]},appCodeParm:void 0},components:{},mounted:function(){},data:function(){return{formLabelWidth:"120px"}},methods:{}},su=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"resourceMenuVue",attrs:{inline:!0,model:e.resourceMenuVue}},[a("el-form-item",{attrs:{label:"资源名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入资源名称",readonly:""},model:{value:e.resourceMenuVue.resourceName,callback:function(t){e.$set(e.resourceMenuVue,"resourceName",t)},expression:"resourceMenuVue.resourceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源代码","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入资源代码",readonly:""},model:{value:e.resourceMenuVue.menuCode,callback:function(t){e.$set(e.resourceMenuVue,"menuCode",t)},expression:"resourceMenuVue.menuCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源URI","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入资源URI",readonly:""},model:{value:e.resourceMenuVue.resourceUrl,callback:function(t){e.$set(e.resourceMenuVue,"resourceUrl",t)},expression:"resourceMenuVue.resourceUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ICON","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"user_el-input",attrs:{"auto-complete":"off",placeholder:"请输入ICON",readonly:""},model:{value:e.resourceMenuVue.icon,callback:function(t){e.$set(e.resourceMenuVue,"icon",t)},expression:"resourceMenuVue.icon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属应用","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择所属应用",disabled:""},model:{value:e.resourceMenuVue.appCode,callback:function(t){e.$set(e.resourceMenuVue,"appCode",t)},expression:"resourceMenuVue.appCode"}},e._l(e.appCodeSelectOption,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"上级菜单","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off",placeholder:"请选择上级菜单",readonly:""},model:{value:e.resourceMenuVue.parentResourceName,callback:function(t){e.$set(e.resourceMenuVue,"parentResourceName",t)},expression:"resourceMenuVue.parentResourceName"}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{"auto-complete":"off",placeholder:"请选择上级菜单"},model:{value:e.resourceMenuVue.parentResourceUuid,callback:function(t){e.$set(e.resourceMenuVue,"parentResourceUuid",t)},expression:"resourceMenuVue.parentResourceUuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"sort"}},[a("el-input",{staticClass:"user_el-input",attrs:{type:"Number","auto-complete":"off",placeholder:"请输入排序序号",readonly:""},model:{value:e.resourceMenuVue.sort,callback:function(t){e.$set(e.resourceMenuVue,"sort",t)},expression:"resourceMenuVue.sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否按钮","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{disabled:""},model:{value:e.resourceMenuVue.button,callback:function(t){e.$set(e.resourceMenuVue,"button",t)},expression:"resourceMenuVue.button"}})],1)],1)],1)},ou=[],lu={render:su,staticRenderFns:ou},ru=lu,nu=a("VU/8"),cu=nu(iu,ru,!1,null,null,null),du=cu.exports,uu={props:{actionTypeOptionsProp:void 0,resourceUuidValue:void 0,resourceType:void 0},watch:{resourceRoleDetailData:function(e){console.log("watch: resourceRoleDetailData!!!!!!!!!!!!!!!!"),console.log(e),this.authorityFlag=!1,this.showActionType=!1}},mounted:function(){this.listQuery.resourceUuid=this.resourceUuidValue},data:function(){return{resourceRoleDetailData:void 0,formLabelWidth:"120px",authority:{resourceUuid:"",roleUuid:"",actionType:""},roleDeviceAuthorityRequestVo:{resourceUuidList:void 0,actionTypeList:void 0,roleUuid:void 0},authorityFlag:!1,showActionType:!1,roleSelectOptions:void 0,total:0,listQuery:{page:1,limit:5,resourceUuid:""}}},methods:{handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.resourceUuid=this.resourceUuidValue,this.handResourceRoleList(this.listQuery)},handleCurrentChange:function(e){this.listQuery.page=e,this.listQuery.resourceUuid=this.resourceUuidValue,this.handResourceRoleList(this.listQuery)},handResourceRoleList:function(e){Ui(e).then(function(e){console.log("<<<<<getResourceRoleList:"+Bt()(e)),this.resourceRoleDetailData=e.authorityExt,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})}}},pu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resourceRoleDetailData,"max-height":"580","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"角色说明",width:"323"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actionTypeName",label:"操作类型",width:"355"}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[5,10,15],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})],1)],1)],1)],1)},mu=[],hu={render:pu,staticRenderFns:mu},fu=hu,gu=a("VU/8"),vu=gu(uu,fu,!1,null,null,null),bu=vu.exports,Du={props:{isAddFlag:!1,tableData:void 0,resource:{resourceType:void 0,resourceName:void 0,resourceUrl:void 0,appCode:void 0,serviceId:void 0,menuCode:void 0,parentResourceUuid:void 0,parentResourceName:void 0,parentResourceCode:void 0,deviceCode:void 0,deviceType:void 0,providerCode:void 0,houseOrgCode:void 0,logicalAddress:void 0,uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]},deviceTypeSelect:void 0,providerCodeTypeSelect:void 0,resourceTypeSelect:void 0,appCodeSelect:void 0,actionTypeSelect:void 0,curCourtUuidParm:void 0},components:{resourceRoleList:bu,resourceMenu:du,resourceApp:au,resourceService:jd,resourceDevice:Ad,resourceDeviceGroup:Ed},mounted:function(){this.handleChange(this.resource.resourceType),this.appCodeValue=this.resource.appCode},watch:{resource:function(e){console.log("watch: resource!!!!!!!!!!!!!!!!"),this.subActiveName="0",this.gridResource=!0,this.gridResourceRole=!1}},data:function(){return{subActiveName:"0",formLabelWidth:"120px",gridResource:!0,gridResourceRole:!1,_resourceType:"",selectedVaue:{},showDialog:!1,curResourceType:void 0,expandedKeys:void 0,menuTreeData:void 0,curResourceUuid:void 0,treeId:void 0,treeName:void 0,treeUuid:void 0,showApplication:!1,showMenu:!1,showService:!1,showDeviceGroup:!1,showDevice:!1,meunCodeFlag:!1,parentCode:"",listQuery:{page:1,limit:5,resourceUuid:""},appCodeValue:void 0}},methods:{handleSubTabClick:function(e,t){"0"===e.name?(this.gridResource=!0,this.gridResourceRole=!1,this.handleChange(this.resource.resourceType)):(this.initCreateResource(),this.gridResource=!1,this.gridResourceRole=!0,this.curResourceUuid=this.resource.uuid,this.listQuery.resourceUuid=this.resource.uuid,this.curResourceType=this.resource.resourceType,console.log("this.listQuery:"+Bt()(this.listQuery)),this.$refs.resourceRoleVue.handResourceRoleList(this.listQuery))},handleChange:function(e){"1"===e?(this.showApplication=!0,this.showMenu=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1):"2"===e?(this.showMenu=!0,this.showApplication=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1):"3"===e?(this.showService=!0,this.showMenu=!1,this.showApplication=!1,this.showDeviceGroup=!1,this.showDevice=!1):"4"===e?(this.showDeviceGroup=!0,this.showService=!1,this.showMenu=!1,this.showApplication=!1,this.showDevice=!1):"5"===e&&(this.showDevice=!0,this.showService=!1,this.showMenu=!1,this.showApplication=!1,this.showDeviceGroup=!1)},initCreateResource:function(){this.showApplication=!1,this.showMenu=!1,this.showService=!1,this.showDeviceGroup=!1,this.showDevice=!1},setCheckNodes:function(e){this.$refs.resourceDeviceGroupVue&&this.$refs.resourceDeviceGroupVue.setCheckNodes(e)}}},yu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"resourcesEdit"}},[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"资源概要",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"拥有该资源权限的角色",name:"1"}})],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.gridResource,expression:"gridResource"}],ref:"resource",attrs:{inline:!0,model:e.resource}},[a("el-form-item",{attrs:{label:"资源类别","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"user_el-select",attrs:{placeholder:"请选择",disabled:""},model:{value:e.resource.resourceType,callback:function(t){e.$set(e.resource,"resourceType",t)},expression:"resource.resourceType"}},e._l(e.resourceTypeSelect,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1)],1),e._v(" "),e.showMenu?a("resource-menu",{ref:"resourceMenuVue",attrs:{appCodeSelectOption:e.appCodeSelect,isAddFlagParm:e.isAddFlag,appCodeParm:e.appCodeValue,resourceMenuVue:e.resource}}):e._e(),e._v(" "),e.showApplication?a("resource-app",{ref:"resourceAppVue",attrs:{isAddFlagParm:e.isAddFlag,resourceAppVue:e.resource}}):e._e(),e._v(" "),e.showService?a("resource-service",{ref:"resourceServiceVue",attrs:{isAddFlagParm:e.isAddFlag,appCodeSelectOption:e.appCodeSelect,resourceServiceVue:e.resource}}):e._e(),e._v(" "),e.showDevice?a("resource-device",{ref:"resourceDeviceVue",attrs:{isAddFlagParm:e.isAddFlag,resourceDeviceVue:e.resource}}):e._e(),e._v(" "),e.showDeviceGroup?a("resource-device-group",{ref:"resourceDeviceGroupVue",attrs:{isAddFlagParm:e.isAddFlag,deviceOptions:e.deviceTypeSelect,providerOptions:e.providerCodeTypeSelect,courtUuid:e.curCourtUuidParm,resourceDeviceGroupVue:e.resource}}):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.gridResourceRole,expression:"gridResourceRole"}]},[a("div",{staticClass:"flex-1"},[a("resource-role-list",{ref:"resourceRoleVue",attrs:{actionTypeOptionsProp:e.actionTypeSelect,resourceUuidValue:e.curResourceUuid,resourceType:e.curResourceType}})],1)])],1)},Cu=[],_u={render:yu,staticRenderFns:Cu},wu=_u,Su=a("VU/8"),xu=Su(Du,wu,!1,null,null,null),ku=xu.exports,Tu={data:function(){return{communityList:void 0,resourceList:[],resourceListParam:void 0,total:0,dialogFormVisible:!1,dialogStatus:void 0,resourceForm:{resourceType:"",resourceName:"",resourceUrl:"",appCode:"",serviceId:"",menuCode:"",parentResourceUuid:"",parentResourceName:"",parentResourceCode:"",deviceCode:"",deviceType:"",providerCode:"",houseOrgCode:"",logicalAddress:"",uuid:"",button:!1,icon:void 0,sort:void 0,parentResource:{uuid:"",resourceName:"",menuCode:""},houseOrgCodeList:[]},dictData:{resourceTypeDict:"COURT_RESC_TYPE",actionType:"COURT_ACT_TYPE"},listQuery:{page:1,limit:10,cloudFlag:0,q_resourceType:"2",q_resourceName:"",q_appCode:"",q_courtUuid:""},resourceTypeOptions:void 0,appCodeOptions:void 0,deviceTypeOptions:void 0,providerCodeTypeOptions:void 0,actionTypeOptions:void 0,addFlag:!1,menuListParm:void 0,appCodeListParm:void 0,serviceListParm:void 0,deviceGroupListParm:void 0,deviceListParm:void 0,labelTitle:void 0,appLabelTitle:void 0,showQueryParm:!0,showQueryApp:!0,curCourtUuid:void 0}},components:{resourceList:Er,resourceView:ku},mounted:function(){this.loadSelectData(),this.initListParm(),this.getCommunityList(),this.labelTitle="菜单名称",this.appLabelTitle="所属应用"},methods:{initListParm:function(){this.menuListParm=[{title:"所属应用",prop:"appName",width:180},{title:"菜单名称",prop:"resourceName",width:210},{title:"菜单代码",prop:"menuCode",width:270},{title:"URI",prop:"resourceUrl",width:250},{title:"ICON",prop:"icon",width:110},{title:"类型",prop:"button",width:77},{title:"排序",prop:"sort",width:77},{title:"已授权角色",prop:"roleNames",width:380}],this.appCodeListParm=[{title:"应用名称",prop:"appName"},{title:"应用代码",prop:"appCode"},{title:"排序",prop:"sort"},{title:"已授权角色",prop:"roleNames"}],this.serviceListParm=[{title:"所属应用",prop:"appName"},{title:"服务名称",prop:"resourceName"},{title:"服务URI",prop:"resourceUrl"},{title:"已授权角色",prop:"roleNames"}],this.deviceGroupListParm=[{title:"设备组名称",prop:"resourceName"},{title:"设备类型",prop:"deviceTypeName"},{title:"供应商",prop:"providerCodeName"},{title:"已授权角色",prop:"roleNames"}],this.deviceListParm=[{title:"设备名称",prop:"resourceName"},{title:"设备代码",prop:"deviceCode"},{title:"逻辑地址",prop:"logicalAddress"},{title:"已授权角色",prop:"roleNames"}],this.resourceListParam=this.menuListParm},loadData:function(){_i(this.listQuery).then(function(e){if(console.log("get data by page:"+Bt()(e.resource)),null!==e.resource&&"2"===e.resource.resourceType)for(var t="",a=0;a<e.pageCount;a++)t=e.resource[a].button,e.resource[a].button=!1===t?"菜单":"按钮";this.resourceList=e.resource,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})},loadSelectData:function(){Li(this.dictData).then(function(e){console.log("<<<<<getActionTypeOptions:"+Bt()(e)),this.actionTypeOptions=e}.bind(this)).catch(function(e){console.log(e)}),Ni(this.dictData).then(function(e){console.log("<<<<<resourceTypeOptions:"+Bt()(e)),this.resourceTypeOptions=e}.bind(this)).catch(function(e){console.log(e)}),Ei(this.dictData).then(function(e){console.log("<<<<<deviceCategoryList:"+Bt()(e)),this.deviceTypeOptions=e}.bind(this)).catch(function(e){console.log(e)}),Pi().then(function(e){console.log("厂商编码："+Bt()(e)),this.providerCodeTypeOptions=e}.bind(this)).catch(function(e){console.log(e)})},getCommunityList:function(){ta().then(function(e){this.communityList=e,console.log("小区列表："+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},communitySelected:function(e){console.log("communitySelected-----"+Bt()(e)),this.listQuery.q_courtUuid=e,this.curCourtUuid=e,wi(0,e).then(function(e){console.log("<<<<<getAppCodeOptions:"+Bt()(e)),this.appCodeOptions=e}.bind(this)).catch(function(e){console.log(e)}),this.loadData()},resetForm:function(){this.listQuery={page:1,limit:10,cloudFlag:0,q_resourceType:"2",q_resourceName:"",q_appCode:"",q_courtUuid:this.listQuery.q_courtUuid},this.listQuery.q_courtUuid&&this.handleFilter()},handleSizeChange:function(e){this.listQuery.limit=e,this.listQuery.page=1,this.loadData()},handleCurrentChange:function(e){this.listQuery.page=e,this.loadData()},handleFilter:function(){this.listQuery.q_courtUuid?("1"===this.listQuery.q_resourceType?(this.showQueryParm=!1,this.showQueryApp=!0,this.resourceListParam=this.appCodeListParm,this.listQuery.q_resourceName="",this.appLabelTitle="应用名称"):"2"===this.listQuery.q_resourceType?(this.labelTitle="菜单名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.resourceListParam=this.menuListParm):"3"===this.listQuery.q_resourceType?(this.labelTitle="服务名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.resourceListParam=this.serviceListParm):"4"===this.listQuery.q_resourceType?(this.labelTitle="设备组名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!1,this.resourceListParam=this.deviceGroupListParm):"5"===this.listQuery.q_resourceType&&(this.labelTitle="设备名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!1,this.resourceListParam=this.deviceListParm),this.listQuery.page=1,this.loadData()):this.$message.error("请先选择需要查询的小区!")},resourceEditEvent:function(e){console.log("resource：编辑了第"+e.resourceName+"行"),console.log("resource："+Bt()(e)),Ti(e.uuid).then(function(e){console.log("resourceForm:"+Bt()(e)),this.resourceForm=e,e.parentResource&&(this.resourceForm.parentResourceUuid=e.parentResource.uuid,this.resourceForm.parentResourceName=e.parentResource.resourceName,this.resourceForm.parentResourceCode=e.parentResource.menuCode),this.$refs.resourceEditVue&&(this.$refs.resourceEditVue.handleChange(this.resourceForm.resourceType),this.$refs.resourceEditVue.setCheckNodes(e.houseOrgCodeList)),this.dialogStatus="查看资源",this.dialogFormVisible=!0,this.addFlag=!0}.bind(this)).catch(function(e){console.log(e)})},handleClose:function(){this.dialogFormVisible=!1},changeResourceType:function(){"1"===this.listQuery.q_resourceType?(this.showQueryParm=!1,this.showQueryApp=!0,this.listQuery.q_resourceName="",this.listQuery.q_appCode="",this.appLabelTitle="应用名称"):"2"===this.listQuery.q_resourceType?(this.labelTitle="菜单名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.listQuery.q_appCode="",this.listQuery.q_resourceName=""):"3"===this.listQuery.q_resourceType?(this.labelTitle="服务名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!0,this.listQuery.q_appCode="",this.listQuery.q_resourceName=""):"4"===this.listQuery.q_resourceType?(this.labelTitle="设备组名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!1,this.listQuery.q_appCode="",this.listQuery.q_resourceName=""):"5"===this.listQuery.q_resourceType&&(this.labelTitle="设备名称",this.appLabelTitle="所属应用",this.showQueryParm=!0,this.showQueryApp=!1,this.listQuery.q_appCode="",this.listQuery.q_resourceName="")}}},Lu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{ref:"listQuery",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.listQuery}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"小区列表"}},[a("el-select",{attrs:{placeholder:"请选择需要查询的小区",filterable:""},on:{change:e.communitySelected},model:{value:e.listQuery.q_courtUuid,callback:function(t){e.$set(e.listQuery,"q_courtUuid",t)},expression:"listQuery.q_courtUuid"}},e._l(e.communityList,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"　　资源类别"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeResourceType},model:{value:e.listQuery.q_resourceType,callback:function(t){e.$set(e.listQuery,"q_resourceType",t)},expression:"listQuery.q_resourceType"}},e._l(e.resourceTypeOptions,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemName,value:e.itemCode}})}))],1),e._v(" "),e.showQueryApp?a("el-form-item",[a("span",{staticClass:"sub-title",staticStyle:{"margin-left":"24px"}},[e._v(e._s(e.appLabelTitle)+"  ")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择所属应用"},model:{value:e.listQuery.q_appCode,callback:function(t){e.$set(e.listQuery,"q_appCode",t)},expression:"listQuery.q_appCode"}},e._l(e.appCodeOptions,function(e){return a("el-option",{key:e.appCode,attrs:{label:e.resourceName,value:e.appCode}})}))],1):e._e(),e._v(" "),e.showQueryParm?a("el-form-item",[a("span",{staticClass:"sub-title",staticStyle:{"margin-left":"24px"}},[e._v(e._s(e.labelTitle)+"  ")]),e._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入查询内容"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.q_resourceName,callback:function(t){e.$set(e.listQuery,"q_resourceName",t)},expression:"listQuery.q_resourceName"}})],1):e._e(),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){e.resetForm("listQuery")}}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"table-container"},[a("div",{staticClass:"flex-1"},[a("resource-list",{staticStyle:{"margin-top":"15px"},attrs:{tableData:e.resourceList,params:e.resourceListParam,editable:!1,deletable:!1,viewable:!0},on:{listenEditEvent:e.resourceEditEvent}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("resource-view",{ref:"resourceEditVue",attrs:{tableData:e.resourceList,resource:e.resourceForm,resourceTypeSelect:e.resourceTypeOptions,isAddFlag:e.addFlag,actionTypeSelect:e.actionTypeOptions,deviceTypeSelect:e.deviceTypeOptions,providerCodeTypeSelect:e.providerCodeTypeOptions,appCodeSelect:e.appCodeOptions,curCourtUuidParm:e.curCourtUuid}})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1)],1)},Nu=[],Vu={render:Lu,staticRenderFns:Nu},Iu=Vu,Eu=a("VU/8"),Pu=E,Mu=Eu(Tu,Iu,!1,Pu,null,null),$u=Mu.exports,Uu=[{path:"/usermgmt/usermanagement/usergroup",name:"userGroup",component:ys},{path:"/usermgmt/usermanagement/CommunityUserGroup",name:"CommunityUserGroup",component:Rs},{path:"/usermgmt/usermanagement/department",name:"department",component:$c},{path:"/usermgmt/usermanagement/CommunityDepartment",name:"CommunityDepartment",component:gd},{path:"/usermgmt/usermanagement/resource",name:"resource",component:Wn},{path:"/usermgmt/usermanagement/user",name:"user",component:qo},{path:"/usermgmt/usermanagement/role",name:"role",component:ql},{path:"/usermgmt/usermanagement/CommunityRole",name:"CommunityRole",component:lr},{path:"/usermgmt/usermanagement/CommunityUser",name:"CommunityUser",component:Sr},{path:"/usermgmt/usermanagement/CommunityResource",name:"CommunityResource",component:$u}],Fu={name:"courttable",props:{tableData:{type:Array}},methods:{onDoubleClickHandler:function(e,t){this.$router.push("/mapanalysisapp/courtinfo/"+e.courtUuid)}}},Ru=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.tableData,stripe:""},on:{"row-dblclick":e.onDoubleClickHandler}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"建筑面积"}},[a("span",[e._v(e._s(t.row.buildArea)+" (平米)")])]),e._v(" "),a("el-form-item",{attrs:{label:"占地面积"}},[a("span",[e._v(e._s(t.row.floorArea)+" (平米)")])]),e._v(" "),a("el-form-item",{staticClass:"itemlarge",attrs:{label:"详细地址"}},[a("span",[e._v(e._s(t.row.regionName))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"courtName",label:"小区名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"houseCount",label:"房屋总数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"homeCount",label:"户数总数"}})],1)},zu=[],Au={render:Ru,staticRenderFns:zu},Ou=Au,qu=a("VU/8"),Bu=P,Wu=qu(Fu,Ou,!1,Bu,"data-v-1c0714a1",null),Qu=Wu.exports,Gu="/egc-smartcommunitymgmtapp/mapAnalysis",Hu="/egc-smartcommunitymgmtapp/device",ju="/egc-smartcommunitymgmtapp/profile",Ju=function(e){return Object(mt.a)({method:"get",url:"/egc-smartcommunitymgmtapp/courtorg/getCourtList",params:e})},Zu=function(e){return Object(mt.a)({method:"get",url:"/egc-smartcommunitymgmtapp/courtorg/getCourtInfo",params:e})},Ku=function(e){return Object(mt.a)({method:"get",url:Gu+"/listCarFlowInfo",params:e})},Yu=function(e){return Object(mt.a)({method:"get",url:Gu+"/listCarFlowPage",params:e})},Xu=function(e){return Object(mt.a)({method:"get",url:Gu+"/listHumanFlowInfo",params:e})},ep=function(e){return Object(mt.a)({method:"get",url:Gu+"/listHumanFlowPage",params:e})},tp=function(e){return Object(mt.a)({method:"get",url:Hu+"/listDeviceType",params:e})},ap=function(e){return Object(mt.a)({url:ju+"/getCourtAgeFlowData",method:"get",params:e})},ip=function(e){return Object(mt.a)({url:ju+"/getBuildAgeFlowData",method:"get",params:e})},sp=[],op=[],lp=[{name:"北京",value:0},{name:"天津",value:0},{name:"上海",value:0},{name:"重庆",value:0},{name:"河北",value:0},{name:"河南",value:0},{name:"云南",value:0},{name:"辽宁",value:0},{name:"黑龙江",value:0},{name:"湖南",value:0},{name:"安徽",value:0},{name:"山东",value:0},{name:"新疆",value:0},{name:"江苏",value:0},{name:"浙江",value:0},{name:"江西",value:0},{name:"湖北",value:0},{name:"广西",value:0},{name:"甘肃",value:0},{name:"山西",value:0},{name:"内蒙古",value:0},{name:"陕西",value:0},{name:"吉林",value:0},{name:"福建",value:0},{name:"贵州",value:0},{name:"广东",value:0},{name:"青海",value:0},{name:"西藏",value:0},{name:"四川",value:0},{name:"宁夏",value:0},{name:"海南",value:0},{name:"台湾",value:0},{name:"香港",value:0},{name:"澳门",value:0},{name:"南海诸岛",value:0}],rp={title:{text:"全国恒大小区列表",x:"center"},tooltip:{formatter:"{b}<br/>{a} : {c}"},visualMap:{min:0,max:100,left:"90%",top:"40%",text:["High","Low"],seriesIndex:[1],inRange:{color:["LightSkyBlue","lightgreen","DeepSkyBlue","LimeGreen"]},calculable:!0},geo:{map:"china",roam:!0,zoom:1.2,scaleLimit:{min:1,max:6},label:{normal:{show:!0,textStyle:{color:"rgba(0,0,0,0.6)"}}},itemStyle:{normal:{borderColor:"rgba(0, 0, 0, 0.2)"},emphasis:{areaColor:null,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:20,borderWidth:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}},series:[{type:"scatter",coordinateSystem:"geo",data:sp,symbolSize:12,symbol:"",symbolRotate:35,tooltip:{trigger:"item",formatter:"小区名称: {b}"},label:{normal:{formatter:"{b}",position:"right",show:!1},emphasis:{show:!0}},itemStyle:{normal:{color:"#F06C00"}}},{name:"小区数量",type:"map",geoIndex:0,data:lp},{name:"",type:"effectScatter",coordinateSystem:"geo",data:op,symbolSize:function(e){return 20},tooltip:{trigger:"item",formatter:"小区名称: {b}"},showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!0}},itemStyle:{normal:{color:"#f4e925",shadowBlur:10,shadowColor:"#333"}},zlevel:1}]},np=function(e){e instanceof Array&&e.length>0&&(rp.series[0].data=e)},cp=function(e){e instanceof Array&&(rp.series[2].data=e)},dp=function(e){if(e instanceof Object){for(var t=0,a=0,i=lp.length;a<i;a++)for(var s in e)s===lp[a].name&&(lp[a].value=e[s].value,lp[a].courts=e[s].courts,e[s].value>t&&(t=e[s].value));rp.series[1].data=lp,rp.visualMap.max=t}},up={updateData:np,updateChooseData:cp,option:rp,updateProvinceData:dp},pp=up,mp="[MapAnalysisApp]: ";a("Bhwq");var hp={components:{CourtTable:Qu},data:function(){return{mycharts:null,searchCourtName:"",courtListTB:[],provinceListTB:[],searchListTB:[],rowkeys:[0],activeName:"first",provinceName:"全省小区",provinceSel:"",provinArr:[{value:"",label:"-全国范围-"}]}},mounted:function(){console.log(mp+" 初始化全国小区列表信息  "),this.getCourtListData(),this.getMyCharts.setOption(pp.option),this.getMyCharts.on("click",this.handleClickMap)},methods:{handleClickMap:function(e){pp.updateChooseData([]),this.getMyCharts.setOption(pp.option),"scatter"===e.seriesType||"effectScatter"===e.seriesType?this.$router.push("/mapanalysisapp/courtinfo/"+e.data.courtUuid):"map"===e.seriesType&&(this.activeName="second",this.provinceName=e.data.name+"小区",this.provinceListTB=e.data.courts)},getCourtListData:function(e){var t=this;Ju({courtName:this.searchCourtName,org:this.provinceSel}).then(function(a){if("00000"===a.data.code){var i=a.data.data?a.data.data:[];t.courtList=i;var s=[],o=[],l={};console.log(mp+" 成功获取到小区列表数据; 小区数量： "+i.length);for(var r=[[113.619942,23.304629],[108.93,34.27],[116.4,39.9],[121.47,31.23],[120.19,30.26],[113.5611,28.4445]],n=0,c=i.length;n<c;n++){var d=i[n];if(d.gpsLat&&d.gpsLon||n<r.length){d.gpsLat||(d.gpsLon=r[n][0],d.gpsLat=r[n][1]);var u={name:d.courtName,value:[d.gpsLon,d.gpsLat],courtUuid:d.courtUuid};s.push(u)}if(!e){var p=d.org.replace("省","");l[p]||(l[p]={},l[p].value=0,l[p].courts=[],o.push({value:d.org,label:d.org})),l[p].value+=1,l[p].courts.push(d)}}e&&"search"===e?(pp.updateChooseData(s),t.activeName="third",t.searchListTB=i):(pp.updateData(s),pp.updateProvinceData(l),t.courtListTB=i.slice(0,10),o.length>0&&(t.provinArr=t.provinArr.concat(o))),t.getMyCharts.setOption(pp.option)}else t.$message({type:"warning",message:a.data.message})}).catch(function(e){t.$message({type:"warning",message:e}),console.warn(mp+" 获取到小区列表数据失败： "+e)})},onSearchCourt:function(){var e=this.searchCourtName;if(e=e.trim(),""===(e=e.replace(/s+/g," ")))return this.searchCourtName=e,void this.$message({type:"warning",message:"请输入要查询的小区名称"});this.getCourtListData("search")}},computed:{getMyCharts:function(){return this.mycharts?this.mycharts:this.$echarts.init(document.getElementById("map-ecarts"))}}},fp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-container"},[a("div",{staticClass:"map-con ui-common"},[a("div",{staticClass:"search-box"},[a("el-select",{staticClass:"pro-select",model:{value:e.provinceSel,callback:function(t){e.provinceSel=t},expression:"provinceSel"}},e._l(e.provinArr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{attrs:{maxlength:16,minlength:1,placeholder:"请输入小区名称",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSearchCourt(t)}},model:{value:e.searchCourtName,callback:function(t){e.searchCourtName=t},expression:"searchCourtName"}}),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.onSearchCourt}},[e._v("查询")])],1),e._v(" "),a("div",{staticStyle:{width:"1000px",height:"800px"},attrs:{id:"map-ecarts"}})]),e._v(" "),a("div",{staticClass:"list-table"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"推荐小区",name:"first"}},[a("court-table",{attrs:{tableData:e.courtListTB}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.provinceName,name:"second"}},[a("court-table",{attrs:{tableData:e.provinceListTB}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"搜索结果小区",name:"third"}},[a("court-table",{attrs:{tableData:e.searchListTB}})],1)],1)],1)])},gp=[],vp={render:fp,staticRenderFns:gp},bp=vp,Dp=a("VU/8"),yp=M,Cp=Dp(hp,bp,!1,yp,"data-v-773f967e",null),_p=Cp.exports,wp=a("woOf"),Sp=a.n(wp),xp=function(e){return{title:{text:e.title,textStyle:{fontSize:"14",fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#ddd"}},backgroundColor:"rgba(255,255,255,1)",padding:[5,10],textStyle:{color:"#7588E4"},extraCssText:"box-shadow: 0 0 5px rgba(0,0,0,0.3)"},legend:{data:e.legarr},toolbox:{feature:{saveAsImage:{}}},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:30},{type:"inside",xAxisIndex:[0],start:1,end:30}],xAxis:{type:"category",data:e.timeData,boundaryGap:!1,splitLine:{show:!0,interval:"auto",lineStyle:{color:["#D4DFF5"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#609ee9"}},axisLabel:{margin:10,textStyle:{fontSize:14}}},yAxis:{type:"value",splitLine:{lineStyle:{color:["#D4DFF5"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#609ee9"}},axisLabel:{margin:10,textStyle:{fontSize:14}}},series:[{name:e.legarr[0],type:"line",smooth:!0,showSymbol:!1,symbol:"circle",symbolSize:6,data:e.inData,areaStyle:{normal:{}},itemStyle:{normal:{color:e.colorarr[0]}},lineStyle:{normal:{width:3}}},{name:e.legarr[1],type:"line",smooth:!0,showSymbol:!1,symbol:"circle",symbolSize:6,data:e.outData,areaStyle:{normal:{}},itemStyle:{normal:{color:e.colorarr[1]}},lineStyle:{normal:{width:3}}}]}},kp=xp({title:"车行流量",legarr:["进园车流量","出园车流量"],colorarr:["#f7b851","#58c8da"],timeData:[],inData:[],outData:[]}),Tp=xp({title:"人员流量",legarr:["进园人流量","出园人流量"],colorarr:["#87CEFA","#FFE4E1"],timeData:[],inData:[],outData:[]}),Lp=function(e,t,a){return kp.xAxis.data=e,kp.series[0].data=t,kp.series[1].data=a,kp},Np=function(e,t,a){return Tp.xAxis.data=e,Tp.series[0].data=t,Tp.series[1].data=a,Tp},Vp=[],Ip={title:{text:"小区设备种类",left:"center",top:5,textStyle:{fontSize:"14",fontWeight:"bold"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},toolbox:{feature:{saveAsImage:{}}},calculable:!0,visualMap:{show:!1,min:80,max:600,inRange:{}},series:[{name:"小区设备",type:"pie",radius:[20,120],center:["50%","55%"],roseType:"area",data:Vp,label:{normal:{textStyle:{color:"#666"}}},labelLine:{normal:{lineStyle:{color:"#FF8C00"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]},Ep=function(e){e instanceof Array&&e.length>0&&(Ip.series[0].data=e.sort(function(e,t){return e.value-t.value}))},Pp={option:Ip,updateData:Ep},Mp=Pp,$p=["男","女"],Up=["0-10","10-20","20-30","30-40","40-50","50-60","60以上"],Fp=[],Rp={title:{text:"社区男女比例",textStyle:{fontSize:"14",fontWeight:"bold"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{feature:{saveAsImage:{}}},legend:{orient:"horizontal",x:"left",y:"bottom",data:$p},series:[{name:"社区男女比例",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"22",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:Fp}]},zp=[],Ap={title:{text:"小区人员年龄分布",textStyle:{fontSize:"14",fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a}: {b}<br/>人数: {c}"},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:Up},series:[{name:"年龄",type:"bar",data:zp}]},Op=function(e){e instanceof Array&&e.length>0&&(Ap.yAxis.data=e)},qp=function(e){e instanceof Array&&e.length>0&&(Rp.series[0].data=e)},Bp=function(e){e instanceof Array&&e.length>0&&(Ap.series[0].data=e)},Wp={optionSex:Rp,optionAge:Ap,updateSexData:qp,updateAgeLevelData:Op,updateAgeData:Bp},Qp=Wp,Gp=a("Q0dh"),Hp=a.n(Gp),jp={data:function(){var e=this;return{form:{date:"",dateList:[],courtUuid:"",courtName:"",perInCount:"",perInCountList:[],perOutCount:"",perOutCountList:[]},reportTypeList:[{value:"0",label:"日报"},{value:"1",label:"月报"},{value:"2",label:"年报"}],parameter:{courtUuid:"",currentPage:1,pageSize:10,reportType:"0",startTime:null,endTime:null},cellDetailsList:{},timeType:"date",totalRows:10,tableData:[],isTableActivated:!1,isChartActivated:!0,isChartShow:!1,isTableShow:!0,isPerErrInfo:!1,dialogVisible:!1,perErrImg:Hp.a,startDate:new Date((new Date).setDate((new Date).getDate()-7)),endDate:new Date,myChart:null,myChartNode:null,canvasNode:null,chartClickNum:0,tableClickNum:0,isRequest:!0,myChartContainer:null,starForbiddenDatetime:{disabledDate:function(t){return t.getTime()>e.endDate}},endForbiddenDatetime:{disabledDate:function(t){return t.getTime()>new Date||t.getTime()<e.startDate}}}},methods:{onReportTypeEvent:function(e){"0"===e||"1"===e?(this.timeType="date",this.startDate=new Date(this.endDate.getTime()-6048e5)):(this.timeType="month",this.startDate=new Date(this.endDate.getTime()-316224e5))},onChartSwitch:function(){var e=this;console.log(mp+" 点击切换图表展示 "),this.isChartShow=!0,this.isTableShow=!1,this.isChartActivated=!1,this.isTableActivated=!0,setTimeout(function(){e.myChartContainer=function(){this.myChartNode.style.width=0===this.canvasNode.offsetWidth?"900px":this.canvasNode.offsetWidth+"px"},e.myChartContainer(),e.myChart.resize()}),this.myChartNode=document.querySelector("#flow-information"),this.canvasNode=document.querySelector(".echarts-frame"),this.myChart=this.$echarts.init(this.myChartNode),this.myChart.setOption(this.echartsData()),this.chartClickNum>0||(this.chartClickNum++,this.isRequest?this.getData():this.$message({type:"error",message:"请选择正确的时间"}),window.onresize=function(){e.myChartContainer(),e.myChart.resize()})},echartsData:function(){return{title:{text:"人员流量"},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#ddd"}},backgroundColor:"rgba(255,255,255,1)",padding:[5,10],textStyle:{color:"#7588E4"},extraCssText:"box-shadow: 0 0 5px rgba(0,0,0,0.3)"},toolbox:{right:"20",feature:{magicType:{type:["line","bar"]},saveAsImage:{show:!0,right:"20"}}},dataZoom:[{type:"slider",start:0,end:this.form.dateList.length>31?10:100},{type:"inside",start:10,end:60}],legend:{x:"center",data:["入园人数","出园人数"]},xAxis:[{type:"category",data:this.form.dateList,boundaryGap:!1,splitLine:{show:!0,interval:"auto",lineStyle:{color:["#D4DFF5"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#609ee9"}},axisLabel:{margin:10,textStyle:{fontSize:14}}}],yAxis:[{type:"value",splitLine:{lineStyle:{color:["#D4DFF5"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#609ee9"}},axisLabel:{margin:10,textStyle:{fontSize:14}}}],series:[{name:"入园人数",type:"line",smooth:!0,showSymbol:!1,symbol:"circle",symbolSize:6,data:this.form.perInCountList,areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(199, 237, 250,0.7)"},{offset:1,color:"rgba(199, 237, 250,0.5)"}],!1)}},itemStyle:{normal:{color:"#f7b851"}},lineStyle:{normal:{width:3}}},{name:"出园人数",type:"line",data:this.form.perOutCountList,smooth:!0,showSymbol:!1,symbol:"circle",symbolSize:6,areaStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(216, 244, 247,1)"},{offset:1,color:"rgba(216, 244, 247,1)"}],!1)}},itemStyle:{normal:{color:"#58c8da"}},lineStyle:{normal:{width:3}}}]}},onTableSwitch:function(){console.log(mp+" 点击切换表格展示 "),this.isChartShow=!1,this.isTableShow=!0,this.isChartActivated=!0,this.isTableActivated=!1;var e=document.querySelector(".el-table__header"),t=document.querySelector(".el-table__body"),a=document.querySelector(".gutter");e&&(e.style.width="100%",t.style.width="100%",a.style.display="block"),document.querySelector(".el-table").style.height="382px",this.tableClickNum>0||(this.tableClickNum++,this.getPgingData())},streamPeople:function(e){var t=this;this.getPgingData(),this.parameter.courtUuid=e,Zu({courtUuid:e}).then(function(e){t.cellDetailsList=e.data.data,console.log(mp+" 成功获取到小区的详细信息 ")}),this.dialogVisible=!0},onTimeQuery:function(){console.log(mp+" 按时间（报表类型）查询 "),this.parameter.currentPage=1,this.onTimeJudgment(),this.isRequest?this.isTableShow?this.getPgingData():this.getData():this.$message({type:"error",message:"请选择正确的时间"}),this.isTableShow?this.chartClickNum=0:this.tableClickNum=0},onTimeJudgment:function(){switch(this.parameter.reportType){case"0":this.endDate.getTime()-this.startDate.getTime()>2592e6?(this.$message({type:"error",message:"日报查询范围为1个月"}),this.isRequest=!1):this.isRequest=!0;break;case"1":this.endDate.getTime()-this.startDate.getTime()>31536e6?(this.$message({type:"error",message:"月报查询范围为1年"}),this.isRequest=!1):this.isRequest=!0;break;case"2":this.isRequest=!0}},onSizeChange:function(e){this.parameter.pageSize=e,this.parameter.currentPage=1,this.getPgingData()},onCurrentChange:function(e){this.parameter.currentPage=e,this.getPgingData()},getData:function(){var e=this;this.parameter.startTime=this.processingDate(this.startDate),this.parameter.endTime=this.processingDate(this.endDate),Xu(this.parameter).then(function(t){if("00000"===t.data.code){console.log(mp+" 成功获取到小区人流信息(图表) ");var a=t.data.data;e.form.dateList=[],e.form.perInCountList=[],e.form.perOutCountList=[];for(var i=a.length-1;i>=0;i--)e.form.dateList.push(a[i].date),e.form.perInCountList.push(a[i].perInCount),e.form.perOutCountList.push(a[i].perOutCount);e.form.dateList.length<=0||e.form.perInCountList.length<=0||e.form.perOutCountList.length<=0?e.isPerErrInfo=!0:e.isChartShow&&(e.isPerErrInfo=!1,e.myChart.setOption(e.echartsData()))}else e.isPerErrInfo=!0,e.$message({type:"error",message:t.data.message})}).catch(function(t){e.isPerErrInfo=!0,e.$message({type:"warning",message:t})})},processingDate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},getPgingData:function(){var e=this;this.parameter.startTime=this.processingDate(this.startDate),this.parameter.endTime=this.processingDate(this.endDate),ep(this.parameter).then(function(t){"00000"===t.data.code?(console.log(mp+" 成功获取到小区人流信息(表格) "),e.tableData=t.data.data.result,e.totalRows=t.data.data.totalRows):e.$message({type:"error",message:t.data.message})}).catch(function(t){e.$message({type:"warning",message:t})})},onCloseCallback:function(){this.chartClickNum=0}}},Jp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"popup-peo",attrs:{title:"人流数据展示",visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.onCloseCallback}},[a("el-row",[a("el-col",{staticClass:"left-text",attrs:{span:4}},[a("div",[a("div",[a("span",[e._v("小区名称")]),e._v("\n          ："+e._s(e.cellDetailsList.courtName))]),e._v(" "),a("div",[a("span",[e._v("小区地址")]),e._v("\n          ："+e._s(e.cellDetailsList.regionName))]),e._v(" "),a("div",[a("span",[e._v("户数")]),e._v("\n          ："+e._s(e.cellDetailsList.homeCount)+"户")]),e._v(" "),a("div",[a("span",[e._v("房屋总数")]),e._v("\n          ："+e._s(e.cellDetailsList.houseCount)+"间")]),e._v(" "),a("div",[a("span",[e._v("占地面积")]),e._v("\n          ："+e._s(e.cellDetailsList.floorArea)+"平方米")]),e._v(" "),a("div",[a("span",[e._v("建筑面积")]),e._v("\n          ："+e._s(e.cellDetailsList.buildArea)+"平方米")])])]),e._v(" "),a("el-col",{staticStyle:{height:"600px"},attrs:{span:19}},[a("el-form",{ref:"form",attrs:{model:e.parameter,"label-width":"80px","label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报表类型"}},[a("el-select",{staticStyle:{width:"95%"},attrs:{placeholder:"请选择"},on:{change:e.onReportTypeEvent},model:{value:e.parameter.reportType,callback:function(t){e.$set(e.parameter,"reportType",t)},expression:"parameter.reportType"}},e._l(e.reportTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{staticStyle:{width:"95%"},attrs:{type:e.timeType,placeholder:"开始时间","picker-options":e.starForbiddenDatetime,clearable:!1,editable:!1},on:{change:e.onTimeJudgment},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{staticStyle:{width:"95%"},attrs:{type:e.timeType,placeholder:"结束时间","picker-options":e.endForbiddenDatetime,clearable:!1,editable:!1},on:{change:e.onTimeJudgment},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onTimeQuery}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success",plain:e.isTableActivated},on:{click:e.onTableSwitch}},[e._v("表单")]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:e.isChartActivated},on:{click:e.onChartSwitch}},[e._v("图表")])],1)],1)],1),e._v(" "),a("div",{staticClass:"show"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isTableShow,expression:"isTableShow"}]},[a("el-table",{attrs:{data:e.tableData,width:"100%",height:"380",stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"courtName",label:"小区名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perInCount",label:"入园人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perOutCount",label:"出园人数"}})],1),e._v(" "),a("el-pagination",{staticClass:"table-pager",attrs:{background:"","current-page":e.parameter.currentPage,"page-sizes":[10,20,50,100],"page-size":e.parameter.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalRows},on:{"size-change":e.onSizeChange,"current-change":e.onCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChartShow,expression:"isChartShow"}],staticClass:"echarts-frame",staticStyle:{width:"100%"}},[a("div",{attrs:{id:"flow-information"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPerErrInfo,expression:"isPerErrInfo"}],staticClass:"pererr-info"},[a("img",{attrs:{src:e.perErrImg}})])])])],1)],1)],1)},Zp=[],Kp={render:Jp,staticRenderFns:Zp},Yp=Kp,Xp=a("VU/8"),em=$,tm=Xp(jp,Yp,!1,em,"data-v-3b24f6e6",null),am=tm.exports,im={name:"CarStream",data:function(){var e=this;return{isShowCarInfoMap:!1,isShowTable:!0,isShowChart:!1,isReponseData:!1,canLeaveChart:!0,clickCount:0,preTableShowStatus:"",formDatePickType:"date",clearableDatepick:!1,editableDatepick:!1,form:{courtUuid:"222b79f4a7b44d03b6f55f028992851f",reportType:"0",startTime:new Date((new Date).setDate((new Date).getDate()-6)),endTime:new Date},courtInfo:{},carStreamData:[],mapDataList:{date:[],carInCourt:[],carOutCourt:[],carInRegedCourt:[],carOutRegedCourt:[]},currentPage:1,pageSize:10,totalRows:0,myChart:null,forbiddenStartDatetime:{disabledDate:function(t){return t.getTime()>e.form.endTime}},forbiddenEndDatetime:{disabledDate:function(t){return t.getTime()<e.form.startTime||t.getTime()>Date.now()}}}},methods:{goToCarStreamPage:function(e){e&&(this.form.courtUuid=e),this.getCourtInfo(),this.isShowCarInfoMap=!0,this.isShowChart?this.$nextTick(function(){this.getCourtCarAccessInfo()}):this.$nextTick(function(){this.getCarAccessPageList()})},onGoToTable:function(){this.canLeaveChart&&(this.isShowTable=!0,this.isShowChart=!1)},onGoToMap:function(){var e=this;this.preTableShowStatus=this.isShowTable,this.isShowTable=!1,this.isShowChart=!0,this.preTableShowStatus&&(this.clickCount>0||(this.$nextTick(function(){e.getCourtCarAccessInfo()}),this.clickCount++))},chartInit:function(){function e(){a.myChart.resize&&a.myChart.resize()}function t(e,t,a){clearTimeout(e.timeoutId),e.timeoutId=setTimeout(function(){e.call(t)},a)}var a=this;this.myChart||(this.myChart=this.$echarts.init(document.getElementById("car-info-map"))),this.myChart.setOption(this.optionData),window.onresize=function(){t(e,null,200)};var i=this.mapDataList.date;this.disPatchAction(this.myChart,i,{dataIndex:0},8),this.myChart.on("click",function(e){this.disPatchAction(this.myChart,i,e,8)}.bind(this)),console.log(mp+" echarts图表初始化  ")},disPatchAction:function(e,t,a,i){e.dispatchAction({type:"dataZoom",startValue:t[Math.max(a.dataIndex-i/2,0)],endValue:t[Math.min(a.dataIndex+i/2,t.length-1)]})},sortData:function(e){this.mapDataList={date:[],carInCourt:[],carOutCourt:[],carInRegedCourt:[],carOutRegedCourt:[]};for(var t=e.length-1;t>=0;t--)this.mapDataList.date.push(e[t].date),this.mapDataList.carInCourt.push(e[t].carInCount),this.mapDataList.carOutCourt.push(e[t].carOutCount),this.mapDataList.carInRegedCourt.push(e[t].carInRegedCount),this.mapDataList.carOutRegedCourt.push(e[t].carOutRegedCount)},onReportTypeSelected:function(){"0"===this.form.reportType?(this.formDatePickType="date",this.form.startTime=new Date((new Date).setDate((new Date).getDate()-6))):"1"===this.form.reportType?(this.formDatePickType="date",this.form.startTime=new Date(new Date-2592e6)):(this.formDatePickType="month",this.form.startTime=new Date(new Date-31104e6))},onHandleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getCarAccessPageList()},onHandleCurrentChange:function(e){this.currentPage=e,this.getCarAccessPageList()},onSubmitForm:function(e){1!==this.onDatePickRangeConfrim()&&(this.isShowTable?(this.pageSize=10,this.currentPage=1,this.getCarAccessPageList()):this.getCourtCarAccessInfo(),this.preTableShowStatus="",this.clickCount=0)},getCourtCarAccessInfo:function(){var e=this;if(!this.onDatePickRangeConfrim()){this.canLeaveChart=!1;var t=this.queryParam();Ku(t).then(function(t){if("00000"===t.data.code)if(console.log(mp+" 成功获取小区echarts图表展示车流信息  "),0===t.data.data.length)e.isReponseData=!0;else{e.isReponseData=!1;var a=t.data.data;e.sortData(a),e.chartInit()}else e.isReponseData=!0,e.errMessage(t.data.message);e.canLeaveChart=!0}).catch(function(){e.isReponseData=!0,e.canLeaveChart=!0})}},getCarAccessPageList:function(){var e=this;if(!this.onDatePickRangeConfrim()){var t=this.queryParam();t=Sp()(t,{pageSize:this.pageSize,currentPage:this.currentPage}),Yu(t).then(function(t){"00000"===t.data.code?(console.log(mp+" 获取第"+e.currentPage+"页小区车流信息"),e.totalRows=t.data.data.totalRows,e.carStreamData=t.data.data.result):e.errMessage(t.data.message)})}},getCourtInfo:function(){var e=this;Zu({courtUuid:this.form.courtUuid}).then(function(t){"00000"===t.data.code?(console.log(mp+" 成功获取小区信息  "),e.courtInfo=t.data.data):e.errMessage(t.data.message)})},queryParam:function(){return Sp()({},this.form,{startTime:this.timeFomate(this.form.startTime),endTime:this.timeFomate(this.form.endTime)})},timeFomate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},onCloseDialog:function(){this.clickCount=0,this.isReponseData=!1,this.myChart&&this.myChart.dispose&&this.myChart.dispose(),this.myChart=null},onDatePickRangeConfrim:function(){switch(this.form.reportType){case"0":if(Math.ceil((this.form.endTime-this.form.startTime)/864e5)>31)return this.$message.error({message:"只能查一个月之内的日报表",duration:1500}),!0;break;case"1":if(Math.ceil((this.form.endTime-this.form.startTime)/864e5/30)>12)return this.$message.error({message:"只能查一年之内的月报表",duration:1500}),!0}},errMessage:function(e){this.$message.error({type:"warning",message:e})}},computed:{optionData:function(){return{title:{text:"小区车流量d"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"2%",right:"2%",bottom:"10%",containLabel:!0},legend:{data:["进入总车辆","出去总车辆","登记进入总车辆","登记出去总车辆"],type:"plain",show:!0,right:"18%",top:"1%"},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:this.mapDataList.date,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:25},{type:"inside",show:!0,start:50,xAxisIndex:[0],end:100}],series:[{name:"进入总车辆",type:"bar",data:this.mapDataList.carInCourt},{name:"出去总车辆",type:"bar",data:this.mapDataList.carOutCourt},{name:"登记进入总车辆",type:"bar",data:this.mapDataList.carInRegedCourt},{name:"登记出去总车辆",type:"bar",data:this.mapDataList.carOutRegedCourt}]}}}},sm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShowCarInfoMap?i("div",{staticClass:"car-info"},[i("el-dialog",{attrs:{visible:e.isShowCarInfoMap,title:"小区车流量",width:"70%"},on:{"update:visible":function(t){e.isShowCarInfoMap=t},close:e.onCloseDialog}},[i("el-row",[i("el-col",{attrs:{span:4}},[i("div",{staticClass:"description"},[i("div",[i("p",[e._v("小区名称")]),e._v("："+e._s(e.courtInfo.courtName)+"\n          ")]),e._v(" "),i("div",[i("p",[e._v("小区地址")]),e._v("："+e._s(e.courtInfo.regionName)+"\n          ")]),e._v(" "),i("div",[i("p",[e._v("户 数")]),e._v("："+e._s(e.courtInfo.homeCount)+"栋\n          ")]),e._v(" "),i("div",[i("p",[e._v("房屋总数")]),e._v("："+e._s(e.courtInfo.houseCount)+"间\n          ")]),e._v(" "),i("div",[i("p",[e._v("占地面积")]),e._v("："+e._s(e.courtInfo.floorArea)+"平方米\n          ")]),e._v(" "),i("div",[i("p",[e._v("建筑面积")]),e._v("："+e._s(e.courtInfo.buildArea)+"平方米\n          ")])])]),e._v(" "),i("el-col",{attrs:{span:20}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"top"}},[i("el-row",{staticClass:"first-row",attrs:{span:24}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"报表类型"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择查询方式"},on:{change:e.onReportTypeSelected},model:{value:e.form.reportType,callback:function(t){e.$set(e.form,"reportType",t)},expression:"form.reportType"}},[i("el-option",{attrs:{label:"日报",value:"0"}}),e._v(" "),i("el-option",{attrs:{label:"月报",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"年报",value:"2"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"开始时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:e.formDatePickType,placeholder:"选择日期","picker-options":e.forbiddenStartDatetime,clearable:e.clearableDatepick,editable:e.editableDatepick},on:{change:e.onDatePickRangeConfrim},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),e._v(" "),i("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8}},[i("el-form-item",{attrs:{label:"结束时间"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:e.formDatePickType,placeholder:"选择日期","picker-options":e.forbiddenEndDatetime,clearable:e.clearableDatepick,editable:e.editableDatepick},on:{change:e.onDatePickRangeConfrim},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"text-align":"right"},attrs:{span:24}},[i("el-col",{attrs:{span:24}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmitForm("form")}}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.onGoToTable()}}},[e._v("表单")]),e._v(" "),i("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.onGoToMap()}}},[e._v("图表")])],1)],1)],1),e._v(" "),i("div",{staticClass:"data-view"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTable,expression:"isShowTable"}],staticClass:"car-info-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.carStreamData,height:"400",border:""}},[i("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carInCount",label:"进入总车辆"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carOutCount",label:"出去总车辆"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carInRegedCount",label:"登记进入总车辆"}}),e._v(" "),i("el-table-column",{attrs:{prop:"carOutRegedCount",label:"登记出去总车辆"}})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalRows,background:"",small:""},on:{"size-change":e.onHandleSizeChange,"current-change":e.onHandleCurrentChange}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowChart,expression:"isShowChart"}],attrs:{id:"car-info-Mapbox"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.isReponseData,expression:"isReponseData"}],attrs:{src:a("Q0dh")}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowChart,expression:"isShowChart"}],attrs:{id:"car-info-map"}})])])],1)],1)],1)],1):e._e()},om=[],lm={render:sm,staticRenderFns:om},rm=lm,nm=a("VU/8"),cm=U,dm=nm(im,rm,!1,cm,"data-v-158cde34",null),um=dm.exports,pm={name:"EquipmentReport",data:function(){return{dialogReportVisible:!1,isChartShow:!0,isTableShow:!1,isReponseData:!1,noDataTips:!1,tableData:[],names:[],onlinenames:[],onlinedata:[],totaldata:[],courtName:"",equipmentcharts:{},equipmentonlinecharts:{}}},methods:{onChartSwitch:function(){this.isChartShow=!0,this.isTableShow=!1},onTableSwitch:function(){this.isChartShow=!1,this.isTableShow=!0},chartInit:function(){var e=this.$echarts.init(document.getElementById("equipment-charts"));this.equipmentcharts=e;var t={title:{text:"设备总数量",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:this.names,x:"center",y:"bottom",type:"scroll"},series:[{name:"设备总数量",type:"pie",radius:"55%",center:["50%","50%"],selectedMode:"single",data:this.totaldata,label:{emphasis:{show:!0,textStyle:{fontSize:"25",fontWeight:"bold"}}},labelLine:{normal:{smooth:.3,length:10,length2:20}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]};this.equipmentcharts.setOption(t)},onlineChartInit:function(){var e=this.$echarts.init(document.getElementById("equipment-online-charts"));this.equipmentonlinecharts=e;var t={title:{text:"设备实时在网数量",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{x:"center",y:"bottom",type:"scroll",data:this.onlinenames},calculable:!0,series:[{name:"实时在网数量",type:"pie",radius:[100,160],center:["50%","50%"],selectedMode:"single",avoidLabelOverlap:!1,label:{emphasis:{show:!0,textStyle:{fontSize:"24",fontWeight:"bold"}}},data:this.onlinedata}]};this.equipmentonlinecharts.setOption(t)},equipmentReport:function(e,t){var a=this;this.dialogReportVisible=!0,e||(e="222b79f4a7b44d03b6f55f028992851f"),this.courtName=t,this.$nextTick(function(){var t={};t.courtUuid=e,tp(t).then(function(e){if("00000"===e.data.code){a.isOnlineReponseData=!1,a.tableData=e.data.data,a.onlinedata=[],a.totaldata=[];for(var t in a.tableData)a.names.push(a.tableData[t].deviceTypeDesc),0!==a.tableData[t].onlineCount&&a.onlinenames.push(a.tableData[t].deviceTypeDesc),a.onlinedata.push({name:a.tableData[t].deviceTypeDesc,value:a.tableData[t].onlineCount,itemStyle:{normal:{label:{show:!0,formatter:function(e,t){0===e.data.value&&(e.data.label.normal.show=!1,e.data.labelLine.normal.show=!1)}},labelLine:{show:!0}}}}),a.totaldata.push({name:a.tableData[t].deviceTypeDesc,value:a.tableData[t].deviceCount});0===a.tableData.length?(a.isReponseData=!1,a.noDataTips=!0):(a.noDataTips=!1,a.isReponseData=!1,a.chartInit(),a.onlineChartInit())}else a.isReponseData=!0,a.$message.error({message:e.data.message,duration:1500})}).catch(function(){a.isReponseData=!0,a.noDataTips=!1})})},onCloseDialog:function(){this.isChartShow=!0,this.isTableShow=!1,this.isReponseData=!1,this.onlinedata=[],this.totaldata=[],this.tableData=[],this.equipmentcharts&&this.equipmentcharts.dispose&&this.equipmentcharts.dispose(),this.equipmentonlinecharts&&this.equipmentonlinecharts.dispose&&this.equipmentonlinecharts.dispose()},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach(function(e,t){if(0===t)return void(i[t]="总数量");if(1===t)return void(i[t]="");var s=a.map(function(t){return Number(t[e.property])});s.every(function(e){return isNaN(e)})?i[t]="N/A":(i[t]=s.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i[t]+="")}),i}}},mm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogReportVisible?i("div",[i("el-dialog",{attrs:{title:"设备数报表",visible:e.dialogReportVisible,width:"70%"},on:{"update:visible":function(t){e.dialogReportVisible=t},close:e.onCloseDialog}},[i("div",{staticClass:"container"},[i("el-button",{attrs:{type:"primary"},on:{click:e.onChartSwitch}},[e._v("图表")]),e._v(" "),i("el-button",{attrs:{type:"success"},on:{click:e.onTableSwitch}},[e._v("表格")]),e._v(" "),i("div",{staticClass:"court-name"},[e._v(e._s(e.courtName))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isTableShow,expression:"isTableShow"}],staticClass:"equipment-table",staticStyle:{width:"100%","margin-top":"20px"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"summary-method":e.getSummaries,height:"604",border:"","show-summary":""}},[i("el-table-column",{attrs:{prop:"deviceType",label:"设备ID",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"deviceTypeDesc",label:"设备名称",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"deviceCount",label:"数量",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"onlineCount",label:"在网数量",align:"center"}})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isChartShow,expression:"isChartShow"}],staticClass:"chart-container"},[i("div",{attrs:{id:"equipment-chartsbox"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.noDataTips,expression:"noDataTips"}]},[e._v("暂无数据 ")]),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:e.isReponseData,expression:"isReponseData"}],attrs:{src:a("Q0dh")}}),e._v(" "),i("div",{attrs:{id:"equipment-charts"}})]),e._v(" "),i("div",{attrs:{id:"equipment-online-chartsbox"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.noDataTips,expression:"noDataTips"}]},[e._v("暂无数据 ")]),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:e.isReponseData,expression:"isReponseData"}],attrs:{src:a("Q0dh")}}),e._v(" "),i("div",{attrs:{id:"equipment-online-charts"}})])])],1)])],1):e._e()},hm=[],fm={render:mm,staticRenderFns:hm},gm=fm,vm=a("VU/8"),bm=F,Dm=vm(pm,gm,!1,bm,"data-v-b11bd0f8",null),ym=Dm.exports,Cm={title:{text:"业主画像",y:"top",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left",y:"top",data:[]},series:[{name:"参数",type:"pie",radius:[0,"35%"],center:["50%","55%"],label:{normal:{position:"inner"}},labelLine:{normal:{show:!0}},data:[]},{name:"参数",type:"pie",radius:["50%","70%"],center:["50%","55%"],label:{normal:{formatter:"{b|{b}：}{c}  {per|{d}%}",backgroundColor:"#eee",borderColor:"#aaa",borderWidth:1,borderRadius:4,rich:{a:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},b:{fontSize:14,lineHeight:24},per:{color:"#eee",backgroundColor:"#334455",padding:[2,4],borderRadius:2}}}},data:[]}]},_m={title:{text:"业主出入率"},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#ddd"}},backgroundColor:"rgba(255,255,255,1)",padding:[5,10],textStyle:{color:"#7588E4"},extraCssText:"box-shadow: 0 0 5px rgba(0,0,0,0.3)"},toolbox:{right:"15",feature:{magicType:{type:["line","bar"]},saveAsImage:{show:!0,right:"20"}}},dataZoom:[{type:"slider",start:0,end:20},{type:"inside",start:10,end:60}],legend:{x:"center",data:["进入次数","出去次数"]},xAxis:{type:"category",data:[],boundaryGap:!1,splitLine:{show:!0,interval:"auto",lineStyle:{color:["#D4DFF5"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#609ee9"}},axisLabel:{margin:10,textStyle:{fontSize:14}}},yAxis:{type:"value",splitLine:{lineStyle:{color:["#D4DFF5"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#609ee9"}},axisLabel:{margin:10,textStyle:{fontSize:14}}},series:[{name:"进入次数",type:"line",smooth:!0,showSymbol:!1,symbol:"circle",symbolSize:6,data:[],areaStyle:{normal:{}},itemStyle:{normal:{color:"#f7b851"}},lineStyle:{normal:{width:3}}},{name:"出去次数",type:"line",smooth:!0,showSymbol:!1,symbol:"circle",symbolSize:6,data:[],areaStyle:{normal:{}},itemStyle:{normal:{color:"#58c8da"}},lineStyle:{normal:{width:3}}}]},wm={owenrOptionData:Cm,rateOptionData:_m},Sm=wm,xm={data:function(){var e=this;return{dialogVisible:!1,form:{buildList:[],buildValue:"",classList:[{value:"1",label:"业主人数"},{value:"2",label:"出入频率"}],reportTypeList:[{value:"0",label:"日报"},{value:"1",label:"月报"},{value:"2",label:"年报"}]},cellDetailsList:{},courtId:"",buildId:"",tempId:"",parameter:{courtUuid:"",classValue:"1",reportType:"0",currentPage:1,pageSize:10,startDate:null,endDate:null},total:10,disabled:!0,startTime:new Date((new Date).setDate((new Date).getDate()-3)),endTime:new Date,starForbiddenDatetime:{disabledDate:function(t){return t.getTime()>e.endTime}},endForbiddenDatetime:{disabledDate:function(t){return t.getTime()>new Date||t.getTime()<e.startTime}},timeType:"date",myOwenrChart:null,myRateChart:null,ownerTableData:[],owerMapData:{ageGroupInfo:[],sexInfo:[]},rateTableData:[],rateMapData:{dateList:[],perInCountList:[],perOutCountList:[]},perErrImg:Hp.a,isErrData:!1,clearableDatepick:!1,editableDatepick:!1,isOwner:!0,isRate:!1,isOwenrTable:!0,isOwenrMap:!1,isRateTable:!1,isRateMap:!1,isRequest:!0,clickTap:!1,clickTable:!1,myChartContainer:null,tableOrMap:"0",flagVal:"1",flag:!1}},methods:{ownerPortrait:function(e){var t=this;this.dialogVisible=!0,this.form.buildList=[],this.parameter.courtUuid=e,this.courtId=e,Zu({courtUuid:e,type:0}).then(function(e){var a=e.data.data;t.cellDetailsList=a,t.form.buildList.unshift({value:a.courtUuid,label:a.courtName}),console.log(mp+"获取到小区名并插入到列表"),t.form.buildValue=a.courtUuid}).catch(function(e){t.$message({type:"warning",message:e})});var a={courtUuid:this.parameter.courtUuid,currentPage:this.parameter.currentPage,pageSize:this.parameter.pageSize,startTime:this.processingDate(this.startTime),endTime:this.processingDate(this.endTime),type:0};ap(a).then(function(e){"00000"===e.data.code&&(e.data.data.buildInfo.map(function(e){t.form.buildList.push({value:e.uuid,label:e.memo})}),console.log(mp+"获取到小区楼栋名并插入到列表"))}).catch(function(e){t.$message({type:"warning",message:e})}),this.getCourtTableData(e)},onBuildingSelection:function(e){this.tempId=e,e!==this.courtId&&(this.buildId=e)},onReportTypeEvent:function(e){switch(e){case"0":this.timeType="date",this.startTime=new Date((new Date).setDate((new Date).getDate()-3)),this.endTime=new Date;break;case"1":this.timeType="date",this.startTime=new Date(this.endTime.getTime()-2592e6);break;case"2":this.timeType="month",this.startTime=new Date(this.endTime.getTime()-31536e6)}},onGoTable:function(){switch(console.log(mp+"切换到表格显示"),this.tableOrMap="0",this.flagVal){case"1":this.isOwenrTable=!0,this.isOwenrMap=!1;var e=document.querySelector(".el-table__header"),t=document.querySelector(".el-table__body");if(e.style.width="100%",t.style.width="100%",!this.clickTable)return;this.clickTable=!1,this.tempId!==this.courtId&&""!==this.tempId?this.getBuildOwnerTableData():this.getCourtTableData(this.courtId);break;case"2":if(this.isRateTable=!0,this.isRateMap=!1,!this.clickTable)return;this.clickTable=!1,this.tempId!==this.courtId&&""!==this.tempId?this.getBuildRateTableData():this.getRateTableData()}},onSizeChange:function(e){this.parameter.pageSize=e,this.parameter.currentPage=1,this.tempId!==this.courtId&&""!==this.tempId?this.getBuildRateTableData():this.getRateTableData()},onCurrentChange:function(e){console.log(mp+"当前页数:"+e),this.parameter.currentPage=e,this.tempId!==this.courtId&&""!==this.tempId?this.getBuildRateTableData():this.getRateTableData()},onGoMap:function(){switch(console.log(mp+"切换到图表显示"),this.tableOrMap="1",this.flagVal){case"1":if(this.isOwenrTable=!1,this.isOwenrMap=!0,this.flag)return;this.flag=!0,this.tempId!==this.courtId&&""!==this.tempId?this.getBuildOwnerTableData():this.getCourtTableData(this.courtId);break;case"2":if(this.isRateTable=!1,this.isRateMap=!0,Sm.rateOptionData.series[0].areaStyle.normal={color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(199, 237, 250,0.7)"},{offset:1,color:"rgba(199, 237, 250,0.5)"}],!1)},Sm.rateOptionData.series[1].areaStyle.normal={color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(216, 244, 247,1)"},{offset:1,color:"rgba(216, 244, 247,1)"}],!1)},!this.clickTap)return;this.clickTap=!1,this.tempId!==this.courtId&&""!==this.tempId?this.getBuildMapData():this.getCourtMapData()}},onReportLabel:function(e){switch(e){case"1":this.isRequest=!0,this.disabled=!0;break;case"2":this.disabled=!1,this.parameter.startDate=this.processingDate(this.startTime),this.parameter.endDate=this.processingDate(this.endTime)}},onTimeJudgment:function(){switch(this.parameter.reportType){case"0":this.endTime.getTime()-this.startTime.getTime()>2592e6?(this.isRequest=!1,this.$message({type:"error",message:"日报查询范围为1个月"})):this.isRequest=!0;break;case"1":this.endTime.getTime()-this.startTime.getTime()>31536e6?(this.isRequest=!1,this.$message({type:"error",message:"月报查询范围为1年"})):this.isRequest=!0;break;case"2":this.isRequest=!0}},processingDate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},resizeEcharts:function(e,t,a,i){var s=document.querySelector(e),o=document.querySelector(t);setTimeout(function(){a=function(){s.style.width=0===o.offsetWidth?"900px":o.offsetWidth+"px"},a(),i.resize()}),window.onresize=function(){a(),i.resize()}},onInquireData:function(){switch(this.clickTap=!0,this.clickTable=!0,this.flagVal=this.parameter.classValue,this.flag=!1,this.parameter.currentPage=1,this.flagVal){case"1":this.isOwner=!0,this.isRate=!1,"0"===this.tableOrMap?this.onGoTable():this.onGoMap();break;case"2":if(this.onTimeJudgment(),!this.isRequest)return;this.isRate=!0,this.isOwner=!1,this.parameter.startDate=this.processingDate(this.startTime),this.parameter.endDate=this.processingDate(this.endTime),"0"===this.tableOrMap?this.onGoTable():this.onGoMap()}},owenrChart:function(){Sm.owenrOptionData.legend.data=this.owerMapData.ageGroupInfo.map(function(e){return e.group}),Sm.owenrOptionData.series[1].data=this.owerMapData.ageGroupInfo.map(function(e){return{value:e.countNum,name:e.group}}),this.owerMapData.sexInfo.length?Sm.owenrOptionData.series[0].data=[{value:this.owerMapData.sexInfo[0].femaleOwner,name:"女",selected:!0},{value:this.owerMapData.sexInfo[0].maleOwner,name:"男"}]:Sm.owenrOptionData.series[0].data=[],this.myOwenrChart=this.$echarts.init(document.getElementById("owner-formation")),this.myOwenrChart.setOption(Sm.owenrOptionData),this.resizeEcharts("#owner-formation",".canvas-owner",this.myChartContainer,this.myOwenrChart)},onCloseDialog:function(){console.log(mp+"关闭弹窗"),this.isOwner=!0,this.isRate=!1,this.isOwenrTable=!0,this.isOwenrMap=!1,this.isRateTable=!1,this.isRateMap=!1,this.isRequest=!0,this.clickTap=!1,this.clickTable=!1,this.tableOrMap="0",this.flagVal="1",this.flag=!1,this.parameter={courtUuid:"",classValue:"1",reportType:"0",currentPage:1,pageSize:10,startDate:null,endDate:null},this.disabled=!0,this.ownerTableData=[],this.isErrData=!1},getCourtTableData:function(e){var t=this;ap({courtUuid:e,type:1}).then(function(e){if("00000"===e.data.code){console.log(mp+"获取小区表格（业主人数"),t.isErrData=!1;for(var a=e.data.data.ageGroupInfo,i=0,s=[],o=0;o<a.length;o++)Number(a[o].group.slice(0,a[o].group.indexOf("-")))>=80?(i+=a[o].countNum,o===a.length-1&&s.push({countNum:i,group:"80以上"})):s.push(a[o]);t.ownerTableData=s,t.owerMapData={ageGroupInfo:s,sexInfo:e.data.data.sexInfo},"1"===t.tableOrMap&&t.owenrChart()}}).catch(function(e){t.isErrData=!0,t.$message({type:"warning",message:e})})},getRateTableData:function(){var e=this,t={courtUuid:this.parameter.courtUuid,reportType:this.parameter.reportType,currentPage:this.parameter.currentPage,pageSize:this.parameter.pageSize,startTime:this.parameter.startDate,endTime:this.parameter.endDate,type:2};ap(t).then(function(t){"00000"===t.data.code&&(e.rateTableData=t.data.data.flow,e.total=t.data.data.totalRows)}).catch(function(t){e.$message({type:"warning",message:t})})},getBuildRateTableData:function(){var e=this,t={courtUuid:this.parameter.courtUuid,buildId:this.buildId,reportType:this.parameter.reportType,currentPage:this.parameter.currentPage,pageSize:this.parameter.pageSize,startTime:this.parameter.startDate,endTime:this.parameter.endDate,type:2};ip(t).then(function(t){"00000"===t.data.code&&(e.rateTableData=t.data.data.flow,e.total=t.data.data.totalRows)}).catch(function(t){e.$message({type:"warning",message:t})})},getBuildOwnerTableData:function(){var e=this;ip({courtUuid:this.courtId,buildId:this.buildId,type:1}).then(function(t){if("00000"===t.data.code){e.isErrData=!1;for(var a=t.data.data.ageGroupInfo,i=0,s=[],o=0;o<a.length;o++)Number(a[o].group.slice(0,a[o].group.indexOf("-")))>=80?(i+=a[o].countNum,o===a.length-1&&s.push({countNum:i,group:"80以上"})):s.push(a[o]);e.ownerTableData=s,e.owerMapData={ageGroupInfo:s,sexInfo:t.data.data.sexInfo},"1"===e.tableOrMap&&e.owenrChart()}}).catch(function(t){e.isErrData=!0,e.$message({type:"warning",message:t})})},getCourtMapData:function(){var e=this,t={courtUuid:this.parameter.courtUuid,reportType:this.parameter.reportType,currentPage:this.parameter.currentPage,startTime:this.parameter.startDate,endTime:this.parameter.endDate,type:2};ap(t).then(function(t){"00000"===t.data.code&&(console.log(mp+"获取小区图表数据(出入频率)"),e.isErrData=!1,e.rateMapData.dateList=t.data.data.flow.map(function(e){return e.timeGroup}),e.rateMapData.perInCountList=t.data.data.flow.map(function(e){return e.inCount}),e.rateMapData.perOutCountList=t.data.data.flow.map(function(e){return e.outCount}),e.total=t.data.data.totalRows,Sm.rateOptionData.xAxis.data=e.rateMapData.dateList,Sm.rateOptionData.series[0].data=e.rateMapData.perInCountList,Sm.rateOptionData.series[1].data=e.rateMapData.perOutCountList,e.myRateChart=e.$echarts.init(document.getElementById("rate-formation")),e.myRateChart.setOption(Sm.rateOptionData)),e.resizeEcharts("#rate-formation",".canvas-rate",e.myChartContainer,e.myRateChart)}).catch(function(t){e.isErrData=!0,e.$message({type:"warning",message:t})})},getBuildMapData:function(){var e=this,t={courtUuid:this.parameter.courtUuid,buildId:this.buildId,reportType:this.parameter.reportType,currentPage:this.parameter.currentPage,startTime:this.parameter.startDate,endTime:this.parameter.endDate,type:2};ip(t).then(function(t){"00000"===t.data.code&&(console.log(mp+"获取楼栋图表数据(出入频率)"),e.isErrData=!1,e.rateMapData.dateList=t.data.data.flow.map(function(e){return e.timeGroup}),e.rateMapData.perInCountList=t.data.data.flow.map(function(e){return e.inCount}),e.rateMapData.perOutCountList=t.data.data.flow.map(function(e){return e.outCount}),e.total=t.data.data.totalRows,Sm.rateOptionData.xAxis.data=e.rateMapData.dateList,Sm.rateOptionData.series[0].data=e.rateMapData.perInCountList,Sm.rateOptionData.series[1].data=e.rateMapData.perOutCountList,e.myRateChart=e.$echarts.init(document.getElementById("rate-formation")),e.myRateChart.setOption(Sm.rateOptionData)),e.resizeEcharts("#rate-formation",".canvas-rate",e.myChartContainer,e.myRateChart)}).catch(function(t){e.isErrData=!0,e.$message({type:"warning",message:t})})}}},km=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"popup-own",attrs:{title:"业主画像数据展示",visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.onCloseDialog}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"court-info"},[a("div",[a("span",[e._v("小区地址：")]),e._v(e._s(e.cellDetailsList.regionName))]),e._v(" "),a("div",[a("span",[e._v("小区名称：")]),e._v(e._s(e.cellDetailsList.courtName))]),e._v(" "),a("div",[a("span",[e._v("户数：")]),e._v(e._s(e.cellDetailsList.homeCount)+"户")]),e._v(" "),a("div",[a("span",[e._v("房屋总数：")]),e._v(e._s(e.cellDetailsList.houseCount)+"间")]),e._v(" "),a("div",[a("span",[e._v("占地面积：")]),e._v(e._s(e.cellDetailsList.floorArea)+"平方米")]),e._v(" "),a("div",[a("span",[e._v("建筑面积：")]),e._v(e._s(e.cellDetailsList.buildArea)+"平方米")])])]),e._v(" "),a("el-col",{staticStyle:{height:"600px"},attrs:{span:20}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"top"}},[a("el-row",{staticClass:"table-header",attrs:{span:24}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"楼栋选择"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:e.onBuildingSelection},model:{value:e.form.buildValue,callback:function(t){e.$set(e.form,"buildValue",t)},expression:"form.buildValue"}},e._l(e.form.buildList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"查询项"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:e.onReportLabel},model:{value:e.parameter.classValue,callback:function(t){e.$set(e.parameter,"classValue",t)},expression:"parameter.classValue"}},e._l(e.form.classList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"报表类型"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small",disabled:e.disabled},on:{change:e.onReportTypeEvent},model:{value:e.parameter.reportType,callback:function(t){e.$set(e.parameter,"reportType",t)},expression:"parameter.reportType"}},e._l(e.form.reportTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:e.timeType,placeholder:"开始时间","picker-options":e.starForbiddenDatetime,size:"small",disabled:e.disabled,clearable:e.clearableDatepick,editable:e.editableDatepick},on:{blur:e.onTimeJudgment},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:e.timeType,placeholder:"结束时间",size:"small","picker-options":e.endForbiddenDatetime,disabled:e.disabled,clearable:e.clearableDatepick,editable:e.editableDatepick},on:{blur:e.onTimeJudgment},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.onInquireData(t)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success",plain:""},nativeOn:{click:function(t){e.onGoTable(t)}}},[e._v("表单")]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:""},nativeOn:{click:function(t){e.onGoMap(t)}}},[e._v("图表")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isOwner,expression:"isOwner"}],staticClass:"show"},[e.isOwenrTable?a("div",{staticStyle:{width:"100%"}},[a("el-table",{attrs:{data:e.ownerTableData,width:"100%",height:"420",stripe:""}},[a("el-table-column",{staticStyle:{width:"100%"},attrs:{prop:"group",label:"年龄段"}}),e._v(" "),a("el-table-column",{staticStyle:{width:"100%"},attrs:{prop:"countNum",label:"人数"}})],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isOwenrMap,expression:"isOwenrMap"}],staticClass:"canvas-owner"},[a("div",{staticClass:"map",attrs:{id:"owner-formation"}}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isErrData,expression:"isErrData"}],attrs:{src:e.perErrImg}})])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRate,expression:"isRate"}],staticClass:"show"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRateTable,expression:"isRateTable"}],attrs:{width:"100%"}},[a("el-table",{attrs:{data:e.rateTableData,width:"100%",height:"380",stripe:""}},[a("el-table-column",{staticStyle:{width:"100%"},attrs:{prop:"timeGroup",label:"时间"}}),e._v(" "),a("el-table-column",{staticStyle:{width:"100%"},attrs:{prop:"inCount",label:"进入次数"}}),e._v(" "),a("el-table-column",{staticStyle:{width:"100%"},attrs:{prop:"outCount",label:"出去次数"}})],1),e._v(" "),a("el-pagination",{staticClass:"table-pager",attrs:{background:"","current-page":e.parameter.currentPage,"page-sizes":[10,20,30,50,100],"page-size":e.parameter.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.onSizeChange,"current-change":e.onCurrentChange}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isRateMap,expression:"isRateMap"}],staticClass:"canvas-rate",staticStyle:{width:"98%"}},[a("div",{staticClass:"map",attrs:{id:"rate-formation"}}),e._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isErrData,expression:"isErrData"}],attrs:{src:e.perErrImg}})])])],1)],1)],1)},Tm=[],Lm={render:km,staticRenderFns:Tm},Nm=Lm,Vm=a("VU/8"),Im=R,Em=Vm(xm,Nm,!1,Im,"data-v-568f58b4",null),Pm=Em.exports,Mm={components:{StreamPeople:am,CarStream:um,EquipmentReport:ym,OwnerPortrait:Pm},data:function(){return{echartsList:[],courtInfo:{courtUuid:"",courtName:"",org:"",regionName:"",houseCount:"",homeCount:"",buildArea:"",floorArea:""},startTime:"",isOwnerErrInfo:!1,isPerErrInfo:!1,isCarErrInfo:!1,isEquiErrInfo:!1,endTime:"",perErrImg:Hp.a,reportType:"0"}},mounted:function(){this.courtInfo.courtUuid=this.$route.params.courtUuid,console.log(mp+" 初始化小区详情页面  "),this.getCourtInfoData();var e=new Date,t=new Date;e.setTime(e.getTime()-6048e5),this.startTime=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),this.endTime=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),this.getPeopleStreamData(),this.getCarStreamData(),this.getEquipKindsData(),this.getCourtOwnerData()},methods:{getCourtInfoData:function(){var e=this,t={courtUuid:this.courtInfo.courtUuid};Zu(t).then(function(t){if(console.log(mp+" 获取到小区详细信息  "),"00000"===t.data.code){var a=t.data.data;e.courtInfo=Sp()({},a)}else e.$message({type:"warning",message:t.data.message})}).catch(function(t){e.$message({type:"warning",message:t}),console.warn(mp+" 获取到小区详情数据失败： "+t)})},getPeopleStreamData:function(){var e=this,t={courtUuid:this.courtInfo.courtUuid,reportType:this.reportType,startTime:this.startTime,endTime:this.endTime};Xu(t).then(function(t){var a=!0;if("00000"===t.data.code){var i=t.data.data;i=i.reverse();var s=[],o=[],l=[];if(i.map(function(e,t){s.push(e.date.substr(0,13)+"点"),o.push(parseFloat(e.perInCount)),l.push(parseFloat(e.perOutCount))}),s.length>0&&o.length>0&&l.length>0){a=!1;var r=Np(s,o,l);e.getMyCharts(2).setOption(r)}}else e.$message({type:"warning",message:t.data.message});e.isPerErrInfo=a}).catch(function(t){e.isPerErrInfo=!0,e.$message({type:"warning",message:t})})},getCarStreamData:function(){var e=this,t={courtUuid:this.courtInfo.courtUuid,reportType:this.reportType,startTime:this.startTime,endTime:this.endTime};Ku(t).then(function(t){if("00000"===t.data.code){var a=t.data.data;a=a.reverse();var i=[],s=[],o=[];if(a.map(function(e,t){i.push(e.date.substr(0,13)+"点"),s.push(parseFloat(e.carInCount)),o.push(parseFloat(e.carOutCount))}),i.length<=0||s.length<=0||o.length<=0)e.isCarErrInfo=!0;else{e.isCarErrInfo=!1;var l=Lp(i,s,o);e.getMyCharts(3).setOption(l)}}else e.isCarErrInfo=!0,e.$message({type:"warning",message:t.data.message})}).catch(function(t){e.isCarErrInfo=!0,e.$message({type:"warning",message:t})})},getEquipKindsData:function(){var e=this,t={courtUuid:this.courtInfo.courtUuid};tp(t).then(function(t){if("00000"===t.data.code){var a=t.data.data,i=[],s={name:"其他",value:0};a.map(function(e,t){if(t>5)s.value+=e.deviceCount;else{var a={name:e.deviceTypeDesc,value:e.deviceCount};i.push(a)}}),i.push(s),Mp.updateData(i),i.length<=0?e.isEquiErrInfo=!0:(e.isEquiErrInfo=!1,e.getMyCharts(4).setOption(Mp.option))}else e.isEquiErrInfo=!0,e.$message({type:"warning",message:t.data.message})}).catch(function(t){e.isEquiErrInfo=!0,e.$message({type:"warning",message:t})})},getCourtOwnerData:function(){var e=this,t={courtUuid:this.courtInfo.courtUuid,type:"1"};ap(t).then(function(t){if("00000"===t.data.code){var a=[],i=[],s=t.data.data,o=0,l=[{value:s.sexInfo[0].maleOwner,name:"男"},{value:s.sexInfo[0].femaleOwner,name:"女"}];s=s.ageGroupInfo,s.map(function(e,t){var s=e.group.split("-");parseInt(s[0])>=80?o+=e.countNum:(i.push(e.group),a.push(e.countNum))}),i.push("80以上"),a.push(o),Qp.updateSexData(l),Qp.updateAgeLevelData(i),Qp.updateAgeData(a),l.length<=0||i.length<=0||a.length<=0?e.isOwnerErrInfo=!0:(e.isOwnerErrInfo=!1,e.getMyCharts(0).setOption(Qp.optionSex),e.getMyCharts(1).setOption(Qp.optionAge))}else e.$message({type:"warning",message:t.data.message}),e.isOwnerErrInfo=!0}).catch(function(t){e.isOwnerErrInfo=!0,e.$message({type:"warning",message:t})})},onCheckDetailHandler:function(e){switch(e){case 0:this.$refs.OwnerPortrait.ownerPortrait(this.courtInfo.courtUuid);break;case 1:this.$refs.streamPeople.streamPeople(this.courtInfo.courtUuid);break;case 2:this.$refs.carStream.goToCarStreamPage(this.courtInfo.courtUuid);break;case 3:this.$refs.equipmentReport.equipmentReport(this.courtInfo.courtUuid,this.courtInfo.courtName)}},getMyCharts:function(e){return this.echartsList[e]?this.echartsList[e]:this.$echarts.init(document.getElementById("map-ecarts"+e))}}},$m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("div",{staticClass:"map-con"},[a("div",{staticClass:"info-con"},[a("h2",{staticClass:"info-title"},[e._v(e._s(e.courtInfo.courtName))]),e._v(" "),a("div",{staticClass:"item-row"},[a("span",{staticClass:"item-label"},[e._v("小区地址：")]),e._v(" "),a("span",{staticClass:"item-value"},[e._v(e._s(e.courtInfo.regionName))])]),e._v(" "),a("div",{staticClass:"item-row"},[a("span",{staticClass:"item-label"},[e._v("房屋总数：")]),e._v(" "),a("span",{staticClass:"item-value"},[e._v(e._s(e.courtInfo.houseCount)+"栋")])]),e._v(" "),a("div",{staticClass:"item-row"},[a("span",{staticClass:"item-label"},[e._v("户数总数：")]),e._v(" "),a("span",{staticClass:"item-value"},[e._v(e._s(e.courtInfo.homeCount)+"户")])]),e._v(" "),a("div",{staticClass:"item-row"},[a("span",{staticClass:"item-label"},[e._v("建筑面积：")]),e._v(" "),a("span",{staticClass:"item-value"},[e._v(e._s(e.courtInfo.buildArea)+"平方米")])]),e._v(" "),a("div",{staticClass:"item-row"},[a("span",{staticClass:"item-label"},[e._v("占地面积：")]),e._v(" "),a("span",{staticClass:"item-value"},[e._v(e._s(e.courtInfo.floorArea)+"平方米")])])]),e._v(" "),a("el-card",{staticClass:"echarts-box"},[a("el-button",{staticClass:"checkmore-btn",attrs:{type:"text"},on:{click:function(t){e.onCheckDetailHandler(1)}}},[e._v("查看详情")]),e._v(" "),a("div",{staticStyle:{width:"480px",height:"330px"},attrs:{id:"map-ecarts2"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPerErrInfo,expression:"isPerErrInfo"}],staticClass:"err-info"},[a("img",{attrs:{src:e.perErrImg}})])],1),e._v(" "),a("el-card",{staticClass:"echarts-box"},[a("el-button",{staticClass:"checkmore-btn",attrs:{type:"text"},on:{click:function(t){e.onCheckDetailHandler(2)}}},[e._v("查看详情")]),e._v(" "),a("div",{staticStyle:{width:"480px",height:"330px"},attrs:{id:"map-ecarts3"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isCarErrInfo,expression:"isCarErrInfo"}],staticClass:"err-info"},[a("img",{attrs:{src:e.perErrImg}})])],1),e._v(" "),a("el-card",{staticClass:"echarts-box1"},[a("el-button",{staticClass:"checkmore-btn",attrs:{type:"text"},on:{click:function(t){e.onCheckDetailHandler(0)}}},[e._v("查看详情")]),e._v(" "),a("div",{staticClass:"small-box",staticStyle:{width:"420px",height:"330px"},attrs:{id:"map-ecarts0"}}),e._v(" "),a("div",{staticClass:"small-box",staticStyle:{width:"570px",height:"330px"},attrs:{id:"map-ecarts1"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isOwnerErrInfo,expression:"isOwnerErrInfo"}],staticClass:"err-info"},[a("img",{attrs:{src:e.perErrImg}})])],1),e._v(" "),a("el-card",{staticClass:"echarts-box"},[a("el-button",{staticClass:"checkmore-btn",attrs:{type:"text"},on:{click:function(t){e.onCheckDetailHandler(3)}}},[e._v("查看详情")]),e._v(" "),a("div",{staticStyle:{width:"480px",height:"330px"},attrs:{id:"map-ecarts4"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEquiErrInfo,expression:"isEquiErrInfo"}],staticClass:"err-info"},[a("img",{attrs:{src:e.perErrImg}})])],1),e._v(" "),a("car-stream",{ref:"carStream"}),e._v(" "),a("stream-people",{ref:"streamPeople"}),e._v(" "),a("owner-portrait",{ref:"OwnerPortrait"}),e._v(" "),a("equipment-report",{ref:"equipmentReport"})],1)])},Um=[],Fm={render:$m,staticRenderFns:Um},Rm=Fm,zm=a("VU/8"),Am=z,Om=zm(Mm,Rm,!1,Am,"data-v-05a42d31",null),qm=Om.exports,Bm=[{path:"/mapanalysisapp/index",name:"mapanalyindex",component:_p},{path:"/mapanalysisapp/courtinfo/:courtUuid",name:"mapanalycourtinfo",component:qm}],Wm="/egc-mdmmgmtapp/deviceCategory",Qm=function(e){return mt.a.post(Wm+"/insert",e).then(function(e){return e.data})},Gm=function(e){return mt.a.post(Wm+"/update",e).then(function(e){return e.data})},Hm=function(e){return mt.a.post(Wm+"/batchDelete",e).then(function(e){return e.data})},jm=function(e){return mt.a.post(Wm+"/getDeviceCategoriesByCondition",e).then(function(e){return e.data})},Jm=function(e){return mt.a.get(Wm+"/getDeviceCategoriesSimpleByCondition",{params:{keyword:e}}).then(function(e){return e.data})},Zm="/egc-mdmmgmtapp/deviceAttribute",Km=function(e){return mt.a.post(Zm+"/insert",e).then(function(e){return e.data})},Ym=function(e){return mt.a.post(Zm+"/update",e).then(function(e){return e.data})},Xm=function(e){return mt.a.post(Zm+"/delete",e).then(function(e){return e.data})},eh=function(e){return console.log(e),mt.a.post(Zm+"/getDeviceAttributes",e).then(function(e){return e.data})},th=function(e){return console.log(e),mt.a.post(Zm+"/getDeviceAttributeList",e).then(function(e){return e.data})},ah=function(e){return mt.a.post("/egc-mdmmgmtapp/deviceAttrDomain/insert",e).then(function(e){return e.data})},ih=function(e){return mt.a.post("/egc-mdmmgmtapp/deviceAttrDomain/update",e).then(function(e){return e.data})},sh=function(e){return mt.a.post("/egc-mdmmgmtapp/deviceAttrDomain/delete",{uuid:e}).then(function(e){return e.data})},oh=function(e){return mt.a.get("/egc-mdmmgmtapp/deviceAttrDomain/getDeviceAttrDomains",{params:{attrUuid:e}}).then(function(e){return e.data})},lh="/egc-mdmmgmtapp/provider",rh=function(e){return mt.a.post(lh+"/insert",e).then(function(e){return e})},nh=function(e){return mt.a.post(lh+"/update",e).then(function(e){return e})},ch=function(e){return mt.a.post(lh+"/delete",e).then(function(e){return e.data})},dh=function(e){return mt.a.post(lh+"/getProviders",e).then(function(e){return e.data})},uh=function(){return mt.a.get(lh+"/getAllProviders").then(function(e){return e.data})},ph=function(e){return mt.a.post("/egc-mdmmgmtapp/deviceAttrMapping/batchInsert",e).then(function(e){return e.data})},mh=function(e){return mt.a.get("/egc-mdmmgmtapp/dict/getDictItem",{params:e}).then(function(e){return e.data})},hh=function(e){return mt.a.post("/egc-mdmmgmtapp/user/getUsersByConditions",e).then(function(e){return e.data})},fh=function(e){return mt.a.post("/egc-mdmmgmtapp/house/getHousesByConditions",e).then(function(e){return e.data})},gh=function(e){return mt.a.post("/egc-mdmmgmtapp/house/getHousesByUser",e).then(function(e){return e.data})},vh=function(e){return mt.a.post("/egc-mdmmgmtapp/court/getCourtsByConditions",e).then(function(e){return e.data})},bh={data:function(){return{uuid:null,uuidshow:!1,selections:[],tableData:[],loading:!1,getCourtsLoading:!1,courts:[],detailDialogVisible:!1,title:"人员详细信息",activeName:"basic",modelDetailForm:{name:"",sex:"",birth:"",idenType:"",idenNum:"",phone:"",email:"",detail:[]},searchCondition:{total:0,currentPage:1,pageSize:10,courtUuid:"",name:"",idenNum:"",phone:"",email:""},idTypes:[],sexs:[]}},components:{},computed:{sexName:function(){return this.getNameFromCode(this.modelDetailForm.sex,this.sexs)},idenTypeName:function(){return this.getNameFromCode(this.modelDetailForm.idenType,this.idTypes)}},methods:{getDictData:function(){var e=this;mh({itemType:"3"}).then(function(t){e.sexs=t.data}).catch(function(e){console.log(e)});mh({itemType:"4"}).then(function(t){e.idTypes=t.data}).catch(function(e){console.log(e)})},getNameFromCode:function(e,t){var a=t.find(function(t){return t.itemCode===e});return a?a.itemName:""},showPersonDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.detailDialogVisible=!0,this.modelDetailForm.name=t.name,this.modelDetailForm.sex=t.sex,this.modelDetailForm.birth=t.birth,this.modelDetailForm.idenType=t.idenType,this.modelDetailForm.idenNum=t.idenNum,this.modelDetailForm.phone=t.phone,this.modelDetailForm.email=t.email,gh({userUuid:t.uuid,userType:"1"}).then(function(t){e.modelDetailForm.detail=t.data}).catch(function(e){console.log(e)})},getCourts:function(e){var t=this;this.getCourtsLoading=!0,vh({name:e,pageSize:1e3,currentPage:1}).then(function(e){t.getCourtsLoading=!1,t.courts=e.data.result}).catch(function(e){this.getCourtsLoading=!1,console.log(e)}.bind(this))},closeDetailDialog:function(){this.detailDialogVisible=!1,this.activeName="basic"},handleClose:function(){this.activeName="basic",this.detailDialogVisible=!1},reset:function(){this.searchCondition={currentPage:1,pageSize:10,courtName:"",name:"",idenNum:"",phone:"",email:""}},handleSelectionChange:function(e){this.selections=e},sizeChange:function(e){this.searchCondition.pageSize=e,this.searchCondition.currentPage=1,this.search()},currentChange:function(e){this.searchCondition.currentPage=e,this.search()},search:function(){this.loading=!0,hh(this.searchCondition).then(function(e){this.searchCondition.total=e.data.totalCount,this.tableData=e.data.result,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))},addEventHandler:function(e,t,a){e.addEventListener?e.addEventListener(t,a):e.attachEvent("on"+t,a)},removeEventHandler:function(e,t,a){e.removeEventListener?e.removeEventListener(t,a):e.detachEvent("on"+t,a)}},mounted:function(){var e=this;e.getDictData(),e.search();var t=e.$refs.pager.$el.querySelectorAll("input")[1];e.addEventHandler(t,"keyup",function(a){13===a.keyCode&&parseInt(t.value)!==e.searchCondition.currentPage&&(e.searchCondition.currentPage=parseInt(t.value),e.search())})}},Dh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"person-list"},[a("div",[a("el-form",{ref:"searchCondition",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.searchCondition,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"小区名称"}},[a("el-select",{attrs:{clearable:"","remote-method":e.getCourts,loading:e.getCourtsLoading,placeholder:"请输入小区名称",remote:"",filterable:""},model:{value:e.searchCondition.courtUuid,callback:function(t){e.$set(e.searchCondition,"courtUuid",t)},expression:"searchCondition.courtUuid"}},e._l(e.courts,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchCondition.name,callback:function(t){e.$set(e.searchCondition,"name",t)},expression:"searchCondition.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证件号码"}},[a("el-input",{attrs:{placeholder:"请输入证件号码",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchCondition.idenNum,callback:function(t){e.$set(e.searchCondition,"idenNum",t)},expression:"searchCondition.idenNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{placeholder:"请输入电话",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchCondition.phone,callback:function(t){e.$set(e.searchCondition,"phone",t)},expression:"searchCondition.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮箱"}},[a("el-input",{attrs:{placeholder:"请输入电子邮箱",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchCondition.email,callback:function(t){e.$set(e.searchCondition,"email",t)},expression:"searchCondition.email"}})],1),e._v(" "),a("div",{attrs:{align:"right"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.reset}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"15px"},attrs:{data:e.tableData,height:"100%"},on:{"row-dblclick":e.showPersonDetail}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),e.uuidshow?a("el-table-column",{attrs:{prop:"uuid"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"sex",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.sexs,function(i){return a("div",{key:i.itemCode},[e._v("\n            "+e._s(t.row.sex===i.itemCode?i.itemName:"")+"\n          ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"生日",prop:"birth",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"证件类型",prop:"idenType",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.idTypes,function(i){return a("div",{key:i.itemCode},[e._v("\n            "+e._s(t.row.idenType===i.itemCode?i.itemName:"")+"\n          ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"证件号码",prop:"idenNum",width:"170",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"联系电话",prop:"phone",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"电子邮箱",prop:"email",sortable:""}})],1),e._v(" "),a("el-pagination",{ref:"pager",attrs:{background:"","current-page":e.searchCondition.currentPage,"page-sizes":[10,20,50,100],"page-size":e.searchCondition.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.searchCondition.total},on:{"update:currentPage":function(t){e.$set(e.searchCondition,"currentPage",t)},"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{staticStyle:{"min-width":"920px"},attrs:{visible:e.detailDialogVisible,"modal-append-to-body":!1,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("div",{staticClass:"header-style",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-document"}),e._v(e._s(this.title))]),e._v(" "),a("el-tabs",{staticStyle:{height:"230px","margin-top":"-20px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[a("div",[a("el-form",{ref:"detailForm",attrs:{model:e.modelDetailForm,"label-width":"100px"}},[a("el-row",{staticClass:"line-one"},[a("el-col",{attrs:{span:12}},[a("label",[e._v("姓名：")]),e._v(" "),a("label",[e._v(e._s(this.modelDetailForm.name))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",[e._v("性别：")]),e._v(" "),a("label",[e._v(e._s(this.sexName))])])],1),e._v(" "),a("el-row",{staticClass:"line-one"},[a("el-col",{attrs:{span:12}},[a("label",[e._v("生日：")]),e._v(" "),a("label",[e._v(e._s(this.modelDetailForm.birth))])])],1),e._v(" "),a("el-row",{staticClass:"line-one"},[a("el-col",{attrs:{span:12}},[a("label",[e._v("证件类型：")]),e._v("\n                "+e._s(this.idenTypeName)+"\n              ")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",[e._v("证件号码：")]),e._v(" "),a("label",[e._v(e._s(this.modelDetailForm.idenNum))])])],1),e._v(" "),a("el-row",{staticClass:"line-one"},[a("el-col",{attrs:{span:12}},[a("label",[e._v("联系电话：")]),e._v(" "),a("label",[e._v(e._s(this.modelDetailForm.phone))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",[e._v("电子邮箱：")]),e._v(" "),a("label",[e._v(e._s(this.modelDetailForm.email))])])],1)],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"房产信息",name:"detail"}},[a("el-table",{attrs:{data:this.modelDetailForm.detail,stripe:"",width:"99%",height:"190"}},[a("el-table-column",{attrs:{label:"小区",prop:"courtName","min-width":"460px"}}),e._v(" "),a("el-table-column",{attrs:{label:"房屋",prop:"houseAddress","min-width":"460px"}})],1)],1)],1)],1)],1)},yh=[],Ch={render:Dh,staticRenderFns:yh},_h=Ch,wh=a("VU/8"),Sh=A,xh=wh(bh,_h,!1,Sh,"data-v-5abff9b2",null),kh=xh.exports,Th=function(e){return mt.a.post("/egc-mdmmgmtapp/org/getHousesByOrgUuid",e).then(function(e){return e.data})},Lh=function(e){return mt.a.post("/egc-mdmmgmtapp/org/getOrgTreeNextLevel",e).then(function(e){return e.data})},Nh={props:{search:{type:Function}},data:function(){return{searchKey:"",total:0,currentPage:1,pageSize:25,treeData:[],loading:!1,searchOption:null,defaultProps:{children:"children",label:"name"}}},methods:{clickNode:function(e,t){1===t.level?(this.searchOption={courtUuid:t.data.uuid,nodeLevel:t.level},this.search(this.searchOption)):t.level>1&&(this.searchOption={uuid:t.data.uuid,nodeLevel:t.level},this.search(this.searchOption)),this.$emit("searchOptionChange",this.searchOption)},sizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getCourts()},currentChange:function(e){this.currentPage=e,this.getCourts()},getCourts:function(){var e=this;this.loading=!0;var t={};t.name=this.searchKey,t.platformFlag=0,t.pageSize=this.pageSize,t.currentPage=this.currentPage,vh(t).then(function(t){e.total=t.data.totalCount,setTimeout(function(){e.treeData=t.data.result,e.loading=!1},1e3)})},getTree:function(e,t){var a=this;if(0===this.treeData.length&&this.getCourts(),e.level>0){this.loading=!0;var i={};i.uuid=e.data.uuid,Lh(i).then(function(e){t(null!=e.data&&null!=e.data.children?e.data.children:[]),a.loading=!1})}}},mounted:function(){}},Vh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tree-container"},[a("div",[a("el-input",{staticClass:"fuzzy-search",staticStyle:{float:"left",width:"168px"},attrs:{placeholder:"请输入小区名称","prefix-icon":"el-icon-search",maxlength:64,clearable:""},nativeOn:{keypress:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.getCourts(t)}},model:{value:e.searchKey,callback:function(t){e.searchKey="string"==typeof t?t.trim():t},expression:"searchKey"}})],1),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{"max-height":"800px",overflow:"auto","font-size":"14px"},attrs:{"highlight-current":!0,data:e.treeData,"node-key":"uuid",props:e.defaultProps,load:e.getTree,"expand-on-click-node":!1,lazy:""},on:{"node-click":e.clickNode}}),e._v(" "),a("el-pagination",{staticClass:"table-pager",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, prev, next",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)},Ih=[],Eh={render:Vh,staticRenderFns:Ih},Ph=Eh,Mh=a("VU/8"),$h=O,Uh=Mh(Nh,Ph,!1,$h,"data-v-8197066a",null),Fh=Uh.exports,Rh={data:function(){return{uuid:null,selections:[],total:0,currentPage:1,pageSize:10,tableData:[],loading:!1,searchOption:{},houseUseFors:[]}},components:{OrgHouseTreeView:Fh},methods:{getDictData:function(){var e=this;mh({itemType:"14"}).then(function(t){e.houseUseFors=t.data}).catch(function(e){console.log(e)})},setSearchOption:function(e){this.searchOption=e},sizeChange:function(e){this.pageSize=e,this.currentPage=1,this.search(this.searchOption)},currentChange:function(e){this.currentPage=e,this.search(this.searchOption)},search:function(e){var t=this,a=this;a.loading=!0,e.pageSize=a.pageSize,e.currentPage=a.currentPage;var i=null;i=1===e.nodeLevel?fh:Th,i(e).then(function(e){var a=t;a.total=e.data.totalCount;var i=setTimeout(function(){a.tableData=e.data.result,a.loading=!1,clearTimeout(i)},1e3)}).catch(function(e){this.loading=!1,console.log(e)}.bind(this))},addEventHandler:function(e,t,a){e.addEventListener?e.addEventListener(t,a):e.attachEvent("on"+t,a)}},mounted:function(){var e=this;e.getDictData();var t=e.$refs.pager.$el.querySelectorAll("input")[1];e.addEventHandler(t,"keyup",function(a){13===a.keyCode&&parseInt(t.value)!==e.currentPage&&(e.currentPage=parseInt(t.value),e.search(e.searchOption))})}},zh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"house-manager"},[a("org-house-tree-view",{staticClass:"org-view-tree",attrs:{search:e.search},on:{searchOptionChange:e.setSearchOption}}),e._v(" "),a("div",{staticClass:"tree-view-container"},[a("div",{staticClass:"house-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"highlight-current-row":"",data:e.tableData,height:"100%"}},[a("el-table-column",{attrs:{label:"房屋号",prop:"houseNum",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"房屋名称",prop:"houseAddress",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"房屋用途",prop:"houseUseFor",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.houseUseFors,function(i){return a("div",{key:i.itemCode},[e._v("\n              "+e._s(t.row.houseUseFor===i.itemCode?i.itemName:"")+"\n            ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"居住人数",prop:"residentNum",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"房产证编号",prop:"houseCertificate",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"土地证编号",prop:"landCertificate",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"房屋面积",prop:"buildingArea",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"楼层",prop:"floor",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"紧急联系电话",prop:"emergencyPhone",sortable:""}})],1)],1),e._v(" "),a("el-pagination",{ref:"pager",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},Ah=[],Oh={render:zh,staticRenderFns:Ah},qh=Oh,Bh=a("VU/8"),Wh=q,Qh=Bh(Rh,qh,!1,Wh,"data-v-7caadf85",null),Gh=Qh.exports,Hh=a("LOkV"),jh={data:function(){return{providerListLoading:!1,uuidshow:!1,providerDialogVisible:!1,disabledflag:!1,selections:[],mode:1,searchProviderForm:{uuid:"",pageSize:10,currentPage:1,total:0,providerCode:"",providerName:""},providerList:[],providerForm:{uuid:"",category:"",providerCode:"",providerName:"",contact:"",providerDesc:""},providerTypes:[],providerFormRules:{category:[{required:!0,message:"请选择供应商类别",trigger:"change"}],providerCode:[{required:!0,message:"请输入供应商编码",trigger:"blur"},{pattern:/^[A-Za-z0-9]{4}$/,message:"输入内容应为4位的字母或数字",trigger:"blur"}],providerName:[{required:!0,message:"请输入供应商名",trigger:"blur"},{max:100,message:"输入内容应少于100位字符",trigger:"blur"}],providerDesc:[{max:64,message:"输入内容应少于64位字符",trigger:"blur"}],contact:[{pattern:/^(\((\+|00)86\)(-|\s)?|(\+|00)86(-|\s)?)?(\d{11}|(\d{3,4})?(-|\s)?\d{6,10})$/,message:"请输入正确的电话或手机号",trigger:"blur"}]}}},mounted:function(){this.search(),this.attatchEventToPager(),this.getDictData()},computed:{title:function(){return 1===this.mode?"查看供应商":2===this.mode?"新增供应商":3===this.mode?"修改供应商":void 0}},methods:{getDictData:function(){var e=this;mh({itemType:"17"}).then(function(t){e.providerTypes=t.data}).catch(function(e){console.log(e)})},search:function(){this.providerListLoading=!0,dh(this.searchProviderForm).then(function(e){console.log(e),this.providerList=e.data.result,this.searchProviderForm.total=e.data.totalCount,this.providerListLoading=!1}.bind(this)).catch(function(e){this.providerListLoading=!1,console.log(e)}.bind(this))},sizeChange:function(e){this.searchProviderForm.pageSize=e,this.searchProviderForm.currentPage=1,this.search()},currentChange:function(e){this.searchProviderForm.currentPage=e,this.search()},checkrow:function(e){this.$refs.providerTable.toggleRowSelection(e)},getSelections:function(e){this.selections=e},viewProvider:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.mode=1,this.providerForm={uuid:this.selections[0].uuid,category:this.selections[0].category,providerCode:this.selections[0].providerCode,providerName:this.selections[0].providerName,contact:this.selections[0].contact,providerDesc:this.selections[0].providerDesc},this.providerDialogVisible=!0,this.disabledflag=!0},addProvider:function(){this.mode=2,this.disabledflag=!1,this.clear(),this.providerDialogVisible=!0},editProviderdbl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(e),this.mode=3,this.clear(),this.providerForm={uuid:e.uuid,category:e.category+"",providerCode:e.providerCode,providerName:e.providerName,contact:e.contact,providerDesc:e.providerDesc},this.providerDialogVisible=!0,this.disabledflag=!0},deleteProviderBatch:function(){var e=this;if(0===this.selections.length)return void this.$message({message:"请选择要删除的供应商",type:"warning"});this.$confirm("确定要刪除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var t=[];e.selections.forEach(function(e){return t.push(e.uuid)}),ch({value:t}).then(function(t){e.search({}),e.$message({message:"刪除成功!",type:"success"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},deleteProvider:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[];a.push(t.uuid),this.$confirm("确定要刪除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){ch({value:a}).then(function(t){e.search({}),e.$message({message:"刪除成功!",type:"success"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},save:function(){var e=this;this.$refs.providerForm.validate(function(t){if(!t)return e.$message({message:"请填写正确的内容",type:"warning"}),!1;var a;a=e.providerForm.uuid?nh:rh,a(Sp()({},e.providerForm)).then(function(t){e.$message({message:"供应商保存成功!",type:"success"}),e.providerDialogVisible=!1,e.search({})})})},reset:function(){this.searchProviderForm={uuid:"",pageSize:10,currentPage:1,providerCode:"",providerName:""}},clear:function(){this.providerForm.uuid="",this.providerForm.category="",this.providerForm.providerCode="",this.providerForm.providerName="",this.providerForm.contact="",this.providerForm.providerDesc="",this.clearValidate()},clearValidate:function(){var e=this;this.$nextTick(function(){e.$refs.providerForm.clearValidate()})},attatchEventToPager:function(e){var t=this,a=t.$refs.pager.$el.querySelectorAll("input")[1];Object(Hh.a)(a,"keyup",function(e){13===e.keyCode&&parseInt(a.value)!==t.searchProviderForm.currentPage&&t.currentChange(parseInt(a.value))})}}},Jh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"search-container"},[a("el-form",{ref:"searchProviderForm",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.searchProviderForm}},[a("el-form-item",{attrs:{label:"供应商主数据编码"}},[a("el-input",{attrs:{placeholder:"请输入供应商主数据编码",maxlength:4,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchProviderForm.providerCode,callback:function(t){e.$set(e.searchProviderForm,"providerCode",t)},expression:"searchProviderForm.providerCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商名称"}},[a("el-input",{attrs:{placeholder:"请输入供应商名称",maxlength:100,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchProviderForm.providerName,callback:function(t){e.$set(e.searchProviderForm,"providerName",t)},expression:"searchProviderForm.providerName"}})],1),e._v(" "),a("el-form-item",[a("div",{staticClass:"btn-container"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.reset}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)])],1)],1),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.addProvider}},[e._v("添加")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.providerListLoading,expression:"providerListLoading"}],ref:"providerTable",staticStyle:{"margin-top":"15px"},attrs:{data:e.providerList,"tooltip-effect":"dark",height:"100%","element-loading-text":"拼命加载中"},on:{"selection-change":e.getSelections,"row-dblclick":e.editProviderdbl,"row-click":e.checkrow}},[e.uuidshow?a("el-table-column",{attrs:{prop:"uuid",label:"uuid"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"providerCode",label:"供应商主数据编码",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"providerName",label:"供应商名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"contact",label:"联系方式",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"providerDesc",label:"供应商描述",sortable:""}}),e._v(" "),e.uuidshow?a("el-table-column",{attrs:{prop:"category",label:"供应商类别"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"供应商类别",sortable:"",prop:"category"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.providerTypes,function(i){return a("div",{key:i.itemCode},[e._v("\n          "+e._s(t.row.category==i.itemCode?i.itemName:"")+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"创建人",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"180px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateUser",label:"修改人",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.editProviderdbl(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){e.deleteProvider(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{ref:"pager",attrs:{background:"","current-page":e.searchProviderForm.currentPage,"page-sizes":[10,20,50,100],"page-size":e.searchProviderForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.searchProviderForm.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}),e._v(" "),a("el-dialog",{attrs:{visible:e.providerDialogVisible,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.providerDialogVisible=t}}},[a("div",{staticClass:"header-style",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(e.title))]),e._v(" "),a("div",{staticStyle:{"margin-top":"-20px"}},[a("el-form",{ref:"providerForm",attrs:{model:e.providerForm,"label-width":"160px",rules:e.providerFormRules,inline:!0}},[a("el-form-item",{attrs:{label:"供应商主数据编码",prop:"providerCode"}},[a("el-input",{attrs:{disabled:e.disabledflag,maxlength:4},model:{value:e.providerForm.providerCode,callback:function(t){e.$set(e.providerForm,"providerCode","string"==typeof t?t.trim():t)},expression:"providerForm.providerCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商类别",prop:"category"}},[a("el-select",{model:{value:e.providerForm.category,callback:function(t){e.$set(e.providerForm,"category",t)},expression:"providerForm.category"}},e._l(e.providerTypes,function(e){return a("el-option",{key:e.itemCode,attrs:{value:e.itemCode,label:e.itemName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商名称",prop:"providerName"}},[a("el-input",{attrs:{maxlength:100},model:{value:e.providerForm.providerName,callback:function(t){e.$set(e.providerForm,"providerName","string"==typeof t?t.trim():t)},expression:"providerForm.providerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式",prop:"contact"}},[a("el-input",{attrs:{maxlength:20},model:{value:e.providerForm.contact,callback:function(t){e.$set(e.providerForm,"contact","string"==typeof t?t.trim():t)},expression:"providerForm.contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商描述",prop:"providerDesc"}},[a("el-input",{attrs:{maxlength:64},model:{value:e.providerForm.providerDesc,callback:function(t){e.$set(e.providerForm,"providerDesc","string"==typeof t?t.trim():t)},expression:"providerForm.providerDesc"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)])],1)},Zh=[],Kh={render:Jh,staticRenderFns:Zh},Yh=Kh,Xh=a("VU/8"),ef=B,tf=Xh(jh,Yh,!1,ef,"data-v-4c06ddd4",null),af=tf.exports,sf={props:["attrUuid"],data:function(){return{uuidshow:!1,categoryAttr:{attrUuid:"",attrCode:"",attrDesc:"",attrDataType:""},searchDomainsForm:{attrCode:"",attrDesc:"",typeCode:""},domainList:[],domainListLoading:!1,domainForm:{uuid:"",attrUuid:"",attrDesc:"",domainValue:"",domainValueCode:""},rules:{domainValue:[{required:!0,message:"请输入域取值",trigger:"blur"},{max:64,message:"输入内容应少于64位字符",trigger:"blur"}],domainValueCode:[{max:64,message:"输入内容应少于64位字符",trigger:"blur"}]}}},mounted:function(){this.getDomains()},methods:{getDomains:function(){var e=this;e.domainListLoading=!0,e.domainForm.attrUuid=e.attrUuid,oh(e.attrUuid).then(function(t){e.domainList=t.data,e.domainListLoading=!1}).catch(function(t){e.domainListLoading=!1,console.log(t)})},editDomain:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clear(),this.domainForm.uuid=e.uuid,this.domainForm.domainValue=e.domainValue,this.domainForm.domainValueCode=e.domainValueCode},deleteDomain:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clearValidate(),this.$confirm("确定要刪除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){sh(t.uuid).then(function(t){e.$message({message:"刪除成功!",type:"success"}),e.getDomains({})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},clearValidate:function(){var e=this;this.$nextTick(function(){e.$refs.domainForm.clearValidate()})},save:function(){var e=this;this.$refs.domainForm.validate(function(t){if(!t)return e.$message({message:"请填写正确的内容",type:"warning"}),!1;var a;a=e.domainForm.uuid?ih:ah,a(Sp()({},e.domainForm)).then(function(t){e.$message({message:"属性域保存成功!",type:"success"}),e.getDomains({}),e.domainForm.uuid="",e.domainForm.domainValue="",e.domainForm.domainValueCode=""})})},clear:function(){this.domainForm.domainValue="",this.domainForm.domainValueCode="",this.clearValidate()}}},of=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex-1"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.domainListLoading,expression:"domainListLoading"}],attrs:{data:e.domainList,"tooltip-effect":"dark",height:"200",width:"100%","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"150px"}}),e._v(" "),e.uuidshow?a("el-table-column",{attrs:{prop:"uuid",label:"uuid"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"domainValue",label:"域取值",width:"300px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"domainValueCode",label:"域取值编码",width:"300px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.editDomain(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){e.deleteDomain(t.row)}}})]}}])})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-form",{ref:"domainForm",attrs:{model:e.domainForm,"label-width":"160px",rules:e.rules,inline:!0}},[a("el-form-item",{attrs:{label:"域取值",prop:"domainValue"}},[a("el-input",{attrs:{maxlength:64},model:{value:e.domainForm.domainValue,callback:function(t){e.$set(e.domainForm,"domainValue","string"==typeof t?t.trim():t)},expression:"domainForm.domainValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"域取值编码",prop:"domainValueCode"}},[a("el-input",{attrs:{maxlength:64},model:{value:e.domainForm.domainValueCode,callback:function(t){e.$set(e.domainForm,"domainValueCode","string"==typeof t?t.trim():t)},expression:"domainForm.domainValueCode"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)])},lf=[],rf={render:of,staticRenderFns:lf},nf=rf,cf=a("VU/8"),df=W,uf=cf(sf,nf,!1,df,"data-v-6889046c",null),pf=uf.exports,mf={props:{providers:{type:Array,default:[]},mode:{type:Number,default:1},parents:{type:Array,default:[]}},mounted:function(){this.getDictData()},data:function(){return{deviceCategoryDetailVisible:!1,deviceCategoryDetail:{uuid:"",parentUuid:"",typeCode:"",typeName:"",typeDesc:"",typeModel:"",hardwareVersion:"",softwareVersion:"",providerCode:"",providerName:""},searchCon:{typeCode:"",attrCode:"",attrDesc:""},activeTab:"basic",viewFlag:!1,selectAttr:[],transferData:[],typeCodes:[],deviceSaved:!1,rules:{typeCode:[{required:!0,message:"请输入类别编码",trigger:"blur"}],typeName:[{required:!0,message:"请输入类别名称",trigger:"blur"},{max:64,message:"输入内容应少于64位字符",trigger:"blur"}],typeDesc:[{required:!0,message:"请输入类别描述",trigger:"blur"},{max:64,message:"输入内容应少于64位字符",trigger:"blur"}],typeModel:[{required:!0,message:"请输入设备型号",trigger:"blur"},{max:64,message:"输入内容应少于64位字符",trigger:"blur"}],hardwareVersion:[{max:32,message:"输入内容应少于32位字符",trigger:"blur"}],softwareVersion:[{required:!0,message:"请输入软件版本",trigger:"blur"},{max:32,message:"输入内容应少于32位字符",trigger:"blur"}],providerCode:[{required:!0,message:"请选择供应商",trigger:"change"}]}}},components:{AttrDomainItem:pf},computed:{title:function(){return 1===this.mode?"查看设备":2===this.mode?"新增设备":3===this.mode?"修改设备":void 0},providerCodeName:function(){return this.deviceCategoryDetail.providerCode+":"+this.deviceCategoryDetail.providerName}},methods:{getDictData:function(){var e=this;mh({itemType:"15"}).then(function(t){e.typeCodes=t.data}).catch(function(e){console.log(e)})},editDeviceCategoryDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.deviceCategoryDetail.uuid=e.uuid,this.deviceCategoryDetail.parentUuid=e.parentUuid,this.deviceCategoryDetail.typeCode=e.typeCode,this.deviceCategoryDetail.typeName=e.typeName,this.deviceCategoryDetail.typeDesc=e.typeDesc,this.deviceCategoryDetail.typeModel=e.typeModel,this.deviceCategoryDetail.hardwareVersion=e.hardwareVersion,this.deviceCategoryDetail.softwareVersion=e.softwareVersion,this.deviceCategoryDetail.providerCode=e.providerCode,this.deviceCategoryDetail.providerName=e.providerName,this.deviceCategoryDetailVisible=!0,this.deviceSaved=!0,this.viewFlag=!0,this.getAllAttr(),this.getDeviceAttr()},addDeviceCategoryDialog:function(){this.deviceCategoryDetail.uuid="",this.deviceCategoryDetail.parentUuid="",this.deviceCategoryDetail.typeCode="",this.deviceCategoryDetail.typeName="",this.deviceCategoryDetail.typeDesc="",this.deviceCategoryDetail.typeModel="",this.deviceCategoryDetail.hardwareVersion="",this.deviceCategoryDetail.softwareVersion="",this.deviceCategoryDetail.providerCode="",this.deviceCategoryDetail.providerName="",this.deviceCategoryDetailVisible=!0,this.viewFlag=!1,this.getAllAttr(),this.activeTab="basic",this.selectAttr=[],this.deviceSaved=!1},getAllAttr:function(){var e=this;th({}).then(function(t){e.transferData=t.data})},getDeviceAttr:function(){var e=this;th({typeCode:this.deviceCategoryDetail.typeCode}).then(function(t){var a=[];null!==t.data&&(t.data.forEach(function(e){a.push(e.uuid)}),e.selectAttr=[],e.selectAttr=a)})},save:function(){var e=this;this.$refs.deviceCategoryDetail.validate(function(t){if(!t)return e.$message({message:"请填写正确的内容",type:"warning"}),!1;var a;a=e.deviceCategoryDetail.uuid?Gm:Qm,a(Sp()({},e.deviceCategoryDetail)).then(function(t){e.deviceCategoryDetail.uuid=t.data.uuid,e.deviceCategoryDetail.typeCode=t.data.typeCode,e.$parent.search({}),e.$parent.getParents(),e.viewFlag=!0,e.deviceSaved=!0,e.getDeviceAttr(),e.$message({message:"设备类别保存成功!",type:"success"})})})},saveMapping:function(){var e=this;ph({typeUUID:this.deviceCategoryDetail.uuid,value:this.selectAttr}).then(function(t){e.$parent.search({}),e.deviceCategoryDetailVisible=!1,e.activeTab="basic",e.selectAttr=[],e.deviceSaved=!1,e.$message({message:"设备类别属性保存成功!",type:"success"})})},clearValidate:function(){var e=this;this.$nextTick(function(){e.$refs.deviceCategoryDetail.clearValidate()})},clear:function(){3!==this.mode&&(this.deviceCategoryDetail.parentUuid=""),this.deviceCategoryDetail.typeCode="",this.deviceCategoryDetail.typeName="",this.deviceCategoryDetail.typeDesc="",this.deviceCategoryDetail.typeModel="",this.deviceCategoryDetail.hardwareVersion="",this.deviceCategoryDetail.softwareVersion="",this.deviceCategoryDetail.providerCode="",this.deviceCategoryDetail.providerName="",this.clearValidate()},closeDialog:function(e){e(),this.clearValidate(),this.activeTab="basic",this.selectAttr=[],this.deviceSaved=!1}}},hf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticStyle:{"min-width":"750px"},attrs:{visible:e.deviceCategoryDetailVisible,"modal-append-to-body":!1,"before-close":e.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.deviceCategoryDetailVisible=t}}},[a("div",{staticClass:"header-style",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(e.title))]),e._v(" "),a("el-tabs",{staticStyle:{"margin-top":"-20px"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"设备基本信息",name:"basic"}},[a("div",{staticStyle:{"padding-left":"30px"}},[2===e.mode?a("span",{staticStyle:{color:"red"}},[e._v("从设备主数编码下拉框中选择了设备分类后，会自动为您生成设备主数据编码，生成规则为：设备分类编码(4位)+供应商编码(4位)+顺番(4位)。")]):e._e(),e._v(" "),a("el-form",{ref:"deviceCategoryDetail",attrs:{model:e.deviceCategoryDetail,"label-width":"160px",rules:e.rules,inline:!0}},[a("el-form-item",{attrs:{label:"设备主数据编码",prop:"typeCode"}},[e.viewFlag?a("el-input",{attrs:{disabled:e.viewFlag},model:{value:e.deviceCategoryDetail.typeCode,callback:function(t){e.$set(e.deviceCategoryDetail,"typeCode","string"==typeof t?t.trim():t)},expression:"deviceCategoryDetail.typeCode"}}):a("el-select",{attrs:{filterable:""},model:{value:e.deviceCategoryDetail.typeCode,callback:function(t){e.$set(e.deviceCategoryDetail,"typeCode",t)},expression:"deviceCategoryDetail.typeCode"}},e._l(e.typeCodes,function(e){return a("el-option",{key:e.itemCode,attrs:{label:e.itemCode+":"+e.itemName,value:e.itemCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称",prop:"typeName"}},[a("el-input",{attrs:{maxlength:64},model:{value:e.deviceCategoryDetail.typeName,callback:function(t){e.$set(e.deviceCategoryDetail,"typeName","string"==typeof t?t.trim():t)},expression:"deviceCategoryDetail.typeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备描述",prop:"typeDesc"}},[a("el-input",{attrs:{maxlength:64},model:{value:e.deviceCategoryDetail.typeDesc,callback:function(t){e.$set(e.deviceCategoryDetail,"typeDesc","string"==typeof t?t.trim():t)},expression:"deviceCategoryDetail.typeDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号",prop:"typeModel"}},[a("el-input",{attrs:{disabled:e.viewFlag,maxlength:64},model:{value:e.deviceCategoryDetail.typeModel,callback:function(t){e.$set(e.deviceCategoryDetail,"typeModel","string"==typeof t?t.trim():t)},expression:"deviceCategoryDetail.typeModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商",prop:"providerCode"}},[2===e.mode?a("el-select",{attrs:{clearable:"",filterable:"",disabled:e.viewFlag},model:{value:e.deviceCategoryDetail.providerCode,callback:function(t){e.$set(e.deviceCategoryDetail,"providerCode",t)},expression:"deviceCategoryDetail.providerCode"}},e._l(e.providers,function(e){return a("el-option",{key:e.providerCode,attrs:{label:e.providerCode+":"+e.providerName,value:e.providerCode}})})):a("el-input",{attrs:{disabled:e.viewFlag},model:{value:e.providerCodeName,callback:function(t){e.providerCodeName=t},expression:"providerCodeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件版本",prop:"softwareVersion"}},[a("el-input",{attrs:{disabled:e.viewFlag,maxlength:32},model:{value:e.deviceCategoryDetail.softwareVersion,callback:function(t){e.$set(e.deviceCategoryDetail,"softwareVersion","string"==typeof t?t.trim():t)},expression:"deviceCategoryDetail.softwareVersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父设备",prop:"parentUuid"}},[a("el-select",{attrs:{clearable:"",filterable:"",disabled:e.viewFlag},model:{value:e.deviceCategoryDetail.parentUuid,callback:function(t){e.$set(e.deviceCategoryDetail,"parentUuid",t)},expression:"deviceCategoryDetail.parentUuid"}},e._l(e.parents,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.typeCode+":"+e.typeName,value:e.uuid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"硬件版本",prop:"hardwareVersion"}},[a("el-input",{attrs:{maxlength:32},model:{value:e.deviceCategoryDetail.hardwareVersion,callback:function(t){e.$set(e.deviceCategoryDetail,"hardwareVersion","string"==typeof t?t.trim():t)},expression:"deviceCategoryDetail.hardwareVersion"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)]),e._v(" "),e.deviceSaved?a("el-tab-pane",{attrs:{label:"设备属性信息",name:"attr"}},[a("div",[a("el-form",[a("el-form-item",[a("el-transfer",{staticStyle:{"padding-left":"190px"},attrs:{filterable:"",titles:["可添加属性","当前设备属性"],"button-texts":["删除属性","添加属性"],props:{key:"uuid",label:"attrDesc"},data:e.transferData},model:{value:e.selectAttr,callback:function(t){e.selectAttr=t},expression:"selectAttr"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.saveMapping}},[e._v("保存")])],1)],1)],1)]):e._e()],1)],1)},ff=[],gf={render:hf,staticRenderFns:ff},vf=gf,bf=a("VU/8"),Df=Q,yf=bf(mf,vf,!1,Df,"data-v-30f7f468",null),Cf=yf.exports,_f={data:function(){return{loading:!1,showflag:!1,expandRows:[],searchForm:{uuid:null,pageSize:10,currentPage:1,totalCount:0,typeCode:"",typeName:"",typeDesc:"",typeModel:"",providerCode:""},tableData:[],providers:[],mode:1,selections:[],parents:[]}},components:{DeviceCategoryEditItem:Cf},mounted:function(){this.search(),this.getProviders(),this.getParents(),this.attatchEventToPager()},methods:{addDevice:function(){this.mode=2,this.$refs.deviceCategoryEditDiag.addDeviceCategoryDialog()},deleteDeviceBatch:function(){var e=this;if(0===this.selections.length)return void this.$message({message:"请选择要删除的设备",type:"warning"});this.$confirm("确定要刪除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){Hm(e.selections[0].uuid).then(function(t){"0000"===t.code&&(e.$message({message:"刪除成功!",type:"success"}),e.search(),e.getParents())})}).catch(function(e){console.log(e)})},deleteDevice:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$confirm("确定要刪除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){Hm({value:[t.uuid]}).then(function(t){e.$message({message:"刪除成功!",type:"success"}),e.search(),e.getParents()})}).catch(function(e){console.log(e)})},editDevice:function(){0===this.selections.length?this.$message({message:"请选择要修改的设备",type:"warning"}):this.selections.length>1?this.$message({message:"一次只能修改一个设备",type:"warning"}):(this.mode=3,this.$refs.deviceCategoryEditDiag.editDeviceCategoryDialog(this.selections[0]))},editDevicedbl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mode=3,this.$refs.deviceCategoryEditDiag.editDeviceCategoryDialog(e)},search:function(){console.log("search method"),this.loading=!0,jm(this.searchForm).then(function(e){var t=[];this.tableData=e.data.result,this.searchForm.totalCount=e.data.totalCount,Array.isArray(this.tableData)&&this.tableData.length>0&&this.tableData.forEach(function(e){Array.isArray(e.slave)&&e.slave.length>0&&t.push(e.uuid)}),this.expandRows=t,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))},sizeChange:function(e){console.log("sizeChange"),this.searchForm.pageSize=e,this.searchForm.currentPage=1,this.search()},currentChange:function(e){console.log("currentChange"),this.searchForm.currentPage=e,this.search()},getProviders:function(){uh().then(function(e){console.log(e.data),this.providers=e.data}.bind(this)).catch(function(e){console.log(e)})},getParents:function(){Jm("").then(function(e){this.parents=e.data}.bind(this)).catch(function(e){console.log(e)})},gotoattrmgnt:function(){this.$router.push({name:"deviceAttrList"})},clear:function(){this.searchForm={uuid:null,pageSize:10,currentPage:1,typeCode:"",typeName:"",typeDesc:"",typeModel:"",providerCode:""}},getRowKeys:function(e){return e.uuid},highlightKeys:function(e,t){var a=e,i=t;if(null!==a&&a.length>0&&null!==i&&i.length>0){return a.replace(i,'<span style = "background-color: antiquewhite;">'+i+"</span>")}return a},attatchEventToPager:function(e){var t=this,a=t.$refs.pager.$el.querySelectorAll("input")[1];Object(Hh.a)(a,"keyup",function(e){13===e.keyCode&&parseInt(a.value)!==t.searchForm.currentPage&&t.currentChange(parseInt(a.value))})}}},wf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("device-category-edit-item",{ref:"deviceCategoryEditDiag",attrs:{providers:e.providers,mode:e.mode,parents:e.parents}}),e._v(" "),a("div",[a("el-form",{ref:"searchForm",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.searchForm,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"设备主数据编码","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入设备主数据编码",maxlength:12,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchForm.typeCode,callback:function(t){e.$set(e.searchForm,"typeCode",t)},expression:"searchForm.typeCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备型号"}},[a("el-input",{attrs:{placeholder:"请输入设备型号",maxlength:64,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchForm.typeModel,callback:function(t){e.$set(e.searchForm,"typeModel",t)},expression:"searchForm.typeModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备名称"}},[a("el-input",{attrs:{placeholder:"请输入设备名称",maxlength:64,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchForm.typeName,callback:function(t){e.$set(e.searchForm,"typeName",t)},expression:"searchForm.typeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备描述"}},[a("el-input",{attrs:{placeholder:"请输入设备描述",maxlength:64,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchForm.typeDesc,callback:function(t){e.$set(e.searchForm,"typeDesc",t)},expression:"searchForm.typeDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择供应商"},model:{value:e.searchForm.providerCode,callback:function(t){e.$set(e.searchForm,"providerCode",t)},expression:"searchForm.providerCode"}},e._l(e.providers,function(e){return a("el-option",{key:e.providerCode,attrs:{label:e.providerCode+":"+e.providerName,value:e.providerCode}})}))],1),e._v(" "),a("div",{attrs:{align:"right"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:function(t){t.stopPropagation(),e.clear(t)}}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.addDevice}},[e._v("添加")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"deviceTable",staticStyle:{"margin-top":"15px"},attrs:{"expand-row-keys":e.expandRows,"row-key":e.getRowKeys,data:e.tableData,"element-loading-text":"拼命加载中",height:"100%"},on:{"row-dblclick":e.editDevicedbl}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{"empty-text":"无子设备",data:t.row.slave,"show-header":!1},on:{"row-dblclick":e.editDevicedbl}},[e.showflag?a("el-table-column",{attrs:{prop:"uuid",label:"uuid"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"typeCode",label:"设备主数据编码",width:"155px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{float:"left","vertical-align":"middle",color:"#aaa"}},[a("i",{staticClass:"fa fa-cog"})]),e._v(" "),a("p",{staticStyle:{"padding-left":"20px",float:"left"},domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeCode,e.searchForm.typeCode))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeModel",label:"设备型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeModel,e.searchForm.typeModel))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"设备名称",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeName,e.searchForm.typeName))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeDesc",label:"设备描述",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeDesc,e.searchForm.typeDesc))}})]}}])}),e._v(" "),e.showflag?a("el-table-column",{attrs:{prop:"parentUuid",label:"父设备"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"hardwareVersion",label:"硬件版本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"softwareVersion",label:"软件版本"}}),e._v(" "),e.showflag?a("el-table-column",{attrs:{prop:"providerCode",label:"供应商编码"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"providerName",label:"供应商"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"155px","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"创建人",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"155px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateUser",label:"修改人",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.editDevicedbl(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){e.deleteDevice(t.row)}}})]}}])})],1)]}}])}),e._v(" "),e.showflag?a("el-table-column",{attrs:{prop:"uuid",label:"uuid"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"typeCode",label:"设备主数据编码",width:"155px",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeCode,e.searchForm.typeCode))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeModel",label:"设备型号",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeModel,e.searchForm.typeModel))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"设备名称",sortable:"",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeName,e.searchForm.typeName))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeDesc",label:"设备描述",sortable:"",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{innerHTML:e._s(e.highlightKeys(t.row.typeDesc,e.searchForm.typeDesc))}})]}}])}),e._v(" "),e.showflag?a("el-table-column",{attrs:{prop:"parentUuid",label:"父设备"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"hardwareVersion",label:"硬件版本",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"softwareVersion",label:"软件版本",sortable:""}}),e._v(" "),e.showflag?a("el-table-column",{attrs:{prop:"providerCode",label:"供应商编码"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"providerName",label:"供应商",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"155px",sortable:"","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"创建人",sortable:"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"155px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateUser",label:"修改人",sortable:"",width:"90px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.editDevicedbl(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){e.deleteDevice(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{ref:"pager",attrs:{background:"","current-page":e.searchForm.currentPage,"page-sizes":[10,20,50,100],"page-size":e.searchForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.searchForm.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)},Sf=[],xf={render:wf,staticRenderFns:Sf},kf=xf,Tf=a("VU/8"),Lf=G,Nf=Tf(_f,kf,!1,Lf,"data-v-30109748",null),Vf=Nf.exports,If={data:function(){return{attrListLoading:!1,showflag:!1,attrDialogVisible:!1,mode:1,selections:[],disabledflag:!1,activeTab:"basic",attrSaved:!0,menu:null,searchAttrForm:{uuid:"",pageSize:10,currentPage:1,total:0,attrCode:"",attrDesc:""},attrList:[],attrTypes:[],attrDataTypes:[],attrForm:{uuid:"",attrCode:"",attrDesc:"",attrType:"",attrDataType:"",unitDesc:"",unitCode:""},attrFormRules:{attrCode:[{required:!0,message:"请输入属性编码",trigger:"blur"},{max:64,message:"输入内容应少于64位字符",trigger:"blur"}],attrDesc:[{required:!0,message:"请输入属性描述",trigger:"blur"},{max:128,message:"输入内容应少于128位字符",trigger:"blur"}],attrType:[{required:!0,message:"请选择属性类型",trigger:"change"}],attrDataType:[{required:!0,message:"请选择数据类型",trigger:"change"}],unitDesc:[{max:32,message:"输入内容应少于32位字符",trigger:"blur"}],unitCode:[{max:32,message:"输入内容应少于32位字符",trigger:"blur"}]}}},components:{AttrDomainItem:pf},mounted:function(){this.search(),this.attatchEventToPager(),this.getDictData()},computed:{title:function(){return 1===this.mode?"查看设备属性":2===this.mode?"新增设备属性":3===this.mode?"修改设备属性":void 0}},methods:{getDictData:function(){var e=this;mh({itemType:"19"}).then(function(t){e.attrDataTypes=t.data}).catch(function(e){console.log(e)});mh({itemType:"18"}).then(function(t){e.attrTypes=t.data}).catch(function(e){console.log(e)})},search:function(){this.attrListLoading=!0,eh(this.searchAttrForm).then(function(e){console.log("getDeviceAttributes"),this.attrList=e.data.result,this.searchAttrForm.total=e.data.totalCount,this.attrListLoading=!1}.bind(this)).catch(function(e){this.attrListLoading=!1,console.log(e)}.bind(this))},gotodevicemgnt:function(){this.$router.push({name:"deviceCategoryList"})},sizeChange:function(e){this.searchAttrForm.pageSize=e,this.searchAttrForm.currentPage=1,this.search()},currentChange:function(e){this.searchAttrForm.currentPage=e,this.search()},addAttr:function(){this.disabledflag=!1,this.mode=2,this.clear(),this.attrForm.uuid="",this.attrDialogVisible=!0,this.attrSaved=!1},editAttrdbl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mode=3,this.attrForm={uuid:e.uuid,attrCode:e.attrCode,attrDesc:e.attrDesc,attrType:e.attrType,attrDataType:e.attrDataType,unitDesc:e.unitDesc,unitCode:e.unitCode},this.attrDialogVisible=!0,"3"===this.attrForm.attrDataType?this.attrSaved=!0:this.attrSaved=!1},delAttrBatch:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.selections.length)return void this.$message({message:"请选择要删除的设备属性",type:"warning"});this.$confirm("确定要刪除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var t=[];e.selections.forEach(function(e){return t.push(e.uuid)}),Xm({value:t}).then(function(t){e.$message({message:"刪除成功!",type:"warning"}),e.search({})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},delAttr:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$confirm("确定要刪除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){var a=[];a.push(t.uuid),Xm({value:a}).then(function(t){e.$message({message:"刪除成功!",type:"success"}),e.search({})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},save:function(){var e=this;this.$refs.attrForm.validate(function(t){if(!t)return e.$message({message:"请填写正确的内容",type:"warning"}),!1;var a;a=e.attrForm.uuid?Ym:Km,a(Sp()({},e.attrForm)).then(function(t){e.$message({message:"设备类别保存成功!",type:"success"}),e.attrForm.uuid=t.data.uuid,"3"===e.attrForm.attrDataType?e.attrSaved=!0:(e.attrSaved=!1,e.attrDialogVisible=!1),e.search({})})})},clear:function(){this.attrForm.attrCode="",this.attrForm.attrDesc="",this.attrForm.attrType="",this.attrForm.attrDataType="",this.attrForm.unitDesc="",this.attrForm.unitCode="",this.clearValidate()},reset:function(){this.searchAttrForm={uuid:"",pageSize:10,currentPage:1,attrCode:"",attrDesc:""}},clearValidate:function(){var e=this;this.$nextTick(function(){e.$refs.attrForm.clearValidate()})},closedialog:function(e){e(),this.clear(),this.attrSaved=!1,this.activeTab="basic"},attatchEventToPager:function(e){var t=this,a=t.$refs.pager.$el.querySelectorAll("input")[1];Object(Hh.a)(a,"keyup",function(e){13===e.keyCode&&parseInt(a.value)!==t.searchAttrForm.currentPage&&t.currentChange(parseInt(a.value))})}}},Ef=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"search-container"},[a("el-form",{ref:"searchAttrForm",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.searchAttrForm,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"属性编码"}},[a("el-input",{attrs:{placeholder:"请输入属性编码",maxlength:64,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchAttrForm.attrCode,callback:function(t){e.$set(e.searchAttrForm,"attrCode",t)},expression:"searchAttrForm.attrCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性描述"}},[a("el-input",{attrs:{placeholder:"请输入属性描述",maxlength:128,clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchAttrForm.attrDesc,callback:function(t){e.$set(e.searchAttrForm,"attrDesc",t)},expression:"searchAttrForm.attrDesc"}})],1),e._v(" "),a("el-form-item",[a("div",{staticClass:"btn-container"},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.reset}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)])],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.addAttr}},[e._v("添加")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.attrListLoading,expression:"attrListLoading"}],ref:"attrTable",staticStyle:{"margin-top":"15px"},attrs:{data:e.attrList,height:"100%","element-loading-text":"拼命加载中"},on:{"row-dblclick":e.editAttrdbl}},[e.showflag?a("el-table-column",{attrs:{prop:"uuid",label:"uuid"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"attrCode",label:"属性编码",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"attrDesc",label:"属性描述",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"attrType",label:"属性类型",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.attrTypes,function(i){return a("div",{key:i.itemCode},[e._v("\n          "+e._s(t.row.attrType==i.itemCode?i.itemName:"")+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"attrDataType",label:"数据类型",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.attrDataTypes,function(i){return a("div",{key:i.itemCode},[e._v("\n          "+e._s(t.row.attrDataType==i.itemCode?i.itemName:"")+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unitDesc",label:"单位描述",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"unitCode",label:"单位编码",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createUser",label:"创建人",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",width:"180px",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateUser",label:"修改人",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.editAttrdbl(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){e.delAttr(t.row)}}})]}}])})],1),e._v(" "),a("el-pagination",{ref:"pager",attrs:{background:"","current-page":e.searchAttrForm.currentPage,"page-sizes":[10,20,50,100],"page-size":e.searchAttrForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.searchAttrForm.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}),e._v(" "),a("el-dialog",{staticStyle:{"min-width":"750px"},attrs:{visible:e.attrDialogVisible,"modal-append-to-body":!1,"before-close":e.closedialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.attrDialogVisible=t}}},[a("div",{staticClass:"header-style",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(e.title))]),e._v(" "),a("el-tabs",{staticStyle:{"margin-top":"-20px"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"属性基本信息",name:"basic"}},[a("div",{staticStyle:{"padding-left":"30px"}},[a("el-form",{ref:"attrForm",attrs:{model:e.attrForm,"label-width":"160px",rules:e.attrFormRules,inline:!0}},[a("el-form-item",{attrs:{label:"属性编码",prop:"attrCode"}},[a("el-input",{attrs:{disabled:e.disabledflag,maxlength:64},model:{value:e.attrForm.attrCode,callback:function(t){e.$set(e.attrForm,"attrCode","string"==typeof t?t.trim():t)},expression:"attrForm.attrCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性描述",prop:"attrDesc"}},[a("el-input",{attrs:{disabled:e.disabledflag,maxlength:128},model:{value:e.attrForm.attrDesc,callback:function(t){e.$set(e.attrForm,"attrDesc","string"==typeof t?t.trim():t)},expression:"attrForm.attrDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性类型",prop:"attrType"}},[a("el-select",{attrs:{disabled:e.disabledflag},model:{value:e.attrForm.attrType,callback:function(t){e.$set(e.attrForm,"attrType",t)},expression:"attrForm.attrType"}},e._l(e.attrTypes,function(e){return a("el-option",{key:e.itemCode,attrs:{value:e.itemCode,label:e.itemName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"数据类型",prop:"attrDataType"}},[a("el-select",{attrs:{disabled:e.disabledflag},model:{value:e.attrForm.attrDataType,callback:function(t){e.$set(e.attrForm,"attrDataType",t)},expression:"attrForm.attrDataType"}},e._l(e.attrDataTypes,function(e){return a("el-option",{key:e.itemCode,attrs:{value:e.itemCode,label:e.itemName}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单位描述",prop:"unitDesc"}},[a("el-input",{attrs:{disabled:e.disabledflag,maxlength:32},model:{value:e.attrForm.unitDesc,callback:function(t){e.$set(e.attrForm,"unitDesc","string"==typeof t?t.trim():t)},expression:"attrForm.unitDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位编码",prop:"unitCode"}},[a("el-input",{attrs:{disabled:e.disabledflag,maxlength:32},model:{value:e.attrForm.unitCode,callback:function(t){e.$set(e.attrForm,"unitCode","string"==typeof t?t.trim():t)},expression:"attrForm.unitCode"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary",disabled:e.disabledflag},on:{click:e.save}},[e._v("保存")])],1)],1)]),e._v(" "),e.attrSaved?a("el-tab-pane",{attrs:{label:"属性域信息",name:"domain"}},[a("attr-domain-item",{ref:"openAttrDomainDialog",attrs:{attrUuid:e.attrForm.uuid}})],1):e._e()],1)],1)],1)},Pf=[],Mf={render:Ef,staticRenderFns:Pf},$f=Mf,Uf=a("VU/8"),Ff=H,Rf=Uf(If,$f,!1,Ff,"data-v-727de8cf",null),zf=Rf.exports,Af={data:function(){return{activeName:0,showFirstTab:!0,showSecondTab:!1}},components:{DeviceCategoryList:Vf,DeviceAttrList:zf},mounted:function(){},beforeDestroy:function(){},computed:{},methods:{handleTabClick:function(e,t){this.showFirstTab="0"===e.name,this.showSecondTab="1"===e.name}}},Of=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"设备主数据管理",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"设备属性管理",name:"1"}})],1),e._v(" "),e.showFirstTab?a("device-category-list"):e._e(),e._v(" "),e.showSecondTab?a("device-attr-list"):e._e()],1)},qf=[],Bf={render:Of,staticRenderFns:qf},Wf=Bf,Qf=a("VU/8"),Gf=j,Hf=Qf(Af,Wf,!1,Gf,"data-v-11bdbeea",null),jf=Hf.exports,Jf=[{path:"/mdmapp/personmgmt",name:"mdmAppPersonMgmt",component:kh},{path:"/mdmapp/housemgmt",name:"mdmAppHouseMgmt",component:Gh},{path:"/mdmapp/providermgmt",name:"mdmAppProviderMgmt",component:af},{path:"/mdmapp/devicemgmt",name:"mdmAppDeviceMgmt",component:jf}],Zf=a("DoGJ"),Kf={props:{title:{type:String},code:{type:String},options:{type:Array},disabled:{type:Boolean},initValue:{type:String},required:{type:Boolean}},data:function(){return{value:this.initValue}},watch:{value:function(){var e={};e[this.code]=this.value,this.$emit("listenToInput",e)},isClear:function(e,t){!0===e&&(this.value="")},initValue:function(e,t){this.value=e}},methods:{clearBox:function(){this.value=""}}},Yf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-container"},[a("span",{staticClass:"sub-title"},[e._v(e._s(e.title)),a("span",{directives:[{name:"show",rawName:"v-show",value:e.required,expression:"required"}],staticStyle:{color:"red"}},[e._v("*")]),e._v("：")]),e._v(" "),a("span",{staticClass:"dropdown"},[a("el-select",{staticClass:"devicemgmSelect",attrs:{placeholder:"请选择",disabled:e.disabled},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)])},Xf=[],eg={render:Yf,staticRenderFns:Xf},tg=eg,ag=a("VU/8"),ig=ag(Kf,tg,!1,null,null,null),sg=ig.exports,og={props:{title:{type:String},value:{type:String},code:{type:String},disabled:{type:Boolean},type:{type:String},maxlength:{type:Number},append:{type:String},required:{type:Boolean}},data:function(){return{input:this.value}},watch:{value:function(e,t){e&&(this.input=e)}},methods:{callbackInput:function(){var e={};e[this.code]=this.input,this.$emit("listenToInput",e)},clearBox:function(){this.input=""}}},lg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-container"},[a("span",{staticClass:"sub-title"},[e._v(e._s(e.title)),a("span",{directives:[{name:"show",rawName:"v-show",value:e.required,expression:"required"}],staticStyle:{color:"red"}},[e._v("*")]),e._v("：")]),e._v(" "),a("el-input",{staticClass:"devicemgmInput",attrs:{placeholder:e.disabled?"":"请输入内容",disabled:e.disabled,maxlength:e.maxlength,clearable:!e.disabled,type:e.type},on:{blur:e.callbackInput},model:{value:e.input,callback:function(t){e.input="string"==typeof t?t.trim():t},expression:"input"}},[e.append?a("template",{slot:"append"},[e._v(e._s(e.append))]):e._e()],2)],1)},rg=[],ng={render:lg,staticRenderFns:rg},cg=ng,dg=a("VU/8"),ug=dg(og,cg,!1,null,null,null),pg=ug.exports,mg={name:"ElButton",inject:{elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},methods:{handleClick:function(e){this.$emit("click",e)},handleInnerClick:function(e){this.disabled&&e.stopPropagation()}}},hg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.disabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round}],attrs:{disabled:e.disabled,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?a("i",{staticClass:"el-icon-loading",on:{click:e.handleInnerClick}}):e._e(),e._v(" "),e.icon&&!e.loading?a("i",{class:e.icon,on:{click:e.handleInnerClick}}):e._e(),e._v(" "),e.$slots.default?a("span",{on:{click:e.handleInnerClick}},[e._t("default")],2):e._e()])},fg=[],gg={render:hg,staticRenderFns:fg},vg=gg,bg=a("VU/8"),Dg=bg(mg,vg,!1,null,null,null),yg=Dg.exports,Cg="/egc-devicemgmtcomponent/info/",_g=function(e){return mt.a.get(Cg+"getOrg?id="+e).then(function(e){return e.data})},wg=function(e){return mt.a.get(Cg+"getOrgNextLevel?id="+e).then(function(e){return e.data})},Sg=function(){return mt.a.get(Cg+"getDeviceTypeList").then(function(e){return e.data})},xg=function(e,t){return mt.a.get(Cg+"getDeviceList?currentPage="+e+"&pageSize="+t).then(function(e){return e.data})},kg=function(e){return mt.a.post(Cg+"getDeviceSelectList/",e).then(function(e){return e.data})},Tg=function(e,t,a){return mt.a.get(Cg+"getSubDeviceList?id="+e+"&currentPage="+t+"&pageSize="+a).then(function(e){return e.data})},Lg=function(e){return mt.a.get(Cg+"getDeviceDetail?id="+e).then(function(e){return e.data})},Ng=function(e){return mt.a.get(Cg+"getProviderList").then(function(e){return e.data})},Vg=function(e){return mt.a.get(Cg+"getSubDeviceDetail?id="+e).then(function(e){return e.data})},Ig=function(e,t,a){return mt.a.get(Cg+"getSlaveDeviceList?id="+e+"&currentPage="+t+"&pageSize="+a).then(function(e){return e.data})},Eg={props:{parentUuid:{type:String}},components:{inputBox:pg},data:function(){return{orgsData:[],defaultProps:{children:"children",label:"name"},dialogTableVisible:!1,orgId:"",orgName:"",expandedKeys:[]}},mounted:function(){this.loadOrgs(this.parentUuid)},methods:{loadOrgs:function(e){_g(e).then(function(e){e.uuid&&(this.$set(this.expandedKeys,0,e.uuid),this.$set(this.orgsData,0,e))}.bind(this)).catch(function(e){console.log(e)})},_onSubmit:function(){var e={orgId:this.orgId,orgName:this.orgName};this.$emit("changeDialogStatus",e),this.clear()},clear:function(){this.$refs.orgId.clearBox(),this.$refs.orgName.clearBox(),this.orgName="",this.orgId=""},_handleNodeClick:function(e,t,a){var i=this;this.orgName="",this.orgId=t.data.uuid;var s=t;for(wg(t.data.uuid).then(function(e){i.expandedKeys.push(t.data.uuid),i.$refs.tree.updateKeyChildren(t.data.uuid,e)}).catch();s.parent;)this.orgName=s.data.name+this.orgName,s=s.parent}}},Pg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"orgTreeContent"},[a("el-tree",{ref:"tree",attrs:{"node-key":"uuid",data:e.orgsData,props:e.defaultProps,"default-expanded-keys":e.expandedKeys,accordion:"","highlight-current":""},on:{"node-click":e._handleNodeClick}})],1),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"grid-content bg-purple"},[a("el-tooltip",{attrs:{content:e.orgId,placement:"top",effect:"light",disabled:""===e.orgId}},[a("inputBox",{ref:"orgId",staticStyle:{"margin-right":"20px"},attrs:{title:"组织ID",value:e.orgId,disabled:!0}})],1),e._v(" "),a("el-tooltip",{attrs:{content:e.orgName,placement:"top",effect:"light",disabled:""===e.orgName}},[a("inputBox",{ref:"orgName",staticStyle:{"margin-right":"20px"},attrs:{title:"组织名称",value:e.orgName,disabled:!0}})],1)],1),e._v(" "),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary"},on:{click:e._onSubmit}},[e._v("确定")])],1)])},Mg=[],$g={render:Pg,staticRenderFns:Mg},Ug=$g,Fg=a("VU/8"),Rg=Fg(Eg,Ug,!1,null,null,null),zg=Rg.exports,Ag="/egc-devicemgmtcomponent/court/",Og=function(){return mt.a.get(Ag+"getProvinceList/").then(function(e){return e.data})},qg=function(e){return mt.a.post(Ag+"getCityList/",e).then(function(e){return e.data})},Bg=function(e){return mt.a.post(Ag+"getDistrictList/",e).then(function(e){return e.data})},Wg=function(e){return mt.a.post(Ag+"getCourtList/",e).then(function(e){return e.data})},Qg={props:{dialogType:{type:Boolean}},components:{ElButton:yg,ElRow:Zf.a,selectBox:sg,inputBox:pg},data:function(){return{currentPage:1,total:1,pageSize:10,provinceType:[],cityType:[],districtType:[],tableList:[{name:"",province:"空值",city:"",district:""}],screeningData:{},listRows:[]}},methods:{_loadInitInfo:function(){var e=this;Og().then(function(t){var a=t.listBaseCourtVo;a.forEach(function(e){e.label=e.province,e.value=e.province}),a.splice(0,0,{label:"",value:""}),e.provinceType=a}).catch()},_saveDistrictdata:function(e){var t=this;for(var a in e)this.screeningData[a]=e[a],"province"===a&&void 0!==e[a]&&""!==e[a]&&(qg({province:e[a]}).then(function(e){var a=e.listBaseCourtVo;a.forEach(function(e){e.label=e.city,e.value=e.city}),a.splice(0,0,{label:"",value:""}),t.cityType=a}).catch(),this.$refs.city.clearBox(),this.cityType=[],this.$refs.district.clearBox(),this.districtType=[]),"city"===a&&void 0!==e[a]&&""!==e[a]&&Bg({city:e[a]}).then(function(e){var a=e.listBaseCourtVo;a.forEach(function(e){e.label=e.district,e.value=e.district}),a.splice(0,0,{label:"",value:""}),t.districtType=a}).catch()},_seekDistric:function(){var e=this;this.screeningData.currentPage=this.currentPage,this.screeningData.pageSize=this.pageSize,Wg(this.screeningData).then(function(t){e.tableList=t.listCourtVo,e.total=t.countTotal}).catch()},_handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this._seekDistric()},_handlePageChange:function(e){this.currentPage=e,this._seekDistric()},clearData:function(){this.$refs.province.clearBox(),this.$refs.city.clearBox(),this.cityType=[],this.$refs.district.clearBox(),this.districtType=[],this.tableList=[{name:"",province:"空值",city:"",district:""}]},_getCurRow:function(e){this.dialogType?this.listRows=e:e&&this.$emit("listenToRowSelected",e)},_confirm:function(){var e=this;this.listRows.length>0?this.$confirm("是否确定将所选固件下发至所选小区?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("listenToRowSelected",e.listRows)}).catch():this.$message.error("请先选择下发小区")}},mounted:function(){this._loadInitInfo()}},Gg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"name",attrs:{title:"小区名称",code:"name",maxlength:20},on:{listenToInput:e._saveDistrictdata}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"province",attrs:{title:"省",code:"province",options:e.provinceType},on:{listenToInput:e._saveDistrictdata}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"city",attrs:{title:"市",code:"city",options:e.cityType},on:{listenToInput:e._saveDistrictdata}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"district",attrs:{title:"区",code:"district",options:e.districtType},on:{listenToInput:e._saveDistrictdata}})],1)])],1),e._v(" "),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e._seekDistric}},[e._v("查找")])],1),e._v(" "),a("el-table",{attrs:{data:e.tableList,border:"","highlight-current-row":"","show-footer":!1},on:{select:e._getCurRow,"select-all":e._getCurRow,"cell-dblclick":e._getCurRow}},[e.dialogType?a("el-table-column",{attrs:{resizable:!1,type:"selection",width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"小区名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"province",label:"省"}}),e._v(" "),a("el-table-column",{attrs:{prop:"city",label:"市"}}),e._v(" "),a("el-table-column",{attrs:{prop:"district",label:"区"}})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"r_page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e._handleSizeChange,"current-change":e._handlePageChange}})],1)]),e._v(" "),e.dialogType?a("el-button",{staticStyle:{"margin-left":"90%"},attrs:{type:"primary"},on:{click:e._confirm}},[e._v("提交")]):e._e()],1)},Hg=[],jg={render:Gg,staticRenderFns:Hg},Jg=jg,Zg=a("VU/8"),Kg=Zg(Qg,Jg,!1,null,null,null),Yg=Kg.exports,Xg={props:{childUuid:{type:String}},components:{ElButton:yg,ElRow:Zf.a,selectBox:sg,inputBox:pg},data:function(){return{childDeviceData:{},attrList:[]}},methods:{clearData:function(){for(var e in this.childDeviceData)this.$refs[e]&&this.$refs[e].clearBox();this.$refs.orgId&&this.$refs.orgId.clearBox(),this.$refs.orgName&&this.$refs.orgName.clearBox(),this.attrList=[],this.childDeviceData={}},passToDialogChildUuid:function(e){Vg(e).then(function(e){this.attrList=e.listDmDeviceAttrValue,this.childDeviceData=e}.bind(this)).catch()}},mounted:function(){this.passToDialogChildUuid(this.childUuid)}},ev=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row-container"},[a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"deviceTypeDesc",attrs:{title:"设备类型",code:"deviceTypeDesc",initValue:e.childDeviceData.deviceTypeDesc,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"providerCode",attrs:{title:"厂商名称",code:"providerCode",initValue:e.childDeviceData.providerName,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"macAddress",attrs:{title:"MAC地址",code:"macAddress",value:e.childDeviceData.macAddress,disabled:!0,maxlength:20}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"parentDeviceCode",attrs:{title:"父级设备编码",code:"parentDeviceCode",disabled:!0,value:e.childDeviceData.parentDeviceCode}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"row-container"},[a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"deviceIp",attrs:{title:"设备IP",code:"deviceIp",disabled:!0,value:e.childDeviceData.deviceIp,maxlength:16}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"devicePort",attrs:{title:"设备端口",code:"devicePort",value:e.childDeviceData.devicePort,disabled:!0,maxlength:8}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"userName",attrs:{title:"用户名",code:"userName",value:e.childDeviceData.userName,disabled:!0,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"password",attrs:{title:"用户密码",code:"password",value:e.childDeviceData.password,disabled:!0,type:"password",maxlength:32}})],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"deviceMask",attrs:{title:"设备掩码",code:"deviceMask",value:e.childDeviceData.deviceMask,disabled:!0,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"gatewayId",attrs:{title:"网关服务标识",code:"gatewayId",disabled:!0,initValue:e.childDeviceData.gatewayId}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"hardwareVersion",attrs:{title:"硬件版本",code:"hardwareVersion",value:e.childDeviceData.hardwareVersion,disabled:!0,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"softwareVersion",attrs:{title:"软件版本",code:"softwareVersion",value:e.childDeviceData.softwareVersion,disabled:!0,maxlength:30}})],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"deviceName",attrs:{title:"设备名称",code:"deviceName",value:e.childDeviceData.deviceName,disabled:!0,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"installAddress",attrs:{title:"安装地址",code:"installAddress",value:e.childDeviceData.installAddress,disabled:!0,maxlength:64}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"deviceStatus",attrs:{title:"设备状态",code:"deviceStatus",initValue:e.childDeviceData.deviceStatus,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceDesc",attrs:{title:"设备描述",code:"deviceDesc",disabled:!0,value:e.childDeviceData.deviceDesc,maxlength:256}})],1)])],1)],1),e._v(" "),a("div",{staticClass:"row-container"},[a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"orgId",attrs:{title:"组织ID",code:"orgId",value:e.childDeviceData.orgId,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"orgName",staticStyle:{"margin-right":"20px"},attrs:{title:"组织名称",code:"orgName",value:e.childDeviceData.orgName,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"picId",attrs:{title:"图像信息",code:"picId",disabled:!0,value:e.childDeviceData.picId,maxlength:256}})],1)])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.attrList.length>0,expression:"attrList.length>0"}],staticStyle:{"padding-top":"20px"}},[a("p",{staticStyle:{"margin-bottom":"15px","font-size":"14px"}},[e._v("专有属性设置")]),e._v(" "),a("el-row",{attrs:{gutter:60}},e._l(e.attrList,function(t,i){return a("el-col",{key:i,attrs:{span:6}},[a("div",{staticClass:"grid-content attr-content bg-purple"},["string"===t.attrDataType?a("input-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,append:t.unitDesc,disabled:!0,value:t.attrValue}}):e._e(),e._v(" "),"integer"===t.attrDataType?a("input-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,type:"number",append:t.unitDesc,disabled:!0,value:t.attrValue}}):e._e(),e._v(" "),"select"===t.attrDataType?a("select-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,disabled:!0,initValue:t.attrValue}}):e._e(),e._v(" "),"boolean"===t.attrDataType?a("select-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,disabled:!0,initValue:t.attrValue}}):e._e()],1)])}))],1)])},tv=[],av={render:ev,staticRenderFns:tv},iv=av,sv=a("VU/8"),ov=sv(Xg,iv,!1,null,null,null),lv=ov.exports,rv=function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)},nv=function(e){var t=/[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}/,a=/[A-Fa-f0-9]{2}-[A-Fa-f0-9]{2}-[A-Fa-f0-9]{2}-[A-Fa-f0-9]{2}-[A-Fa-f0-9]{2}-[A-Fa-f0-9]{2}/;return t.test(e)||a.test(e)},cv=function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var s=t.getDate();s=s<10?"0"+s:s;var o=t.getHours();o=o<10?"0"+o:o;var l=t.getMinutes(),r=t.getSeconds();return l=l<10?"0"+l:l,r=r<10?"0"+r:r,a+"-"+i+"-"+s+" "+o+":"+l+":"+r},dv=function(e,t){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)},uv={data:function(){return{currentPage:1,total:2,pageSize:10,childDeviceTableData:[],isSubDetailDialogShow:!1,childUuid:"",currentRow:{},uuid:{}}},components:{subDeviceDialog:lv},methods:{loadChildDeviceTableData:function(e,t,a){var i=this;this.uuid=a,""!==a&&Tg(a,e,t).then(function(e){if(e.listDmDevice){for(var t=e.listDmDevice,a=0;a<t.length;a++)t[a].updateTime=cv(t[a].updateTime);this.childDeviceTableData=t}else this.childDeviceTableData=[];this.total=e.countTotal}.bind(this)).catch(function(){i.childDeviceTableData=[]})},_handlePageChange:function(e){this.currentPage=e,this.loadChildDeviceTableData(e,this.pageSize,this.uuid)},_handleSizeChange:function(e){this.pageSize=e,this.loadChildDeviceTableData("1",e,this.uuid)},_closeDialog:function(){this.$refs.subDeviceDialogEdit&&this.$refs.subDeviceDialogEdit.clearData()},handleCurrentChange:function(e){this.currentRow=e},_detailSubDevice:function(e,t){this.isSubDetailDialogShow=!0,this.childUuid=t.uuid,this.$refs.subDeviceDialogEdit&&this.$refs.subDeviceDialogEdit.passToDialogChildUuid(this.childUuid)}}},pv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"deviceMgmTable",staticStyle:{width:"100%"},attrs:{data:e.childDeviceTableData,"highlight-current-row":"",stripe:"",border:""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"子设备信息列表："}},[a("el-table-column",{attrs:{resizable:!1,prop:"deviceCode",label:"设备编码",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceTypeDesc",label:"设备类型",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceName",label:"设备名称","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceIp",label:"设备IP","show-overflow-tooltip":"",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"devicePort",label:"设备端口",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"updateTime","show-overflow-tooltip":"",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e._detailSubDevice(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-view"})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e._handleSizeChange,"current-change":e._handlePageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.isSubDetailDialogShow?e.currentRow.deviceTypeDesc:"",visible:e.isSubDetailDialogShow,width:"75%",top:"8vh"},on:{"update:visible":function(t){e.isSubDetailDialogShow=t},close:e._closeDialog}},[a("sub-device-dialog",{ref:"subDeviceDialogEdit",attrs:{childUuid:e.childUuid}})],1)],1)},mv=[],hv={render:pv,staticRenderFns:mv},fv=hv,gv=a("VU/8"),vv=gv(uv,fv,!1,null,null,null),bv=vv.exports,Dv={components:{ElButton:yg,subDeviceList:bv},data:function(){return{title:""}},methods:{passToChild:function(e){this.title=e.deviceTypeDesc+"-"+e.deviceCode+"-子设备",this.$refs.subDeviceList.loadChildDeviceTableData(1,10,e.uuid)}}},yv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"child-container"},[a("span",{staticClass:"tech-title"},[e._v(e._s(e.title))]),e._v(" "),a("sub-device-list",{ref:"subDeviceList"})],1)])},Cv=[],_v={render:yv,staticRenderFns:Cv},wv=_v,Sv=a("VU/8"),xv=Sv(Dv,wv,!1,null,null,null),kv=xv.exports,Tv={props:{uuid:{type:String}},data:function(){return{mainDeviceData:{},attrList:[]}},components:{ElButton:yg,ElRow:Zf.a,selectBox:sg,inputBox:pg,orgTree:zg},methods:{clearData:function(){for(var e in this.mainDeviceData)this.$refs[e]&&this.$refs[e].clearBox();this.$refs.orgId&&this.$refs.orgId.clearBox(),this.$refs.orgName&&this.$refs.orgName.clearBox(),this.mainDeviceData={},this.attrList=[]},passToDialogUuid:function(e){Lg(e).then(function(e){this.attrList=e.listDmDeviceAttrValue,this.mainDeviceData=e}.bind(this)).catch()}},mounted:function(){this.uuid&&this.passToDialogUuid(this.uuid)}},Lv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"deviceTypeDesc",attrs:{title:"设备类型",code:"deviceTypeDesc",initValue:e.mainDeviceData.deviceTypeDesc,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"providerCode",attrs:{title:"厂商名称",code:"providerCode",initValue:e.mainDeviceData.providerName,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"macAddress",attrs:{title:"MAC地址",code:"macAddress",value:e.mainDeviceData.macAddress,disabled:!0,maxlength:20}})],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"orgId",attrs:{title:"组织ID",code:"orgId",value:e.mainDeviceData.orgId,disabled:!0,maxlength:30}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"orgName",staticStyle:{"margin-right":"20px"},attrs:{title:"组织名称",code:"orgName",value:e.mainDeviceData.orgName,disabled:!0}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"gatewayId",attrs:{title:"网关服务标识",code:"gatewayId",disabled:!0,initValue:e.mainDeviceData.gatewayId}})],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceIp",attrs:{title:"设备IP",code:"deviceIp",disabled:!0,value:e.mainDeviceData.deviceIp,maxlength:16}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"devicePort",attrs:{title:"设备端口",code:"devicePort",disabled:!0,value:e.mainDeviceData.devicePort,maxlength:8}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"userName",attrs:{title:"用户名",code:"userName",disabled:!0,value:e.mainDeviceData.userName,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"password",attrs:{title:"用户密码",code:"password",disabled:!0,value:e.mainDeviceData.password,type:"password",maxlength:32}})],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceMask",attrs:{title:"设备掩码",code:"deviceMask",disabled:!0,value:e.mainDeviceData.deviceMask,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"hardwareVersion",attrs:{title:"硬件版本",code:"hardwareVersion",disabled:!0,value:e.mainDeviceData.hardwareVersion,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"softwareVersion",attrs:{title:"软件版本",code:"softwareVersion",disabled:!0,value:e.mainDeviceData.softwareVersion,maxlength:30}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"installAddress",attrs:{title:"安装地址",code:"installAddress",disabled:!0,value:e.mainDeviceData.installAddress,maxlength:128}})],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceName",attrs:{title:"设备名称",code:"deviceName",disabled:!0,value:e.mainDeviceData.deviceName,maxlength:32}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceModel",attrs:{title:"设备型号",code:"deviceModel",disabled:!0,value:e.mainDeviceData.deviceModel,maxlength:64}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceDesc",attrs:{title:"设备描述",code:"deviceDesc",disabled:!0,value:e.mainDeviceData.deviceDesc,maxlength:256}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"picId",attrs:{title:"图像信息",code:"picId",disabled:!0,value:e.mainDeviceData.picId,maxlength:256}})],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.attrList.length>0,expression:"attrList.length>0"}]},[a("p",{staticStyle:{"margin-bottom":"15px","font-size":"14px"}},[e._v("专有属性设置")]),e._v(" "),a("el-row",{attrs:{gutter:60}},e._l(e.attrList,function(t,i){return a("el-col",{key:i,attrs:{span:6}},[a("div",{staticClass:"grid-content attr-content bg-purple"},["string"===t.attrDataType?a("input-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,append:t.unitDesc,disabled:!0,value:t.attrValue}}):e._e(),e._v(" "),"integer"===t.attrDataType?a("input-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,type:"tel",append:t.unitDesc,disabled:!0,value:t.attrValue}}):e._e(),e._v(" "),"select"===t.attrDataType?a("select-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,disabled:!0,initValue:t.attrValue}}):e._e(),e._v(" "),"boolean"===t.attrDataType?a("select-box",{ref:t.attrDesc,refInFor:!0,attrs:{title:t.attrDesc,code:t.attrDesc,disabled:!0,initValue:t.attrValue}}):e._e()],1)])}))],1)],1)},Nv=[],Vv={render:Lv,staticRenderFns:Nv},Iv=Vv,Ev=a("VU/8"),Pv=Ev(Tv,Iv,!1,null,null,null),Mv=Pv.exports,$v={data:function(){return{currentPage:1,total:2,pageSize:10,slaveDeviceTableData:[],isSalveDetailShow:!1,slaveUuid:"",currentRow:{},uuid:{}}},components:{mainDeviceDialog:Mv},methods:{loadSlaveDeviceTableData:function(e,t,a){var i=this;this.uuid=a,""!==a&&Ig(a,e,t).then(function(e){if(e.listDmDevice){for(var t=e.listDmDevice,a=0;a<t.length;a++)t[a].updateTime=cv(t[a].updateTime);this.slaveDeviceTableData=t}else this.slaveDeviceTableData=[];this.total=e.countTotal}.bind(this)).catch(function(){i.slaveDeviceTableData=[]})},_handlePageChange:function(e){this.currentPage=e,this.loadSlaveDeviceTableData(e,this.pageSize,this.uuid)},_handleSizeChange:function(e){this.pageSize=e,this.loadSlaveDeviceTableData("1",e,this.uuid)},_closeDialog:function(){this.$refs.salveDeviceDialog&&this.$refs.salveDeviceDialog.clearData()},handleCurrentChange:function(e){this.currentRow=e},_detailSlaveDevice:function(e,t){this.isSalveDetailShow=!0,this.slaveUuid=t.uuid,this.$refs.salveDeviceDialog&&this.$refs.salveDeviceDialog.passToDialogUuid(this.slaveUuid)}}},Uv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticClass:"deviceMgmTable",staticStyle:{width:"100%"},attrs:{data:e.slaveDeviceTableData,"highlight-current-row":"",stripe:"",border:""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"从属设备信息列表："}},[a("el-table-column",{attrs:{resizable:!1,prop:"deviceCode",label:"设备编码",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceTypeDesc",label:"设备类型",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceName",label:"设备名称","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceIp",label:"设备IP","show-overflow-tooltip":"",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"devicePort",label:"设备端口",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"softwareVersion",label:"软件版本",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"updateTime","show-overflow-tooltip":"",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e._detailSlaveDevice(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-view"})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e._handleSizeChange,"current-change":e._handlePageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.isSalveDetailShow?e.currentRow.deviceTypeDesc:"",visible:e.isSalveDetailShow,width:"75%",top:"8vh"},on:{"update:visible":function(t){e.isSalveDetailShow=t},close:e._closeDialog}},[a("main-device-dialog",{ref:"salveDeviceDialog",attrs:{uuid:e.slaveUuid}})],1)],1)},Fv=[],Rv={render:Uv,staticRenderFns:Fv},zv=Rv,Av=a("VU/8"),Ov=Av($v,zv,!1,null,null,null),qv=Ov.exports,Bv={components:{ElButton:yg,slaveDeviceList:qv},data:function(){return{title:""}},methods:{passToSlave:function(e){this.title=e.deviceTypeDesc+"-"+e.deviceCode+"-从属设备",this.$refs.slaveDeviceList.loadSlaveDeviceTableData(1,10,e.uuid)}}},Wv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"child-container"},[a("span",{staticClass:"tech-title"},[e._v(e._s(e.title))]),e._v(" "),a("slave-device-list",{ref:"slaveDeviceList"})],1)])},Qv=[],Gv={render:Wv,staticRenderFns:Qv},Hv=Gv,jv=a("VU/8"),Jv=jv(Bv,Hv,!1,null,null,null),Zv=Jv.exports,Kv={data:function(){return{currentPage:1,total:1,pageSize:10,mainDeviceTableData:[],isChildShow:!1,isDetailDialogShow:!1,currentRow:{},uuid:"",selectData:{},isSlaveShow:!1}},components:{childDevice:kv,slaveDevice:Zv,mainDeviceDialog:Mv},methods:{loadMainDeviceTableData:function(e,t,a){var i=this;this.currentPage=e,a?(this.isChildShow=!1,this.isSlaveShow=!1,this.selectData=a,a.currentPage=e,a.pageSize=t,kg(a).then(function(e){var t=e.listDmDevice;if(t){for(var a=0;a<t.length;a++){var i=t[a];t[a].isOnline=i.isOnline?"在线":"离线",t[a].isRegistered=i.isRegistered?"已注册":"未注册",t[a].updateTime=cv(t[a].updateTime)}this.mainDeviceTableData=t}else this.mainDeviceTableData=[];this.total=e.countTotal}.bind(this)).catch(function(){i.mainDeviceTableData=[]})):xg(e,t).then(function(e){for(var t=e.listDmDevice,a=0;a<t.length;a++){var i=t[a];t[a].isOnline=i.isOnline?"在线":"离线",t[a].isRegistered=i.isRegistered?"已注册":"未注册",t[a].updateTime=cv(t[a].updateTime)}this.mainDeviceTableData=t,this.total=e.countTotal}.bind(this)).catch(function(){i.mainDeviceTableData=[]})},_handlePageChange:function(e){this.currentPage=e,this.isSlaveShow=!1,this.isChildShow=!1,this.selectData.pageSize?this.loadMainDeviceTableData(e,this.pageSize,this.selectData):this.loadMainDeviceTableData(e,this.pageSize)},handleCurrentChange:function(e){this.currentRow=e},_showChildDevice:function(e,t){this.isSlaveShow=!1,this.isChildShow=!0,this.$refs.childDevice.passToChild(t)},_showSlaveDevice:function(e,t){this.isSlaveShow=!0,this.isChildShow=!1,this.$refs.slaveDevice.passToSlave(t)},_handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.isSlaveShow=!1,this.isChildShow=!1,this.selectData?this.loadMainDeviceTableData(1,e,this.selectData):this.loadMainDeviceTableData(1,e),this.$emit("listenCountOfPage",e)},_closeDialog:function(){this.$refs.mainDeviceDialog&&this.$refs.mainDeviceDialog.clearData()},_detailDevice:function(e,t){this.uuid=t.uuid,this.$refs.mainDeviceDialog&&this.$refs.mainDeviceDialog.passToDialogUuid(this.uuid),this.isDetailDialogShow=!0,this.isSlaveShow=!1,this.isChildShow=!1}},mounted:function(){this.loadMainDeviceTableData(1,this.pageSize)}},Yv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-table",{staticClass:"deviceMgmTable",staticStyle:{width:"100%"},attrs:{data:e.mainDeviceTableData,"default-sort":{prop:"order",order:"ascending"},"highlight-current-row":"",stripe:"",border:""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{label:"主设备信息列表："}},[a("el-table-column",{attrs:{resizable:!1,type:"index",label:"序号",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"deviceCode",label:"设备编码",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"deviceTypeDesc",label:"设备类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"deviceName",label:"设备名称","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"providerName",label:"厂商名称",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"orgName",label:"组织名称",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"deviceIp",label:"设备IP",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"devicePort",label:"设备端口",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"softwareVersion",label:"软件版本",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"isRegistered",label:"注册状态",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"isOnline",label:"离在线状态",width:"120"}},[e._v("\n        sortable\n      ")]),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"updateTime","show-overflow-tooltip":"",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e._detailDevice(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-view"})]),e._v(" "),a("el-button",{staticClass:"deviceActionBtn",attrs:{type:"text",size:"small"},on:{click:function(a){e._showChildDevice(t.$index,t.row)}}},[e._v("子设备")]),e._v(" "),a("el-button",{staticClass:"deviceActionBtn",attrs:{type:"text",size:"small"},on:{click:function(a){e._showSlaveDevice(t.$index,t.row)}}},[e._v("从属设备")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"r_page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e._handleSizeChange,"current-change":e._handlePageChange}})],1)]),e._v(" "),a("child-device",{directives:[{name:"show",rawName:"v-show",value:e.isChildShow,expression:"isChildShow"}],ref:"childDevice",staticStyle:{"margin-top":"100px"}}),e._v(" "),a("slave-device",{directives:[{name:"show",rawName:"v-show",value:e.isSlaveShow,expression:"isSlaveShow"}],ref:"slaveDevice",staticStyle:{"margin-top":"100px"}}),e._v(" "),a("el-dialog",{attrs:{title:e.isDetailDialogShow?e.currentRow.deviceTypeDesc:"",visible:e.isDetailDialogShow,width:"75%",top:"8vh"},on:{"update:visible":function(t){e.isDetailDialogShow=t},close:e._closeDialog}},[a("main-device-dialog",{ref:"mainDeviceDialog",attrs:{uuid:e.uuid}})],1)],1)},Xv=[],eb={render:Yv,staticRenderFns:Xv},tb=eb,ab=a("VU/8"),ib=ab(Kv,tb,!1,null,null,null),sb=ib.exports,ob={components:{ElButton:yg,ElRow:Zf.a,selectBox:sg,inputBox:pg,orgTree:zg,deviceList:sb,districtDialog:Yg},data:function(){return{deviceType:[{value:"",label:""}],providerType:[],selectedOrgVaue:{},selectedDistrictVaue:{},showOrgDialog:!1,showDistrictDialog:!1,screeningData:{},pageSize:10}},methods:{_loadDeviceTypeList:function(){Sg().then(function(e){this.deviceTypeList=e.deviceCategoryList;for(var t=0;t<this.deviceTypeList.length;t++)this.deviceType.push({value:this.deviceTypeList[t].typeCode,label:this.deviceTypeList[t].typeDesc})}.bind(this)).catch()},_loadProviderCode:function(){Ng().then(function(e){this.providerList=e.providerList;for(var t=[{value:"",label:""}],a=0;a<this.providerList.length;a++)t.push({value:this.providerList[a].providerCode,label:this.providerList[a].providerName});this.providerType=t}.bind(this)).catch()},_loadGateway:function(){},_selectOrgani:function(){""===this.screeningData.courtName||void 0===this.screeningData.courtName?this.$message.error("请先选择小区信息"):(this.$refs.orgTree&&this.$refs.orgTree.loadOrgs(this.screeningData.courtUuid),this.showOrgDialog=!0)},_selectDistrict:function(){this.showDistrictDialog=!0},_seekDevice:function(){this.$refs.deviceList.loadMainDeviceTableData(1,this.pageSize,this.screeningData)},_saveDeviceData:function(e){for(var t in e)this.screeningData[t]=e[t],"deviceIp"===t&&void 0!==e[t]&&""!==e[t]&&(rv(e[t])||this.$message.error("请输入合法IP")),"macAddress"===t&&void 0!==e[t]&&""!==e[t]&&(nv(e[t])||this.$message.error("请输入合法Mac"))},_changeSatus:function(e){this.showOrgDialog=!1,this.selectedOrgVaue=e,this.screeningData.orgName=e.orgName,this.screeningData.orgId=e.orgId},_setDistrictInfo:function(e){this.showDistrictDialog=!1,""===e.name&&this.$refs.name.clearBox(),this.screeningData.courtName=e.name,this.screeningData.courtUuid=e.uuid},_pageResult:function(e){this.pageSize=e},_closeOrgTree:function(){this.$refs.orgTree&&this.$refs.orgTree.clear()},_closeDistrict:function(){this.$refs.districtDialog.clearData()},_clearInputdata:function(){this.$refs.deviceName&&this.$refs.deviceName.clearBox()}},mounted:function(){this._loadDeviceTypeList(),this._loadProviderCode(),this._loadGateway(),this._clearInputdata()}},lb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"deviceType",attrs:{title:"设备类型",code:"deviceType",options:e.deviceType},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"providerCode",attrs:{title:"厂商名称",code:"providerCode",options:e.providerType},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"macAddress",attrs:{title:"MAC地址",code:"macAddress",maxlength:20},on:{listenToInput:e._saveDeviceData}})],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"name",staticStyle:{"margin-right":"20px"},attrs:{title:"所属小区",code:"name",value:e.screeningData.courtName,disabled:!0}}),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e._selectDistrict}},[e._v("选择小区")]),e._v(" "),a("el-dialog",{attrs:{title:"选择小区",visible:e.showDistrictDialog,"close-on-click-modal":!1,"modal-append-to-body":!0,width:"75%"},on:{"update:visible":function(t){e.showDistrictDialog=t},close:e._closeDistrict}},[a("district-dialog",{ref:"districtDialog",on:{listenToRowSelected:e._setDistrictInfo}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tooltip",{attrs:{content:e.selectedOrgVaue.orgId,placement:"top",effect:"light",disabled:!e.selectedOrgVaue.orgId}},[a("inputBox",{ref:"orgId",attrs:{title:"组织ID",code:"orgId",disabled:!0,value:e.selectedOrgVaue.orgId,maxlength:30},on:{listenToInput:e._saveDeviceData}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tooltip",{attrs:{content:e.selectedOrgVaue.orgName,placement:"top",effect:"light",disabled:!e.selectedOrgVaue.orgName}},[a("input-box",{ref:"orgName",staticStyle:{"margin-right":"20px"},attrs:{title:"组织名称",code:"orgName",value:e.selectedOrgVaue.orgName,disabled:!0}})],1),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e._selectOrgani}},[e._v("选择组织")]),e._v(" "),a("el-dialog",{attrs:{title:"选择组织",visible:e.showOrgDialog,"close-on-click-modal":!1,"modal-append-to-body":!0,width:"35%"},on:{"update:visible":function(t){e.showOrgDialog=t},close:e._closeOrgTree}},[a("org-tree",{ref:"orgTree",attrs:{parentUuid:e.screeningData.courtUuid},on:{changeDialogStatus:e._changeSatus}})],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceIp",attrs:{title:"设备IP",code:"deviceIp",maxlength:16},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceName",attrs:{title:"设备名称",code:"deviceName",maxlength:32},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content bg-purple"},[a("inputBox",{ref:"deviceCode",attrs:{title:"设备编码",code:"deviceCode",maxlength:128},on:{listenToInput:e._saveDeviceData}})],1)])],1),e._v(" "),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e._seekDevice}},[e._v("查找")])],1),e._v(" "),a("device-list",{ref:"deviceList",on:{listenCountOfPage:e._pageResult}})],1)},rb=[],nb={render:lb,staticRenderFns:rb},cb=nb,db=a("VU/8"),ub=db(ob,cb,!1,null,null,null),pb=ub.exports,mb={components:{deviceBaseInfo:pb}},hb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("device-base-info")],1)},fb=[],gb={render:hb,staticRenderFns:fb},vb=gb,bb=a("VU/8"),Db=J,yb=bb(mb,vb,!1,Db,"data-v-d6318154",null),Cb=yb.exports,_b=[{path:"/devicemgmt/deviceInfoMaintain",name:"deviceInfoMaintain",component:Cb}],wb=function(e){return mt.a.post("/egc-devicemgmtcomponent/upgrade/importDmFotaFile",e).then(function(e){return e.data})},Sb=function(e){return mt.a.post("/egc-devicemgmtcomponent/upgrade/sendToCourt",e).then(function(e){return e.data})},xb=function(e,t){return mt.a.get("/egc-devicemgmtcomponent/upgrade/getFotaFileList?currentPage="+e+"&pageSize="+t).then(function(e){return e.data})},kb=function(e){return mt.a.post("/egc-devicemgmtcomponent/upgrade/deleteDmFotaFile",e).then(function(e){return e.data})},Tb=function(e){return mt.a.post("/egc-devicemgmtcomponent/upgrade/selectFotaFileList",e).then(function(e){return e.data})},Lb=function(e){return mt.a.post("/egc-devicemgmtcomponent/upgrade/selectFotaIssueList",e).then(function(e){return e.data})},Nb=function(e,t){return mt.a.get("/egc-devicemgmtcomponent/upgrade/getFotaIssueList?currentPage="+e+"&pageSize="+t).then(function(e){return e.data})},Vb={props:{deviceTypeList:{type:Array},deviceType:{type:Array},providerType:{type:Array}},components:{ElButton:yg,ElRow:Zf.a,selectBox:sg,inputBox:pg},data:function(){return{importData:{},fileInfo:{}}},methods:{_importFile:function(){var e=this;this.importData.deviceType&&""!==this.importData.deviceType&&this.importData.providerCode&&""!==this.importData.providerCode&&this.importData.firmwareVersion&&""!==this.importData.firmwareVersion&&this.importData.fileSize&&""!==this.importData.fileSize?wb(this.importData).then(function(t){e.$message({message:Bt()(t),type:"success"});for(var a in e.importData)e.$refs[a]&&e.$refs[a].clearBox();e.importData={},e.fileInfo={}}).catch():this.$message({message:"请将页面中带*号的必填项目补充完整",type:"warning"})},_handleUploadFile:function(e,t){var a=this;2===t.length&&t.shift();var i=e.name.split("_");4===i.length&&this._isValid(i[0],this.deviceType)&&this._isValid(i[1],this.providerType)?0!==e.size&&e.size<52428800?(e.deviceType=i[0],e.providerCode=i[1],e.firmwareVersion=i[2],this.fileInfo=e,this.importData.deviceType=i[0],this.importData.providerCode=i[1],this.importData.firmwareVersion=i[2],this.importData.fileName=e.name,this.importData.fileSize=(parseInt(e.size)/1e6).toString(),dv(e.raw,function(e){a.importData.fileData=e})):this.$message({message:"导入文件不能为空文件或大于50M的文件",type:"error"}):this.$message({message:"请导入与主数据（设备编码+厂商编码）有效匹配的固件文件（设备编码_厂商编码_版本号_日期yyyyMMdd.后缀）",type:"error"})},_saveDeviceData:function(e){for(var t in e)this.importData[t]=e[t]},_isValid:function(e,t){var a=!1;return t.forEach(function(t){if(e===t.value)return a=!0}),a}}},Ib=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"importFile-container"},[a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"fileName",staticClass:"uploadInput",attrs:{title:"固件名称",required:!0,code:"fileName",disabled:!0,value:e.fileInfo.name},on:{listenToInput:e._saveDeviceData}}),e._v(" "),a("el-upload",{ref:"upload",staticClass:"firmwareUpload",staticStyle:{"margin-left":"10px"},attrs:{limit:2,multiple:!1,"show-file-list":!1,"on-change":e._handleUploadFile,action:"","auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"medium",plain:""},slot:"trigger"},[e._v("本地文件浏览")])],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"deviceElrow",attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"deviceType",attrs:{title:"设备类型",required:!0,code:"deviceType",options:e.deviceType,disabled:!0,value:e.fileInfo.deviceType},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"providerCode",attrs:{title:"厂商名称",required:!0,code:"providerCode",disabled:!0,options:e.providerType,value:e.fileInfo.providerCode},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"firmwareVersion",attrs:{title:"固件版本",required:!0,code:"firmwareVersion",disabled:!0,value:e.fileInfo.firmwareVersion},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"fileSize",attrs:{title:"固件大小",required:!0,code:"fileSize",disabled:!0,value:e.fileInfo.size?(parseInt(e.fileInfo.size)/1e6).toString():"",append:"MB"},on:{listenToInput:e._saveDeviceData}})],1)])],1),e._v(" "),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e._importFile}},[e._v("导入")])],1)],1)])},Eb=[],Pb={render:Ib,staticRenderFns:Eb},Mb=Pb,$b=a("VU/8"),Ub=$b(Vb,Mb,!1,null,null,null),Fb=Ub.exports,Rb={data:function(){return{currentPage:1,total:0,pageSize:10,firmwareInfoData:[],selectData:{}}},methods:{loadFirmwareInfoData:function(e,t,a){var i=this;this.currentPage=e,a?(this.selectData=a,this.selectData.currentPage=e,this.selectData.pageSize=t,Tb(this.selectData).then(function(e){i.firmwareInfoData=e.listFotaFileVo;for(var t=0;t<i.firmwareInfoData.length;t++)i.firmwareInfoData[t].isSend=i.firmwareInfoData[t].isUpgraded?"已下发":"未下发";i.total=e.totalCount}).catch(function(){i.firmwareInfoData=[]})):xb(e,t).then(function(e){this.firmwareInfoData=e.listFotaFileVo;for(var t=0;t<this.firmwareInfoData.length;t++)this.firmwareInfoData[t].isSend=this.firmwareInfoData[t].isUpgraded?"已下发":"未下发";this.total=e.totalCount}.bind(this)).catch(function(){i.firmwareInfoData=[]})},_getCurRow:function(e,t){this.$emit("listenToRowSelected",e)},_handlePageChange:function(e){this.loadFirmwareInfoData(e,this.pageSize,this.selectData)},_handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.selectData?this.loadFirmwareInfoData(1,e,this.selectData):this.loadFirmwareInfoData(1,e),this.$emit("listenCountOfPage",e)},_deleteFirmware:function(e,t){var a=this;this.$confirm("是否确定删除该固件文件信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){kb({listFotaFileVo:[t]}).then(function(e){a.loadFirmwareInfoData(1,a.pageSize,a.selectData)})}).catch()},_refresh:function(){this.currentPage=1,this.loadFirmwareInfoData(1,this.pageSize,this.selectData)}},mounted:function(){this.loadFirmwareInfoData(1,this.pageSize)}},zb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-button",{staticStyle:{"margin-left":"90%","margin-bottom":"20px"},attrs:{size:"small",type:"info",round:"",plain:"",icon:"el-icon-refresh"},on:{click:e._refresh}},[e._v("刷新")]),e._v(" "),a("el-table",{staticClass:"deviceMgmTable",staticStyle:{width:"100%"},attrs:{data:e.firmwareInfoData,"highlight-current-row":""},on:{select:e._getCurRow,"select-all":e._getCurRow}},[a("el-table-column",{attrs:{label:"固件文件信息："}},[a("el-table-column",{attrs:{resizable:!1,type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,prop:"fileName",label:"文件名称",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"firmwareVersion",label:"固件版本","show-overflow-tooltip":"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"fileSize",label:"文件大小(MB)",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceTypeDesc",label:"设备类型","show-overflow-tooltip":"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"provideName",label:"厂商名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"isSend",label:"是否已下发"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){e._deleteFirmware(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"r_page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e._handlePageChange,"size-change":e._handleSizeChange}})],1)])],1)},Ab=[],Ob={render:zb,staticRenderFns:Ab},qb=Ob,Bb=a("VU/8"),Wb=Bb(Rb,qb,!1,null,null,null),Qb=Wb.exports,Gb={components:{ElButton:yg,ElRow:Zf.a,selectBox:sg,inputBox:pg,firmwareInfoList:Qb,districtDialog:Yg},props:{deviceTypeList:{type:Array},deviceType:{type:Array},providerType:{type:Array}},data:function(){return{screeningData:{},listDmFotaFile:[],listCourtVo:[],showDistrictDialog:!1,pageSize:10}},methods:{_saveDeviceData:function(e){for(var t in e)this.screeningData[t]=e[t]},_seekFirmware:function(){this.$refs.firmwareInfoList.loadFirmwareInfoData(1,this.pageSize,this.screeningData)},_sendToCourt:function(){this.showDistrictDialog=!0},_closeDistrict:function(){this.$refs.districtDialog.clearData()},_setDistrictInfo:function(e){var t=this;this.listCourtVo=e;var a={fotaFileViewVo:{listFotaFileVo:this.listDmFotaFile},courtViewVo:{listCourtVo:this.listCourtVo}};Sb(a).then(function(e){t.showDistrictDialog=!1,t.$message.success(e)})},_setFirmwareInfo:function(e){this.listDmFotaFile=e},_pageResult:function(e){this.pageSize=e}}},Hb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"deviceType",attrs:{title:"设备类型",code:"deviceType",options:e.deviceType},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("select-box",{ref:"providerCode",attrs:{title:"厂商名称",code:"providerCode",options:e.providerType},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"firmwareVersion",attrs:{title:"固件版本",code:"firmwareVersion"},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"fileName",attrs:{title:"固件名称",code:"fileName"},on:{listenToInput:e._saveDeviceData}})],1)])],1),e._v(" "),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e._seekFirmware}},[e._v("查找")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:0===e.listDmFotaFile.length},on:{click:e._sendToCourt}},[e._v("下发到小区")])],1),e._v(" "),a("el-dialog",{attrs:{title:"选择小区",visible:e.showDistrictDialog,"close-on-click-modal":!1,"modal-append-to-body":!0,width:"75%"},on:{"update:visible":function(t){e.showDistrictDialog=t},close:e._closeDistrict}},[a("district-dialog",{ref:"districtDialog",attrs:{dialogType:!0},on:{listenToRowSelected:e._setDistrictInfo}})],1),e._v(" "),a("firmware-info-list",{ref:"firmwareInfoList",on:{listenToRowSelected:e._setFirmwareInfo,listenCountOfPage:e._pageResult}})],1)},jb=[],Jb={render:Hb,staticRenderFns:jb},Zb=Jb,Kb=a("VU/8"),Yb=Kb(Gb,Zb,!1,null,null,null),Xb=Yb.exports,eD={components:{ElButton:yg,ElRow:Zf.a,inputBox:pg},data:function(){return{dateValue:[],currentPage:1,total:0,pageSize:10,sendStatusData:[],screeningData:{}}},methods:{_loadSendStatusData:function(e,t){var a=this;this.currentPage=e,Nb(e,t).then(function(e){a.sendStatusData=e.listFotaIssueRecordVo;for(var t=0;t<a.sendStatusData.length;t++)a.sendStatusData[t].createTime=cv(a.sendStatusData[t].createTime);a.total=e.totalCount})},_handlePageChange:function(e){this._loadSendStatusData(e,this.pageSize)},_handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this._loadSendStatusData(1,e)},_refresh:function(){this.currentPage=1,this._loadSendStatusData(1,this.pageSize)},_saveDeviceData:function(e){for(var t in e)this.screeningData[t]=e[t]},_seekFirmware:function(){var e=this;this.screeningData.currentPage=this.currentPage,this.screeningData.pageSize=this.pageSize,Lb(this.screeningData).then(function(t){e.sendStatusData=t.listFotaIssueRecordVo;for(var a=0;a<e.sendStatusData.length;a++)e.sendStatusData[a].createTime=cv(e.sendStatusData[a].createTime);e.total=t.totalCount})}},mounted:function(){this._loadSendStatusData(1,this.pageSize)}},tD=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("el-row",{attrs:{gutter:60}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"fileName",attrs:{title:"固件名称",code:"fileName"},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("input-box",{ref:"courtName",attrs:{title:"小区名称",code:"courtName"},on:{listenToInput:e._saveDeviceData}})],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"sub-title"},[e._v("下发时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{blur:function(t){e.screeningData.timeSlot=e.dateValue}},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)])],1),e._v(" "),a("div",{staticClass:"action-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e._seekFirmware}},[e._v("查找")])],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"90%","margin-bottom":"20px"},attrs:{size:"small",type:"info",round:"",plain:"",icon:"el-icon-refresh"},on:{click:e._refresh}},[e._v("刷新")]),e._v(" "),a("el-table",{staticClass:"deviceMgmTable",staticStyle:{width:"100%"},attrs:{data:e.sendStatusData,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"下发状态信息："}},[a("el-table-column",{attrs:{resizable:!1,prop:"fileName",label:"文件名称",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"firmwareVersion",label:"固件版本","show-overflow-tooltip":"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"courtName",label:"小区名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"deviceTypeDesc",label:"设备类型","show-overflow-tooltip":"",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"provideName",label:"厂商名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"issueStatus",label:"下发状态",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{resizable:!1,property:"createTime",label:"下发时间","show-overflow-tooltip":""}})],1)],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"r_page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e._handlePageChange,"size-change":e._handleSizeChange}})],1)])],1)},aD=[],iD={render:tD,staticRenderFns:aD},sD=iD,oD=a("VU/8"),lD=oD(eD,sD,!1,null,null,null),rD=lD.exports,nD={components:{firmwareImport:Fb,firmwareMaintain:Xb,sendStatusList:rD},data:function(){return{activeName:"first",deviceType:[{value:"",label:""}],deviceTypeList:[],providerType:[]}},methods:{_loadDeviceTypeList:function(){Sg().then(function(e){this.deviceTypeList=e.deviceCategoryList;for(var t=0;t<this.deviceTypeList.length;t++)this.deviceType.push({value:this.deviceTypeList[t].typeCode,label:this.deviceTypeList[t].typeDesc})}.bind(this)).catch()},_loadProviderCode:function(){Ng().then(function(e){this.providerList=e.providerList;for(var t=[{value:"",label:""}],a=0;a<this.providerList.length;a++)t.push({value:this.providerList[a].providerCode,label:this.providerList[a].providerName});this.providerType=t}.bind(this)).catch()},_tabClick:function(e){"固件文件维护"===e.label&&this.$refs.firmwareMaintain._seekFirmware(1,10),"下发文件状态"===e.label&&this.$refs.sendStatusList._loadSendStatusData(1,10)}},mounted:function(){this._loadDeviceTypeList(),this._loadProviderCode()}},cD=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-tabs",{on:{"tab-click":e._tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"固件文件导入",name:"first"}},[a("div",{staticClass:"maintain-container"},[a("firmware-import",{attrs:{deviceTypeList:e.deviceTypeList,deviceType:e.deviceType,providerType:e.providerType}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"固件文件维护",name:"second"}},[a("div",{staticClass:"maintain-container"},[a("firmware-maintain",{ref:"firmwareMaintain",attrs:{deviceTypeList:e.deviceTypeList,deviceType:e.deviceType,providerType:e.providerType}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"下发文件状态",name:"third"}},[a("div",{staticClass:"maintain-container"},[a("send-status-list",{ref:"sendStatusList"})],1)])],1)],1)},dD=[],uD={render:cD,staticRenderFns:dD},pD=uD,mD=a("VU/8"),hD=Z,fD=mD(nD,pD,!1,hD,"data-v-4e7015eb",null),gD=fD.exports,vD=[{path:"/devicemgmt/devicefirmwareupdate",name:"deviceFirmwareUpdate",component:gD}],bD=(a("qCjU"),"/egc-modelmgmtcomponent"),DD={"scp.modelmgmt.modeltask.timeout":"执行命令发送超时"},yD={MAX_STRUCT:52428800,MAX_VIDEO:5368709120},CD="community",_D=function(e){return mt.a.get(bD+"/modelmgmt/systemsettings/getsystemsettingsbycatcode",{params:e}).then(function(e){return e.data})},wD=function(e){var t={};if(e&&e.length>0)for(var a=0;a<e.length;a++)t[e[a].item_code]=e[a].item_name;return t},SD=function(){return qe.Loading.service({lock:!0,fullscreen:!0,text:"拼命加载中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"})},xD=function(e,t){return e&&e[t]?e[t].meta_item_list:[]},kD=function(e){return mt.a.post(bD+"/modelmgmt/model/create",e).then(function(e){return e.data})},TD=function(e){return mt.a.get(bD+"/modelmgmt/systemsettings/geteventtypemaxnumber",{params:e}).then(function(e){return e.data})},LD=function(e){return mt.a.get(bD+"/modelmgmt/model/get/"+e.id).then(function(e){return e.data})},ND=function(e){return mt.a.post(bD+"/modelmgmt/model/list",e).then(function(e){return e.data})},VD=function(e){return mt.a.post(bD+"/modelmgmt/model/update",e).then(function(e){return e.data})},ID=function(e){return mt.a.get(bD+"/modelmgmt/model/delete",{params:e}).then(function(e){return e.data})},ED=function(e){return mt.a.post(bD+"/modelmgmt/model/stop",e).then(function(e){return e.data})},PD=function(e){return mt.a.post(bD+"/modelmgmt/model/resume",e).then(function(e){return e.data})},MD=function(e){return mt.a.post(bD+"/modelmgmt/meta/metaItem/list",e).then(function(e){return e.data})},$D=function(e){return mt.a.get(bD+"/modelmgmt/meta/metaCat/get",{params:e}).then(function(e){return e.data})},UD=function(e){return mt.a.get(bD+"/modelmgmt/meta/metaItem/delete",{params:e}).then(function(e){return e.data})},FD=function(e){return mt.a.post(bD+"/modelmgmt/meta/metaItem/update",e).then(function(e){return e.data})},RD=function(e){return mt.a.post(bD+"/modelmgmt/meta/metaItem/insert",e).then(function(e){return e.data})},zD=a("ufP2"),AD=a("3Q1+"),OD={mixins:[zD.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")}},methods:{isEqual:function(e,t){if(this.isObject){var a=this.select.valueKey;return Object(AD.a)(e,a)===Object(AD.a)(t,a)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var a=this.select.valueKey;return e.some(function(e){return Object(AD.a)(e,a)===Object(AD.a)(t,a)})}return e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",this)},queryChange:function(e){var t=String(e).replace(/(\^|\(|\)|\[|\]|\$|\*|\+|\.|\?|\\|\{|\}|\|)/g,"\\$1");this.visible=new RegExp(t,"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){this.select.onOptionDestroy(this.select.options.indexOf(this))}},qD=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[a("span",[e._v(e._s(e.currentLabel))])])],2)},BD=[],WD={render:qD,staticRenderFns:BD},QD=WD,GD=a("VU/8"),HD=GD(OD,QD,!1,null,null,null),jD=HD.exports,JD={name:"modelList",components:{ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,currentStep:1,formInline:{user:"",region:""},showAddNewEvent:!1,showEditNewEvent:!1,modelNewEvent:{name:"",code:""},modelEditNewEvent:{name:"",code:""},newModel:{name:"",code:"",description:"",nodeType:"",runtimeType:"",ownUser:"",realtimeFlag:"",shareFlag:"1",modelStatus:"mm.modsts.enable",addEventTypeList:[]},editModel:{eventTypeList:"",tmpCurEditEventTypeList:[],editEventTypeList:[]},modelListSearch:{name:"",modelCat:"全部",nodeType:"全部",type:"全部"},eventRules:{name:[{required:!0,message:"请输入能力名称",trigger:"blur"},{min:1,max:16,message:"长度在 1 到 16 个字符",trigger:"blur"}]},searchRules:{name:[{required:!1,trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:0,max:64,message:"只支持中文,字母,数字和下划线",trigger:"change"}]},rules:{name:[{required:!0,message:"请输入模型名称",trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:1,max:64,message:"长度在 1 到 64 个字符（只支持中文,字母,数字和下划线）",trigger:"blur"}],code:[{required:!0,message:"请输入模型Code",trigger:"blur"},{pattern:"^[A-Za-z0-9_]+$",min:1,max:64,message:"长度在 1 到 64 个字符（只支持字母,数字和下划线）",trigger:"blur"}],description:[{min:0,max:256,message:"长度在 0 到 256 个字符",trigger:"blur"}],nodeType:[{required:!0,message:"请选择节点类型",trigger:"change"}],modelCat:[{required:!0,message:"请选择模型分类",trigger:"change"}],runtimeType:[{required:!0,message:"请选择运行时",trigger:"change"}]},eventNameError:!1,addingEventFlag:!1,modelEnableStatus:"mm.modsts.enable",nodeTypeVideo:"mm.nodtyp.video",systemModelStatusList:[],systemNodeTypeList:[],systemModelEventList:[],systemEditEventTypeList:[],systemAddModelEventList:[],systemModelCatList:[],systemModelRuntimeList:[],systemModelStatusMap:{},systemNodeTypeMap:{},systemModelEventMap:{},systemModelCatMap:{},systemModelRuntimeMap:{},showAddEventPop:!1,showEditEventPop:!1,addModelDialogVisible:!1,editModelDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,addNewEventLoading:!1,modelList:[],multipleSelection:[]}},mounted:function(){var e={catCodeList:"mm.modsts|mm.nodtyp|mm.evttyp|mm.modcat|mm.rtmtyp",needCommunity:!1},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),console.info(this.systemModelStatusMap),this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={};this.modelListSearch.name.length>0?e.name="%"+this.modelListSearch.name+"%":e.name=void 0,this.modelListSearch.nodeType&&"全部"!==this.modelListSearch.nodeType&&"0"!==this.modelListSearch.nodeType?e.nodeType=this.modelListSearch.nodeType:e.nodeType=void 0,this.modelListSearch.modelCat&&"全部"!==this.modelListSearch.modelCat&&"0"!==this.modelListSearch.modelCat?e.modelCat=this.modelListSearch.modelCat:e.modelCat=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e};console.log(t);var a=SD();ND(t).then(function(e){e.data&&e.data.items&&e.data.items.forEach(function(e){e.eventTypeList=e.eventTypeList?e.eventTypeList:""}),this.modelList=e.data.items,this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},confirmAddAlgModel:function(){var e=this.newModel,t="",a=[];this.systemAddModelEventList&&this.systemAddModelEventList.length>0&&(this.systemAddModelEventList.forEach(function(e){a.push(e.item_code)}),t="|"+a.join("|")+"|"),e.eventTypeList=t,console.log(e);var i=SD();kD(e).then(function(e){var t=this;console.log(e),this.$nextTick(function(){i.close(),t.loadData()}),this.addModelDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){i.close()}),console.info(e)}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmAddAlgModel()})},confirmEditAlgModel:function(){var e=this.editModel;e.realtimeFlag=this.editModel.realtimeFlag?1:0,console.info(this.editModel.editEventTypeList),console.info(this.systemEditEventTypeList);var t="",a=[];this.systemEditEventTypeList&&this.systemEditEventTypeList.length>0&&(this.systemEditEventTypeList.forEach(function(e){a.push(e.item_code)}),t="|"+a.join("|")+"|"),e.eventTypeList=t;var i=SD();VD(e).then(function(e){var t=this;console.log(e),this.$nextTick(function(){i.close(),t.loadData()}),this.editModelDialogVisible=!1}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){i.close()})}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgModel()})},beforeAddNewEvent:function(e){this.resetForm("modelNewEvent");var t=SD();TD().then(function(a){console.log(a),"edit"===e?(this.showEditEventPop=!0,setTimeout(function(){this.$refs.saveEditTagInput.$refs.input.focus()}.bind(this),50)):(this.showAddEventPop=!0,setTimeout(function(){this.$refs.saveTagInput.$refs.input.focus()}.bind(this),50)),this.modelNewEvent.name="",this.eventNameError=!1,this.addingEventFlag=!1,this.modelNewEvent.code=a.data+1,this.$nextTick(function(){t.close()})}.bind(this)).catch(function(e){this.addingEventFlag=!1,console.info(e),this.$nextTick(function(){t.close()})}.bind(this))},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(e){var t=this;console.log("submit!"),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loadData()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.eventNameError=!1,this.showEditEventPop=!1;var a=[];if(t.eventTypeList&&t.eventTypeList.length>2){var i=t.eventTypeList.substr(1,t.eventTypeList.length-2),s=i.split("|");console.info(s),console.info(s.length),s.forEach(function(e){console.info(e),console.info(this.systemModelEventMap[e]),a.push({item_code:e,item_name:this.systemModelEventMap[e]}),console.info(99999999999999)}.bind(this)),console.info(a),this.systemEditEventTypeList=a,console.info(this.systemEditEventTypeList)}this.editModel=JSON.parse(Bt()(t));var o=1===this.editModel.realtimeFlag;this.editModel.realtimeFlag=o,this.editModelDialogVisible=!0},modelVersionMgmt:function(e,t){this.$router.push({path:"/modelmgmt/model/"+t.algModelPk+"/version"}),console.info(t)},removeData:function(e,t){var a=this,i=t;this.$confirm('确定要删除"'+i.name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={algModelId:i.algModelPk.toString()},t=SD();ID(e).then(function(e){var a=this;console.log(e),this.$message({type:"success",message:"删除成功"}),this.$nextTick(function(){t.close(),a.loadData()})}.bind(a)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},startStopModel:function(e,t,a){var i=this,s=t,o="stop"===a?"停用":"启用",l='确定要"'+o+s.name+'"?';this.$confirm(l,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=SD();"stop"===a?ED(s).then(function(t){var a=this;console.log(t),this.$message({type:"success",message:"停用成功"}),this.$nextTick(function(){e.close(),a.loadData()})}.bind(i)).catch(function(t){console.info(t),this.$nextTick(function(){e.close()})}.bind(i)):PD(s).then(function(t){var a=this;console.log(t),this.$message({type:"success",message:"启用成功"}),this.$nextTick(function(){e.close(),a.loadData()})}.bind(i)).catch(function(t){this.$nextTick(function(){e.close()}),console.info(t)}.bind(i))}).catch(function(){})},showAddModelDialog:function(){this.eventNameError=!1,this.resetForm("newModel"),this.currentStep=1,this.showAddEventPop=!1,this.systemAddModelEventList=[],this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},closeAddAndEditModal:function(){this.addModelDialogVisible=!1,this.editModelDialogVisible=!1},handleClose:function(e){console.info(1234),console.info(this.$refs.newModel),this.$refs.newModel&&this.$refs.newModel.clearValidate(),this.$refs.editModel&&this.$refs.editModel.clearValidate(),this.addModelDialogVisible=!1,this.editModelDialogVisible=!1},handleTagClose:function(e,t){console.info(e),"add"===t&&(console.info(this.systemAddModelEventList),this.systemAddModelEventList.splice(this.systemAddModelEventList.indexOf(e),1)),"edit"===t&&(console.info(this.systemEditEventTypeList),this.systemEditEventTypeList.splice(this.systemEditEventTypeList.indexOf(e),1))},inputBlur:function(e){console.info(e),"addName"===e.target.id&&(this.newModel.name=this.newModel.name.trim()),"addCode"===e.target.id&&(this.newModel.code=this.newModel.code.trim()),"addDesc"===e.target.id&&(this.newModel.description=this.newModel.description.trim()),"editName"===e.target.id&&(this.newModel.name=this.editModel.name.trim()),"editCode"===e.target.id&&(this.newModel.code=this.editModel.code.trim()),"editDesc"===e.target.id&&(this.newModel.description=this.editModel.description.trim()),"searchName"===e.target.id&&(this.modelListSearch.name=this.modelListSearch.name.trim()),"addEventName"===e.target.id&&(this.modelNewEvent.name=this.modelNewEvent.name.trim()),"addEventCode"===e.target.id&&(this.modelNewEvent.code=this.modelNewEvent.code.trim())},getStrlen:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},addNewEvent:function(e,t){if(""===this.modelNewEvent.name)return void(this.eventNameError=!1);this.modelNewEvent.name=this.modelNewEvent.name.trim();var a=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/;console.info(this.getStrlen(this.modelNewEvent.name)>64),console.info(""===this.modelNewEvent.name),console.info(!a.test(this.modelNewEvent.name)),this.getStrlen(this.modelNewEvent.name)>64||""===this.modelNewEvent.name||!a.test(this.modelNewEvent.name)?(this.eventNameError=!0,setTimeout(function(){this.eventNameError=!1}.bind(this),4e3)):(this.eventNameError=!1,this.confirmAddNewEvent(e,t))},confirmAddNewEvent:function(e,t){if(!this.addingEventFlag){var a={catCode:"mm.evttyp",itemCustCode:this.modelNewEvent.code,itemCustName:this.modelNewEvent.name,itemSysCode:"mm.evttyp."+this.modelNewEvent.code,parentItemSysCode:""};this.addingEventFlag=!0;var i=SD();RD(a).then(function(e){console.log(e),this.addingEventFlag=!1,this.$nextTick(function(){i.close()}),this.eventNameError=!1,this.showAddNewEvent=!1,"add"===t&&(this.systemAddModelEventList.push({item_code:this.modelNewEvent.code,item_name:this.modelNewEvent.name}),this.showAddEventPop=!1),console.info(this.systemAddModelEventList),"edit"===t&&(console.info(this.editModel.eventTypeList),this.systemEditEventTypeList.push({item_code:this.modelNewEvent.code,item_name:this.modelNewEvent.name}),this.showEditEventPop=!1),this.systemModelEventMap[this.modelNewEvent.code]=this.modelNewEvent.name,this.modelNewEvent.name=""}.bind(this)).catch(function(e){this.eventNameError=!1,this.addingEventFlag=!1,this.$nextTick(function(){i.close()}),console.info(e)}.bind(this))}},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"stop"===e?this.startStopModel(t,a,"stop"):"resume"===e?this.startStopModel(t,a,"start"):"delete"===e?this.removeData(t,a):"taskplan"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/taskplan"}):"task"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/task"}):"excuteStatus"===e&&this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/status"})},addEditNewEvent:function(){this.showEditNewEvent=!1},searchModelByName:function(e){e.stopPropagation(),e.preventDefault(),this.loadData()}}},ZD=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-list"},[a("div",{staticClass:"margin-top-30"},[e._m(0),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{disabled:e.loading2,type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("添加模型\n            ")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch,rules:e.searchRules}},[a("el-form-item",{attrs:{label:"节点类型",prop:"nodeType"}},[a("el-select",{attrs:{placeholder:"节点类型"},on:{change:e.loadData},model:{value:e.modelListSearch.nodeType,callback:function(t){e.$set(e.modelListSearch,"nodeType",t)},expression:"modelListSearch.nodeType"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemNodeTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"模型分类",prop:"modelCat"}},[a("el-select",{attrs:{placeholder:"模型分类"},on:{change:e.loadData},model:{value:e.modelListSearch.modelCat,callback:function(t){e.$set(e.modelListSearch,"modelCat",t)},expression:"modelListSearch.modelCat"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemModelCatList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"模型名称",prop:"name"}},[a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"searchName"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("modelListSearch")}},model:{value:e.modelListSearch.name,callback:function(t){e.$set(e.modelListSearch,"name",t)},expression:"modelListSearch.name"}})],1)]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"模型Code"}},[a("span",[e._v(e._s(t.row.code))])]),e._v(" "),a("el-form-item",{attrs:{label:"模型能力"}},e._l(t.row.eventTypeList.split("|"),function(t,i){return t?a("span",[i>1?a("span",[e._v(" ")]):e._e(),e._v(e._s(e.systemModelEventMap[t])+"\n              ")]):e._e()})),e._v(" "),a("el-form-item",{attrs:{label:"是否实时"}},[t.row.realtimeFlag?a("span",[e._v("是")]):e._e(),e._v(" "),t.row.realtimeFlag?e._e():a("span",[e._v("否")])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"模型名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"模型描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"节点类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemNodeTypeMap[t.row.nodeType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模型分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemModelCatMap[t.row.modelCat]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"运行时",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemModelRuntimeMap[t.row.runtimeType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:t.row.modelStatus==e.modelEnableStatus,red:t.row.modelStatus!=e.modelEnableStatus}},[a("b",[e._v(e._s(e.systemModelStatusMap[t.row.modelStatus]))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"当前版本"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.latestVersionNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"版本管理",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.modelVersionMgmt(t.$index,t.row)}}},[e._v("版本管理\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更多操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(a){e.handleCommand(a,t.$index,t.row)}}},[a("span",{staticClass:"blue cursor-hand el-dropdown-link"},[e._v("\n              更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"taskplan"}},[a("i",{staticClass:"el-icon-time"}),e._v("查看计划")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"excuteStatus"}},[a("i",{staticClass:"el-icon-search"}),e._v("运行状况")]),e._v(" "),"mm.modsts.enable"==t.row.modelStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"stop"}},[a("i",{staticClass:"el-icon-remove"}),e._v("停用模型")]):e._e(),e._v(" "),"mm.modsts.disable"==t.row.modelStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"resume"}},[a("i",{staticClass:"el-icon-caret-right"}),e._v("启用模型")]):e._e(),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"edit",divided:""}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v("修改")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"delete"}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")])],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加模型","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,visible:e.addModelDialogVisible,width:"40%","before-close":e.handleClose}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newModel",staticClass:"demo-ruleForm",attrs:{model:e.newModel,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模型名称",prop:"name"}},[a("el-input",{attrs:{id:"addName",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.name,callback:function(t){e.$set(e.newModel,"name",t)},expression:"newModel.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模型Code",prop:"code"}},[a("el-input",{attrs:{id:"addCode",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.code,callback:function(t){e.$set(e.newModel,"code",t)},expression:"newModel.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模型描述",prop:"description"}},[a("el-input",{attrs:{id:"addDesc",type:"textarea"},on:{blur:e.inputBlur},model:{value:e.newModel.description,callback:function(t){e.$set(e.newModel,"description",t)},expression:"newModel.description"}})],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"节点类型",prop:"nodeType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择节点类型"},model:{value:e.newModel.nodeType,callback:function(t){e.$set(e.newModel,"nodeType",t)},expression:"newModel.nodeType"}},e._l(e.systemNodeTypeList,function(t){return t.item_code!=e.nodeTypeVideo?a("el-option",{key:t.item_code,attrs:{label:t.item_name,value:t.item_code}}):e._e()}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"模型分类",prop:"modelCat"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择模型分类"},model:{value:e.newModel.modelCat,callback:function(t){e.$set(e.newModel,"modelCat",t)},expression:"newModel.modelCat"}},e._l(e.systemModelCatList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"运行时",prop:"runtimeType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择运行时"},model:{value:e.newModel.runtimeType,callback:function(t){e.$set(e.newModel,"runtimeType",t)},expression:"newModel.runtimeType"}},e._l(e.systemModelRuntimeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否实时",prop:"realtimeFlag"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.newModel.realtimeFlag,callback:function(t){e.$set(e.newModel,"realtimeFlag",t)},expression:"newModel.realtimeFlag"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"模型能力",prop:"addEventTypeList"}},[a("div",[e._l(e.systemAddModelEventList,function(t){return a("el-tag",{key:t.item_code,staticClass:"model-event",attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleTagClose(t,"add")}}},[e._v("\n            "+e._s(t.item_name)+"\n          ")])}),e._v(" "),e.showAddEventPop?a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.addNewEventLoading,expression:"addNewEventLoading"}],ref:"saveTagInput",staticClass:"input-new-tag",class:{"error-border":e.eventNameError},attrs:{size:"small",placeholder:"请输入模型能力名称，回车保存"},on:{blur:function(t){e.addNewEvent("modelNewEvent","add")}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.addNewEvent("modelNewEvent","add")}},model:{value:e.modelNewEvent.name,callback:function(t){e.$set(e.modelNewEvent,"name",t)},expression:"modelNewEvent.name"}}):e._e(),e._v(" "),e.showAddEventPop?e._e():a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.addNewEventLoading,expression:"addNewEventLoading"}],staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){e.beforeAddNewEvent("add")}}},[e._v("+ 添加能力")]),e._v(" "),a("div",{staticStyle:{"font-size":"12px","margin-top":"-5px",height:"16px"}},[e.eventNameError?a("span",{staticClass:"red"},[e._v("长度在 1 到 64 个字符（只支持中文,字母,数字和下划线）")]):e._e()])],2)]),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newModel")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑模型","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,visible:e.editModelDialogVisible,width:"40%","before-close":e.handleClose}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editModel",staticClass:"demo-ruleForm",attrs:{model:e.editModel,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模型名称",prop:"name"}},[a("el-input",{attrs:{id:"editName",size:"small"},model:{value:e.editModel.name,callback:function(t){e.$set(e.editModel,"name",t)},expression:"editModel.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模型Code",prop:"code"}},[a("el-input",{attrs:{id:"editCode",size:"small"},model:{value:e.editModel.code,callback:function(t){e.$set(e.editModel,"code",t)},expression:"editModel.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模型描述",prop:"description"}},[a("el-input",{attrs:{id:"editDesc",type:"textarea"},model:{value:e.editModel.description,callback:function(t){e.$set(e.editModel,"description",t)},expression:"editModel.description"}})],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"节点类型",prop:"nodeType"}},[a("el-select",{attrs:{disabled:"mm.nodtyp.video"==e.nodeTypeVideo?"disabled":void 0,size:"small",placeholder:"请选择节点类型"},model:{value:e.editModel.nodeType,callback:function(t){e.$set(e.editModel,"nodeType",t)},expression:"editModel.nodeType"}},e._l(e.systemNodeTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"模型分类",prop:"modelCat"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择模型分类"},model:{value:e.editModel.modelCat,callback:function(t){e.$set(e.editModel,"modelCat",t)},expression:"editModel.modelCat"}},e._l(e.systemModelCatList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"运行时",prop:"runtimeType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择运行时"},model:{value:e.editModel.runtimeType,callback:function(t){e.$set(e.editModel,"runtimeType",t)},expression:"editModel.runtimeType"}},e._l(e.systemModelRuntimeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否实时",prop:"realtimeFlag"}},[a("el-switch",{model:{value:e.editModel.realtimeFlag,callback:function(t){e.$set(e.editModel,"realtimeFlag",t)},expression:"editModel.realtimeFlag"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"模型能力",prop:"editEventTypeList"}},[a("div",[e._l(e.systemEditEventTypeList,function(t){return a("el-tag",{key:t.item_code,staticClass:"model-event",attrs:{closable:"","disable-transitions":!1},on:{close:function(a){e.handleTagClose(t,"edit")}}},[e._v("\n            "+e._s(t.item_name)+"\n          ")])}),e._v(" "),e.showEditEventPop?a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.addNewEventLoading,expression:"addNewEventLoading"}],ref:"saveEditTagInput",staticClass:"input-new-tag",class:{"error-border":e.eventNameError},attrs:{size:"small",placeholder:"请输入模型能力名称，回车保存"},on:{blur:function(t){e.addNewEvent("modelNewEvent","edit")}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.addNewEvent("modelNewEvent","edit")}},model:{value:e.modelNewEvent.name,callback:function(t){e.$set(e.modelNewEvent,"name",t)},expression:"modelNewEvent.name"}}):e._e(),e._v(" "),e.showEditEventPop?e._e():a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.addNewEventLoading,expression:"addNewEventLoading"}],staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){e.beforeAddNewEvent("edit")}}},[e._v("+ 添加能力")]),e._v(" "),a("div",{staticStyle:{"font-size":"12px","margin-top":"-5px",height:"16px"}},[e.eventNameError?a("span",{staticClass:"red"},[e._v("长度在 1 到 64 个字符（只支持中文,字母,数字和下划线）")]):e._e()])],2)]),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editModel")}}},[e._v("保存")])],1)],1)],1)],1)},KD=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-title"},[a("i",{staticClass:"el-icon-news"}),e._v(" 所有模型")])}],YD={render:ZD,staticRenderFns:KD},XD=YD,ey=a("VU/8"),ty=X,ay=ey(JD,XD,!1,ty,"data-v-3759d9ba",null),iy=ay.exports,sy={components:{modelList:iy},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)}},data:function(){return{filterText:"",data2:[{id:1,label:"结构化分析模型",children:[{id:2,label:"业主特征"},{id:3,label:"车辆分析"},{id:4,label:"非法穿越"}]},{id:5,label:"视频分析模型",children:[{id:6,label:"人脸分析"},{id:7,label:"行为分析"},{id:8,label:"车牌分析"},{id:9,label:"客流分析"}]}],defaultProps:{children:"children",label:"label"}}}},oy=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("基本信息管理")])],1)],1),e._v(" "),a("modelList")],1)],1)},ly=[],ry={render:oy,staticRenderFns:ly},ny=ry,cy=a("VU/8"),dy=ee,uy=cy(sy,ny,!1,dy,"data-v-506dec00",null),py=uy.exports,my=function(e){return mt.a.post(bD+"/modelversion/insert",e).then(function(e){return e.data})},hy=function(e){return mt.a.post(bD+"/modelversion/list",e).then(function(e){return e.data})},fy=function(e){return mt.a.post(bD+"/modelversion/update",e).then(function(e){return e.data})},gy=function(e){return mt.a.post(bD+"/modelversion/publish",e).then(function(e){return e.data})},vy=function(e){return mt.a.get(bD+"/modelversion/delete/"+e.id).then(function(e){return e.data})},by=function(e){return mt.a.get(bD+"/modelversion/ralatedmodelinfo/"+e.id).then(function(e){return e.data})},Dy=function(e){return mt.a.post(bD+"/modelversion/updatedeployscriptbyversionid",e).then(function(e){return e.data})},yy=function(e){return mt.a.get(bD+"/community/listmatched",{params:e}).then(function(e){return e.data})},Cy=function(e){return mt.a.post(bD+"/modelversion/deployandpublish",e).then(function(e){return e.data})},_y=function(e){return mt.a.post(bD+"/modelversion/relatedcommunities",e).then(function(e){return e.data})},wy=function(e){return mt.a.get(bD+"/modelnode/bycommunityidandmodelverid",{params:e}).then(function(e){return e.data})},Sy=function(e){return mt.a.post(bD+"/modelnode/addmgmtnode",e).then(function(e){return e.data})},xy=function(e){return mt.a.post(bD+"/modelnode/getmgmtnode",e).then(function(e){return e.data})},ky=function(e){return mt.a.post(bD+"/modelnode/getmgmtnodepublishlist",e).then(function(e){return e.data})},Ty=function(e){return mt.a.post(bD+"/modelnode/getproxynodelistbynodestatus",e).then(function(e){return e.data})},Ly=function(e){return mt.a.get(bD+"/modelnode/deletemgmtnode",{params:e}).then(function(e){return e.data})},Ny=function(e){return mt.a.post(bD+"/modelnode/updatemgmtnode",e).then(function(e){return e.data})},Vy=function(e){return mt.a.post(bD+"/modelnode/updatemgmtnodenodestatus",e).then(function(e){return e.data})},Iy=function(e){return mt.a.post(bD+"/versionParam/list",e).then(function(e){return e.data})},Ey=function(e){return mt.a.get(bD+"/versionParam/delete/"+e.algVersParamPk).then(function(e){return e.data})},Py=function(e){return mt.a.get(bD+"/versionParam/getallversparams/"+e.modelVersPk).then(function(e){return e.data})},My=function(e){return mt.a.post(bD+"/versionParam/add",e).then(function(e){return e.data})},$y=function(e){return mt.a.post(bD+"/versionParam/update",e).then(function(e){return e.data})},Uy=function(e){return mt.a.post(bD+"/modelparam/selectSysParamByCode",e).then(function(e){return e.data})},Fy=function(e){return mt.a.post(bD+"/modeltask/algtask/list",e).then(function(e){return e.data})},Ry=function(e){return mt.a.post(bD+"/modeltask/runtask",e,{timeout:5e4}).then(function(e){return e.data})},zy=function(e){return mt.a.get(bD+"/modeltask/algtask/delete",{params:e}).then(function(e){return e.data})},Ay=function(e){return mt.a.post(bD+"/sysayncjob/list",e).then(function(e){return e.data})},Oy={components:{ElOption:jD},data:function(){return{currentPage:1,currentPageCommunity:1,pageSize:10,pageSizeCommunity:10,currentStep:1,currentTaskExeStep:1,curDeployVersion:{},total:0,totalCommunity:0,formInline:{user:"",region:""},deployTreeNode:{label:"name",children:"children",isLeaf:"leaf"},publishTreeNode:{label:"name",children:"children",isLeaf:"leaf"},excuteTaskTreeNode:{label:"name",children:"children",isLeaf:"leaf"},activeNames:["1"],newModelVersion:{algModelPk:this.$route.params.modelId,versionNo:"",description:"",versionStatus:"mm.versts.enable"},modelListSearch:{versionNo:""},searchRules:{versionNo:[{required:!1,trigger:"blur"},{pattern:"^[A-Za-z0-9_]+$",min:0,max:32,message:"只支持字母,数字和下划线",trigger:"change"}]},commandRules:{command:[{min:0,max:4096,message:"长度在 0 到 4096 个字符",trigger:"blur"}]},rules:{versionNo:[{required:!0,message:"请输入版本号",trigger:"blur"},{pattern:"^[A-Za-z0-9_]+$",min:1,max:32,message:"长度在 1 到 32 个字符（只支持字母,数字和下划线）",trigger:"blur"}],description:[{min:0,max:256,message:"长度在 0 到 256 个字符",trigger:"blur"}]},myHeaders:{Authorization:sessionStorage.token},uploadParam:{url:"/egc-modelmgmtcomponent/modelmgmt/web/uploadModelFile",data:{}},deployCondition:["mm.depsts.none","mm.depsts.deploypart","mm.depsts.fail"],deployScriptDisabled:!1,editScriptVersion:{},deployCommandDialogVisible:!1,excuteTaskTreeData:[],publishTreeData:[],deployTreeData:[],versionFileList:[],errorMessageMap:DD,editModelVersion:{},isExeEmptyNode:!1,isEmptyNode:!1,curTaskExecuteResult:{},loadingExcuteParam:!1,excuteVersionInfo:{},curExcuteVersionParams:[],loadingExcuteTask:!1,excuteVersionVisible:!1,excuteVersionTask:{},currentDeployPublishAction:"deploy",isUpdateFileFlag:!1,deployDialogVisible:!1,isStructuredNode:!1,showUploadArea:!0,uploadInterval:"",uploadFileStatus:"",fileUploadProgress:10,modelVersionEnableStatus:"mm.versts.enable",modelEnableStatus:"mm.modsts.enable",versionDeployedStatus:"mm.depsts.deploy",versionPublishedStatus:"mm.pubsts.publish",systemModelStatusList:[],systemModelVersionStatusList:[],systemNodeTypeList:[],systemModelEventList:[],systemModelCatList:[],systemModelRuntimeList:[],systemDeployStatusList:[],systemPublishStatusList:[],systemCommunityList:[],systemModelStatusMap:{},systemModelVersionStatusMap:{},systemNodeTypeMap:{},systemModelEventMap:{},systemModelCatMap:{},systemModelRuntimeMap:{},systemDeployStatusMap:{},systemPublishStatusMap:{},addModelDialogVisible:!1,editModelDialogVisible:!1,uploadDialogVisible:!1,loadingModelInfo:!1,loadingVersion:!1,loadingStep:!1,deployLoading:!1,currentModel:{},modelVersionList:[],multipleSelection:[],deployCommand:{},excuteCommunityList:[],communityStatusList:[],showDeployPublishVersion:{},checkedIndex:0,isClickChangeCheckbox:!1,showComDeployPublishVisible:!1}},mounted:function(){console.log(this.$route.params.modelId);var e={catCodeList:"mm.modsts|mm.versts|mm.nodtyp|mm.evttyp|mm.modcat|mm.depsts|mm.pubsts|mm.rtmtyp",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),this.systemModelVersionStatusList=xD(e.data,"mm.versts"),this.systemModelVersionStatusMap=wD(this.systemModelVersionStatusList),this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.systemDeployStatusList=xD(e.data,"mm.depsts"),this.systemDeployStatusMap=wD(this.systemDeployStatusList),this.systemPublishStatusList=xD(e.data,"mm.pubsts"),this.systemPublishStatusMap=wD(this.systemPublishStatusList),this.systemCommunityList=xD(e.data,CD),this.systemCommunityMap=wD(this.systemCommunityList),this.$nextTick(function(){t.close(),a.getModelById()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{showProgress:function(){console.info("In Progress")},startProgress:function(e){return console.info("start"),console.info(e),/.*[\u4e00-\u9fa5]+.*$/.test(e.name)?(this.$message.error("不支持中文文件名，请重命名文件"),!1):(console.info(this.$refs.versionUpload),this.isStructuredNode&&e.size>yD.MAX_STRUCT?(this.isUpdateFileFlag=!1,this.$message.error("结构化分析程序不能超过50M，请重新选择文件"),this.versionFileList=[],!1):!this.isStructuredNode&&e.size>yD.MAX_VIDEO?(this.isUpdateFileFlag=!1,this.versionFileList=[],this.$message.error("视频分析程序不能超过5G，请重新选择文件"),!1):void(this.showUploadArea=!1))},uploadSucess:function(e,t,a){console.info("success"),console.info(e),console.info(t),console.info(a),this.$refs.versionUpload.clearFiles(),this.showUploadArea=!0,this.fileUploadProgress=100,this.uploadFileStatus="success",this.loadData(),this.uploadDialogVisible=!1},uploadFailed:function(e,t,a){console.info("failed"),console.info(e),console.info(t),console.info(a),this.$refs.versionUpload.clearFiles(),this.$message.error("上传失败"),this.uploadFileStatus="exception",this.showUploadArea=!0},closeAddModel:function(){2===this.currentStep&&this.loadData()},closeShowDeployPublish:function(){this.showComDeployPublishVisible=!1},closeUploadModel:function(){this.loadData(),this.uploadDialogVisible=!1},closeDeployModel:function(){this.loadData(),this.deployDialogVisible=!1},getModelById:function(){var e={id:this.$route.params.modelId},t=SD();LD(e).then(function(e){var a=this;console.log(" result.data.total "+e.data.length),this.$nextTick(function(){t.close(),a.loadData()}),this.currentModel=e.data,this.newModelVersion.type=this.currentModel.nodeType,"mm.nodtyp.structured"===this.currentModel.nodeType&&(this.isStructuredNode=!0)}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},loadCommunityStatus:function(e){var t={currentPage:this.currentPageCommunity,pageSize:this.pageSizeCommunity,condition:{modelVerPk:this.showDeployPublishVersion.algModelVersionPk}},a=SD();_y(t).then(function(e){console.info(e),this.$nextTick(function(){a.close()}),this.communityStatusList=e.data.items,this.totalCommunity=e.data.pageCount,this.showComDeployPublishVisible=!0}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},loadData:function(){var e={algModelPk:this.$route.params.modelId};this.modelListSearch.versionNo.length>0?e.versionNo="%"+this.modelListSearch.versionNo+"%":e.versionNo=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e},a=SD();hy(t).then(function(e){console.log(" result.data.total "+e.data.items.length),e.data.items.forEach(function(e){e.statusInMNodes&&e.statusInMNodes.length>0?(e.displayDeployStatus=e.statusInMNodes[0].deployStatus,e.displayPublishStatus=e.statusInMNodes[0].publishStatus):(e.displayDeployStatus="mm.depsts.none",e.displayPublishStatus="mm.pubsts.none")}),this.modelVersionList=e.data.items,this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},beforeDeployVersion:function(){},moveToNextStep:function(){var e=this.newModelVersion,t=SD();my(e).then(function(e){var a=this;this.$nextTick(function(){t.close(),a.loadData()}),this.addModelDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},confirmEditModelVersion:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=t.editModelVersion,i=SD();fy(a).then(function(e){var t=this;this.$nextTick(function(){i.close(),t.loadData()}),this.editModelDialogVisible=!1}.bind(t)).catch(function(e){this.$nextTick(function(){i.close()}),console.info(e)}.bind(t))})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.moveToNextStep()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields(),this.newModelVersion.description="",this.newModelVersion.versionNo=""},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(e){var t=this;console.log("submit!"),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loadData()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleSizeChangeCommunity:function(e){console.log("每页 "+e+" 条"),this.pageSizeCommunity=e,this.loadCommunityStatus()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleCurrentChangeCommunity:function(e){console.log("当前页: "+e),this.currentPageCommunity=e,this.loadCommunityStatus()},handleEdit:function(e,t){console.info(e),console.info(t),t.statusInMNodes&&t.statusInMNodes.length>0?(t.displayDeployStatus=t.statusInMNodes[0].deployStatus,t.displayPublishStatus=t.statusInMNodes[0].publishStatus):(t.displayDeployStatus="mm.depsts.none",t.displayPublishStatus="mm.pubsts.none"),this.editModelVersion=JSON.parse(Bt()(t)),this.editModelDialogVisible=!0},removeData:function(e,t){var a=this,i=t;this.$confirm('确定要删除"'+i.versionNo+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:t.algModelVersionPk},i=SD();vy(e).then(function(e){var t=this;console.log(e),this.$message({type:"success",message:"删除成功"}),this.$nextTick(function(){i.close(),t.loadData()})}.bind(a)).catch(function(e){this.$nextTick(function(){i.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showAddModelDialog:function(){this.currentStep=1,this.resetForm("newModelVersion"),this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},uploadModelFile:function(e){this.versionFileList=[],this.isUpdateFileFlag=!1,this.uploadParam.data={algModelVersionId:e},this.showUploadArea=!0,this.uploadDialogVisible=!0},showDeployDialog:function(e,t,a){"deploy"===a&&this.loadDeployNodeData(),"publish"===a&&this.loadPublishNodeData()},handleCloudCommand:function(e,t,a){console.info(e),console.info(a)},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"updatefile"===e?(this.isUpdateFileFlag=!0,this.uploadParam.data={algModelVersionId:a.algModelVersionPk},this.showUploadArea=!0,this.uploadDialogVisible=!0):"deploy"===e?(this.currentDeployPublishAction="deploy",this.curDeployVersion=a,this.showDeployDialog(t,a,"deploy")):"publish"===e?(this.currentDeployPublishAction="publish",this.curDeployVersion=a,this.showDeployDialog(t,a,"publish")):"delete"===e?this.removeData(t,a):"params"===e?this.$router.push({path:"/modelmgmt/version/"+a.algModelVersionPk+"/paramdefine"}):"excuteStatus"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/version/"+a.algModelVersionPk+"/status"}):"result"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/version/"+a.algModelVersionPk+"/status"}):"taskplan"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/version/"+a.algModelVersionPk+"/taskplan"}):"task"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/version/"+a.algModelVersionPk+"/task"}):"excuteTask"===e&&(this.currentDeployPublishAction="excute",this.showExcuteTaskModel(t,a))},redirectToParamMgmt:function(e,t){this.$router.push({path:"/modelmgmt/model/"+t.algModelPk+"/version/"+t.algModelVersionPk+"/paramdefine"})},redirectToResultDefine:function(e,t){this.$router.push({path:"/modelmgmt/model/"+t.algModelPk+"/version/"+t.algModelVersionPk+"/resultdefine"})},inputBlur:function(e){console.info(e),"addNo"===e.target.id&&(this.newModelVersion.versionNo=this.newModelVersion.versionNo.trim()),"addDesc"===e.target.id&&(this.newModelVersion.description=this.newModelVersion.description.trim()),"editNo"===e.target.id&&(this.newModelVersion.versionNo=this.editModelVersion.versionNo.trim()),"editDesc"===e.target.id&&(this.newModelVersion.description=this.editModelVersion.description.trim())},loadExcuteNodeData:function(){var e={modelVerId:this.excuteVersionInfo.algModelVersionPk},t=SD();yy(e).then(function(e){var a=this;console.info(e.data),console.info(this.excuteTaskTreeData),this.excuteCommunityList=[],e.data&&e.data.length>0&&e.data.forEach(function(e,t){var a={item_code:e.communityId,item_name:this.systemCommunityMap[e.communityId]};this.excuteCommunityList.push(a)}.bind(this)),this.$nextTick(function(){t.close(),a.excuteVersionVisible=!0})}.bind(this)).catch(function(e){console.info(e)})},loadExcuteNodeDataTree:function(){var e={},t={modelVerId:this.excuteVersionInfo.algModelVersionPk,publishStatus:this.versionPublishedStatus},a=SD();yy(t).then(function(t){var i=this;if(console.info(t.data),console.info(this.excuteTaskTreeData),t.data&&t.data.length>0){this.excuteTaskTreeData.splice(0,this.excuteTaskTreeData.length),e={name:"全部小区",id:0,code:0,disabled:!0,children:[]};var s=[];t.data.forEach(function(e){s.push({code:e.communityId,mgmtNodePks:e.mgmtNodePks,name:this.systemCommunityMap[e.communityId],leaf:!0})}.bind(this)),e.children=s,this.excuteTaskTreeData.push(e)}this.$nextTick(function(){a.close(),i.excuteVersionVisible=!0})}.bind(this)).catch(function(e){console.info(e)})},loadPublishNodeData:function(){var e={};if(this.systemCommunityList&&this.systemCommunityList.length>0){var t=this.systemCommunityList[0],a={communityId:t.item_code,modelVerId:this.curDeployVersion.algModelVersionPk,deployStatus:"mm.depsts.deploy"},i=SD();wy(a).then(function(a){var s=this;console.info(a.data);var o=[];a.data.forEach(function(e){o.push({code:e.mgmtNodePk,name:e.name,leaf:!0})}),e={isCommunity:!0,code:t.item_code,name:t.item_name,children:o},console.info("defaultCommunityData"),console.info(e),this.publishTreeData.splice(0,this.deployTreeData.length),this.publishTreeData.push(e),console.info(this.deployTreeData),this.$nextTick(function(){i.close(),s.deployDialogVisible=!0})}.bind(this)).catch(function(e){console.info(e)})}},loadDeployNodeData:function(){var e={modelVerId:this.curDeployVersion.algModelVersionPk},t={};console.info("999");var a=SD();yy(e).then(function(e){var i=this;if(console.info(e.data),e.data&&e.data.length>0){this.deployTreeData.splice(0,this.deployTreeData.length),t={name:"全部小区",id:0,code:0,isAll:!0,children:[]};var s=[];e.data.forEach(function(e){s.push({code:e.communityId,mgmtNodePks:e.mgmtNodePks,name:this.systemCommunityMap[e.communityId],leaf:!0})}.bind(this)),t.children=s,this.deployTreeData.push(t)}this.$nextTick(function(){a.close(),i.deployDialogVisible=!0})}.bind(this)).catch(function(e){console.info(e)})},closeExcuteVersion:function(){this.excuteVersionVisible=!1},showExcuteTaskModel:function(e,t){this.currentTaskExeStep=1,this.excuteVersionInfo=t;var a={modelVersPk:t.algModelVersionPk},i=SD();Py(a).then(function(e){var t=this;console.info(e.data),this.curExcuteVersionParams=e.data,this.$nextTick(function(){i.close(),t.loadExcuteNodeDataTree()})}.bind(this)).catch(function(e){this.$message.error("获取参数失败"),console.info(e),this.$nextTick(function(){i.close()})}.bind(this))},handleDeployVersion:function(){var e=this.$refs.deployTree.getCheckedNodes(),t=[];if(e.forEach(function(e){console.log(e),e.leaf&&t.push({mgmtNodePks:e.mgmtNodePks,communityId:e.code})}),t.length<=0)return this.isEmptyNode=!0,void this.timeoutHideTips();var a={communities:t,modelPk:this.curDeployVersion.algModelPk,modelVerPk:this.curDeployVersion.algModelVersionPk},i=SD();Cy(a).then(function(e){this.$nextTick(function(){i.close()}),this.$message({message:"部署命令发送成功",type:"success"}),this.deployDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){i.close()}),console.info(e)}.bind(this))},handlePublishVersion:function(){var e=this.$refs.publishTree.getCheckedNodes(),t=[],a=[];e.forEach(function(e){e.isCommunity&&a.push(e.code)}),e.forEach(function(e){console.log(e),e.leaf&&t.push({mgntNodePk:e.code})});var i=!1,s="";if(a.length>0&&(i=!0,s=a[0]),t.length<=0&&a.length<=0)return this.isEmptyNode=!0,void this.timeoutHideTips();var o={algModelVersionWithExtStatus:this.curDeployVersion,nodes:t,selectAll:i,communityId:s},l=SD();gy(o).then(function(e){this.$nextTick(function(){l.close()}),this.$message({message:"发布成功",type:"success"}),this.deployDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){l.close()}),console.info(e)}.bind(this))},startToexcuteVersionTask:function(e){var t=this.$refs.excuteTaskTree.getCheckedNodes(),a=[];t.forEach(function(e){console.log(e),e.leaf&&a.push({communityId:e.code,mgmtNodePks:e.mgmtNodePks})});var i="",s=void 0;if(a.length>0&&(i=a[0].communityId,s=a[0].mgmtNodePks[0].mgmtNodePk),a.length<=0)return this.isExeEmptyNode=!0,void this.timeoutHideTips();var o={versionId:this.excuteVersionInfo.algModelVersionPk,paramList:this.curExcuteVersionParams,selectAll:!1,communityId:i,mgmtNodeId:s},l=SD();Ry(o).then(function(e){this.$nextTick(function(){l.close()}),this.currentTaskExeStep=3,e&&e.data?this.curTaskExecuteResult=e.data:this.$message.error("无结果信息"),console.info(e.data)}.bind(this)).catch(function(e){this.$nextTick(function(){l.close()}),console.info(e)}.bind(this))},excuteChooseMgmtNode:function(){this.currentTaskExeStep=2},showExecuteTaskResult:function(){},confirmEditDeployScript:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={algModelPk:t.editScriptVersion.algModelPk,algModelVersionPk:t.editScriptVersion.algModelVersionPk,fileDeployScript:t.deployCommand.command},i=SD();Dy(a).then(function(e){var t=this;this.$nextTick(function(){i.close(),t.loadData()}),this.deployCommandDialogVisible=!1}.bind(t)).catch(function(e){this.$nextTick(function(){i.close()}),console.info(e)}.bind(t))})},showEditDeployCommand:function(e){console.info(e),this.editScriptVersion=this.modelVersionList[e],this.editScriptVersion.deployed?this.deployScriptDisabled=!0:this.deployScriptDisabled=!1,this.deployCommand.command=this.editScriptVersion.fileDeployScript,this.deployCommandDialogVisible=!0},timeoutHideTips:function(){setTimeout(function(){this.isEmptyNode=!1,this.isExeEmptyNode=!1}.bind(this),2500)},showDeployPublishStatus:function(e,t){console.info(t),this.showDeployPublishVersion=this.modelVersionList[e],this.loadCommunityStatus()},handleClick:function(e,t){console.info("click"),console.info(e),console.info(t),t&&(this.$refs.excuteTaskTree.setCheckedKeys([]),this.$refs.excuteTaskTree.setCheckedNodes([e]))},reDeployPublishVersion:function(e,t){var a=this;this.$confirm("确定要重新部署吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[a.communityStatusList[e]],i=[];t.forEach(function(e){i.push({mgmtNodePks:e.mgmtNodePks,communityId:e.communityId})});var s={communities:i,modelPk:a.showDeployPublishVersion.algModelPk,modelVerPk:a.showDeployPublishVersion.algModelVersionPk},o=SD();Cy(s).then(function(e){this.$nextTick(function(){o.close()}),this.$message({message:"部署命令发送成功",type:"success"}),this.loadCommunityStatus(t)}.bind(a)).catch(function(e){this.$nextTick(function(){o.close()}),console.info(e)}.bind(a))}).catch(function(){})},handleClose:function(e){this.$refs.newModelVersion&&this.$refs.newModelVersion.clearValidate(),this.$refs.editModelVersion&&this.$refs.editModelVersion.clearValidate(),this.$refs.deployCommand&&this.$refs.deployCommand.clearValidate(),this.addModelDialogVisible=!1,this.editModelDialogVisible=!1,this.uploadDialogVisible=!1,this.deployDialogVisible=!1,this.excuteVersionVisible=!1,this.deployCommandDialogVisible=!1,clearInterval(this.uploadInterval)}}},qy=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-version"},[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/baseinfomgmt"}}},[e._v("基本信息管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("版本管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[a("el-collapse",{staticClass:"common-top-info",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingModelInfo,expression:"loadingModelInfo"}],attrs:{title:e.currentModel.name,name:"1"}},[a("div",{staticClass:"model-desc"},[e._v(e._s(e.currentModel.description))]),e._v(" "),a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"模型状态"}},[a("span",{class:{green:e.currentModel.modelStatus==e.modelEnableStatus,red:e.currentModel.modelStatus!=e.modelEnableStatus}},[a("b",[e._v(e._s(e.systemModelStatusMap[e.currentModel.modelStatus]))])])]),e._v(" "),a("el-form-item",{attrs:{label:"模型Code"}},[a("span",[e._v(e._s(e.currentModel.code))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点类型"}},[a("span",[e._v(e._s(e.systemNodeTypeMap[e.currentModel.nodeType]))])]),e._v(" "),a("el-form-item",{attrs:{label:"模型分类"}},[a("span",[e._v(e._s(e.systemModelCatMap[e.currentModel.modelCat]))])]),e._v(" "),a("el-form-item",{attrs:{label:"运行时"}},[a("span",[e._v(e._s(e.systemModelRuntimeMap[e.currentModel.runtimeType]))])]),e._v(" "),a("el-form-item",{attrs:{label:"模型能力"}},[e.currentModel.eventTypeList?a("div",e._l(e.currentModel.eventTypeList.split("|"),function(t){return a("span",{staticClass:"event-border"},[e._v("\n                  "+e._s(e.systemModelEventMap[t])+"\n                ")])})):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"是否实时"}},[e.currentModel.realtimeFlag?a("span",[e._v("是")]):e._e(),e._v(" "),e.currentModel.realtimeFlag?e._e():a("span",[e._v("否")])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(e.currentModel.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentModel.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(e.currentModel.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentModel.createTime)))])])],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"margin-top-25",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{disabled:e.loadingVersion,type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("添加版本")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch,rules:e.searchRules}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"占位符"}},[a("el-input",{attrs:{placeholder:"占位符"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号",prop:"versionNo"}},[a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"searchName"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("modelListSearch")}},model:{value:e.modelListSearch.versionNo,callback:function(t){e.$set(e.modelListSearch,"versionNo",t)},expression:"modelListSearch.versionNo"}})],1)]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingVersion,expression:"loadingVersion"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelVersionList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"versionNo",label:"版本号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"算法文件"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.fileUploadFlag?a("span",{staticClass:"green"},[e._v("已上传")]):e._e(),e._v(" "),t.row.fileUploadFlag?e._e():a("a",{staticClass:"red cursor-hand",on:{click:function(a){e.uploadModelFile(t.row.algModelVersionPk)}}},[e._v("请上传算法文件")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部署脚本",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{directives:[{name:"show",rawName:"v-show",value:t.row.fileUploadFlag,expression:"scope.row.fileUploadFlag"}],staticClass:"blue cursor-hand",on:{click:function(a){e.showEditDeployCommand(t.$index,t.row)}}},[e._v("部署脚本")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.fileUploadFlag,expression:"!scope.row.fileUploadFlag"}]},[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:t.row.versionStatus==e.modelVersionEnableStatus,red:"mm.versts.disable"==t.row.versionStatus}},[e._v("\n            "+e._s(e.systemModelVersionStatusMap[t.row.versionStatus])+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部署发布状态",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.onCloud?a("div",[a("a",{staticClass:"blue cursor-hand",on:{click:function(a){e.showDeployPublishStatus(t.$index,t.row)}}},[e._v("部署发布状态")])]):e._e(),e._v(" "),t.row.onCloud?e._e():a("div",[t.row.displayDeployStatus==e.versionDeployedStatus?a("span",{staticClass:"green"},[e._v("\n              "+e._s(e.systemDeployStatusMap[t.row.displayDeployStatus])+"\n            ")]):e._e(),e._v(" "),t.row.displayDeployStatus!=e.versionDeployedStatus?a("span",{},[e._v("\n              "+e._s(e.systemDeployStatusMap[t.row.displayDeployStatus])+"\n            ")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参数管理",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.redirectToParamMgmt(t.$index,t.row)}}},[e._v("参数管理\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结果定义",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.redirectToResultDefine(t.$index,t.row)}}},[e._v("结果定义\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更多操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(a){e.handleCommand(a,t.$index,t.row)}}},[a("span",{staticClass:"blue cursor-hand el-dropdown-link"},[e._v("\n              更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.row.fileUploadFlag&&"mm.versts.disable"!=t.row.versionStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"deploy"}},[a("i",{staticClass:"el-icon-tickets"}),e._v("部署发布")]):e._e(),e._v(" "),"mm.versts.disable"!=t.row.versionStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"excuteTask"}},[a("i",{staticClass:"el-icon-tickets"}),e._v("执行任务")]):e._e(),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"taskplan"}},[a("i",{staticClass:"el-icon-time"}),e._v("查看计划")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"task"}},[a("i",{staticClass:"el-icon-search"}),e._v("查看任务")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"excuteStatus"}},[a("i",{staticClass:"el-icon-search"}),e._v("运行状况")]),e._v(" "),t.row.fileUploadFlag&&"mm.versts.disable"!=t.row.versionStatus&&!t.row.deployed?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"updatefile"}},[a("i",{staticClass:"el-icon-upload"}),e._v("更新模型文件")]):e._e(),e._v(" "),t.row.fileUploadFlag?e._e():a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"updatefile"}},[a("i",{staticClass:"el-icon-upload"}),e._v("上传算法文件")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"edit",divided:""}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v("修改")]),e._v(" "),"mm.depsts.progress"!=t.row.displayDeployStatus&&"mm.pubsts.publish"!=t.row.displayPublishStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"delete"}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")]):e._e()],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加版本","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.addModelDialogVisible,width:"40%","before-close":e.handleClose},on:{close:e.closeAddModel,"update:visible":function(t){e.addModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newModelVersion",staticClass:"demo-ruleForm",attrs:{model:e.newModelVersion,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"版本号",prop:"versionNo"}},[a("el-input",{attrs:{id:"addNo",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModelVersion.versionNo,callback:function(t){e.$set(e.newModelVersion,"versionNo",t)},expression:"newModelVersion.versionNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本描述",prop:"description"}},[a("el-input",{attrs:{id:"addDesc",type:"textarea"},on:{blur:e.inputBlur},model:{value:e.newModelVersion.description,callback:function(t){e.$set(e.newModelVersion,"description",t)},expression:"newModelVersion.description"}})],1),e._v(" "),a("div",{staticClass:"yellow add-version-tips margin-bottom-20"},[a("i",{staticClass:"el-icon-warning margin-right-5"}),e._v("新建版本时会自动将所有未发布的旧版本置为不可用状态\n      ")]),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newModelVersion")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑版本","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editModelDialogVisible,width:"40%","before-close":e.handleClose},on:{close:e.closeAddModel,"update:visible":function(t){e.editModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"editModelVersion",staticClass:"demo-ruleForm",attrs:{model:e.editModelVersion,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"版本号",prop:"versionNo"}},[a("el-input",{attrs:{disabled:"mm.pubsts.publish"==e.editModelVersion.displayPublishStatus?"disabled":void 0,id:"editNo",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModelVersion.versionNo,callback:function(t){e.$set(e.editModelVersion,"versionNo",t)},expression:"editModelVersion.versionNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本描述",prop:"description"}},[a("el-input",{attrs:{id:"editDesc",type:"textarea"},on:{blur:e.inputBlur},model:{value:e.editModelVersion.description,callback:function(t){e.$set(e.editModelVersion,"description",t)},expression:"editModelVersion.description"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmEditModelVersion("editModelVersion")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"部署脚本","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.deployCommandDialogVisible,width:"40%","before-close":e.handleClose},on:{close:e.closeAddModel,"update:visible":function(t){e.deployCommandDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"deployCommand",staticClass:"demo-ruleForm",attrs:{model:e.deployCommand,rules:e.commandRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"部署脚本",prop:"command"}},[a("el-input",{attrs:{disabled:e.deployScriptDisabled?"disabled":void 0,id:"deployCommand",type:"textarea"},on:{blur:e.inputBlur},model:{value:e.deployCommand.command,callback:function(t){e.$set(e.deployCommand,"command",t)},expression:"deployCommand.command"}})],1),e._v(" "),e.deployScriptDisabled?e._e():a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmEditDeployScript("deployCommand")}}},[e._v("保存")])],1),e._v(" "),e.deployScriptDisabled?a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("关闭")])],1):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.isUpdateFileFlag?"模型版本文件更新":"模型版本文件上传","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.uploadDialogVisible,width:"40%","before-close":e.handleClose},on:{close:e.closeUploadModel,"update:visible":function(t){e.uploadDialogVisible=t}}},[a("div",{staticClass:"text-center"},[a("el-upload",{ref:"versionUpload",staticClass:"upload-demo",attrs:{disabled:!e.showUploadArea,name:"file","file-list":e.versionFileList,"on-progress":e.showProgress,"before-upload":e.startProgress,"on-success":e.uploadSucess,"on-error":e.uploadFailed,drag:"",action:e.uploadParam.url,headers:e.myHeaders,data:e.uploadParam.data}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),e.isStructuredNode?e._e():a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("仅支持上传不超过5G的视频分析程序")]),e._v(" "),e.isStructuredNode?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("仅支持上传不超过50M的结构化分析程序")]):e._e()])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"deploy"===e.currentDeployPublishAction?"部署发布模型版本":"发布模型版本","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.deployDialogVisible,width:"40%","before-close":e.handleClose},on:{close:e.closeDeployModel,"update:visible":function(t){e.deployDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.deployLoading,expression:"deployLoading"}],staticClass:"demo-ruleForm"},["deploy"===e.currentDeployPublishAction?a("div",{class:[e.isEmptyNode?"red":""]},[e._v("请选择要部署和发布的小区")]):e._e(),e._v(" "),a("div",{staticClass:"text-center tree-padding",class:[e.isEmptyNode?"emptyNode":""]},["deploy"==e.currentDeployPublishAction?a("el-tree",{ref:"deployTree",attrs:{"default-expand-all":!0,"node-key":"code",props:e.deployTreeNode,data:e.deployTreeData,"show-checkbox":""}}):e._e()],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.deployDialogVisible=!1}}},[e._v("取消")]),e._v(" "),"deploy"==e.currentDeployPublishAction?a("el-button",{attrs:{type:"primary"},on:{click:e.handleDeployVersion}},[e._v("部署")]):e._e(),e._v(" "),"publish"==e.currentDeployPublishAction?a("el-button",{attrs:{type:"primary"},on:{click:e.handlePublishVersion}},[e._v("发布")]):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"执行算法任务","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.excuteVersionVisible,width:"50%","before-close":e.handleClose},on:{close:e.closeExcuteVersion,"update:visible":function(t){e.excuteVersionVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingExcuteTask,expression:"loadingExcuteTask"}],ref:"excuteVersionTask",staticClass:"demo-ruleForm",attrs:{model:e.excuteVersionTask,"label-width":"40%"}},[a("div",{staticClass:"step-info"},[a("el-steps",{attrs:{active:e.currentTaskExeStep}},[a("el-step",{attrs:{title:"调整执行参数",icon:"el-icon-edit"}}),e._v(" "),a("el-step",{attrs:{title:"选择执行小区",icon:"el-icon-upload"}}),e._v(" "),a("el-step",{attrs:{title:"执行成功",icon:"el-icon-success"}})],1)],1),e._v(" "),1==e.currentTaskExeStep?a("div",{staticClass:"version-params excute-min-height"},[e.curExcuteVersionParams&&e.curExcuteVersionParams.length>0?a("div",{staticClass:"excute-warp"},[a("el-row",{attrs:{gutter:0}},[e._l(e.curExcuteVersionParams,function(t,i){return a("el-col",{key:i,attrs:{span:24}},[a("el-form-item",{attrs:{label:t.paramName,prop:"item"}},[a("el-input",{attrs:{id:"addNo",size:"small"},on:{blur:e.inputBlur},model:{value:t.defaultValue,callback:function(a){e.$set(t,"defaultValue",a)},expression:"item.defaultValue"}})],1)],1)}),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"text-left",staticStyle:{"padding-left":"40%"}},[a("a",{staticClass:"blue",attrs:{href:"/modelmgmt/model/"+e.excuteVersionInfo.algModelPk+"/version/"+e.excuteVersionInfo.algModelVersionPk+"/paramdefine"}},[e._v("\n                  新增(删除)参数\n                ")])])])],2)],1):e._e(),e._v(" "),!e.curExcuteVersionParams||e.curExcuteVersionParams.length<=0?a("div",[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[e.loadingExcuteParam?e._e():a("div",{staticClass:"no-param-warp"},[e._v("\n                暂无参数信息，\n                "),a("a",{staticClass:"blue",attrs:{href:"/modelmgmt/model/"+e.excuteVersionInfo.algModelPk+"/version/"+e.excuteVersionInfo.algModelVersionPk+"/paramdefine"}},[e._v("\n                  添加参数\n                ")])])])],1)],1):e._e()]):e._e(),e._v(" "),2==e.currentTaskExeStep?a("div",{staticClass:"excute-min-height"},[a("div",{staticClass:"text-center tree-padding",class:[e.isExeEmptyNode?"emptyNode":""],staticStyle:{margin:"0 15px 0"}},[a("div"),e._v(" "),a("el-tree",{ref:"excuteTaskTree",attrs:{"empty-text":"暂无可执行任务的小区","default-expand-all":!0,"node-key":"code",props:e.excuteTaskTreeNode,data:e.excuteTaskTreeData,"show-checkbox":""},on:{"check-change":e.handleClick}})],1),e._v(" "),a("div",{staticClass:"red",staticStyle:{height:"14px","line-height":"22px",padding:"0 0 0 15px"}},[e.isExeEmptyNode&&"excute"===e.currentDeployPublishAction?a("div",[e._v("请选择要执行任务的小区")]):e._e()])]):e._e(),e._v(" "),3==e.currentTaskExeStep?a("div",{staticClass:"excute-min-height"},[e.curTaskExecuteResult.warnCode?a("div",{staticClass:"text-center tree-padding",staticStyle:{margin:"0 15px 0"}},[a("div",{staticClass:"yellow",staticStyle:{"font-size":"24px",margin:"10px 0"}},[a("i",{staticClass:"el-icon-warning margin-right-5"}),e._v(e._s(e.errorMessageMap[e.curTaskExecuteResult.warnCode]))]),e._v(" "),a("div",{staticClass:"margin-top-25 margin-bottom-10"},[a("a",{staticClass:"blue",attrs:{href:"/modelmgmt/model/"+e.excuteVersionInfo.algModelPk+"/version/"+e.excuteVersionInfo.algModelVersionPk+"/task"}},[a("i",{staticClass:"el-icon-search margin-right-5"}),e._v("查看执行结果\n            ")])])]):e._e(),e._v(" "),e.curTaskExecuteResult.warnCode?e._e():a("div",{staticClass:"text-center tree-padding",staticStyle:{margin:"0 15px 0"}},[a("div",{staticClass:"green",staticStyle:{"font-size":"24px",margin:"10px 0"}},[a("i",{staticClass:"el-icon-success margin-right-5"}),e._v("执行命令发送成功")]),e._v(" "),a("div",{staticClass:"margin-top-25 margin-bottom-10"},[a("a",{staticClass:"blue",attrs:{href:"/modelmgmt/model/"+e.excuteVersionInfo.algModelPk+"/version/"+e.excuteVersionInfo.algModelVersionPk+"/task"}},[a("i",{staticClass:"el-icon-search margin-right-5"}),e._v("查看执行结果\n            ")])])])]):e._e(),e._v(" "),1==e.currentTaskExeStep?a("div",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.excuteVersionVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{on:{click:function(t){e.excuteChooseMgmtNode()}}},[e._v("下一步:选择执行小区")])],1):e._e(),e._v(" "),2==e.currentTaskExeStep?a("div",{staticClass:"add-model-button"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{staticClass:"text-left",attrs:{span:6}},[a("el-button",{staticStyle:{"margin-left":"120px"},on:{click:function(t){e.currentTaskExeStep=1}}},[e._v("上一步:调整执行参数")])],1),e._v(" "),a("el-col",{staticClass:"text-right",attrs:{span:18}},[a("el-button",{on:{click:function(t){e.excuteVersionVisible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.startToexcuteVersionTask()}}},[e._v("执行任务")])],1)],1)],1):e._e(),e._v(" "),3==e.currentTaskExeStep?a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.excuteVersionVisible=!1}}},[e._v("关闭")])],1):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"各小区部署发布情况","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.showComDeployPublishVisible,width:"50%"},on:{close:e.closeShowDeployPublish,"update:visible":function(t){e.showComDeployPublishVisible=t}}},[a("el-form",{ref:"deployPublishForm",staticClass:"demo-form-inline"},[a("el-form-item",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingVersion,expression:"loadingVersion"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.communityStatusList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"小区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemCommunityMap[t.row.communityId]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"部署状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:"mm.depsts.deploy"==t.row.deployStatus,red:"mm.depsts.fail"==t.row.deployStatus}},[e._v(e._s(e.systemDeployStatusMap[t.row.deployStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:"mm.pubsts.publish"==t.row.publishStatus}},[e._v(e._s(e.systemPublishStatusMap[t.row.publishStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更多操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["mm.depsts.fail"==t.row.deployStatus||"mm.depsts.none"==t.row.deployStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.reDeployPublishVersion(t.$index,t.row)}}},[e._v("重新部署发布\n            ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPageCommunity,"page-sizes":[10,20,50,100],"page-size":e.pageSizeCommunity,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCommunity},on:{"size-change":e.handleSizeChangeCommunity,"current-change":e.handleCurrentChangeCommunity}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.showComDeployPublishVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},By=[],Wy={render:qy,staticRenderFns:By},Qy=Wy,Gy=a("VU/8"),Hy=te,jy=Gy(Oy,Qy,!1,Hy,"data-v-14f496e0",null),Jy=jy.exports,Zy=function(e){return mt.a.post(bD+"/modelparam/list",e).then(function(e){return e.data})},Ky=function(e){return mt.a.post(bD+"/modelparam/insert",e).then(function(e){return e.data})},Yy=function(e){return mt.a.get(bD+"/modelparam/delete",{params:e}).then(function(e){return e.data})},Xy=function(e){return mt.a.post(bD+"/modelparam/update",e).then(function(e){return e.data})},eC={name:"modelList",components:{ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,currentStep:1,formInline:{user:"",region:""},newModel:{paramCat:"",paramCode:"",paramValue:"",paramDesc:""},editModel:{},modelListSearch:{paramCode:"",type:"全部"},paramCatList:[],paramCatMap:[],searchRules:{paramCode:[{required:!1,trigger:"blur"},{pattern:"^[A-Za-z0-9_.]+$",min:0,max:64,message:'只支持字母,数字,下划线和"."',trigger:"change"}]},rules:{communityId:[{required:!0,message:"请选择小区",trigger:"change"}],paramCat:[{required:!0,message:"请选择系统参数类别",trigger:"change"}],paramCode:[{required:!0,message:"请输入系统参数代码",trigger:"blur"},{pattern:"^[A-Za-z0-9_.]+$",min:1,max:64,message:'长度在 1 到 64 个字符（只支持字母,数字,下划线和"."）',trigger:"blur"}],paramValue:[{message:"请输入系统参数值",trigger:"blur"},{pattern:"^[A-Za-z0-9_]+$",min:0,max:256,message:"长度在 0 到 256 个字符（只支持字母,数字和下划线）",trigger:"blur"}],paramDesc:[{message:"请输入系统参数描述",trigger:"blur"},{min:0,max:256,message:"长度在 0 到 256 个字符",trigger:"blur"}]},addModelDialogVisible:!1,editModelDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,modelList:[],multipleSelection:[],communityIdMap:{},communityId:[]}},mounted:function(){var e={catCodeList:"mm.prmcat",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.paramCatList=xD(e.data,"mm.prmcat"),this.paramCatMap=wD(this.paramCatList),this.communityId=xD(e.data,CD),this.communityId.unshift({item_code:"0",item_name:"全部小区"}),this.communityIdMap=wD(this.communityId),console.info(this.paramCatMap),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={};this.modelListSearch.paramCode.length>0?e.paramCode="%"+this.modelListSearch.paramCode+"%":e.paramCode=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,orderBy:"createTime",condition:e};console.log(t);var a=SD();Zy(t).then(function(e){this.modelList=e.data.items,this.modelList.forEach(function(e,t){""===e.communityId||null===e.communityId?e.communityId="0":console.log("testtest")}),this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){a.close()})}.bind(this))},confirmAddAlgModel:function(){var e=this.newModel;console.log(e),"0"===e.communityId&&(e.communityId="");var t=SD();Ky(e).then(function(e){var a=this;console.log(e),this.addModelDialogVisible=!1,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){t.close()})}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmAddAlgModel()})},confirmEditAlgModel:function(){var e=this.editModel;e.shareFlag=this.editModel?1:0,e.realtimeFlag=this.realtimeFlag?1:0,console.log(e),"0"===e.communityId&&(e.communityId="");var t=SD();Xy(e).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.editModelDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgModel()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){console.log("submit!"),this.loadData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.editModel=JSON.parse(Bt()(this.modelList[e])),this.editModelDialogVisible=!0},inputBlur:function(e){console.info(e),"addParamCode"===e.target.id&&(this.newModel.paramCode=this.newModel.paramCode.trim()),"addParamValue"===e.target.id&&(this.newModel.paramValue=this.newModel.paramValue.trim()),"addParamDesc"===e.target.id&&(this.newModel.paramDesc=this.newModel.paramDesc.trim()),"editParamCode"===e.target.id&&(this.editModel.paramCode=this.editModel.paramCode.trim()),"editParamValue"===e.target.id&&(this.editModel.paramValue=this.editModel.paramValue.trim()),"editParamDesc"===e.target.id&&(this.editModel.paramDesc=this.editModel.paramDesc.trim()),"searchName"===e.target.id&&(this.modelListSearch.paramCode=this.modelListSearch.paramCode.trim())},removeData:function(e,t){var a=this,i=this.modelList[e];this.$confirm('确定要删除"'+i.paramCode+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";i.comSysParamPk&&(e=i.comSysParamPk.toString());var t={id:i.sysParamPk.toString(),comSysParamPk:e},s=SD();Yy(t).then(function(e){var t=this;console.log(e),this.$nextTick(function(){s.close(),t.loadData()}),this.$message({type:"success",message:"删除成功"})}.bind(a)).catch(function(e){this.$nextTick(function(){s.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showAddModelDialog:function(){this.resetForm("newModel"),this.currentStep=1,this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},handleClose:function(e){this.$refs.newModel&&this.$refs.newModel.clearValidate(),this.$refs.editModel&&this.$refs.editModel.clearValidate(),this.addModelDialogVisible=!1,this.editModelDialogVisible=!1},searchModelByName:function(e){e.stopPropagation(),e.preventDefault(),this.loadData()}}},tC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-config"},[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统参数管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[e._m(0),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("添加系统参数")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch,rules:e.searchRules}},[a("el-form-item",{attrs:{label:"小区"}},[a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"小区"},on:{change:e.loadData},model:{value:e.modelListSearch.communityId,callback:function(t){e.$set(e.modelListSearch,"communityId",t)},expression:"modelListSearch.communityId"}},e._l(e.communityId,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1)]),e._v(" "),a("el-form-item",{attrs:{label:"系统参数代码",prop:"paramCode"}},[a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"searchName"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("modelListSearch")}},model:{value:e.modelListSearch.paramCode,callback:function(t){e.$set(e.modelListSearch,"paramCode",t)},expression:"modelListSearch.paramCode"}})],1)]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"communityId",label:"小区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.communityIdMap[t.row.communityId]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"paramCat",label:"系统参数类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.paramCatMap[t.row.paramCat]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"系统参数代码",prop:"paramCode","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"paramValue",label:"系统参数值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paramDesc",label:"系统参数描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑参数",placement:"top"}},[a("i",{staticClass:"cursor-hand model-eidt font-size-20 el-icon-edit-outline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除参数",placement:"top"}},[a("i",{staticClass:"red cursor-hand model-delete font-size-20 el-icon-delete",on:{click:function(a){e.removeData(t.$index,t.row)}}})])]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加系统参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.addModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.addModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newModel",staticClass:"demo-ruleForm",attrs:{model:e.newModel,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"小区名称",prop:"communityId"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择一个小区"},model:{value:e.newModel.communityId,callback:function(t){e.$set(e.newModel,"communityId",t)},expression:"newModel.communityId"}},e._l(e.communityId,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数类别",prop:"paramCat"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择系统参数类别"},model:{value:e.newModel.paramCat,callback:function(t){e.$set(e.newModel,"paramCat",t)},expression:"newModel.paramCat"}},e._l(e.paramCatList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数代码",prop:"paramCode"}},[a("el-input",{attrs:{id:"addParamCode",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.paramCode,callback:function(t){e.$set(e.newModel,"paramCode",t)},expression:"newModel.paramCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数值",prop:"paramValue"}},[a("el-input",{attrs:{id:"addParamValue",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.paramValue,callback:function(t){e.$set(e.newModel,"paramValue",t)},expression:"newModel.paramValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数描述",prop:"paramDesc"}},[a("el-input",{attrs:{id:"addParamDesc",autosize:{minRows:2,maxRows:10},type:"textarea"},on:{blur:e.inputBlur},model:{value:e.newModel.paramDesc,callback:function(t){e.$set(e.newModel,"paramDesc",t)},expression:"newModel.paramDesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newModel")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑系统参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editModel",staticClass:"demo-ruleForm",attrs:{model:e.editModel,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"小区名称",prop:"communityId"}},[a("el-select",{attrs:{size:"small",disabled:"",placeholder:"请选择一个小区"},model:{value:e.editModel.communityId,callback:function(t){e.$set(e.editModel,"communityId",t)},expression:"editModel.communityId"}},e._l(e.communityId,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数类别",prop:"paramCat"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择系统参数类别"},model:{value:e.editModel.paramCat,callback:function(t){e.$set(e.editModel,"paramCat",t)},expression:"editModel.paramCat"}},e._l(e.paramCatList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数代码",prop:"paramCode"}},[a("el-input",{attrs:{disabled:!0,id:"editParamCode",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.paramCode,callback:function(t){e.$set(e.editModel,"paramCode",t)},expression:"editModel.paramCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数值",prop:"paramValue"}},[a("el-input",{attrs:{id:"editParamValue",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.paramValue,callback:function(t){e.$set(e.editModel,"paramValue",t)},expression:"editModel.paramValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数描述",prop:"paramDesc"}},[a("el-input",{attrs:{id:"editParamDesc",autosize:{minRows:2,maxRows:10},type:"textarea"},on:{blur:e.inputBlur},model:{value:e.editModel.paramDesc,callback:function(t){e.$set(e.editModel,"paramDesc",t)},expression:"editModel.paramDesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editModel")}}},[e._v("保存")])],1)],1)],1)],1)},aC=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-title"},[a("i",{staticClass:"el-icon-news"}),e._v(" 所有系统参数")])}],iC={render:tC,staticRenderFns:aC},sC=iC,oC=a("VU/8"),lC=ae,rC=oC(eC,sC,!1,lC,null,null),nC=rC.exports,cC={name:"modelList",components:{ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,currentStep:1,formInline:{user:"",region:""},activeNames:["1"],newModel:{metaItemPk:"",catCode:"",itemSysCode:"",itemCustCode:"",itemCustName:"",itemSeq:"",parentItemSysCode:""},editModel:{},currentMetacat:{},modelListSearch:{name:"",type:"全部"},searchRules:{name:[{required:!1,trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:0,max:64,message:"只支持中文,字母,数字和下划线",trigger:"change"}]},rules:{catCode:[{required:!0,message:"请选择元数据分类名称",trigger:"blur"}],itemCustCode:[{required:!0,message:"请输入元数据子项代码",trigger:"blur"},{pattern:"^[A-Za-z0-9_.]+$",min:1,max:32,message:'长度在 1 到 32 个字符（只支持字母,数字,下划线和"."）',trigger:"blur"}],itemCustName:[{required:!0,message:"请输入元数据子项名称",trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:1,max:64,message:"长度在 1 到 64 个字符（只支持中文,字母,数字和下划线）",trigger:"blur"}],itemSeq:[{pattern:/^[1-9][0-9]{0,4}$/,message:"请输入数字，范围为 1 - 99999",trigger:"blur"}]},addModelDialogVisible:!1,editModelDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,modelList:[],multipleSelection:[]}},mounted:function(){console.log(this.$route.params.modelId),this.getMetaCat()},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{getMetaCat:function(){var e={id:this.$route.params.metacatId},t=SD();$D(e).then(function(e){var a=this;this.$nextTick(function(){t.close(),a.loadData()}),this.currentMetacat=e.data}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},loadData:function(){var e={catCode:this.currentMetacat.catCode};this.modelListSearch.name.length>0?e.itemCustName="%"+this.modelListSearch.name+"%":e.itemCustName=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e,orderBy:"createTime"};console.log(t);var a=SD();MD(t).then(function(e){this.modelList=e.data.items,this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){a.close()})}.bind(this))},confirmAddAlgModel:function(){var e=this.newModel;e.catCode=this.currentMetacat.catCode,e.itemSysCode=this.currentMetacat.catCode+"."+this.newModel.itemCustCode,console.log(e);var t=SD();RD(e).then(function(e){var a=this;console.log(e),this.addModelDialogVisible=!1,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmAddAlgModel()})},confirmEditAlgModel:function(){var e=this.editModel;e.catCode=this.currentMetacat.catCode,e.itemSysCode=this.currentMetacat.catCode+"."+this.editModel.itemCustCode,console.log(e);var t=SD();FD(e).then(function(e){var a=this;console.log(e),this.editModelDialogVisible=!1,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgModel()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(e){var t=this;console.log("submit!"),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loadData()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.editModel=JSON.parse(Bt()(this.modelList[e])),this.editModelDialogVisible=!0},inputBlur:function(e){console.info(e),"addItemCustName"===e.target.id&&(this.newModel.itemCustName=this.newModel.itemCustName.trim()),"addItemCustCode"===e.target.id&&(this.newModel.itemCustCode=this.newModel.itemCustCode.trim()),"addParamDesc"===e.target.id&&(this.newModel.itemSeq=this.newModel.itemSeq.trim()),"editItemCustName"===e.target.id&&(this.editModel.itemCustName=this.editModel.itemCustName.trim()),"editItemCustCode"===e.target.id&&(this.editModel.itemCustCode=this.editModel.itemCustCode.trim()),"searchName"===e.target.id&&(this.modelListSearch.name=this.modelListSearch.name.trim())},removeData:function(e,t){var a=this,i=this.modelList[e];this.$confirm('确定要删除"'+i.itemCustCode+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:i.metaItemPk.toString(),itemSysCode:i.itemSysCode.toString()},t=SD();UD(e).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.$message({type:"success",message:"删除成功"})}.bind(a)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showAddModelDialog:function(){this.resetForm("newModel"),this.currentStep=1,this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},handleClose:function(e){this.$refs.newModel&&this.$refs.newModel.clearValidate(),this.$refs.editModel&&this.$refs.editModel.clearValidate(),this.addModelDialogVisible=!1,this.editModelDialogVisible=!1},searchModelByName:function(e){e.stopPropagation(),e.preventDefault(),this.loadData()}}},dC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/metacatmgmt"}}},[e._v("元数据分类管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("元数据子项管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:e.currentMetacat.catName,name:"1"}},[a("div",{staticClass:"model-desc"},[e._v(e._s(e.currentMetacat.catDesc))]),e._v(" "),a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"元数据分类名称"}},[a("span",[e._v(e._s(e.currentMetacat.catName))])]),e._v(" "),a("el-form-item",{attrs:{label:"元数据分类代码"}},[a("span",[e._v(e._s(e.currentMetacat.catCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"元数据分类描述"}},[a("span",[e._v(e._s(e.currentMetacat.catDesc))])])],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"margin-top-25",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.currentMetacat.sysFlag&&"mm.evttyp"!=e.currentMetacat.catCode,expression:"!currentMetacat.sysFlag && currentMetacat.catCode!='mm.evttyp'"}],attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("添加元数据")])],1),e._v("\n             \n          ")],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch,rules:e.searchRules}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"占位符"}},[a("el-input",{attrs:{placeholder:"占位符"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据子项名称",prop:"name"}},[a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"searchName"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("modelListSearch")}},model:{value:e.modelListSearch.name,callback:function(t){e.$set(e.modelListSearch,"name",t)},expression:"modelListSearch.name"}})],1)]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"catCode",label:"元数据分类代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemSysCode",label:"元数据子项系统编码","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemCustName",label:"元数据子项名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemCustCode",label:"元数据子项代码","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!e.currentMetacat.sysFlag&&"mm.evttyp"!=e.currentMetacat.catCode,expression:"!currentMetacat.sysFlag && currentMetacat.catCode!='mm.evttyp'"}],staticClass:"item",attrs:{effect:"dark",content:"编辑元数据",placement:"top"}},[a("i",{staticClass:"cursor-hand model-eidt font-size-20 el-icon-edit-outline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!e.currentMetacat.sysFlag&&"mm.evttyp"!=e.currentMetacat.catCode,expression:"!currentMetacat.sysFlag && currentMetacat.catCode!='mm.evttyp'"}],staticClass:"item",attrs:{effect:"dark",content:"删除元数据",placement:"top"}},[a("i",{staticClass:"red cursor-hand model-delete font-size-20 el-icon-delete",on:{click:function(a){e.removeData(t.$index,t.row)}}})])]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加元数据","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.addModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.addModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newModel",staticClass:"demo-ruleForm",attrs:{model:e.newModel,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"元数据子项名称",prop:"itemCustName"}},[a("el-input",{attrs:{id:"addItemCustName",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.itemCustName,callback:function(t){e.$set(e.newModel,"itemCustName",t)},expression:"newModel.itemCustName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据子项代码",prop:"itemCustCode"}},[a("el-input",{attrs:{id:"addItemCustCode",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.itemCustCode,callback:function(t){e.$set(e.newModel,"itemCustCode",t)},expression:"newModel.itemCustCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据子项次序",prop:"itemSeq"}},[a("el-input",{attrs:{id:"addItemSeq",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.itemSeq,callback:function(t){e.$set(e.newModel,"itemSeq",t)},expression:"newModel.itemSeq"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newModel")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑元数据参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editModel",staticClass:"demo-ruleForm",attrs:{model:e.editModel,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"元数据子项名称",prop:"itemCustName"}},[a("el-input",{attrs:{id:"editItemCustName",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.itemCustName,callback:function(t){e.$set(e.editModel,"itemCustName",t)},expression:"editModel.itemCustName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据子项代码",prop:"itemCustCode"}},[a("el-input",{attrs:{id:"editItemCustCode",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.itemCustCode,callback:function(t){e.$set(e.editModel,"itemCustCode",t)},expression:"editModel.itemCustCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据子项次序",prop:"itemSeq"}},[a("el-input",{attrs:{size:"small"},model:{value:e.editModel.itemSeq,callback:function(t){e.$set(e.editModel,"itemSeq",t)},expression:"editModel.itemSeq"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editModel")}}},[e._v("保存")])],1)],1)],1)],1)},uC=[],pC={render:dC,staticRenderFns:uC},mC=pC,hC=a("VU/8"),fC=ie,gC=hC(cC,mC,!1,fC,null,null),vC=gC.exports,bC={name:"displayedTableList",components:{ElOption:jD},data:function(){return{isCreateNode:!0,currentPage:1,pageSize:10,total:0,formInline:{},nodeListParam:[{title:"ID",prop:"deviceId"},{title:"节点类型",prop:"nodeType"},{title:"节点版本",prop:"latestPublishVersion"},{title:"节点名称",prop:"name"}],newNode:{ip:"",host:"",port:"",name:"",deviceId:"",communityId:"",nodeType:"",createUser:"",createTime:"",updateUser:"",updateTime:"",shareFlag:"",nodeStatus:"",latestPublishVersion:"",latestEventTypeList:""},editNode:{deviceId:""},mgmtNodeListSearch:{name:"",nodeType:"全部"},searchRules:{name:[{required:!1,trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:0,max:64,message:"只支持中文,字母,数字和下划线",trigger:"change"}]},rules:{communityId:[{required:!0,message:"请选择一个小区",trigger:"change"}],ip:[{required:!0,message:"请输入节点IP",trigger:"blur"},{pattern:/^(?:(?:1[0-9][0-9]\.)|(?:2[0-4][0-9]\.)|(?:25[0-5]\.)|(?:[1-9][0-9]\.)|(?:[0-9]\.)){3}(?:(?:1[0-9][0-9])|(?:2[0-4][0-9])|(?:25[0-5])|(?:[1-9][0-9])|(?:[0-9]))$/,message:"请输入符合规则的节点IP，如192.168.0.1",trigger:"blur"}],port:[{required:!0,message:"请输入节点端口",trigger:"blur"},{pattern:/^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,message:"请输入端口数字，范围为 0 - 65535 ",trigger:"blur"}],name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:1,max:64,message:"长度在 1 到 64 个字符（只支持中文,字母,数字和下划线）",trigger:"blur"}],deviceId:[{required:!0,message:"请输入设备ID",trigger:"blur"},{pattern:"^[A-Za-z0-9_]+$",message:"只支持字母,数字和下划线",trigger:"blur"}],host:[{required:!0,message:"请输入主机名",trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_.]+$",min:1,max:32,message:'长度在 1 到 32 个字符（只支持中文,字母,数字,下划线和"."）',trigger:"blur"}],nodeType:[{required:!0,message:"请选择节点类型",trigger:"change"}],nodeStatus:[{required:!0,message:"请选择节点状态",trigger:"change"}]},createNodeDialogVisible:!1,editNodeDialogVisible:!1,viewNodePublishHistoryDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,currentNodeStatus:"mm.nodsts.enable",displayedTableList:[],systemNodeTypeList:[],systemNodeStatusList:[],multipleSelection:[],publishHistory:[],systemNodeTypeMap:{},systemNodeStatusMap:{},communityIdList:[],communityIdListMap:{},deviceIdPrefix:"MM_",currentNodeType:"mm.nodtyp.structured",DeviceIdLengthError:!1,DeviceIdEmptyError:!1,DeviceIdInputError:!1}},mounted:function(){var e={catCodeList:"mm.nodtyp|mm.nodsts|community",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemNodeStatusList=xD(e.data,"mm.nodsts"),this.systemNodeStatusMap=wD(this.systemNodeStatusList),this.communityIdList=xD(e.data,CD),this.communityIdListMap=wD(this.communityIdList),console.info("communityId"),console.info(this.communityId),console.info(this.communityIdList),console.info(this.systemNodeTypeList),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={};this.mgmtNodeListSearch.name.length>0?e.name="%"+this.mgmtNodeListSearch.name+"%":e.name=void 0,this.mgmtNodeListSearch.nodeType&&"全部"!==this.mgmtNodeListSearch.nodeType&&"0"!==this.mgmtNodeListSearch.nodeType?e.nodeType=this.mgmtNodeListSearch.nodeType:e.nodeType=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,orderBy:this.createTime,condition:e},a=SD();console.log(t),xy(t).then(function(e){console.log("000000000000000"),console.log(e),this.total=e.data.pageCount,this.displayedTableList=e.data.items,console.log(this.displayedTableList[1].nodeStatus),this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmCreateAlgNode()})},confirmCreateAlgNode:function(){var e=JSON.parse(Bt()(this.newNode));console.log("1234321"),console.log(this.communityId),e.nodeStatus="mm.nodsts.enable",this.newNode.nodeType===this.currentNodeType&&(e.deviceId=this.deviceIdPrefix+this.newNode.deviceId),console.log("00000000000000000000000000000000000000"),console.log(e.deviceId),console.log(e.nodeStatus);var t=SD();Sy(e).then(function(a){var i=this;console.log(a),this.createNodeDialogVisible=!1,this.$nextTick(function(){t.close(),i.loadData()}),e.statusCode=a.data.statusCode.toString(),"201"===e.statusCode&&this.$message({type:"warning",message:"小区端已存在该节点，系统已将小区端节点信息同步至云端",duration:"8000"})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){t.close()})}.bind(this))},confirmEditAlgNode:function(){var e=JSON.parse(Bt()(this.editNode));console.log("youyouyou"),console.log(this.currentNodeType),this.editNode.nodeType===this.currentNodeType&&(e.deviceId="MM_"+this.editNode.deviceId),this.editNode.nodeType!==this.currentNodeType&&(e.deviceId=this.editNode.deviceId),console.log(e);var t=SD();Ny(e).then(function(e){var a=this;console.log(e),this.editNodeDialogVisible=!1,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},nodeStatusChange:function(e,t,a){var i=this,s=t,o="changeStatusToDisable"===a?"停用":"启用",l="确定要"+o+'"'+s.name+'"?';this.$confirm(l,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"mm.nodsts.enable"===s.nodeStatus?(s=JSON.parse(Bt()(i.displayedTableList[e])),s.nodeStatus="mm.nodsts.disable"):"mm.nodsts.disable"===s.nodeStatus&&(s=JSON.parse(Bt()(i.displayedTableList[e])),s.nodeStatus="mm.nodsts.enable");var t=SD();Vy(s).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.editNodeDialogVisible=!1}.bind(i)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(i))})},handleView:function(e,t){this.$router.push({path:"/modelmgmt/dispatchnodemgmt/publishhistory/"+t.mgmtNodePk})},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgNode()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loadData()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){var a=t;Ty(a).then(function(t){this.editNode=JSON.parse(Bt()(this.displayedTableList[e])),this.editNode.nodeType===this.currentNodeType?(this.editNode.deviceIdPrefix="MM_",this.editNode.deviceId=this.editNode.deviceId.split("_")[1]):this.editNode.nodeType!==this.currentNodeType&&(a.deviceId=this.editNode.deviceId),this.editNodeDialogVisible=!0}.bind(this)).catch(function(e){this.loading2=!1,console.info(e)}.bind(this))},calculateNodeMgmt:function(e,t){this.$router.push({path:"/modelmgmt/calculatenodemgmt/"+t.mgmtNodePk}),console.info(t)},inputBlur:function(e){console.info(e),"addIp"===e.target.id&&(this.newNode.ip=this.newNode.ip.trim()),"editIp"===e.target.id&&(this.editNode.ip=this.editNode.ip.trim()),"addPort"===e.target.id&&(this.newNode.port=this.newNode.port.trim()),"editPort"===e.target.id&&(this.editNode.port=this.editNode.port.trim()),"addName"===e.target.id&&(this.newNode.name=this.newNode.name.trim()),"editName"===e.target.id&&(this.editNode.name=this.editNode.name.trim()),"addDeviceId"===e.target.id&&(this.newNode.deviceId=this.newNode.deviceId.trim(),this.DeviceIdLengthError=!1),"editDeviceId"===e.target.id&&(this.editNode.deviceId=this.editNode.deviceId.trim()),"addHost"===e.target.id&&(this.newNode.host=this.newNode.host.trim()),"editHost"===e.target.id&&(this.editNode.host=this.editNode.host.trim()),"search"===e.target.id&&(this.mgmtNodeListSearch.name=this.mgmtNodeListSearch.name.trim())},removeData:function(e,t){var a=this,i=t;this.$confirm('确定要删除"'+i.name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={mgmtNodePk:i.mgmtNodePk.toString()},t=SD();Ly(e).then(function(e){var a=this;this.$message({type:"success",message:"删除成功"}),this.$nextTick(function(){t.close(),a.loadData()})}.bind(a)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showCreateNodeDialog:function(){this.createNodeDialogVisible=!0,this.resetForm("newNode")},confirmAddModel:function(){this.createNodeDialogVisible=!1},handleClose:function(e){this.$refs.newNode&&this.$refs.newNode.clearValidate(),this.$refs.editNode&&this.$refs.editNode.clearValidate(),this.createNodeDialogVisible=!1,this.editNodeDialogVisible=!1},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"delete"===e?this.removeData(t,a):"view"===e?this.handleView(t,a):"changeStatusToDisable"===e?this.nodeStatusChange(t,a,"changeStatusToDisable"):"changeStatusToEnable"===e&&this.nodeStatusChange(t,a,"changeStatusToEnable")},changeNodeType:function(){}}},DC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("管理节点管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[e._m(0),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showCreateNodeDialog()}}},[e._v("添加节点\n              ")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-form",{ref:"mgmtNodeListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.mgmtNodeListSearch,rules:e.searchRules}},[a("el-form-item",{attrs:{label:"节点类型",prop:"nodeType"}},[a("el-select",{attrs:{placeholder:"节点类型"},on:{change:e.loadData},model:{value:e.mgmtNodeListSearch.nodeType,callback:function(t){e.$set(e.mgmtNodeListSearch,"nodeType",t)},expression:"mgmtNodeListSearch.nodeType"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemNodeTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"search"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("mgmtNodeListSearch")}},model:{value:e.mgmtNodeListSearch.name,callback:function(t){e.$set(e.mgmtNodeListSearch,"name",t)},expression:"mgmtNodeListSearch.name"}})],1)]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("mgmtNodeListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.displayedTableList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"主机名"}},[a("span",[e._v(e._s(t.row.host))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点IP"}},[a("span",[e._v(e._s(t.row.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点端口"}},[a("span",[e._v(e._s(t.row.port))])]),e._v(" "),a("el-form-item",{attrs:{label:"最新能力"}},[a("span",[e._v(e._s(t.row.latestEventTypeList))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.communityIdListMap[t.row.communityId]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"节点名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceId",label:"设备ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"latestPublishVersion",label:"最新发布版本","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"节点类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemNodeTypeMap[t.row.nodeType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"节点状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:t.row.nodeStatus==e.currentNodeStatus,red:t.row.nodeStatus!=e.currentNodeStatus}},[a("b",[e._v(e._s(e.systemNodeStatusMap[t.row.nodeStatus]))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计算节点管理",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.calculateNodeMgmt(t.$index,t.row)}}},[e._v("计算节点管理\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(a){e.handleCommand(a,t.$index,t.row)}}},[a("span",{staticClass:"blue cursor-hand el-dropdown-link"},[e._v("\n              更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.row.nodeStatus==e.currentNodeStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"changeStatusToDisable"}},[a("i",{staticClass:"el-icon-remove"}),e._v("停用节点")]):e._e(),e._v(" "),t.row.nodeStatus!=e.currentNodeStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"changeStatusToEnable"}},[a("i",{staticClass:"el-icon-circle-check"}),e._v("启用节点")]):e._e(),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"view"}},[a("i",{staticClass:"el-icon-view"}),e._v("查看节点发布历史")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"edit",divided:""}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v("编辑节点")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"delete"}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除节点")])],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加节点","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.createNodeDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.createNodeDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newNode",staticClass:"demo-ruleForm",attrs:{model:e.newNode,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点类型",prop:"nodeType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择节点类型"},model:{value:e.newNode.nodeType,callback:function(t){e.$set(e.newNode,"nodeType",t)},expression:"newNode.nodeType"}},e._l(e.systemNodeTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"小区",prop:"communityId"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择一个小区"},model:{value:e.newNode.communityId,callback:function(t){e.$set(e.newNode,"communityId",t)},expression:"newNode.communityId"}},e._l(e.communityIdList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{id:"addName",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.name,callback:function(t){e.$set(e.newNode,"name",t)},expression:"newNode.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机名",prop:"host"}},[a("el-input",{attrs:{id:"addHost",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.host,callback:function(t){e.$set(e.newNode,"host",t)},expression:"newNode.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{attrs:{id:"addIp",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.ip,callback:function(t){e.$set(e.newNode,"ip",t)},expression:"newNode.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{attrs:{id:"addPort",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.port,callback:function(t){e.$set(e.newNode,"port",t)},expression:"newNode.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备ID",prop:"deviceId"}},[e.newNode.nodeType==e.currentNodeType?a("el-input",{attrs:{id:"addDeviceId",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.deviceId,callback:function(t){e.$set(e.newNode,"deviceId",t)},expression:"newNode.deviceId"}},[a("template",{slot:"prepend"},[e._v(e._s(e.deviceIdPrefix))])],2):e._e(),e._v(" "),e.newNode.nodeType==e.currentNodeType&&e.newNode.deviceId.length>29?a("span",{staticClass:"red"},[e._v("设备ID总长度不能超过32位")]):e._e(),e._v(" "),e.newNode.nodeType!=e.currentNodeType?a("el-input",{attrs:{id:"addDeviceId",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.deviceId,callback:function(t){e.$set(e.newNode,"deviceId",t)},expression:"newNode.deviceId"}}):e._e(),e._v(" "),e.newNode.nodeType!=e.currentNodeType&&e.newNode.deviceId.length>32?a("span",{staticClass:"red"},[e._v("设备ID总长度不能超过32位")]):e._e()],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newNode")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑节点","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editNodeDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editNodeDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editNode",staticClass:"demo-ruleForm",attrs:{model:e.editNode,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点类型",prop:"nodeType"},on:{change:e.changeNodeType}},[a("el-select",{attrs:{size:"small",value:"editNode.nodeType"},model:{value:e.editNode.nodeType,callback:function(t){e.$set(e.editNode,"nodeType",t)},expression:"editNode.nodeType"}},e._l(e.systemNodeTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{id:"editName",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.name,callback:function(t){e.$set(e.editNode,"name",t)},expression:"editNode.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机名",prop:"host"}},[a("el-input",{attrs:{id:"editHost",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.host,callback:function(t){e.$set(e.editNode,"host",t)},expression:"editNode.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{attrs:{id:"editIp",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.ip,callback:function(t){e.$set(e.editNode,"ip",t)},expression:"editNode.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{attrs:{id:"editPort",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.port,callback:function(t){e.$set(e.editNode,"port",t)},expression:"editNode.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备ID",prop:"deviceId"}},[e.editNode.nodeType==e.currentNodeType?a("el-input",{attrs:{id:"editDeviceId",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.deviceId,callback:function(t){e.$set(e.editNode,"deviceId",t)},expression:"editNode.deviceId"}},[a("template",{slot:"prepend"},[e._v(e._s(e.deviceIdPrefix))])],2):e._e(),e._v(" "),e.editNode.nodeType==e.currentNodeType&&e.editNode.deviceId.length>29?a("span",{staticClass:"red"},[e._v("设备ID总长度不能超过32位")]):e._e(),e._v(" "),e.editNode.nodeType!=e.currentNodeType?a("el-input",{attrs:{id:"editDeviceId",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.deviceId,callback:function(t){e.$set(e.editNode,"deviceId",t)},expression:"editNode.deviceId"}}):e._e(),e._v(" "),e.editNode.nodeType!=e.currentNodeType&&e.editNode.deviceId.length>32?a("span",{staticClass:"red"},[e._v("设备ID总长度不能超过32位")]):e._e()],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editNode")}}},[e._v("保存")])],1)],1)],1)],1)},yC=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-title"},[a("i",{staticClass:"el-icon-news"}),e._v(" 管理节点")])}],CC={render:DC,staticRenderFns:yC},_C=CC,wC=a("VU/8"),SC=se,xC=wC(bC,_C,!1,SC,null,null),kC=xC.exports,TC=function(e){return mt.a.post(bD+"/modelproxynode/addproxynode",e).then(function(e){return e.data})},LC=function(e){return console.log("data:"+e),mt.a.post(bD+"/modelproxynode/getproxynode",e).then(function(e){return e.data})},NC=function(e){return mt.a.get(bD+"/modelnode/getmgmtnodebyid/"+e.mgmtNodePk).then(function(e){return e.data})},VC=function(e){return mt.a.post(bD+"/modelproxynode/updateproxynode",e).then(function(e){return e.data})},IC=function(e){return mt.a.get(bD+"/modelproxynode/deleteproxynode",{params:e}).then(function(e){return e.data})},EC={name:"displayedTableList",components:{ElOption:jD},data:function(){return{currentStep:1,currentPage:1,pageSize:10,total:0,formInline:{},nodeListParam:[{title:"ID",prop:"id"},{title:"节点类型",prop:"nodeType"},{title:"节点版本",prop:"nodeVersion"},{title:"节点名称",prop:"nodeName"},{title:"节点运行时列表",prop:"runtimeTypeList"}],newNode:{name:"",ip:"",host:"",nodeType:"",deviceId:"",port:"",runtimeTypeList:"",maxTaskNum:"",communityId:"",createUser:"",createTime:"",updateUser:"",updateTime:"",nodeStatus:"",statusCode:""},newRunTimeOfProxyNode:{proxyNodePk:this.$route.params.proxyNodePk,runTimeType:"",exePath:"",exeCommand:""},activeNames:["1"],editNode:{},currentNode:{},currentProxyNode:{},nodeListSearch:{name:"",type:"全部"},rules:{ip:[{required:!0,message:"请输入节点IP",trigger:"blur"},{pattern:/^(?:(?:1[0-9][0-9]\.)|(?:2[0-4][0-9]\.)|(?:25[0-5]\.)|(?:[1-9][0-9]\.)|(?:[0-9]\.)){3}(?:(?:1[0-9][0-9])|(?:2[0-4][0-9])|(?:25[0-5])|(?:[1-9][0-9])|(?:[0-9]))$/,message:"请输入符合规则的节点IP，如192.168.0.1",trigger:"blur"}],port:[{required:!0,message:"请输入节点端口",trigger:"blur"},{pattern:/^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,message:"请输入端口数字，范围为 0 - 65535 ",trigger:"blur"}],name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:1,max:64,message:"长度在 1 到 64 个字符（只支持中文,字母,数字和下划线）",trigger:"blur"}],host:[{required:!0,message:"请输入主机名",trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_.]+$",min:1,max:32,message:'长度在 1 到 32 个字符（只支持中文,字母,数字,下划线和"."）',trigger:"blur"}],nodeStatus:[{required:!0,message:"请选择节点状态",trigger:"change"}],maxTaskNum:[{required:!0,message:"请输入最大任务数量",trigger:"blur"},{pattern:/^[1-9][0-9]{0,4}$/,message:"请输入数字，范围为 1 - 99999",trigger:"blur"}]},loadingModelInfo:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,createNodeDialogVisible:!1,editNodeDialogVisible:!1,viewRuntimeListVisible:!1,displayedTableList:[],displayedRuntimeList:[],multipleSelection:[],viewRuntimeList:[],systemNodeTypeList:[],systemNodeStatusList:[],systemNodeTypeMap:{},systemNodeStatusMap:{},communityIdMap:{},communityId:[],currentNodeStatus:"mm.nodsts.enable"}},mounted:function(){var e={catCodeList:"mm.nodtyp|mm.nodsts|community",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemNodeStatusList=xD(e.data,"mm.nodsts"),this.systemNodeStatusMap=wD(this.systemNodeStatusList),this.communityId=xD(e.data,CD),this.communityIdMap=wD(this.communityId),this.$nextTick(function(){t.close(),a.getCurNodeByNodePk()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e=SD(),t={currentPage:this.currentPage,pageSize:this.pageSize,orderBy:"",condition:{mgmtNodePk:this.$route.params.mgmtNodePk}};console.log("1234567890-------------"+t.condition.mgmtNodePk),LC(t).then(function(t){console.log("00000000000000000000"),console.log(this.displayedTableList),this.displayedTableList=t.data.items,this.total=t.data.pageCount,this.$nextTick(function(){e.close()})}.bind(this)).catch(function(t){console.info(t),this.$nextTick(function(){e.close()})})},getCurNodeByNodePk:function(){var e={mgmtNodePk:this.$route.params.mgmtNodePk},t=SD();NC(e).then(function(e){var a=this;this.currentNode=e.data,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){t.close()})}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmCreateAlgNode()})},confirmCreateAlgNode:function(){var e=this.newNode;e.mgmtNodePk=this.currentNode.mgmtNodePk,e.communityId=this.currentNode.communityId,e.nodeType=this.currentNode.nodeType,e.nodeStatus=this.systemNodeStatusList[1].item_code,console.log("00000000000000000000000000000000000000111"),console.log(e.nodeStatus);var t=SD();TC(e).then(function(a){var i=this;console.log(a),console.log(e.statusCode),this.createNodeDialogVisible=!1,this.$nextTick(function(){t.close(),i.loadData()}),e.statusCode=a.data.statusCode.toString(),"201"===e.statusCode&&this.$message({type:"warning",message:"小区端已存在该节点，系统已将小区端节点信息同步至云端",duration:"8000"})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},confirmEditAlgNode:function(){var e=this.editNode,t=SD();console.log("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),console.log(e),VC(e).then(function(e){var a=this;console.log(e),this.editNodeDialogVisible=!1,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){t.close()})}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgNode()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){console.log("submit!"),this.loadData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.editNode=JSON.parse(Bt()(this.displayedTableList[e])),this.editNode.port=t.port.toString(),this.editNode.maxTaskNum=t.maxTaskNum.toString(),console.log("555555555555555555"),console.log(t),this.editNodeDialogVisible=!0},modelVersionMgmt:function(e,t){this.$router.push({path:"/modelnode/getmgmtnodebyid"}),console.info(t)},removeData:function(e,t){var a=this,i=t;this.$confirm('确定要删除"'+i.name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={proxyNodePk:i.proxyNodePk.toString(),mgmtNodePk:i.mgmtNodePk.toString()},t=SD();IC(e).then(function(e){var a=this;this.$nextTick(function(){t.close(),a.loadData()}),this.$message({type:"success",message:"删除成功"})}.bind(a)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showCreateNodeDialog:function(){this.createNodeDialogVisible=!0,this.resetForm("newNode")},confirmAddModel:function(){this.createNodeDialogVisible=!1},handleClose:function(e){this.$refs.newNode&&this.$refs.newNode.clearValidate(),this.$refs.editNode&&this.$refs.editNode.clearValidate(),this.createNodeDialogVisible=!1,this.editNodeDialogVisible=!1,this.viewRuntimeListVisible=!1},closeCreateProxyNode:function(){2===this.currentStep&&this.loadData()},showProgress:function(){console.info("In Progress")},runtimeMgmt:function(e,t){this.$router.push({path:"/modelmgmt/runtime/"+this.$route.params.mgmtNodePk+"/"+t.proxyNodePk}),console.info(t)},nodeStatusChange:function(e,t,a){var i=this,s=t,o="changeStatusToDisable"===a?"停用":"启用",l="确定要"+o+'"'+s.name+'"?';this.$confirm(l,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=SD();"mm.nodsts.enable"===s.nodeStatus?(s=JSON.parse(Bt()(i.displayedTableList[e])),s.nodeStatus="mm.nodsts.disable"):"mm.nodsts.disable"===s.nodeStatus&&(s=JSON.parse(Bt()(i.displayedTableList[e])),s.nodeStatus="mm.nodsts.enable"),VC(s).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.editNodeDialogVisible=!1}.bind(i)).catch(function(e){console.info(e),this.$nextTick(function(){t.close()})}.bind(i))})},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"delete"===e?this.removeData(t,a):"view"===e?this.handleView(t,a):"changeStatusToDisable"===e?this.nodeStatusChange(t,a,"changeStatusToDisable"):"changeStatusToEnable"===e&&this.nodeStatusChange(t,a,"changeStatusToEnable")},inputBlur:function(e){console.info(e),"addIp"===e.target.id&&(this.newNode.ip=this.newNode.ip.trim()),"addPort"===e.target.id&&(this.newNode.port=this.newNode.port.trim()),"addName"===e.target.id&&(this.newNode.name=this.newNode.name.trim()),"editName"===e.target.id&&(this.editNode.name=this.editNode.name.trim()),"addHost"===e.target.id&&(this.newNode.host=this.newNode.host.trim()),"addMaxTaskNum"===e.target.id&&(this.newNode.maxTaskNum=this.newNode.maxTaskNum.trim()),"editMaxTaskNum"===e.target.id&&(this.editNode.maxTaskNum=this.editNode.maxTaskNum.trim())}}},PC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/dispatchnodemgmt"}}},[e._v("管理节点管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("计算节点管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingModelInfo,expression:"loadingModelInfo"}],attrs:{title:e.currentNode.name,name:"1"}},[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"节点类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemNodeTypeMap[e.currentNode.nodeType]))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"节点名称"}},[a("span",[e._v(e._s(e.currentNode.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"主机名"}},[a("span",[e._v(e._s(e.currentNode.host))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点IP"}},[a("span",[e._v(e._s(e.currentNode.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemNodeStatusMap[e.currentNode.nodeStatus]))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(e.currentNode.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentNode.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(e.currentNode.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentNode.updateTime)))])])],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"margin-top-30",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[0!=e.displayedTableList.length?a("el-button",{attrs:{disabled:!0,type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showCreateNodeDialog()}}},[e._v("添加计算节点")]):e._e(),e._v(" "),0===e.displayedTableList.length?a("el-button",{attrs:{disabled:!1,type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showCreateNodeDialog()}}},[e._v("添加计算节点")]):e._e()],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加计算节点","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.createNodeDialogVisible,width:"40%","before-close":e.handleClose},on:{close:function(t){e.closeCreateProxyNode()},"update:visible":function(t){e.createNodeDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newNode",staticClass:"demo-ruleForm",attrs:{model:e.newNode,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{id:"addName",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.name,callback:function(t){e.$set(e.newNode,"name",t)},expression:"newNode.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{attrs:{id:"addIp",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.ip,callback:function(t){e.$set(e.newNode,"ip",t)},expression:"newNode.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{attrs:{id:"addPort",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.port,callback:function(t){e.$set(e.newNode,"port",t)},expression:"newNode.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机名",prop:"host"}},[a("el-input",{attrs:{id:"addHost",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.host,callback:function(t){e.$set(e.newNode,"host",t)},expression:"newNode.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最大任务数量",prop:"maxTaskNum"}},[a("el-input",{attrs:{id:"addMaxTaskNum",size:"small"},on:{blur:e.inputBlur},model:{value:e.newNode.maxTaskNum,callback:function(t){e.$set(e.newNode,"maxTaskNum",t)},expression:"newNode.maxTaskNum"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newNode")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑计算节点","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editNodeDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editNodeDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editNode",staticClass:"demo-ruleForm",attrs:{model:e.editNode,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{attrs:{id:"editName",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.name,callback:function(t){e.$set(e.editNode,"name",t)},expression:"editNode.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主机名",prop:"host"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.editNode.host,callback:function(t){e.$set(e.editNode,"host",t)},expression:"editNode.host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点IP",prop:"ip"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.editNode.ip,callback:function(t){e.$set(e.editNode,"ip",t)},expression:"editNode.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点端口",prop:"port"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:e.editNode.port,callback:function(t){e.$set(e.editNode,"port",t)},expression:"editNode.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最大任务数量",prop:"maxTaskNum"}},[a("el-input",{attrs:{id:"editMaxTaskNum",size:"small"},on:{blur:e.inputBlur},model:{value:e.editNode.maxTaskNum,callback:function(t){e.$set(e.editNode,"maxTaskNum",t)},expression:"editNode.maxTaskNum"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editNode")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.displayedTableList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"节点名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"host",label:"主机名",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"节点IP",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"节点状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:t.row.nodeStatus==e.currentNodeStatus,red:t.row.nodeStatus!=e.currentNodeStatus}},[a("b",[e._v(e._s(e.systemNodeStatusMap[t.row.nodeStatus]))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"maxTaskNum",label:"最大任务数量",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"运行时管理",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.runtimeMgmt(t.$index,t.row)}}},[e._v("运行时管理\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(a){e.handleCommand(a,t.$index,t.row)}}},[a("span",{staticClass:"blue cursor-hand el-dropdown-link"},[e._v("\n              更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.row.nodeStatus==e.currentNodeStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"changeStatusToDisable"}},[a("i",{staticClass:"el-icon-remove"}),e._v("停用节点")]):e._e(),e._v(" "),t.row.nodeStatus!=e.currentNodeStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"changeStatusToEnable"}},[a("i",{staticClass:"el-icon-circle-check"}),e._v("启用节点")]):e._e(),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"edit",divided:""}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v("编辑节点")]),e._v(" "),a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"delete"}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除节点")])],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},MC=[],$C={render:PC,staticRenderFns:MC},UC=$C,FC=a("VU/8"),RC=oe,zC=FC(EC,UC,!1,RC,"data-v-01f53dc3",null),AC=zC.exports,OC=function(e){return mt.a.post(bD+"/modelmgmt/meta/metaCat/list",e).then(function(e){return e.data})},qC=function(e){return mt.a.get(bD+"/modelmgmt/meta/metaCat/delete",{params:e}).then(function(e){return e.data})},BC=function(e){return mt.a.post(bD+"/modelmgmt/meta/metaCat/insert",e).then(function(e){return e.data})},WC=function(e){return mt.a.post(bD+"/modelmgmt/meta/metaCat/update",e).then(function(e){return e.data})},QC={name:"modelList",components:{ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,currentStep:1,formInline:{user:"",region:""},newModel:{metaCatPk:"",catName:"",catCode:"",catDesc:"",sysFlag:"0",createTime:"",updateTime:"",createUser:"",updateUser:""},editModel:{},modelListSearch:{catName:"",type:"全部"},searchRules:{catName:[{required:!1,trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:0,max:64,message:"只支持中文,字母,数字和下划线",trigger:"change"}]},rules:{catName:[{required:!0,message:"请输入元数据分类名称",trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:1,max:64,message:"长度在 1 到 64 个字符（只支持中文,字母,数字和下划线）",trigger:"blur"}],catCode:[{required:!0,message:"请输入元数据分类代码",trigger:"blur"},{pattern:"^[A-Za-z0-9_.]+$",min:1,max:32,message:'长度在 1 到 32 个字符（只支持字母,数字,下划线和"."）',trigger:"blur"}],catDesc:[{min:0,max:256,message:"长度在 1 到 256 个字符",trigger:"blur"}]},addModelDialogVisible:!1,editModelDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,modelList:[],multipleSelection:[]}},mounted:function(){this.loadData()},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={};this.modelListSearch.catName.length>0?e.catName="%"+this.modelListSearch.catName+"%":e.catName=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e,orderBy:"createTime"};console.log(t);var a=SD();OC(t).then(function(e){this.modelList=e.data.items,this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},confirmAddAlgModel:function(){var e=this.newModel;console.log(e);var t=SD();BC(e).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.addModelDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmAddAlgModel()})},confirmEditAlgModel:function(){var e=this.editModel;console.log(e);var t=SD();WC(e).then(function(e){var a=this;console.log(e),this.editModelDialogVisible=!1,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgModel()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(e){var t=this;console.log("submit!"),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loadData()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.editModel=JSON.parse(Bt()(this.modelList[e])),this.editModelDialogVisible=!0},inputBlur:function(e){console.info(e),"addCatName"===e.target.id&&(this.newModel.catName=this.newModel.catName.trim()),"addCatCode"===e.target.id&&(this.newModel.catCode=this.newModel.catCode.trim()),"addCatDesc"===e.target.id&&(this.newModel.catDesc=this.newModel.catDesc.trim()),"editCatName"===e.target.id&&(this.editModel.catName=this.editModel.catName.trim()),"editCatCode"===e.target.id&&(this.editModel.catCode=this.editModel.catCode.trim()),"editCatDesc"===e.target.id&&(this.editModel.catDesc=this.editModel.catDesc.trim()),"searchName"===e.target.id&&(this.modelListSearch.catName=this.modelListSearch.catName.trim())},metaItemMgmt:function(e,t){this.$router.push({path:"/modelmgmt/metacat/"+t.metaCatPk+"/metaitem"}),console.info(t)},removeData:function(e,t){var a=this,i=this.modelList[e];this.$confirm('确定要删除"'+i.catName+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.delete(i.metaCatPk,i)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){var a={id:e,catCode:t.catCode},i=SD();qC(a).then(function(e){var a=this;this.modelList.splice(t,1),this.$message({type:"success",message:"删除成功!"}),this.$nextTick(function(){i.close(),a.loadData()})}.bind(this)).catch(function(e){this.$nextTick(function(){i.close()}),console.log(e)}.bind(this))},showAddModelDialog:function(){this.resetForm("newModel"),this.currentStep=1,this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},handleClose:function(e){this.$refs.newModel&&this.$refs.newModel.clearValidate(),this.$refs.editModel&&this.$refs.editModel.clearValidate(),this.addModelDialogVisible=!1,this.editModelDialogVisible=!1},searchModelByName:function(e){e.stopPropagation(),e.preventDefault(),this.loadData()}}},GC=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("元数据管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[e._m(0),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("添加元数据类别")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch,rules:e.searchRules}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"占位符"}},[a("el-input",{attrs:{placeholder:"占位符"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据分类名称",prop:"catName"}},[a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"searchName"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("modelListSearch")}},model:{value:e.modelListSearch.catName,callback:function(t){e.$set(e.modelListSearch,"catName",t)},expression:"modelListSearch.catName"}})],1)]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"catName",label:"元数据分类名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"catCode",label:"元数据分类代码","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"catDesc",label:"元数据分类描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"是否为系统参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.sysFlag?"是":"否")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"元数据子项管理",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.metaItemMgmt(t.$index,t.row)}}},[e._v("子项管理\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.row.sysFlag,expression:"!scope.row.sysFlag"}],staticClass:"item",attrs:{effect:"dark",content:"编辑元数据分类",placement:"top"}},[a("i",{staticClass:"cursor-hand model-eidt font-size-20 el-icon-edit-outline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.row.sysFlag,expression:"!scope.row.sysFlag"}],staticClass:"item",attrs:{effect:"dark",content:"删除元数据分类",placement:"top"}},[a("i",{staticClass:"red cursor-hand model-delete font-size-20 el-icon-delete",on:{click:function(a){e.removeData(t.$index,t.row)}}})])]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加元数据分类","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.addModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.addModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newModel",staticClass:"demo-ruleForm",attrs:{model:e.newModel,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"元数据分类名称",prop:"catName"}},[a("el-input",{attrs:{id:"addCatName",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.catName,callback:function(t){e.$set(e.newModel,"catName",t)},expression:"newModel.catName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据分类代码",prop:"catCode"}},[a("el-input",{attrs:{id:"addCatCode",size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.catCode,callback:function(t){e.$set(e.newModel,"catCode",t)},expression:"newModel.catCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据分类描述",prop:"catDesc"}},[a("el-input",{attrs:{id:"addCatDesc",autosize:{minRows:2,maxRows:10},type:"textarea"},on:{blur:e.inputBlur},model:{value:e.newModel.catDesc,callback:function(t){e.$set(e.newModel,"catDesc",t)},expression:"newModel.catDesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newModel")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑元数据分类","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editModel",staticClass:"demo-ruleForm",attrs:{model:e.editModel,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"元数据分类名称",prop:"catName"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1===e.editModel.sysFlag,expression:"editModel.sysFlag===1"}],attrs:{disabled:!0,id:"editCatName",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.catName,callback:function(t){e.$set(e.editModel,"catName",t)},expression:"editModel.catName"}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:0===e.editModel.sysFlag,expression:"editModel.sysFlag===0"}],attrs:{disabled:!1,id:"editCatName",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.catName,callback:function(t){e.$set(e.editModel,"catName",t)},expression:"editModel.catName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据分类代码",prop:"catCode"}},[a("el-input",{attrs:{disabled:!0,id:"editCatCode",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.catCode,callback:function(t){e.$set(e.editModel,"catCode",t)},expression:"editModel.catCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"元数据分类描述",prop:"catDesc"}},[a("el-input",{attrs:{id:"editCatDesc",autosize:{minRows:2,maxRows:10},type:"textarea"},on:{blur:e.inputBlur},model:{value:e.editModel.catDesc,callback:function(t){e.$set(e.editModel,"catDesc",t)},expression:"editModel.catDesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editModel")}}},[e._v("保存")])],1)],1)],1)],1)},HC=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-title"},[a("i",{staticClass:"el-icon-news"}),e._v(" 元数据类别管理")])}],jC={render:GC,staticRenderFns:HC},JC=jC,ZC=a("VU/8"),KC=le,YC=ZC(QC,JC,!1,KC,"data-v-1c0ca884",null),XC=YC.exports,e_={name:"model-info-componenet",data:function(){return{activeNames:["1"],loadingModelInfo:!1,modelVersionEnableStatus:"mm.versts.enable",modelEnableStatus:"mm.modsts.enable",systemModelStatusMap:{},systemModelVersionStatusMap:{},systemNodeTypeMap:{},systemModelEventMap:{},systemModelCatMap:{},systemModelRuntimeMap:{},currentModel:{}}},props:["curModelId"],mounted:function(){var e={catCodeList:"mm.modsts|mm.versts|mm.nodtyp|mm.evttyp|mm.modcat|mm.rtmtyp",needCommunity:!1},t=SD();setTimeout(function(){_D(e).then(function(e){var a=this;console.log(e),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),this.systemModelVersionStatusList=xD(e.data,"mm.versts"),this.systemModelVersionStatusMap=wD(this.systemModelVersionStatusList),this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.$nextTick(function(){t.close(),a.getModelById()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))}.bind(this),500)},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{getModelById:function(){var e={id:this.curModelId},t=SD();LD(e).then(function(e){console.log(" result.data.total "+e.data.length),this.$nextTick(function(){t.close()}),this.currentModel=e.data}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))}}},t_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingModelInfo,expression:"loadingModelInfo"}],attrs:{title:e.currentModel.name,name:"1"}},[a("div",{staticClass:"model-desc"},[e._v(e._s(e.currentModel.description))]),e._v(" "),a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"模型状态"}},[a("span",{class:{green:e.currentModel.modelStatus==e.modelEnableStatus,red:e.currentModel.modelStatus!=e.modelEnableStatus}},[a("b",[e._v(e._s(e.systemModelStatusMap[e.currentModel.modelStatus]))])])]),e._v(" "),a("el-form-item",{attrs:{label:"模型Code"}},[a("span",[e._v(e._s(e.currentModel.code))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点类型"}},[a("span",[e._v(e._s(e.systemNodeTypeMap[e.currentModel.nodeType]))])]),e._v(" "),a("el-form-item",{attrs:{label:"模型分类"}},[a("span",[e._v(e._s(e.systemModelCatMap[e.currentModel.modelCat]))])]),e._v(" "),a("el-form-item",{attrs:{label:"运行时"}},[a("span",[e._v(e._s(e.systemModelRuntimeMap[e.currentModel.runtimeType]))])]),e._v(" "),a("el-form-item",{attrs:{label:"模型能力"}},[e.currentModel.eventTypeList?a("div",e._l(e.currentModel.eventTypeList.split("|"),function(t){return a("span",{staticClass:"event-border"},[e._v("\n                  "+e._s(e.systemModelEventMap[t])+"\n                ")])})):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"是否实时"}},[e.currentModel.realtimeFlag?a("span",[e._v("是")]):e._e(),e._v(" "),e.currentModel.realtimeFlag?e._e():a("span",[e._v("否")])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(e.currentModel.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentModel.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(e.currentModel.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentModel.createTime)))])])],1)],1)])],1)},a_=[],i_={render:t_,staticRenderFns:a_},s_=i_,o_=a("VU/8"),l_=re,r_=o_(e_,s_,!1,l_,null,null),n_=r_.exports,c_={name:"model-version-info-componenet",data:function(){return{activeNames:["1"],loadingModelInfo:!1,loadingVersion:!1,modelVersionEnableStatus:"mm.versts.enable",modelEnableStatus:"mm.modsts.enable",systemModelStatusMap:{},systemModelVersionStatusMap:{},systemNodeTypeMap:{},systemModelEventMap:{},systemModelCatMap:{},systemModelRuntimeMap:{},currentVersion:{}}},props:["curVersionId"],mounted:function(){var e={catCodeList:"mm.modsts|mm.versts|mm.nodtyp|mm.evttyp|mm.modcat|mm.rtmtyp",needCommunity:!1},t=SD();setTimeout(function(){_D(e).then(function(e){var a=this;console.log(e),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),this.systemModelVersionStatusList=xD(e.data,"mm.versts"),this.systemModelVersionStatusMap=wD(this.systemModelVersionStatusList),this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.$nextTick(function(){t.close(),a.getModelById()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))}.bind(this),500)},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{getModelById:function(){var e={id:this.curVersionId},t=SD();by(e).then(function(e){console.log(" result.data.total "+e.data.length),this.$nextTick(function(){t.close()}),this.currentVersion=e.data}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))}}},d_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingVersion,expression:"loadingVersion"}],attrs:{title:e.currentVersion.versionNo,name:"1"}},[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"版本号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.currentVersion.versionNo))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"版本描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.currentVersion.description))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"算法文件"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:e.currentVersion.fileUploadFlag,expression:"currentVersion.fileUploadFlag"}],staticClass:"green"},[e._v("已上传")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.currentVersion.fileUploadFlag,expression:"!currentVersion.fileUploadFlag"}],staticClass:"red"},[e._v("未上传")])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:e.currentVersion.versionStatus==e.modelVersionEnableStatus,red:e.currentVersion.versionStatus!=e.modelVersionEnableStatus}},[e._v(e._s(e.systemModelVersionStatusMap[e.currentVersion.versionStatus]))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"创建人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.currentVersion.createUser))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(e.currentVersion.createTime)))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"更新人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.currentVersion.updateUser))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(e.currentVersion.updateTime)))])]}}])})],1)],1)])],1)},u_=[],p_={render:d_,staticRenderFns:u_},m_=p_,h_=a("VU/8"),f_=ne,g_=h_(c_,m_,!1,f_,null,null),v_=g_.exports,b_=function(e){return mt.a.post(bD+"/modeltaskplan/addTaskPlan",e,{timeout:5e4}).then(function(e){return e.data})},D_=function(e){return mt.a.post(bD+"/modeltaskplan/update",e).then(function(e){return e.data})},y_=function(e){return mt.a.post(bD+"/modeltaskplan/algtask/planlist",e).then(function(e){return e.data})},C_=function(e){return mt.a.get(bD+"/modeltaskplan/delete",{params:e}).then(function(e){return e.data})},__=function(e){return mt.a.get(bD+"/modeltaskplan/stop",{params:e}).then(function(e){return e.data})},w_={components:{modelVersionInfoComponenet:v_,modelInfoComponenet:n_,ElOption:jD},data:function(){return{currentPage:1,pageSize:10,currentStep:1,total:0,formInline:{user:"",region:""},paramId:this.$route.params.id,newTaskPlan:{name:"",startTime:"",endTime:""},editTaskPlan:{},modelListSearch:{name:"",taskType:"全部",taskSource:"全部",planStatus:"全部"},rules:{name:[{required:!0,message:"请输入计划名称",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"}],communityId:[{required:!0,message:"请选择执行小区",trigger:"change"}],frequencyType:[{required:!0,message:"请选择执行频率",trigger:"change"}]},uploadParam:{url:"/scp-modelmgmtcomponent/modelmgmt/web/uploadModelFile",data:{}},cron:"",excuteParamsDialogVisible:!1,curPlanExcuteParams:[],curEditExcuteVersionParams:[],isStartTimeError:!1,isEndTimeErrorNoStart:!1,isEndTimeErrorBefore:!1,editNewPlanLoading:!1,loadingExcuteParam:!1,planEndTime:"",planStartTime:"",planStartEndTime:[],currentVersionId:0,curExcuteVersionParams:[],planFrequencyList:[],addNewPlanLoading:!1,showModelInfo:!1,showUploadArea:!0,uploadInterval:"",uploadFileStatus:"",fileUploadProgress:10,versionPublishedStatus:"mm.pubsts.publish",modelVersionEnableStatus:"mm.versts.enable",modelEnableStatus:"mm.modsts.enable",systemModelStatusList:[],systemModelVersionStatusList:[],systemNodeTypeList:[],systemModelEventList:[],systemModelCatList:[],systemModelRuntimeList:[],curPlanPublishCommunityList:[],systemModelStatusMap:{},systemModelVersionStatusMap:{},systemTaskTypeList:[],systemTaskSourceList:[],systemPlanStatusList:[],systemFrequencyList:[],systemCommunityList:[],systemNodeTypeMap:{},systemModelEventMap:{},systemModelCatMap:{},systemModelRuntimeMap:{},systemTaskTypeMap:{},systemTaskSourceMap:{},systemPlanStatusMap:{},systemFrequencyMap:{},systemCommunityMap:{},addModelDialogVisible:!1,editModelDialogVisible:!1,uploadDialogVisible:!1,loadingModelInfo:!1,loadingVersion:!1,loadingStep:!1,modelPlanList:[],multipleSelection:[]}},mounted:function(){this.currentVersionId=this.$route.params.versionId,clearInterval(this.uploadInterval);var e={catCodeList:"mm.modsts|mm.versts|mm.nodtyp|mm.evttyp|mm.modcat|mm.rtmtyp|mm.frqtyp|mm.plnsts|mm.tsktyp|mm.tsksrc",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),this.systemModelVersionStatusList=xD(e.data,"mm.versts"),this.systemModelVersionStatusMap=wD(this.systemModelVersionStatusList),this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.systemTaskTypeList=xD(e.data,"mm.tsktyp"),this.systemTaskTypeMap=wD(this.systemTaskTypeList),this.systemTaskSourceList=xD(e.data,"mm.tsksrc"),this.systemTaskSourceMap=wD(this.systemTaskSourceList),this.systemPlanStatusList=xD(e.data,"mm.plnsts"),this.systemPlanStatusMap=wD(this.systemPlanStatusList),this.systemFrequencyList=xD(e.data,"mm.frqtyp"),this.systemFrequencyMap=wD(this.systemFrequencyList),this.systemCommunityList=xD(e.data,CD),this.systemCommunityMap=wD(this.systemCommunityList),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{imitateProgress:function(e){this.fileUploadProgress=10;var t=this,a=parseInt(e/4e3),i=parseInt(a/100);this.uploadInterval=setInterval(function(){console.info(t.fileUploadProgress),"success"!==t.uploadFileStatus&&"exception"!==t.uploadFileStatus&&(t.fileUploadProgress<95?t.fileUploadProgress++:clearInterval(t.uploadInterval))},i)},closeAddModel:function(){2===this.currentStep&&this.loadData()},closeUploadModel:function(){this.loadData(),this.uploadDialogVisible=!1},loadData:function(){var e={};this.modelListSearch.name.length>0?e.name="%"+this.modelListSearch.name+"%":e.name=void 0,this.$route.params.versionId&&(e.algModelVersionPk=this.$route.params.versionId),!this.$route.params.versionId&&this.$route.params.modelId&&(e.algModelPk=this.$route.params.modelId),this.modelListSearch.taskType&&"全部"!==this.modelListSearch.taskType&&"0"!==this.modelListSearch.taskType?e.taskType=this.modelListSearch.taskType:e.taskType=void 0,this.modelListSearch.taskSource&&"全部"!==this.modelListSearch.taskSource&&"0"!==this.modelListSearch.taskSource?e.taskSource=this.modelListSearch.taskSource:e.taskSource=void 0,this.modelListSearch.planStatus&&"全部"!==this.modelListSearch.planStatus&&"0"!==this.modelListSearch.planStatus?e.planStatus=this.modelListSearch.planStatus:e.planStatus=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e},a=SD();y_(t).then(function(e){console.log(" result.data.total "+e.data.items.length),this.modelPlanList=e.data.items,this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},confirmAddPlan:function(){if(this.newTaskPlan.startTime||(this.isEndTimeErrorNoStart=!0),!(this.isStartTimeError||this.isEndTimeErrorNoStart||this.isEndTimeErrorBefore)){var e=new Date(this.newTaskPlan.endTime).getTime(),t=this.newTaskPlan.startTime?new Date(this.newTaskPlan.startTime).getTime():0;if(console.info(t),!t)return void(this.isEndTimeErrorNoStart=!0);if(e<t)return void(this.isEndTimeErrorBefore=!0);console.info(this.newTaskPlan),this.newTaskPlan.algModelVersionPk=this.currentVersionId,this.newTaskPlan.executeParams=this.curExcuteVersionParams,this.newTaskPlan.communityIds=[this.newTaskPlan.communityId];var a=this.newTaskPlan,i=SD();b_(a).then(function(e){var t=this;this.$nextTick(function(){i.close(),t.loadData()}),this.addModelDialogVisible=!1}.bind(this)).catch(function(e){this.addNewPlanLoading=!1,this.$nextTick(function(){i.close()}),console.info(e)}.bind(this))}},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;"editTaskPlan"===e?t.confirmEditPlan():t.confirmAddPlan()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){console.log("submit!"),this.loadData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},confirmEditPlan:function(){if(this.editTaskPlan.startTime||(this.isEndTimeErrorNoStart=!0),!(this.isStartTimeError||this.isEndTimeErrorNoStart||this.isEndTimeErrorBefore)){var e=new Date(this.editTaskPlan.endTime).getTime(),t=this.editTaskPlan.startTime?new Date(this.editTaskPlan.startTime).getTime():0;if(console.info(t),!t)return void(this.isEndTimeErrorNoStart=!0);if(e<t)return void(this.isEndTimeErrorBefore=!0);this.editTaskPlan.executeParams=this.curEditExcuteVersionParams,this.editTaskPlan.communityIds=[this.editTaskPlan.communityId],console.info(this.editTaskPlan.executeParams);var a=this.editTaskPlan,i=SD();D_(a).then(function(e){var t=this;this.$nextTick(function(){i.close(),t.loadData()}),this.editModelDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){i.close()}),console.info(e)}.bind(this))}},handleEdit:function(e,t){if(console.info(e),console.info(t),this.isStartTimeError=!1,this.isEndTimeErrorNoStart=!1,this.isEndTimeErrorBefore=!1,this.curEditExcuteVersionParams=[],t&&t.paramList){JSON.parse(t.paramList).forEach(function(e){var t={paramName:e.n,defaultValue:e.v,paramType:e.t};this.curEditExcuteVersionParams.push(t)}.bind(this))}this.editTaskPlan=JSON.parse(Bt()(t)),this.getModelVersionPublisCommunity("edit")},removeData:function(e,t){var a=this,i=t;this.$confirm('确定要删除"'+i.name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={taskPlanPk:t.algTaskPlanPk},i=SD();C_(e).then(function(e){var t=this;console.log(e),this.$message({type:"success",message:"删除成功"}),this.$nextTick(function(){i.close(),t.loadData()})}.bind(a)).catch(function(e){this.$nextTick(function(){i.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},stopTaskPlan:function(e,t){var a=this,i=t;this.$confirm('确定要中止"'+i.name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={taskPlanPk:t.algTaskPlanPk},i=SD();__(e).then(function(e){var t=this;console.log(e),this.$message({type:"success",message:"中止计划成功"}),this.$nextTick(function(){i.close(),t.loadData()})}.bind(a)).catch(function(e){console.info(e),this.$nextTick(function(){i.close()})}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},getModelVersionPublisCommunity:function(e){var t={modelVerId:this.currentVersionId,publishStatus:this.versionPublishedStatus},a=SD();yy(t).then(function(t){var i=this;console.info(t.data),this.curPlanPublishCommunityList=[],t.data&&t.data.length>0&&(console.info("11"),t.data.forEach(function(e,t){var a={item_code:e.communityId,item_name:this.systemCommunityMap[e.communityId]};this.curPlanPublishCommunityList.push(a)}.bind(this))),this.$nextTick(function(){a.close(),"add"===e?i.addModelDialogVisible=!0:i.editModelDialogVisible=!0})}.bind(this)).catch(function(e){console.info(e)})},showAddModelDialog:function(){this.isStartTimeError=!1,this.isEndTimeErrorNoStart=!1,this.isEndTimeErrorBefore=!1,this.resetForm("newTaskPlan"),this.newTaskPlan.startTime="",this.newTaskPlan.endTime="";var e={modelVersPk:this.currentVersionId},t=SD();Py(e).then(function(e){var a=this;this.addNewPlanLoading=!1,console.info(e.data),this.$nextTick(function(){t.close(),a.getModelVersionPublisCommunity("add")}),this.curExcuteVersionParams=e.data}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),this.$message.error("获取参数失败"),console.info(e)}.bind(this))},confirmAddModel:function(){this.addModelDialogVisible=!1},uploadModelFile:function(e){this.uploadParam.data={algModelVersionId:e},this.showUploadArea=!0,this.uploadDialogVisible=!0},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"delete"===e?this.removeData(t,a):"stop"===e?this.stopTaskPlan(t,a):"task"===e&&(!this.$route.params.versionId&&this.$route.params.modelId?this.$router.push({path:"/modelmgmt/model/"+this.$route.params.modelId+"/plan/"+a.algTaskPlanPk+"/task"}):this.$route.params.versionId?this.$router.push({path:"/modelmgmt/model/"+this.$route.params.modelId+"/version/"+this.$route.params.versionId+"/plan/"+a.algTaskPlanPk+"/task"}):this.$router.push({path:"/modelmgmt/taskmgmt/plan/"+a.algTaskPlanPk+"/task"}))},inputBlur:function(e){console.info(e),"addName"===e.target.id&&(this.newTaskPlan.name=this.newTaskPlan.name.trim())},checkPlanStartTime:function(){console.info(this.newTaskPlan.startTime);var e=(new Date).getTime(),t=new Date(this.newTaskPlan.startTime).getTime();this.isEndTimeErrorNoStart=!1,this.isStartTimeError=e>t},checkPlanEndTime:function(){console.info(this.newTaskPlan.endTime);var e=new Date(this.newTaskPlan.endTime).getTime(),t=this.newTaskPlan.startTime?new Date(this.newTaskPlan.startTime).getTime():0;console.info(t),t?e<t?this.isEndTimeErrorBefore=!0:(this.isEndTimeErrorNoStart=!1,this.isEndTimeErrorBefore=!1):this.isEndTimeErrorNoStart=!0},editCheckPlanStartTime:function(){console.info(this.editTaskPlan.startTime);var e=(new Date).getTime(),t=new Date(this.editTaskPlan.startTime).getTime();this.isEndTimeErrorNoStart=!1,this.isStartTimeError=e>t},editCheckPlanEndTime:function(){console.info(this.editTaskPlan.endTime);var e=new Date(this.editTaskPlan.endTime).getTime(),t=this.editTaskPlan.startTime?new Date(this.editTaskPlan.startTime).getTime():0;console.info(t),t?e<t?this.isEndTimeErrorBefore=!0:(this.isEndTimeErrorNoStart=!1,this.isEndTimeErrorBefore=!1):this.isEndTimeErrorNoStart=!0},handleClose:function(e){this.addModelDialogVisible=!1,this.editModelDialogVisible=!1,this.uploadDialogVisible=!1,clearInterval(this.uploadInterval)},showPlanParams:function(e,t){this.excuteParamsDialogVisible=!0,this.modelPlanList[e].paramList&&(this.curPlanExcuteParams=JSON.parse(this.modelPlanList[e].paramList))},getParamValueCron:function(e){Uy(e).then(function(e){return e.data.paramValue}).catch(function(e){console.log(e)})}}},S_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-taskplan"},[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.$route.params.modelId||e.$route.params.versionId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/baseinfomgmt"}}},[e._v("基本信息管理")]):e._e(),e._v(" "),e.$route.params.versionId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version"}}},[e._v("版本管理")]):e._e(),e._v(" "),a("el-breadcrumb-item",[e._v("计划管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[e.$route.params.modelId||e.$route.params.versionId?e._e():a("div",{staticClass:"model-title"},[a("i",{staticClass:"el-icon-news"}),e._v(" 计划管理")]),e._v(" "),e.$route.params.modelId&&!e.$route.params.versionId?a("modelInfoComponenet",{attrs:{curModelId:e.$route.params.modelId}}):e._e(),e._v(" "),e.$route.params.versionId?a("modelVersionInfoComponenet",{attrs:{curVersionId:e.$route.params.versionId}}):e._e(),e._v(" "),a("el-row",{staticClass:"margin-top-25",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[e.$route.params.versionId?a("el-button",{attrs:{disabled:e.loadingVersion,type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("添加计划\n              ")]):e._e()],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"text-right"},[a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("计划类型")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"计划类型"},on:{change:e.loadData},model:{value:e.modelListSearch.taskType,callback:function(t){e.$set(e.modelListSearch,"taskType",t)},expression:"modelListSearch.taskType"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemTaskTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("计划来源")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"计划来源"},on:{change:e.loadData},model:{value:e.modelListSearch.taskSource,callback:function(t){e.$set(e.modelListSearch,"taskSource",t)},expression:"modelListSearch.taskSource"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemTaskSourceList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("计划状态")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"计划状态"},on:{change:e.loadData},model:{value:e.modelListSearch.planStatus,callback:function(t){e.$set(e.modelListSearch,"planStatus",t)},expression:"modelListSearch.planStatus"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemPlanStatusList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("计划名称")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"searchName"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.loadData(t)}},model:{value:e.modelListSearch.name,callback:function(t){e.$set(e.modelListSearch,"name",t)},expression:"modelListSearch.name"}})],1),e._v(" "),a("div",{staticClass:"item-info"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)])])])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingVersion,expression:"loadingVersion"}],ref:"multipleTable",staticClass:"margin-top-25",staticStyle:{width:"100%"},attrs:{data:e.modelPlanList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"执行小区"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.systemCommunityMap[t.row.communityId]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.systemTaskTypeMap[t.row.taskType]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.systemTaskSourceMap[t.row.taskSource]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"执行参数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.paramList?a("a",{staticClass:"blue cursor-hand",on:{click:function(a){e.showPlanParams(t.$index,t.row)}}},[e._v("查看参数")]):e._e(),e._v(" "),t.row.paramList?e._e():a("span",[e._v("无参数")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.startTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.endTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"执行频率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.systemFrequencyMap[t.row.frequencyType]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"频率Cron表达式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.frequencyCron))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后一次执行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.latestTaskStartTime?[e._v(e._s(e._f("formatDate")(t.row.latestTaskStartTime)))]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:"mm.plnsts.finish"==t.row.planStatus,red:"mm.plnsts.stop"==t.row.planStatus}},[e._v(e._s(e.systemPlanStatusMap[t.row.planStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更多操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(a){e.handleCommand(a,t.$index,t.row)}}},[a("span",{staticClass:"blue cursor-hand el-dropdown-link"},[e._v("\n              更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"task"}},[a("i",{staticClass:"el-icon-search"}),e._v("查看任务")]),e._v(" "),"mm.frqtyp.now"!=t.row.frequencyType&&"mm.plnsts.start"==t.row.planStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"stop"}},[a("i",{staticClass:"el-icon-remove"}),e._v("中止")]):e._e(),e._v(" "),"mm.frqtyp.now"!=t.row.frequencyType&&"mm.plnsts.create"==t.row.planStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"edit",divided:""}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v("修改\n              ")]):e._e(),e._v(" "),"\ufeffmm.plnsts.stop"!=t.row.planStatus&&"\ufeffmm.plnsts.finish"!=t.row.planStatus?a("el-dropdown-item",{staticClass:"model-dropdown-item",attrs:{command:"delete"}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除\n              ")]):e._e()],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加执行计划","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.addModelDialogVisible,width:"40%","before-close":e.handleClose},on:{close:function(t){e.closeAddModel()},"update:visible":function(t){e.addModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.addNewPlanLoading,expression:"addNewPlanLoading"}],ref:"newTaskPlan",staticClass:"demo-ruleForm",attrs:{model:e.newTaskPlan,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"计划名称",prop:"name"}},[a("el-input",{attrs:{id:"addName",size:"small"},on:{blur:e.inputBlur},model:{value:e.newTaskPlan.name,callback:function(t){e.$set(e.newTaskPlan,"name",t)},expression:"newTaskPlan.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行小区",prop:"communityId"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择执行小区"},model:{value:e.newTaskPlan.communityId,callback:function(t){e.$set(e.newTaskPlan,"communityId",t)},expression:"newTaskPlan.communityId"}},e._l(e.curPlanPublishCommunityList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{class:{"error-border":e.isStartTimeError||e.isEndTimeErrorNoStart},attrs:{size:"small",format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择开始时间"},on:{change:e.checkPlanStartTime},model:{value:e.newTaskPlan.startTime,callback:function(t){e.$set(e.newTaskPlan,"startTime",t)},expression:"newTaskPlan.startTime"}}),e._v(" "),e.isEndTimeErrorNoStart?a("span",{staticClass:"red"},[e._v("请选择开始时间")]):e._e(),e._v(" "),e.isStartTimeError?a("span",{staticClass:"red"},[e._v("开始时间不能早于当前时间")]):e._e()],1)]),e._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{class:{"error-border":e.isEndTimeErrorBefore},attrs:{size:"small",format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择结束时间"},on:{change:e.checkPlanEndTime},model:{value:e.newTaskPlan.endTime,callback:function(t){e.$set(e.newTaskPlan,"endTime",t)},expression:"newTaskPlan.endTime"}}),e._v(" "),e.isEndTimeErrorBefore?a("span",{staticClass:"red"},[e._v("结束时间不能早于开始时间")]):e._e()],1)]),e._v(" "),a("el-form-item",{attrs:{label:"执行频率",prop:"frequencyType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择执行频率"},model:{value:e.newTaskPlan.frequencyType,callback:function(t){e.$set(e.newTaskPlan,"frequencyType",t)},expression:"newTaskPlan.frequencyType"}},e._l(e.systemFrequencyList,function(t){return"mm.frqtyp.now"!=t.item_code?a("el-option",{key:t.item_code,attrs:{label:t.item_name,value:t.item_code}}):e._e()})),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"right"},on:{mouseenter:function(t){e.getParamValueCron(e.item.item_code)}}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("频次表达式为："+e._s(e.cron))]),e._v(" "),a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"执行参数",prop:"description"}},[e.curExcuteVersionParams&&e.curExcuteVersionParams.length>0?a("div",{staticClass:"excute-warp exe-params"},[a("el-form",{attrs:{"label-width":"40%"}},[a("el-row",{attrs:{gutter:0}},e._l(e.curExcuteVersionParams,function(t,i){return a("el-col",{key:i,attrs:{span:24}},[a("el-form-item",{attrs:{label:t.paramName,prop:"item"}},[a("el-input",{attrs:{size:"small"},model:{value:t.defaultValue,callback:function(a){e.$set(t,"defaultValue",a)},expression:"item.defaultValue"}})],1)],1)}))],1)],1):e._e(),e._v(" "),!e.curExcuteVersionParams||e.curExcuteVersionParams.length<=0?a("div",[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[e.loadingExcuteParam?e._e():a("div",{staticClass:"no-param-warp gray"},[e._v("暂无参数信息，"),a("a",{staticClass:"blue",attrs:{href:"/modelmgmt/model/"+e.$route.params.modelId+"/version/"+e.$route.params.versionId+"/paramdefine"}},[e._v("添加参数")])])])],1)],1):e._e()]),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.addModelDialogVisible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newTaskPlan")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"执行参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.excuteParamsDialogVisible,width:"50%"},on:{"update:visible":function(t){e.excuteParamsDialogVisible=t}}},[a("el-form",{ref:"taskResultMessage",staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-form",{attrs:{"label-width":"40%"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{"font-weight":"bold"},attrs:{label:"参数名"}},[a("span",[a("b",[e._v("参数值")])])])],1),e._v(" "),e._l(e.curPlanExcuteParams,function(t,i){return a("el-col",{key:i,attrs:{span:24}},[a("el-form-item",{attrs:{label:t.n,prop:"item"}},[a("el-input",{attrs:{disabled:"disabled",size:"small"},model:{value:t.v,callback:function(a){e.$set(t,"v",a)},expression:"item.v"}})],1)],1)})],2)],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.excuteParamsDialogVisible=!1}}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改执行计划","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editModelDialogVisible,width:"40%","before-close":e.handleClose},on:{close:function(t){e.closeAddModel()},"update:visible":function(t){e.editModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.editNewPlanLoading,expression:"editNewPlanLoading"}],ref:"editTaskPlan",staticClass:"demo-ruleForm",attrs:{model:e.editTaskPlan,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"计划名称",prop:"name"}},[a("el-input",{attrs:{id:"addName",size:"small"},on:{blur:e.inputBlur},model:{value:e.editTaskPlan.name,callback:function(t){e.$set(e.editTaskPlan,"name",t)},expression:"editTaskPlan.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行小区",prop:"communityId"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择执行小区"},model:{value:e.editTaskPlan.communityId,callback:function(t){e.$set(e.editTaskPlan,"communityId",t)},expression:"editTaskPlan.communityId"}},e._l(e.curPlanPublishCommunityList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{class:{"error-border":e.isStartTimeError||e.isEndTimeErrorNoStart},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择开始时间"},on:{change:e.editCheckPlanStartTime},model:{value:e.editTaskPlan.startTime,callback:function(t){e.$set(e.editTaskPlan,"startTime",t)},expression:"editTaskPlan.startTime"}}),e._v(" "),e.isEndTimeErrorNoStart?a("span",{staticClass:"red"},[e._v("请选择开始时间")]):e._e(),e._v(" "),e.isStartTimeError?a("span",{staticClass:"red"},[e._v("开始时间不能早于当前时间")]):e._e()],1)]),e._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{class:{"error-border":e.isEndTimeErrorBefore},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择结束时间"},on:{change:e.editCheckPlanEndTime},model:{value:e.editTaskPlan.endTime,callback:function(t){e.$set(e.editTaskPlan,"endTime",t)},expression:"editTaskPlan.endTime"}}),e._v(" "),e.isEndTimeErrorBefore?a("span",{staticClass:"red"},[e._v("结束时间不能早于开始时间")]):e._e()],1)]),e._v(" "),a("el-form-item",{attrs:{label:"执行频率",prop:"frequencyType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择执行频率"},model:{value:e.editTaskPlan.frequencyType,callback:function(t){e.$set(e.editTaskPlan,"frequencyType",t)},expression:"editTaskPlan.frequencyType"}},e._l(e.systemFrequencyList,function(t){return"mm.frqtyp.now"!=t.item_code?a("el-option",{key:t.item_code,attrs:{label:t.item_name,value:t.item_code}}):e._e()}))],1),e._v(" "),a("el-form-item",{attrs:{label:"执行参数",prop:"description"}},[e.curEditExcuteVersionParams&&e.curEditExcuteVersionParams.length>0?a("div",{staticClass:"excute-warp exe-params"},[a("el-form",{attrs:{"label-width":"40%"}},[a("el-row",{attrs:{gutter:0}},e._l(e.curEditExcuteVersionParams,function(t,i){return a("el-col",{key:i,attrs:{span:24}},[a("el-form-item",{attrs:{label:t.paramName,prop:"item"}},[a("el-input",{attrs:{size:"small"},model:{value:t.defaultValue,callback:function(a){e.$set(t,"defaultValue",a)},expression:"item.defaultValue"}})],1)],1)}))],1)],1):e._e(),e._v(" "),!e.curEditExcuteVersionParams||e.curEditExcuteVersionParams.length<=0?a("div",[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[e.$route.params.versionId?a("div",{staticClass:"no-param-warp gray"},[e._v("暂无参数信息，"),a("a",{staticClass:"blue",attrs:{href:"/modelmgmt/model/"+e.$route.params.modelId+"/version/"+e.$route.params.versionId+"/paramdefine"}},[e._v("添加参数")])]):e._e()])],1)],1):e._e()]),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.editModelDialogVisible=!1}}},[e._v("关闭")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("editTaskPlan")}}},[e._v("保存")])],1)],1)],1)],1)},x_=[],k_={render:S_,staticRenderFns:x_},T_=k_,L_=a("VU/8"),N_=ce,V_=L_(w_,T_,!1,N_,"data-v-18c2b187",null),I_=V_.exports,E_={components:{modelVersionInfoComponenet:v_,modelInfoComponenet:n_,ElOption:jD},data:function(){return{currentPage:1,pageSize:10,currentStep:1,total:0,formInline:{user:"",region:""},paramId:this.$route.params.id,newModelVersion:{algModelPk:this.$route.params.id,versionNo:"",description:"",versionStatus:"mm.versts.enable"},modelListSearch:{taskType:"全部",taskSource:"mm.tsksrc.direct",taskStatus:"全部",communityId:"全部",ip:""},rules:{versionNo:[{required:!0,message:"请输入模型版本名称",trigger:"blur"},{min:3,max:100,message:"长度在 3 到 100 个字符",trigger:"blur"}]},uploadParam:{url:"/scp-modelmgmtcomponent/modelmgmt/web/uploadModelFile",data:{}},showModelInfo:!1,showUploadArea:!0,curPlanExcuteParams:{},uploadInterval:"",uploadFileStatus:"",fileUploadProgress:10,modelVersionEnableStatus:"mm.versts.enable",modelEnableStatus:"mm.modsts.enable",systemModelStatusList:[],systemModelVersionStatusList:[],systemNodeTypeList:[],systemModelEventList:[],systemModelCatList:[],systemModelRuntimeList:[],systemTaskTypeList:[],systemTaskSourceList:[],systemTaskStatusList:[],systemModelStatusMap:{},systemModelVersionStatusMap:{},systemNodeTypeMap:{},systemModelEventMap:{},systemModelCatMap:{},systemModelRuntimeMap:{},systemTaskTypeMap:{},systemTaskSourceMap:{},systemTaskStatusMap:{},addModelDialogVisible:!1,excuteParamsDialogVisible:!1,editModelDialogVisible:!1,uploadDialogVisible:!1,loadingModelInfo:!1,loadingVersion:!1,loadingStep:!1,modelPlanList:[],multipleSelection:[],communityIdList:[],communityIdListMap:{},isStartTimeError:!1,isEndTimeErrorNoStart:!1,isEndTimeErrorBefore:!1}},mounted:function(){this.$route.params.modelId&&(this.showModelInfo=!0),this.$route.params.planId&&(this.modelListSearch.taskSource="全部"),clearInterval(this.uploadInterval);var e={catCodeList:"mm.modsts|mm.versts|mm.nodtyp|mm.evttyp|mm.modcat|mm.rtmtyp|mm.tsksts|mm.tsktyp|mm.tsksrc|community",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),this.systemModelVersionStatusList=xD(e.data,"mm.versts"),this.systemModelVersionStatusMap=wD(this.systemModelVersionStatusList),this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.systemTaskTypeList=xD(e.data,"mm.tsktyp"),this.systemTaskTypeMap=wD(this.systemTaskTypeList),this.systemTaskSourceList=xD(e.data,"mm.tsksrc"),this.systemTaskSourceMap=wD(this.systemTaskSourceList),this.systemTaskStatusList=xD(e.data,"mm.tsksts"),this.systemTaskStatusMap=wD(this.systemTaskStatusList),this.communityIdList=xD(e.data,CD),this.communityIdListMap=wD(this.communityIdList),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{closeAddModel:function(){2===this.currentStep&&this.loadData()},closeUploadModel:function(){this.loadData(),this.uploadDialogVisible=!1},loadData:function(){var e={};e.executorAddress=this.modelListSearch.ip,this.$route.params.planId?e.algTaskPlanPk=this.$route.params.planId:e.algTaskPlanPk=void 0,this.$route.params.versionId>0&&(e.algModelVersionPk=this.$route.params.versionId),!this.$route.params.versionId&&this.$route.params.modelId&&(e.algModelPk=this.$route.params.modelId),this.modelListSearch.taskType&&"全部"!==this.modelListSearch.taskType&&"0"!==this.modelListSearch.taskType?e.taskType=this.modelListSearch.taskType:e.taskType=void 0,this.modelListSearch.taskSource&&"全部"!==this.modelListSearch.taskSource&&"0"!==this.modelListSearch.taskSource?e.taskSource=this.modelListSearch.taskSource:e.taskSource=void 0,this.modelListSearch.taskStatus&&"全部"!==this.modelListSearch.taskStatus&&"0"!==this.modelListSearch.taskStatus?e.taskStatus=this.modelListSearch.taskStatus:e.taskStatus=void 0,this.modelListSearch.communityId&&"全部"!==this.modelListSearch.communityId&&"0"!==this.modelListSearch.communityId?e.communityId=this.modelListSearch.communityId:e.communityId=void 0,this.modelListSearch.startCreateTime&&"全部"!==this.modelListSearch.startCreateTime&&"0"!==this.modelListSearch.startCreateTime?(e.startCreateTime=new Date(this.modelListSearch.startCreateTime),console.log("create time is: "+this.modelListSearch.startCreateTime)):e.startCreateTime=void 0,this.modelListSearch.endCreateTime&&"全部"!==this.modelListSearch.endCreateTime&&"0"!==this.modelListSearch.endCreateTime?(e.endCreateTime=new Date(this.modelListSearch.endCreateTime),console.log("end time is: "+e.endCreateTime)):e.endCreateTime=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e},a=SD();Fy(t).then(function(e){console.log(" result.data.total "+e.data.items.length),console.log(" result.data "+e.data.items),this.modelPlanList=e.data.items,this.total=e.data.pageCount;for(var t=0;t<this.modelPlanList.length;t++){if(this.modelPlanList[t].paramList&&this.modelPlanList[t].paramList.indexOf("{")>-1&&this.modelPlanList[t].paramList.indexOf("pl")>-1){this.modelPlanList[t].paramList=JSON.parse(this.modelPlanList[t].paramList),this.modelPlanList[t].paramListJson=this.modelPlanList[t].paramList.ep.pl;var i=this.modelPlanList[t].paramListJson.length;console.log(i)}console.log(this.modelPlanList[t].paramList)}this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){a.close()})}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.moveToNextStep()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){console.log("submit!");var e=this.modelListSearch.startCreateTime,t=new Date(this.modelListSearch.endCreateTime).getTime();console.info("start time is:"+this.modelListSearch.startCreateTime),console.info("end time is:"+this.modelListSearch.endCreateTime),e&&t&&t<e?this.isEndTimeErrorBefore=!0:(this.isEndTimeErrorBefore=!1,this.loadData())},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(e),console.info(t),this.editModelDialogVisible=!0},showPlanParams:function(e,t){if(this.excuteParamsDialogVisible=!0,this.modelPlanList[e].paramList&&"TASKPARAMLIST"!==this.modelPlanList[e].paramList){var a=this.modelPlanList[e].paramList;this.curPlanExcuteParams=a.ep,console.log(this.modelPlanList[e])}},removeData:function(e,t){var a=this,i=t;this.$confirm('确定要删除"'+i.algTaskPk+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("删除操作1");var e={algTaskPk:i.algTaskPk},t=SD();zy(e).then(function(e){var a=this;this.$nextTick(function(){t.close(),a.loadData()})}.bind(a)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showAddModelDialog:function(){this.currentStep=1,this.resetForm("newModelVersion"),this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},uploadModelFile:function(e){this.uploadParam.data={algModelVersionId:e},this.showUploadArea=!0,this.uploadDialogVisible=!0},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"delete"===e&&this.removeData(t,a)},inputBlur:function(e){console.info(e),"addNo"===e.target.id&&(this.newModelVersion.versionNo=this.newModelVersion.versionNo.trim()),"addDesc"===e.target.id&&(this.newModelVersion.description=this.newModelVersion.description.trim())},checkExcuteResult:function(e,t){var a=this.modelPlanList[e];!this.$route.params.versionId&&this.$route.params.modelId&&this.$route.params.planId?this.$router.push({path:"/modelmgmt/model/"+this.$route.params.modelId+"/plan/"+this.$route.params.planId+"/task/"+a.algTaskPk+"/taskinfo"}):this.$route.params.versionId&&this.$route.params.planId?this.$router.push({path:"/modelmgmt/model/"+this.$route.params.modelId+"/version/"+this.$route.params.versionId+"/plan/"+t.algTaskPlanPk+"/task/"+a.algTaskPk+"/taskinfo"}):this.$route.params.versionId?this.$router.push({path:"/modelmgmt/model/"+this.$route.params.modelId+"/version/"+this.$route.params.versionId+"/task/"+a.algTaskPk+"/taskinfo"}):this.$router.push({path:"/modelmgmt/taskmgmt/task/"+t.algTaskPk+"/taskinfo"})},handleClose:function(e){this.addModelDialogVisible=!1,this.editModelDialogVisible=!1,this.uploadDialogVisible=!1,clearInterval(this.uploadInterval)},getTimeSpan:function(e){var t=(new Date).getTime();return console.log(t),console.log(t-e),t-e},checkPlanEndTime:function(){console.info(this.modelListSearch.startCreateTime),console.info(this.modelListSearch.endCreateTime);var e=new Date(this.modelListSearch.endCreateTime).getTime(),t=this.modelListSearch.startCreateTime?new Date(this.modelListSearch.startCreateTime).getTime():0;this.isEndTimeErrorBefore=!!(e&&e<t)}}},P_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-task"},[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.$route.params.modelId||e.$route.params.versionId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/baseinfomgmt"}}},[e._v("基本信息管理")]):e._e(),e._v(" "),e.$route.params.versionId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version"}}},[e._v("版本管理")]):e._e(),e._v(" "),e.$route.params.modelId&&e.$route.params.versionId&&e.$route.params.planId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version/"+e.$route.params.versionId+"/taskplan"}}},[e._v("计划管理")]):e._e(),e._v(" "),e.$route.params.modelId&&!e.$route.params.versionId&&e.$route.params.planId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/taskplan"}}},[e._v("计划管理")]):e._e(),e._v(" "),e.$route.params.modelId||e.$route.params.versionId||!e.$route.params.planId?e._e():a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/planmgmt"}}},[e._v("计划管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("任务管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[e.$route.params.modelId||e.$route.params.versionId?e._e():a("div",{staticClass:"model-title"},[a("i",{staticClass:"el-icon-news"}),e._v(" 任务管理")]),e._v(" "),e.$route.params.modelId&&!e.$route.params.versionId?a("modelInfoComponenet",{attrs:{curModelId:e.$route.params.modelId}}):e._e(),e._v(" "),e.$route.params.versionId?a("modelVersionInfoComponenet",{attrs:{curVersionId:e.$route.params.versionId}}):e._e(),e._v(" "),a("el-row",{staticClass:"margin-top-25"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"text-right"},[a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("任务类型")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"任务类型"},on:{change:e.loadData},model:{value:e.modelListSearch.taskType,callback:function(t){e.$set(e.modelListSearch,"taskType",t)},expression:"modelListSearch.taskType"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemTaskTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("任务来源")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"任务来源"},on:{change:e.loadData},model:{value:e.modelListSearch.taskSource,callback:function(t){e.$set(e.modelListSearch,"taskSource",t)},expression:"modelListSearch.taskSource"}},e._l(e.systemTaskSourceList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("任务状态")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"任务状态"},on:{change:e.loadData},model:{value:e.modelListSearch.taskStatus,callback:function(t){e.$set(e.modelListSearch,"taskStatus",t)},expression:"modelListSearch.taskStatus"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemTaskStatusList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("小区")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.loadData},model:{value:e.modelListSearch.communityId,callback:function(t){e.$set(e.modelListSearch,"communityId",t)},expression:"modelListSearch.communityId"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.communityIdList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)])])])],1),e._v(" "),a("el-row",{staticClass:"margin-top-25"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch}},[a("el-form-item",{attrs:{label:"查询任务创建时间区间选择："}}),e._v(" "),a("el-form-item",{attrs:{label:"从",prop:"startCreateTime"}},[a("el-date-picker",{class:{"error-border":e.isEndTimeErrorBefore},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"请选择一个日期"},on:{change:e.checkPlanEndTime},model:{value:e.modelListSearch.startCreateTime,callback:function(t){e.$set(e.modelListSearch,"startCreateTime",t)},expression:"modelListSearch.startCreateTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"到",prop:"endCreateTime"}},[a("el-date-picker",{class:{"error-border":e.isEndTimeErrorBefore},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"请选择一个日期"},on:{change:e.checkPlanEndTime},model:{value:e.modelListSearch.endCreateTime,callback:function(t){e.$set(e.modelListSearch,"endCreateTime",t)},expression:"modelListSearch.endCreateTime"}}),e._v(" "),e.isEndTimeErrorBefore?a("span",{staticClass:"red"},[e._v("任务创建时间最小值不能大于任务创建时间最大值")]):e._e()],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{disabled:e.isEndTimeErrorBefore,type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingVersion,expression:"loadingVersion"}],ref:"multipleTable",staticClass:"margin-top-25",staticStyle:{width:"100%"},attrs:{data:e.modelPlanList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.algTaskPk))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.taskPlanName))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小区",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.communityIdListMap[t.row.communityId]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.systemTaskTypeMap[t.row.taskType]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.systemTaskSourceMap[t.row.taskSource]))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"执行参数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.paramListJson?a("a",{staticClass:"blue cursor-hand",on:{click:function(a){e.showPlanParams(t.$index,t.row)}}},[e._v("查看参数")]):e._e(),e._v(" "),t.row.paramListJson?e._e():a("span",[e._v("无参数")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.endTime?[e._v(e._s(e._f("formatDate")(t.row.endTime)))]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务执行时间（秒）"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.exeTimeInSec>0?[e._v(e._s(t.row.exeTimeInSec/1e3))]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{label:"执行IP",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.executorAddress))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{green:"mm.tsksts.finish"==t.row.taskStatus,red:"mm.tsksts.fail"==t.row.taskStatus}},[e._v(e._s(e.systemTaskStatusMap[t.row.taskStatus]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"查看任务结果",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"mm.tsktyp.deploy"!=t.row.taskType,expression:"scope.row.taskType!='mm.tsktyp.deploy'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){e.checkExcuteResult(t.$index,t.row)}}},[e._v("查看执行结果")])]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"执行参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.excuteParamsDialogVisible,width:"50%"},on:{"update:visible":function(t){e.excuteParamsDialogVisible=t}}},[a("el-form",{ref:"taskResultMessage",staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-form",{attrs:{"label-width":"40%"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{"font-weight":"bold"},attrs:{label:"参数名"}},[a("span",[a("b",[e._v("参数值")])])])],1),e._v(" "),e._l(e.curPlanExcuteParams.pl,function(t,i){return a("el-col",{key:i,attrs:{span:24}},[a("el-form-item",{attrs:{label:t.n,prop:"item"}},[a("el-input",{attrs:{disabled:"disabled",size:"small"},model:{value:t.dv,callback:function(a){e.$set(t,"dv",a)},expression:"item.dv"}})],1)],1)})],2)],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.excuteParamsDialogVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},M_=[],$_={render:P_,staticRenderFns:M_},U_=$_,F_=a("VU/8"),R_=de,z_=F_(E_,U_,!1,R_,"data-v-6fed3f2a",null),A_=z_.exports,O_={name:"modelList",components:{ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,currentStep:1,formInline:{user:"",region:""},showAddNewEvent:!1,showEditNewEvent:!1,modelNewEvent:{name:"",code:""},modelEditNewEvent:{name:"",code:""},newModel:{name:"",code:"",description:"",nodeType:"",runtimeType:"",ownUser:"",realtimeFlag:"",shareFlag:"1",modelStatus:"mm.modsts.enable",addEventTypeList:[]},editModel:{eventTypeList:"",tmpCurEditEventTypeList:[],editEventTypeList:[]},modelListSearch:{name:"",modelCat:"全部",nodeType:"全部",startTime:"",endTime:"",type:"全部"},eventRules:{name:[{required:!0,message:"请输入能力名称",trigger:"blur"},{min:1,max:16,message:"长度在 1 到 16 个字符",trigger:"blur"}]},searchRules:{name:[{required:!1,trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:0,max:64,message:"只支持中文,字母,数字和下划线",trigger:"change"}]},eventNameError:!1,addingEventFlag:!1,modelEnableStatus:"mm.modsts.enable",nodeTypeVideo:"mm.nodtyp.video",systemModelStatusList:[],systemNodeTypeList:[],systemModelEventList:[],systemEditEventTypeList:[],systemAddModelEventList:[],systemModelCatList:[],systemModelRuntimeList:[],systemCommunityList:[],systemTaskSourceList:[],systemTaskStatusList:[],systemAsyncTypeList:[],systemModelStatusMap:{},systemNodeTypeMap:{},systemModelEventMap:{},systemModelCatMap:{},systemModelRuntimeMap:{},systemCommunityMap:{},systemTaskSourceMap:{},systemTaskStatusMap:{},systemAsyncTypeMap:{},showAddEventPop:!1,showEditEventPop:!1,addModelDialogVisible:!1,editModelDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,addNewEventLoading:!1,modelList:[],multipleSelection:[],isEndTimeErrorBefore:!1}},mounted:function(){var e={catCodeList:"mm.modsts|mm.nodtyp|mm.evttyp|mm.modcat|mm.asytyp|mm.tsksrc|mm.tsksts|mm.rtmtyp",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),console.info(this.systemModelStatusMap),this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.systemCommunityList=xD(e.data,CD),this.systemCommunityMap=wD(this.systemCommunityList),this.systemTaskSourceList=xD(e.data,"mm.tsksrc"),this.systemTaskSourceMap=wD(this.systemTaskSourceList),this.systemTaskStatusList=xD(e.data,"mm.tsksts"),this.systemTaskStatusMap=wD(this.systemTaskStatusList),this.systemAsyncTypeList=xD(e.data,"mm.asytyp"),this.systemAsyncTypeMap=wD(this.systemAsyncTypeList),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={};this.modelListSearch.communityId&&"全部"!==this.modelListSearch.communityId&&"0"!==this.modelListSearch.communityId?e.communityId=this.modelListSearch.communityId:e.communityId=void 0,this.modelListSearch.taskStatus&&"全部"!==this.modelListSearch.taskStatus&&"0"!==this.modelListSearch.taskStatus?e.taskStatus=this.modelListSearch.taskStatus:e.taskStatus=void 0,this.modelListSearch.taskType&&"全部"!==this.modelListSearch.taskType&&"0"!==this.modelListSearch.taskType?e.taskType=this.modelListSearch.taskType:e.taskType=void 0,this.modelListSearch.startTime&&"全部"!==this.modelListSearch.startTime&&"0"!==this.modelListSearch.startTime?(e.startTime=new Date(this.modelListSearch.startTime),console.log("start time is: "+e.startTime)):e.startTime=void 0,this.modelListSearch.endTime&&"全部"!==this.modelListSearch.endTime&&"0"!==this.modelListSearch.endTime?(e.endTime=new Date(this.modelListSearch.endTime),console.log("end time is: "+e.endTime)):e.endTime=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e};console.log(t);var a=SD();Ay(t).then(function(e){console.log(" result.data.total "+e.data.items.length),this.modelList=e.data.items,this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmAddAlgModel()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){console.log("submit!");var e=this.modelListSearch.startTime,t=new Date(this.modelListSearch.endTime).getTime();console.info("start time is:"+this.modelListSearch.startTime),console.info("end time is:"+this.modelListSearch.endTime),t<e?this.isEndTimeErrorBefore=!0:(this.isEndTimeErrorBefore=!1,this.loadData())},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},showAddModelDialog:function(){this.eventNameError=!1,this.resetForm("newModel"),this.currentStep=1,this.showAddEventPop=!1,this.systemAddModelEventList=[],this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},closeAddAndEditModal:function(){this.addModelDialogVisible=!1,this.editModelDialogVisible=!1},handleClose:function(e){console.info(1234),console.info(this.$refs.newModel),this.$refs.newModel&&this.$refs.newModel.clearValidate(),this.$refs.editModel&&this.$refs.editModel.clearValidate(),this.addModelDialogVisible=!1,this.editModelDialogVisible=!1},handleTagClose:function(e,t){console.info(e),"add"===t&&(console.info(this.systemAddModelEventList),this.systemAddModelEventList.splice(this.systemAddModelEventList.indexOf(e),1)),"edit"===t&&(console.info(this.systemEditEventTypeList),this.systemEditEventTypeList.splice(this.systemEditEventTypeList.indexOf(e),1))},inputBlur:function(e){console.info(e),"addName"===e.target.id&&(this.newModel.name=this.newModel.name.trim()),"addCode"===e.target.id&&(this.newModel.code=this.newModel.code.trim()),"addDesc"===e.target.id&&(this.newModel.description=this.newModel.description.trim()),"editName"===e.target.id&&(this.newModel.name=this.editModel.name.trim()),"editCode"===e.target.id&&(this.newModel.code=this.editModel.code.trim()),"editDesc"===e.target.id&&(this.newModel.description=this.editModel.description.trim()),"searchName"===e.target.id&&(this.modelListSearch.name=this.modelListSearch.name.trim()),"addEventName"===e.target.id&&(this.modelNewEvent.name=this.modelNewEvent.name.trim()),"addEventCode"===e.target.id&&(this.modelNewEvent.code=this.modelNewEvent.code.trim())},getStrlen:function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},addNewEvent:function(e,t){if(""===this.modelNewEvent.name)return void(this.eventNameError=!1);this.modelNewEvent.name=this.modelNewEvent.name.trim();var a=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/;console.info(this.getStrlen(this.modelNewEvent.name)>64),console.info(""===this.modelNewEvent.name),console.info(!a.test(this.modelNewEvent.name)),this.getStrlen(this.modelNewEvent.name)>64||""===this.modelNewEvent.name||!a.test(this.modelNewEvent.name)?(this.eventNameError=!0,setTimeout(function(){this.eventNameError=!1}.bind(this),4e3)):(this.eventNameError=!1,this.confirmAddNewEvent(e,t))},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"stop"===e?this.startStopModel(t,a,"stop"):"resume"===e?this.startStopModel(t,a,"start"):"delete"===e?this.removeData(t,a):"taskplan"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/taskplan"}):"task"===e?this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/task"}):"excuteStatus"===e&&this.$router.push({path:"/modelmgmt/model/"+a.algModelPk+"/status"})},addEditNewEvent:function(){this.showEditNewEvent=!1},searchModelByName:function(e){e.stopPropagation(),e.preventDefault(),this.loadData()},checkPlanEndTime:function(){console.info("start time is:"+this.modelListSearch.startTime),console.info("end time is:"+this.modelListSearch.endTime);var e=new Date(this.modelListSearch.endTime).getTime(),t=this.modelListSearch.startTime?new Date(this.modelListSearch.startTime).getTime():0;this.isEndTimeErrorBefore=!!(t&&e&&e<t)}}},q_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-list"},[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("异步工作管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[e._m(0),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}}),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"text-right"},[a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("任务状态")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"任务状态"},on:{change:e.loadData},model:{value:e.modelListSearch.taskStatus,callback:function(t){e.$set(e.modelListSearch,"taskStatus",t)},expression:"modelListSearch.taskStatus"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemTaskStatusList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("任务类型")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.loadData},model:{value:e.modelListSearch.taskType,callback:function(t){e.$set(e.modelListSearch,"taskType",t)},expression:"modelListSearch.taskType"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemAsyncTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)]),e._v(" "),a("div",{staticClass:"form-info"},[a("div",{staticClass:"item-info label"},[e._v("小区")]),e._v(" "),a("div",{staticClass:"item-info"},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.loadData},model:{value:e.modelListSearch.communityId,callback:function(t){e.$set(e.modelListSearch,"communityId",t)},expression:"modelListSearch.communityId"}},[a("el-option",{key:"0",attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.systemCommunityList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})})],2)],1)])])])],1),e._v(" "),a("el-row",{staticClass:"margin-top-25"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch}},[a("el-form-item",{attrs:{label:"任务创建时间区间："}}),e._v(" "),a("el-form-item",{attrs:{label:"任务创建时间大于",prop:"startTime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择任务创建时间"},model:{value:e.modelListSearch.startTime,callback:function(t){e.$set(e.modelListSearch,"startTime",t)},expression:"modelListSearch.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务创建时间小于",prop:"endTime"}},[a("el-date-picker",{class:{"error-border":e.isEndTimeErrorBefore},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择任务创建时间"},on:{change:e.checkPlanEndTime},model:{value:e.modelListSearch.endTime,callback:function(t){e.$set(e.modelListSearch,"endTime",t)},expression:"modelListSearch.endTime"}}),e._v(" "),e.isEndTimeErrorBefore?a("span",{staticClass:"red"},[e._v("任务创建时间最小值不能大于任务创建时间最大值")]):e._e()],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{disabled:e.isEndTimeErrorBefore,type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemCommunityMap[t.row.communityId]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemAsyncTypeMap[t.row.taskType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务来源"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemTaskSourceMap[t.row.taskSource]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"任务信息","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taskInfo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后更新时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.updateTime?a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"首次触发时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.firstIssueTime?a("span",[e._v(e._s(e._f("formatDate")(t.row.firstIssueTime)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"重试次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.retryTimes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n         "+e._s(e.systemTaskStatusMap[t.row.taskStatus])+"\n        ")]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},B_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-title"},[a("i",{staticClass:"el-icon-news"}),e._v(" 异步工作管理")])}],W_={render:q_,staticRenderFns:B_},Q_=W_,G_=a("VU/8"),H_=ue,j_=G_(O_,Q_,!1,H_,"data-v-0c07345c",null),J_=j_.exports,Z_=function(e){return mt.a.post(bD+"/modelproxynode/addproxynoderuntime",e).then(function(e){return e.data})},K_=function(e){return mt.a.post(bD+"/modelproxynode/getproxynoderuntimelist",e).then(function(e){return e.data})},Y_=function(e){return mt.a.get(bD+"/modelproxynode/getproxynodebyid/"+e.proxyNodePk).then(function(e){return e.data})},X_=function(e){return mt.a.post(bD+"/modelproxynode/updateproxynoderuntime",e).then(function(e){return e.data})},ew=function(e){return mt.a.get(bD+"/modelproxynode/deleteproxynoderuntime",{params:e}).then(function(e){return e.data})},tw={name:"displayedTableList",components:{ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,mgmtNodePk:0,formInline:{},nodeListParam:[{title:"ID",prop:"id"},{title:"节点类型",prop:"nodeType"},{title:"节点版本",prop:"nodeVersion"},{title:"节点名称",prop:"nodeName"},{title:"节点运行时列表",prop:"runtimeTypeList"}],newRuntime:{runtimeType:"",exePath:"",exeCommand:"",createUser:"",createTime:"",updateUser:"",updateTime:""},activeNames:["1"],editNode:{},currentNode:{},currentProxyNode:{},nodeListSearch:{name:"",type:"全部"},rules:{runtimeType:[{required:!0,message:"请选择运行时类型",trigger:"change"}],exePath:[{required:!1,max:1024,message:"运行时路径长度不能超过 1024 位",trigger:"blur"}],exeCommand:[{required:!1,max:1024,message:"运行时执行命令长度不能超过 1024 位",trigger:"blur"}]},loading2:!1,loadingStep:!1,loadingEditStep:!1,loadingVersion:!1,createRuntimeDialogVisible:!1,editNodeDialogVisible:!1,viewRuntimeListVisible:!1,editRuntimeDialogVisible:!1,displayedTableList:[],displayedRuntimeList:[],editRuntime:{},multipleSelection:[],systemRuntimeTypeList:[],systemRuntimeTypeMap:{},systemNodeType:[],systemNodeStatus:[],systemNodeTypeMap:{},systemNodeStatusMap:{}}},mounted:function(){var e={catCodeList:"mm.nodtyp|mm.nodsts|mm.rtmtyp",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;this.systemRuntimeTypeList=xD(e.data,"mm.rtmtyp"),this.systemRuntimeTypeMap=wD(this.systemRuntimeTypeList),this.systemNodeType=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeType),this.systemNodeStatus=xD(e.data,"mm.nodsts"),this.systemNodeStatusMap=wD(this.systemNodeStatus),this.$nextTick(function(){t.close(),a.getProxyNodeByProxyNodePk()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={currentPage:this.currentPage,pageSize:this.pageSize,orderBy:"",condition:{proxyNodePk:this.$route.params.proxyNodePk}},t=SD();K_(e).then(function(a){console.log("1234567890-------------"+e.proxyNodePk),console.log("00000000000000000000"),console.log(a.data.items),this.displayedTableList=a.data.items,this.total=a.data.pageCount,this.$nextTick(function(){t.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)})},getProxyNodeByProxyNodePk:function(){var e={proxyNodePk:this.$route.params.proxyNodePk},t=SD();Y_(e).then(function(e){var a=this;this.$nextTick(function(){t.close(),a.loadData()}),this.currentProxyNode=e.data}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmCreateAlgRuntime()})},confirmCreateAlgRuntime:function(){var e=this.newRuntime;e.proxyNodePk=this.currentProxyNode.proxyNodePk;var t=SD();Z_(e).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.createRuntimeDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},confirmEditAlgNode:function(){var e=this.editRuntime;console.log("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),console.log(e);var t=SD();X_(e).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.editRuntimeDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgNode()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){console.log("submit!"),this.loadData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.editRuntime=JSON.parse(Bt()(this.displayedTableList[e])),this.editRuntimeDialogVisible=!0},handleView:function(e,t){this.displayedRuntimeList=t,console.info("0987654321"+t),this.viewRuntimeListVisible=!0},modelVersionMgmt:function(e,t){this.$router.push({path:"/modelnode/getmgmtnodebyid"}),console.info(t)},removeData:function(e,t){var a=this,i=this.displayedTableList[e];this.runtimeType=i.runtimeType,this.$confirm('确定要删除运行时"'+this.systemRuntimeTypeMap[this.runtimeType]+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={proxyNodeRuntimePk:i.proxyNodeRuntimePk.toString()},t=SD();ew(e).then(function(e){var a=this;this.$message({type:"success",message:"删除成功"}),this.$nextTick(function(){t.close(),a.loadData()})}.bind(a)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(a))}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},showCreateRuntimeDialog:function(){this.resetForm("newRuntime"),this.createRuntimeDialogVisible=!0},confirmAddModel:function(){this.createNodeDialogVisible=!1},handleClose:function(e){this.createRuntimeDialogVisible=!1,this.editRuntimeDialogVisible=!1},inputBlur:function(e){console.info(e),"addExePath"===e.target.id&&(this.newRuntime.exePath=this.newRuntime.exePath.trim()),"editExePath"===e.target.id&&(this.editRuntime.exePath=this.editRuntime.exePath.trim()),"addExeCommand"===e.target.id&&(this.newRuntime.exeCommand=this.newRuntime.exeCommand.trim()),"editExeCommand"===e.target.id&&(this.editRuntime.exeCommand=this.editRuntime.exeCommand.trim())}}},aw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/dispatchnodemgmt"}}},[e._v("模型节点管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/calculatenodemgmt/"+this.$route.params.mgmtNodePk}}},[e._v("计算节点管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("运行时管理")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:e.currentProxyNode.name,name:"1"}},[a("div",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticClass:"demo-table-expand",attrs:{"element-loading-text":"拼命加载中","label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"主机IP"}},[a("span",[e._v(e._s(e.currentProxyNode.host))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点IP"}},[a("span",[e._v(e._s(e.currentProxyNode.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemNodeStatusMap[e.currentProxyNode.nodeStatus]))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(e.currentProxyNode.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentProxyNode.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(e.currentProxyNode.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentProxyNode.updateTime)))])])],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"margin-top-30",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showCreateRuntimeDialog()}}},[e._v("添加运行时")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:20}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加运行时","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.createRuntimeDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.createRuntimeDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newRuntime",staticClass:"demo-ruleForm",attrs:{model:e.newRuntime,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"运行时类型",prop:"runtimeType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择运行时类型"},model:{value:e.newRuntime.runtimeType,callback:function(t){e.$set(e.newRuntime,"runtimeType",t)},expression:"newRuntime.runtimeType"}},e._l(e.systemRuntimeTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"运行时路径",prop:"exePath"}},[a("el-input",{attrs:{id:"addExePath",size:"small"},on:{blur:e.inputBlur},model:{value:e.newRuntime.exePath,callback:function(t){e.$set(e.newRuntime,"exePath",t)},expression:"newRuntime.exePath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运行时执行命令",prop:"exeCommand"}},[a("el-input",{attrs:{id:"addExeCommand",size:"small"},on:{blur:e.inputBlur},model:{value:e.newRuntime.exeCommand,callback:function(t){e.$set(e.newRuntime,"exeCommand",t)},expression:"newRuntime.exeCommand"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newRuntime")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑运行时","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editRuntimeDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editRuntimeDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editRuntime",staticClass:"demo-ruleForm",attrs:{model:e.editRuntime,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"运行时类型"}},[a("el-select",{attrs:{size:"small"},model:{value:e.editRuntime.runtimeType,callback:function(t){e.$set(e.editRuntime,"runtimeType",t)},expression:"editRuntime.runtimeType"}},e._l(e.systemRuntimeTypeList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"运行时路径"}},[a("el-input",{attrs:{id:"editExePath",size:"small"},on:{blur:e.inputBlur},model:{value:e.editRuntime.exePath,callback:function(t){e.$set(e.editRuntime,"exePath",t)},expression:"editRuntime.exePath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运行时执行命令",width:"300"}},[a("el-input",{attrs:{id:"editExeCommand",size:"small"},on:{blur:e.inputBlur},model:{value:e.editRuntime.exeCommand,callback:function(t){e.$set(e.editRuntime,"exeCommand",t)},expression:"editRuntime.exeCommand"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.handleClose()}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editRuntime")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingVersion,expression:"loadingVersion"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.displayedTableList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"运行时类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemRuntimeTypeMap[t.row.runtimeType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"exePath",label:"运行时路径"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exeCommand",label:"运行时执行命令"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑运行时",placement:"top"}},[a("i",{staticClass:"cursor-hand model-edit font-size-20 el-icon-edit-outline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除运行时",placement:"top"}},[a("i",{staticClass:"red cursor-hand model-delete font-size-20 el-icon-delete",on:{click:function(a){e.removeData(t.$index,t.row)}}})])]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},iw=[],sw={render:aw,staticRenderFns:iw},ow=sw,lw=a("VU/8"),rw=pe,nw=lw(tw,ow,!1,rw,"data-v-6eefa712",null),cw=nw.exports,dw=function(e){return mt.a.get(bD+"/modeltask/algtask/findTaskAndModelAndModleVerByTaskPk",{params:e}).then(function(e){return e.data})},uw=function(e){return mt.a.post(bD+"/modeltaskreulst/algtaskresult/list",e).then(function(e){return e.data})},pw=function(e,t){return mt.a.get(bD+"/modelmgmt/web/download?filePath="+e+"&fileStorageType="+t,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:sessionStorage.token}}).then(function(t){var a=e.split("/"),i=a[a.length-1],s=new Blob([t.data],{type:"Files"});if(navigator.appVersion.toString().indexOf(".NET")>0)window.navigator.msSaveBlob(s,i);else{var o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}return t.data})},mw={name:"displayedTableList",components:{ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,mgmtNodePk:0,formInline:{},nodeListParam:[{title:"ID",prop:"id"},{title:"节点类型",prop:"taskType"},{title:"节点版本",prop:"nodeVersion"},{title:"节点名称",prop:"nodeName"},{title:"节点运行时列表",prop:"runtimeTypeList"}],newRuntime:{runtimeType:"",exePath:"",exeCommand:"",createUser:"",createTime:"",updateUser:"",updateTime:""},activeNames:["1"],editNode:{},currentNode:{},currentProxyNode:{},nodeListSearch:{name:"",type:"全部"},rules:{runtimeType:[{required:!0,message:"请选择运行时类型",trigger:"change"}]},showMessageItem:{},curPlanExcuteParams:{},resultMessageDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,loadingVersion:!1,displayedTableList:[],multipleSelection:[],systemTaskTypeList:[],systemTaskTypeMap:{},systemTaskResource:[],systemNodeStatus:[],systemTaskResourceMap:{},systemNodeStatusMap:{},currentTaskAndModelAndModelVersion:{},communityId:[],communityIdMap:{},systemResultType:[],systemResultTypeMap:{},systemFileStorageType:[],systemFileStorageTypeMap:{}}},mounted:function(){var e={catCodeList:"mm.tsksrc|mm.nodsts|mm.tsktyp|community|mm.restyp|mm.fustyp",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;this.systemTaskTypeList=xD(e.data,"mm.tsktyp"),this.systemTaskTypeMap=wD(this.systemTaskTypeList),this.systemTaskResource=xD(e.data,"mm.tsksrc"),this.systemTaskResourceMap=wD(this.systemTaskResource),this.communityId=xD(e.data,CD),this.communityIdMap=wD(this.communityId),this.systemResultType=xD(e.data,"mm.restyp"),this.systemResultTypeMap=wD(this.systemResultType),this.systemFileStorageType=xD(e.data,"mm.fustyp"),this.systemFileStorageTypeMap=wD(this.systemFileStorageType),console.log("systemFileStorageType is"),console.log(this.systemFileStorageType),this.$nextTick(function(){t.close(),a.getTaskByAlgTaskPk()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={currentPage:this.currentPage,pageSize:this.pageSize,orderBy:"",condition:{algTaskPk:this.$route.params.taskId}},t=SD();uw(e).then(function(a){console.log("1234567890-------------"+e.algTaskPk),console.log("00000000000000000000"),console.log(a.data.items),this.displayedTableList=a.data.items,this.total=a.data.pageCount,this.$nextTick(function(){t.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)})},showMessageResult:function(e,t){this.showMessageItem=t,this.resultMessageDialogVisible=!0},getTaskByAlgTaskPk:function(){var e={algTaskPk:this.$route.params.taskId},t=SD();dw(e).then(function(e){var a=this;console.log("123212321+++++"),console.log(e.data),this.$nextTick(function(){t.close(),a.loadData()}),this.currentTaskAndModelAndModelVersion=e.data,this.currentTaskAndModelAndModelVersion.algTaskPk=e.data.algTaskPk.toString(),console.log("gggggggggggggggggggggg"),console.log(e.data.items)}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},downloadFile:function(e,t){var a=this.displayedTableList[e].filePath,i=this.displayedTableList[e].fileStorageType;pw(a,i).then(function(e){console.log("success")}).catch(function(e){console.info(e)})}}},hw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),e.$route.params.modelId||e.$route.params.versionId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/baseinfomgmt"}}},[e._v("基本信息管理")]):e._e(),e._v(" "),e.$route.params.versionId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version"}}},[e._v("版本管理")]):e._e(),e._v(" "),e.$route.params.modelId&&e.$route.params.versionId&&e.$route.params.planId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version/"+e.$route.params.versionId+"/taskplan"}}},[e._v("计划管理")]):e._e(),e._v(" "),e.$route.params.modelId&&!e.$route.params.versionId&&e.$route.params.planId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/taskplan"}}},[e._v("计划管理")]):e._e(),e._v(" "),e.$route.params.modelId||e.$route.params.versionId||!e.$route.params.planId?e._e():a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/planmgmt"}}},[e._v("计划管理")]),e._v(" "),e.$route.params.versionId&&!e.$route.params.planId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version/"+e.$route.params.versionId+"/task"}}},[e._v("任务管理")]):e._e(),e._v(" "),e.$route.params.planId?a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/plan/"+e.$route.params.planId+"/task"}}},[e._v("任务管理")]):e._e(),e._v(" "),e.$route.params.modelId||e.$route.params.versionId||e.$route.params.planId?e._e():a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/taskmgmt"}}},[e._v("任务管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("任务结果")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:e.currentTaskAndModelAndModelVersion.algTaskPk,name:"1"}},[a("div",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticClass:"demo-table-expand",attrs:{"element-loading-text":"拼命加载中","label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"计划名称"}},[a("span",[e._v(e._s(e.currentTaskAndModelAndModelVersion.taskPlanName))])]),e._v(" "),a("el-form-item",{attrs:{label:"模型名称"}},[a("span",[e._v(e._s(e.currentTaskAndModelAndModelVersion.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"模型版本"}},[a("span",[e._v(e._s(e.currentTaskAndModelAndModelVersion.versionNo))])]),e._v(" "),a("el-form-item",{attrs:{label:"任务类型"}},[a("span",[e._v(e._s(e.systemTaskTypeMap[e.currentTaskAndModelAndModelVersion.taskType]))])]),e._v(" "),a("el-form-item",{attrs:{label:"任务来源"}},[a("span",[e._v(e._s(e.systemTaskResourceMap[e.currentTaskAndModelAndModelVersion.taskSource]))])]),e._v(" "),a("el-form-item",{attrs:{label:"调用人"}},[a("span",[e._v(e._s(e.currentTaskAndModelAndModelVersion.invokeUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[e.currentTaskAndModelAndModelVersion.startTime?a("span",[e._v(e._s(e._f("formatDate")(e.currentTaskAndModelAndModelVersion.startTime)))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[e.currentTaskAndModelAndModelVersion.endTime?a("span",[e._v(e._s(e._f("formatDate")(e.currentTaskAndModelAndModelVersion.endTime)))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{"label-width":"140px",label:"执行时间（秒）"}},[e.currentTaskAndModelAndModelVersion.exeTimeInSec?a("span",[e._v(e._s(e.currentTaskAndModelAndModelVersion.exeTimeInSec/1e3))]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentTaskAndModelAndModelVersion.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentTaskAndModelAndModelVersion.updateTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(e.currentTaskAndModelAndModelVersion.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(e.currentTaskAndModelAndModelVersion.updateUser))])])],1)],1)])],1)],1),e._v(" "),e._m(0),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingVersion,expression:"loadingVersion"}],ref:"multipleTable",staticClass:"margin-top-25",staticStyle:{width:"100%"},attrs:{data:e.displayedTableList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结果类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemResultTypeMap[t.row.resultType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文件存储类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemFileStorageTypeMap[t.row.fileStorageType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文件上传时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.fileUploadTime?[e._v(e._s(e._f("formatDate")(t.row.fileUploadTime)))]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fileName",label:"文件名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"查看结果",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.filePath&&t.row.fileStorageType?a("a",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.downloadFile(t.$index,t.row)}}},[e._v("下载结果文件")])],1):e._e(),e._v(" "),t.row.resultMessage?a("a",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.showMessageResult(t.$index,t.row)}}},[e._v("查看结果")])],1):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"任务结果","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.resultMessageDialogVisible,width:"50%"},on:{"update:visible":function(t){e.resultMessageDialogVisible=t}}},[a("el-form",{ref:"taskResultMessage",staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("div",{staticClass:"task-result-wrap"},[e._v("\n        "+e._s(e.showMessageItem.resultMessage)+"\n      ")]),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:function(t){e.resultMessageDialogVisible=!1}}},[e._v("关闭")])],1)],1)],1)],1)},fw=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-title margin-top-15"},[a("i",{staticClass:"el-icon-news"}),e._v(" 任务结果")])}],gw={render:hw,staticRenderFns:fw},vw=gw,bw=a("VU/8"),Dw=me,yw=bw(mw,vw,!1,Dw,"data-v-db839480",null),Cw=yw.exports,_w={name:"modelList",components:{modelVersionInfoComponenet:v_,ElOption:jD},data:function(){return{currentPage:1,pageSize:10,total:0,currentStep:1,formInline:{user:"",region:""},myHeaders:{Authorization:sessionStorage.token},activeNames:["1"],newModel:{algVersParamPk:"",algModelVersionPk:"",paramName:"",paramType:"",defaultValue:"",paramDesc:"",createTime:"",updateTime:"",createUser:"",updateUser:""},loadingVersion:"false",editModel:{},modelListSearch:{paramName:"",type:"全部"},searchRules:{paramName:[{required:!1,trigger:"blur"},{pattern:"^[一-龥A-Za-z0-9_]+$",min:0,max:256,message:"只支持中文,字母,数字和下划线",trigger:"change"}]},rules:{paramName:[{required:!0,message:"请输入参数名称",trigger:"blur"},{min:1,max:256,message:"长度在 1 到 256 个字符",trigger:"blur"}],paramType:[{required:!0,message:"请选择参数类型",trigger:"blur"}],defaultValue:[{min:0,max:1024,message:"长度在 0 到 1024 个字符",trigger:"blur"}],paramDesc:[{min:0,max:1024,message:"长度在 0 到 1024 个字符",trigger:"blur"}]},defaultValueRule:[{required:!0,message:"请输入参数缺省值",trigger:"blur"}],uploadParam:{url:"/egc-modelmgmtcomponent/modelmgmt/web/uploadModelParamFile",data:{algModelVersionId:"",opType:"replace"}},limitUploadCount:2,paramTypeTips:"",paramTypeValueTips:"",paramId:this.$route.params.versionId,systemModelVersionStatusMap:{},valtypList:[],valtypMap:[],fileList:[],algModelVersionPk:"",algModelPk:"",checked:"true",addModelDialogVisible:!1,editModelDialogVisible:!1,uploadDialogVisible:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,loadingFile:{},sampleJson:"",modelList:[],multipleSelection:[]}},mounted:function(){this.paramTypeTips="例如：-Xmx 或者 -jar xxx.jar",this.paramTypeValueTips="例如：512m",this.algModelVersionPk=this.$route.params.versionId;var e={catCodeList:"mm.valtyp",needCommunity:!1},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.valtypList=xD(e.data,"mm.valtyp"),this.valtypMap=wD(this.valtypList),console.info(this.valtypMap),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={algModelVersionPk:this.algModelVersionPk};this.modelListSearch.paramName.length>0?e.paramName="%"+this.modelListSearch.paramName+"%":e.paramName=void 0;var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e};console.log(t);var a=SD();Iy(t).then(function(e){this.modelList=e.data.items,this.total=e.data.pageCount,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},confirmAddAlgModel:function(){var e=this.newModel;e.algModelVersionPk=this.algModelVersionPk,console.log(e);var t=SD();My(e).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.addModelDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmAddAlgModel()})},confirmEditAlgModel:function(){var e=this.editModel;e.shareFlag=this.editModel?1:0,e.realtimeFlag=this.realtimeFlag?1:0,console.log(e);var t=SD();$y(e).then(function(e){var a=this;console.log(e),this.$nextTick(function(){t.close(),a.loadData()}),this.editModelDialogVisible=!1}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.confirmEditAlgModel()})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(e){var t=this;console.log("submit!"),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loadData()})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.editModel=JSON.parse(Bt()(this.modelList[e])),this.editModelDialogVisible=!0},inputBlur:function(e){console.info(e),"addParamName"===e.target.id&&(this.newModel.paramName=this.newModel.paramName.trim()),"addDefaultValue"===e.target.id&&(this.newModel.defaultValue=this.newModel.defaultValue.trim()),"addParamDesc"===e.target.id&&(this.newModel.paramDesc=this.newModel.paramDesc.trim()),"editParamName"===e.target.id&&(this.editModel.paramName=this.editModel.paramName.trim()),"editDefaultValue"===e.target.id&&(this.editModel.defaultValue=this.editModel.defaultValue.trim()),"editParamDesc"===e.target.id&&(this.editModel.paramDesc=this.editModel.paramDesc.trim()),"searchName"===e.target.id&&(this.modelListSearch.paramName=this.modelListSearch.paramName.trim())},metaItemMgmt:function(e,t){this.$router.push({path:"/modelmgmt/metacat/"+t.metaCatPk+"/metaitem"}),console.info(t)},removeData:function(e,t){var a=this,i=this.modelList[e];this.$confirm('确定要删除"'+i.paramName+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.delete(i.algVersParamPk,i)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},delete:function(e,t){var a={algVersParamPk:e},i=SD();Ey(a).then(function(e){var a=this;this.$nextTick(function(){i.close(),a.loadData()}),this.modelList.splice(t,1),this.$message({type:"success",message:"删除成功!"})}.bind(this)).catch(function(e){this.$nextTick(function(){i.close()}),console.log(e)}.bind(this))},showAddModelDialog:function(){this.resetForm("newModel"),this.addModelDialogVisible=!0},confirmAddModel:function(){this.addModelDialogVisible=!1},uploadModelFile:function(){this.uploadParam.data={algModelVersionId:this.algModelVersionPk,opType:"replace"},this.checked=!0,this.showUploadArea=!0,this.uploadDialogVisible=!0;var e={title:"测试1",list:[{paramName:"param",paramType:"mm.valtyp.string",defaultValue:"123",paramDesc:"参数1"},{paramName:"param2",paramType:"mm.valtyp.string",defaultValue:"456",paramDesc:"参数2"}]};this.sampleJson=Bt()(e,null,2)},closeUploadModel:function(){this.uploadDialogVisible=!1},submitUpload:function(){var e=this;if(console.info(this.$refs.upload),console.info(this.$refs.upload.uploadFiles),console.info(this.$refs.upload.uploadFiles.length),this.$refs.upload.uploadFiles.length<1)return this.$message({type:"info",message:"请先选取文件"}),!1;var t=this.checked?"确认上传文件并覆盖已有参数？":"确认上传并与已有参数合并？";this.$confirm(t).then(function(t){e.loadingFile=SD(),e.$refs.upload.submit()}).catch(function(e){console.log("取消上传")})},handleCheckChange:function(e){this.uploadParam.data.opType=e?"replace":"merge"},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleSuccess:function(e,t,a){var i=this;this.$nextTick(function(){i.loadingFile.close(),i.$refs.upload.clearFiles(),console.log(e),i.$message({type:"success",message:"上传成功！"}),i.loadData(),i.uploadDialogVisible=!1})},handleError:function(e,t,a){var i=this;this.$nextTick(function(){i.loadingFile.close(),console.log(e),i.$refs.upload.clearFiles(),i.$message({type:"error",message:e.message})})},handleFileChange:function(e,t){if(console.log(e),/.*[\u4e00-\u9fa5]+.*$/.test(e.name))return this.$message.error("不支持中文文件名，请重命名文件"),t=[],this.$refs.upload.clearFiles(),!1;2===t.length&&t.shift()},handleBeforeUpload:function(e,t){console.log(e)},removeFileList:function(){},handleExceed:function(e,t){console.log(e)},handleClose:function(e){this.$refs.newModel&&this.$refs.newModel.clearValidate(),this.$refs.editModel&&this.$refs.editModel.clearValidate(),this.addModelDialogVisible=!1,this.editModelDialogVisible=!1,this.uploadDialogVisible=!1},searchModelByName:function(e){e.stopPropagation(),e.preventDefault(),this.loadData()}}},ww=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/baseinfomgmt"}}},[e._v("基本信息管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version"}}},[e._v("版本管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("模型版本参数定义")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-15"},[a("modelVersionInfoComponenet",{attrs:{curVersionId:e.paramId}})],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("添加参数")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(t){e.uploadModelFile()}}},[e._v("上传文件")])],1)],1)],1)]),e._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"text-right"},[a("el-form",{ref:"modelListSearch",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.modelListSearch,rules:e.searchRules}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"占位符"}},[a("el-input",{attrs:{placeholder:"占位符"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参数名称",prop:"paramName"}},[a("div",{staticClass:"item-info"},[a("el-input",{attrs:{id:"searchName"},on:{blur:e.inputBlur},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onSubmit("modelListSearch")}},model:{value:e.modelListSearch.paramName,callback:function(t){e.$set(e.modelListSearch,"paramName",t)},expression:"modelListSearch.paramName"}})],1)]),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e.onSubmit("modelListSearch")}}},[e._v("查询")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.modelList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"paramName",label:"参数名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"paramType",label:"参数类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.valtypMap[t.row.paramType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"defaultValue",label:"缺省值","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"paramDesc",label:"参数描述","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.row.sysFlag,expression:"!scope.row.sysFlag"}],staticClass:"item",attrs:{effect:"dark",content:"编辑参数",placement:"top"}},[a("i",{staticClass:"cursor-hand model-eidt font-size-20 el-icon-edit-outline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}})]),e._v(" "),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:!t.row.sysFlag,expression:"!scope.row.sysFlag"}],staticClass:"item",attrs:{effect:"dark",content:"删除参数",placement:"top"}},[a("i",{staticClass:"red cursor-hand model-delete font-size-20 el-icon-delete",on:{click:function(a){e.removeData(t.$index,t.row)}}})])]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加模型版本参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.addModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.addModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newModel",staticClass:"demo-ruleForm",attrs:{model:e.newModel,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"paramName"}},[a("el-input",{attrs:{id:"addParamName",placeholder:e.paramTypeTips,size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.paramName,callback:function(t){e.$set(e.newModel,"paramName",t)},expression:"newModel.paramName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数类型",prop:"paramType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择系统参数类型"},model:{value:e.newModel.paramType,callback:function(t){e.$set(e.newModel,"paramType",t)},expression:"newModel.paramType"}},e._l(e.valtypList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"参数缺省值",prop:"defaultValue"}},[a("el-input",{attrs:{id:"addDefaultValue",placeholder:e.paramTypeValueTips,size:"small"},on:{blur:e.inputBlur},model:{value:e.newModel.defaultValue,callback:function(t){e.$set(e.newModel,"defaultValue",t)},expression:"newModel.defaultValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参数描述",prop:"paramDesc"}},[a("el-input",{attrs:{id:"addParamDesc",autosize:{minRows:2,maxRows:10},type:"textarea"},on:{blur:e.inputBlur},model:{value:e.newModel.paramDesc,callback:function(t){e.$set(e.newModel,"paramDesc",t)},expression:"newModel.paramDesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newModel")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑模型版本参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editModelDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editModelDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editModel",staticClass:"demo-ruleForm",attrs:{model:e.editModel,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"paramName"}},[a("el-input",{attrs:{id:"editParamName",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.paramName,callback:function(t){e.$set(e.editModel,"paramName",t)},expression:"editModel.paramName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统参数类型",prop:"paramType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择系统参数类型"},model:{value:e.editModel.paramType,callback:function(t){e.$set(e.editModel,"paramType",t)},expression:"editModel.paramType"}},e._l(e.valtypList,function(e){return a("el-option",{key:e.item_code,attrs:{label:e.item_name,value:e.item_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"参数缺省值",prop:"defaultValue"}},[a("el-input",{attrs:{id:"editDefaultValue",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.defaultValue,callback:function(t){e.$set(e.editModel,"defaultValue",t)},expression:"editModel.defaultValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参数描述",prop:"paramDesc"}},[a("el-input",{attrs:{id:"editParamDesc",autosize:{minRows:2,maxRows:10},type:"textarea"},on:{blur:e.inputBlur},model:{value:e.editModel.paramDesc,callback:function(t){e.$set(e.editModel,"paramDesc",t)},expression:"editModel.paramDesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editModel")}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"模型版本参数文件上传","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.uploadDialogVisible,width:"40%","before-close":e.handleClose},on:{close:function(t){e.closeUploadModel()},"update:visible":function(t){e.uploadDialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:".json",limit:e.limitUploadCount,multiple:!1,action:e.uploadParam.url,data:e.uploadParam.data,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError,"on-change":e.handleFileChange,headers:e.myHeaders,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,"on-exceed":e.handleExceed,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:e.removeFileList},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),[a("el-checkbox",{on:{change:e.handleCheckChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("上传文件覆盖已有参数（取消勾选将与已有参数合并）")])],e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n        只能上传json文件,格式如下：\n        "),a("pre",{staticClass:"pre-border"},[e._v("          "+e._s(e.sampleJson)+"\n        ")])])],2)],1)],1)},Sw=[],xw={render:ww,staticRenderFns:Sw},kw=xw,Tw=a("VU/8"),Lw=he,Nw=Tw(_w,kw,!1,Lw,null,null),Vw=Nw.exports,Iw=function(e){return mt.a.post(bD+"/algVersStat/list",e).then(function(e){return e.data})},Ew={name:"displayedTableList",components:{modelVersionInfoComponenet:v_,modelInfoComponenet:n_,ElOption:jD},data:function(){return{currentStep:1,currentPage:1,pageSize:10,total:0,formInline:{},activeNames:["1"],currentModel:{},currentVersion:[{versionNo:"",versionStatus:"",description:"",fileUploadFlag:"",createUser:"",createTime:"",updateTime:"",updateUser:""}],loadingModel:!1,loadingVersion:!1,loadingStatus:!1,displayedTableList:[],systemModelEventList:[],systemModelVersionStatusList:[],multipleSelection:[],viewRuntimeList:[],systemModelCatList:[],modelEnableStatus:"mm.modsts.enable",modelVersionEnableStatus:"mm.versts.enable",systemNodeTypeList:[],systemModelRuntimeList:[],systemModelStatusList:[],systemNodeTypeMap:{},systemModelRuntimeMap:{},systemModelStatusMap:{},systemModelCatMap:{},systemModelEventMap:{},systemModelVersionStatusMap:{},type:this.$route.params.type,id:this.$route.params.id}},mounted:function(){var e={catCodeList:"mm.modsts|mm.nodtyp|mm.evttyp|mm.modcat|mm.versts|mm.rtmtyp",needCommunity:!1},t=SD();_D(e).then(function(e){var a=this;this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemModelVersionStatusList=xD(e.data,"mm.versts"),this.systemModelVersionStatusMap=wD(this.systemModelVersionStatusList),this.systemModelRuntimeList=xD(e.data,"mm.rtmtyp"),this.systemModelRuntimeMap=wD(this.systemModelRuntimeList),this.systemModelStatusList=xD(e.data,"mm.modsts"),this.systemModelStatusMap=wD(this.systemModelStatusList),this.systemModelCatList=xD(e.data,"mm.modcat"),this.systemModelCatMap=wD(this.systemModelCatList),this.systemModelEventList=xD(e.data,"mm.evttyp"),this.systemModelEventMap=wD(this.systemModelEventList),this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={algModelPk:this.$route.params.id};this.$route.params.versionId&&(e={algModelVersionPk:this.$route.params.versionId}),!this.$route.params.versionId&&this.$route.params.modelId&&(e={algModelPk:this.$route.params.modelId});var t={currentPage:this.currentPage,pageSize:this.pageSize,condition:e},a=SD();Iw(t).then(function(e){this.total=e.data.pageCount,this.displayedTableList=e.data.items,this.$nextTick(function(){a.close()})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){console.log("submit!"),this.loadData()},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()},handleEdit:function(e,t){console.info(t),this.editNode=t,this.editNodeDialogVisible=!0},handleView:function(e,t){this.displayedRuntimeList=t,console.info("0987654321"+t),this.viewRuntimeListVisible=!0},modelVersionMgmt:function(e,t){this.$router.push({path:"/modelnode/getmgmtnodebyid"}),console.info(t)},showProgress:function(){console.info("In Progress")},runtimeMgmt:function(e,t){this.$router.push({path:"/modelmgmt/runtime/"+t.proxyNodePk}),console.info(t)},handleCommand:function(e,t,a){"edit"===e?this.handleEdit(t,a):"delete"===e&&this.removeData(t,a)}}},Pw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/baseinfomgmt"}}},[e._v("基本信息管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version"}}},[e._v("版本管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("模型运行状况")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[e.$route.params.modelId&&!e.$route.params.versionId?a("modelInfoComponenet",{attrs:{curModelId:e.$route.params.modelId}}):e._e(),e._v(" "),e.$route.params.versionId?a("modelVersionInfoComponenet",{attrs:{curVersionId:e.$route.params.versionId}}):e._e(),e._v(" "),e._m(0),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStatus,expression:"loadingStatus"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.displayedTableList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"algVersStatPk",label:"ID",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalInvokeNum",label:"调用次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"successNum",label:"成功次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"failNum",label:"失败次数","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgExeTimeInSec",label:"平均成功时间"}})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},Mw=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model-title margin-top-25"},[a("i",{staticClass:"el-icon-news"}),e._v(" 运行状况")])}],$w={render:Pw,staticRenderFns:Mw},Uw=$w,Fw=a("VU/8"),Rw=fe,zw=Fw(Ew,Uw,!1,Rw,"data-v-1eed0267",null),Aw=zw.exports,Ow=function(e){return mt.a.get(bD+"/versionresult/getVerResParams/"+e+"?t="+Date.now()).then(function(e){return e.data})},qw=function(e){return mt.a.get(bD+"/versionresult/getResTypeSubsetMetaCats",{params:e}).then(function(e){return e.data})},Bw=function(e){return mt.a.post(bD+"/versionresult/saveAlgVersResult",e).then(function(e){return e.data})},Ww={name:"version-result-define",components:{modelVersionInfoComponenet:v_},data:function(){return{currentPage:1,pageSize:10,total:0,checked:"true",activeNames:["1"],loadingVersion:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,newModel:{paramDesc:"",paramName:"",paramValue:""},curIndex:0,paramList:[],curParamList:[],editModel:{},rules:{paramValue:[{required:!0,validator:function(e,t,a){console.info(this.curParamList),this.curParamList.length>0?this.curParamList[this.curIndex].paramValue.length>1024||this.curParamList[this.curIndex].paramValue.length<1?a(new Error("请输入参数值,长度在 1 到 1024 个字符")):a():t.length>1024||t.length<1?a(new Error("请输入参数值,长度在 1 到 1024 个字符")):a()}.bind(this),trigger:"blur"}]},paramId:this.$route.params.versionId,resultType:"mm.restyp.file",resulttypeList:[],chooseable:"",saveable:!0,addResultDialogVisible:!1,editResultDialogVisible:!1,algModelVersionPk:"",algModelPk:"",algVersResultPk:""}},mounted:function(){this.checked=!0,this.algModelVersionPk=this.$route.params.versionId;var e={catCodeList:"mm.restyp",needCommunity:!1},t=SD();_D(e).then(function(e){var a=this;console.log(e),this.resulttypeList=xD(e.data,"mm.restyp"),this.resulttypeMap=wD(this.resulttypeList),this.resulttypeList.forEach(function(e,t){e.item_code.indexOf("none")>0&&(e.item_name="无结果类型")}),this.$nextTick(function(){t.close(),a.getResult()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{getResult:function(){var e=this.algModelVersionPk,t=SD();Ow(e).then(function(e){console.log(" result.data.total "+e.data.length);var a=e.data[0].resultType,i=e.data[0].algVersResultPk;this.$nextTick(function(){t.close()}),console.info(e),i&&"mm.restyp.none"!==a?(this.resultType=e.data[0].resultType,this.algVersResultPk=e.data[0].algVersResultPk,this.paramList=e.data,this.chooseable=!1):(this.curParamList=[],this.chooseable=!0)}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},handleCheckChange:function(e){console.log(e)},handleChange:function(e){console.log(e),this.getTemplateStrByResultType(e)},handleEdit:function(e,t){console.info(t),this.editModel=JSON.parse(Bt()(this.paramList[e])),this.curIndex=e,this.editResultDialogVisible=!0},getTemplateStrByResultType:function(e){var t={parentItemCode:e};this.curParamList=[];var a=SD();qw(t).then(function(e){var t=this;console.log(" result.data.total "+e.data.length),this.curParamList=e.data,e.data.length<1?this.saveable=!1:this.saveable=!0,this.$nextTick(function(){a.close(),t.addResultDialogVisible=!0})}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},inputBlurValidator:function(e,t){console.info(e),this.curIndex=t},inputBlur:function(e){console.info(e)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("submit!"),t.confirmAddAlgModel()})},confirmAddAlgModel:function(){var e={};e.algModelVersionPk=this.algModelVersionPk,e.resultType=this.resultType,e.params=this.curParamList,console.log(e);var t=SD();Bw(e).then(function(e){var a=this;this.addResultDialogVisible=!1,this.curParamList=[],this.$nextTick(function(){t.close(),a.getResult()}),console.log(e),console.info(this)}.bind(this)).catch(function(e){this.curParamList=[],this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},submitEditForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("submit!"),t.confirmEditAlgModel()})},confirmEditAlgModel:function(){var e={};e.algModelVersionPk=this.algModelVersionPk,e.resultType=this.resultType,this.paramList[this.curIndex]=this.editModel,e.params=this.paramList,console.log(e);var t=SD();Bw(e).then(function(e){var a=this;this.editResultDialogVisible=!1,console.log(e),console.info(this),this.$nextTick(function(){t.close(),a.getResult()})}.bind(this)).catch(function(e){this.$nextTick(function(){t.close()}),console.info(e)}.bind(this))},showAddModelDialog:function(){this.getTemplateStrByResultType(this.resultType)},confirmAddModel:function(){this.addResultDialogVisible=!1},handleClose:function(e){this.$refs.newModel&&this.$refs.newModel.clearValidate(),this.$refs.editModel&&this.$refs.editModel.clearValidate(),this.addResultDialogVisible=!1,this.editResultDialogVisible=!1}}},Qw=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result-define"},[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/baseinfomgmt"}}},[e._v("基本信息管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/model/"+e.$route.params.modelId+"/version"}}},[e._v("版本管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("模型结果定义")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-15"},[a("modelVersionInfoComponenet",{attrs:{curVersionId:e.paramId}})],1),e._v(" "),a("div",{staticClass:"margin-top-15"},[a("el-row",{staticClass:"margin-top-25",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.chooseable,expression:"chooseable"}],attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.showAddModelDialog()}}},[e._v("定义结果")])],1)],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"paramList",staticStyle:{width:"100%"},attrs:{data:e.paramList,"tooltip-effect":"dark","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{label:"结果类型","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.resulttypeMap[e.resultType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"paramDesc",label:"参数名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"paramName",label:"参数代码","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"paramValue",label:"参数值","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑参数",placement:"top"}},[a("i",{staticClass:"cursor-hand model-eidt font-size-20 el-icon-edit-outline",on:{click:function(a){e.handleEdit(t.$index,t.row)}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加结果定义","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.addResultDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.addResultDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingStep,expression:"loadingStep"}],ref:"newModel",staticClass:"demo-ruleForm",attrs:{model:e.newModel,rules:e.rules,"label-position":"left","label-width":"150px"}},[a("div",{staticClass:"margin-top-15 margin-bottom-15"},[a("el-form-item",{attrs:{label:"结果类型：",calss:"checkbox-header"}},[a("el-select",{attrs:{size:"small",disabled:!e.chooseable,placeholder:"请选择结果类型"},on:{change:e.handleChange},model:{value:e.resultType,callback:function(t){e.resultType=t},expression:"resultType"}},e._l(e.resulttypeList,function(t){return"mm.restyp.none"!=t.item_code?a("el-option",{key:t.item_code,attrs:{label:t.item_name,value:t.item_code}}):e._e()}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.curParamList&&e.curParamList.length>0,expression:"curParamList && curParamList.length>0"}]},[e._v("参数列表：")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.curParamList&&e.curParamList.length>0,expression:"curParamList && curParamList.length>0"}],staticClass:"customBorder"},[a("div",{staticClass:"margin-bottom-15"},[e._l(e.curParamList,function(t,i){return[a("el-form-item",{attrs:{label:t.paramDesc,prop:"paramValue"}},[a("el-input",{attrs:{size:"small"},on:{blur:function(t){e.inputBlurValidator(t,i)}},model:{value:t.paramValue,callback:function(a){e.$set(t,"paramValue",a)},expression:"param.paramValue"}})],1)]})],2)]),e._v(" "),a("div",{staticClass:"text-right add-model-button margin-top-30"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("newModel")}}},[e._v("保存")])],1)],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑结果参数","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.editResultDialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.editResultDialogVisible=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEditStep,expression:"loadingEditStep"}],ref:"editModel",staticClass:"demo-ruleForm",attrs:{model:e.editModel,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"参数名称",prop:"paramDesc"}},[a("el-input",{attrs:{id:"editParamDesc",disabled:"",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.paramDesc,callback:function(t){e.$set(e.editModel,"paramDesc",t)},expression:"editModel.paramDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参数代码",prop:"paramName"}},[a("el-input",{attrs:{id:"editParamName",disabled:"",size:"small"},on:{blur:e.inputBlur},model:{value:e.editModel.paramName,callback:function(t){e.$set(e.editModel,"paramName",t)},expression:"editModel.paramName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参数值",prop:"paramValue"}},[a("el-input",{attrs:{size:"small"},model:{value:e.editModel.paramValue,callback:function(t){e.$set(e.editModel,"paramValue",t)},expression:"editModel.paramValue"}})],1),e._v(" "),a("el-form-item",{staticClass:"text-right add-model-button"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("editModel")}}},[e._v("保存")])],1)],1)],1)],1)},Gw=[],Hw={render:Qw,staticRenderFns:Gw},jw=Hw,Jw=a("VU/8"),Zw=ge,Kw=Jw(Ww,jw,!1,Zw,"data-v-6c51e992",null),Yw=Kw.exports,Xw={name:"displayedTableList",components:{ElOption:jD},data:function(){return{currentStep:1,currentPage:1,pageSize:10,total:0,formInline:{},nodeListParam:[{title:"ID",prop:"id"},{title:"节点类型",prop:"nodeType"},{title:"节点版本",prop:"nodeVersion"},{title:"节点名称",prop:"nodeName"},{title:"节点运行时列表",prop:"runtimeTypeList"}],newNode:{name:"",ip:"",host:"",nodeType:"",deviceId:"",port:"",runtimeTypeList:"",maxTaskNum:"",communityId:"",createUser:"",createTime:"",updateUser:"",updateTime:"",nodeStatus:""},newRunTimeOfProxyNode:{proxyNodePk:this.$route.params.proxyNodePk,runTimeType:"",exePath:"",exeCommand:""},activeNames:["1"],editNode:{},currentNode:{},currentProxyNode:{},nodeListSearch:{name:"",type:"全部"},loadingModelInfo:!1,loading2:!1,loadingStep:!1,loadingEditStep:!1,createNodeDialogVisible:!1,editNodeDialogVisible:!1,viewRuntimeListVisible:!1,displayedTableList:[],displayedRuntimeList:[],multipleSelection:[],viewRuntimeList:[],systemNodeTypeList:[],systemNodeStatusList:[],systemNodeTypeMap:{},systemNodeStatusMap:{},communityIdMap:{},communityId:[],publishHistory:[]}},mounted:function(){var e={catCodeList:"mm.nodtyp|mm.nodsts|community",needCommunity:!0},t=SD();_D(e).then(function(e){var a=this;this.systemNodeTypeList=xD(e.data,"mm.nodtyp"),this.systemNodeTypeMap=wD(this.systemNodeTypeList),this.systemNodeStatusList=xD(e.data,"mm.nodsts"),this.systemNodeStatusMap=wD(this.systemNodeStatusList),this.communityId=xD(e.data,CD),this.communityIdMap=wD(this.communityId),this.$nextTick(function(){t.close(),a.getCurNodeByNodePk()})}.bind(this)).catch(function(e){console.log(e),this.$nextTick(function(){t.close()})}.bind(this))},filters:{formatDate:function(e){return K(new Date(e),"yyyy-MM-dd hh:mm:ss")}},methods:{loadData:function(){var e={mgmtNodePk:this.$route.params.mgmtNodePk},t={currentPage:this.currentPage,pageSize:this.pageSize,orderBy:"",condition:e},a=SD();ky(t).then(function(e){this.$nextTick(function(){a.close()}),console.log("00000000000000000000"),console.log(e.data.items),this.publishHistory=e.data.items,this.total=e.data.pageCount}.bind(this)).catch(function(e){this.$nextTick(function(){a.close()}),console.info(e)}.bind(this))},getCurNodeByNodePk:function(){var e={mgmtNodePk:this.$route.params.mgmtNodePk},t=SD();NC(e).then(function(e){var a=this;this.currentNode=e.data,this.$nextTick(function(){t.close(),a.loadData()})}.bind(this)).catch(function(e){console.info(e),this.$nextTick(function(){t.close()})}.bind(this))},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.loadData()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.loadData()}}},eS=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"margin-top-15"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/modelmgmt/dispatchnodemgmt"}}},[e._v("调度节点管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("管理节点发布历史")])],1)],1),e._v(" "),a("div",{staticClass:"margin-top-30"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingModelInfo,expression:"loadingModelInfo"}],attrs:{title:e.currentNode.name,name:"1"}},[a("div",[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"节点类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemNodeTypeMap[e.currentNode.nodeType]))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"节点名称"}},[a("span",[e._v(e._s(e.currentNode.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"主机IP"}},[a("span",[e._v(e._s(e.currentNode.host))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点IP"}},[a("span",[e._v(e._s(e.currentNode.ip))])]),e._v(" "),a("el-form-item",{attrs:{label:"节点状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.systemNodeStatusMap[e.currentNode.nodeStatus]))])]}}])}),e._v(" "),a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(e.currentNode.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentNode.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(e.currentNode.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(e.currentNode.updateTime)))])])],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],ref:"publishHistory",staticStyle:{width:"100%"},attrs:{data:e.publishHistory,"tooltip-effect":"dark","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"创建人"}},[a("span",[e._v(e._s(t.row.createUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新人"}},[a("span",[e._v(e._s(t.row.updateUser))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mgmtNodePk",label:"管理节点ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"publishVersion",label:"发布版本号"}}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.publishTime)))]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center margin-top-20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},tS=[],aS={render:eS,staticRenderFns:tS},iS=aS,sS=a("VU/8"),oS=ve,lS=sS(Xw,iS,!1,oS,"data-v-3f227b94",null),rS=lS.exports,nS=[{path:"/modelmgmt/baseInfomgmt",name:"基本信息管理",component:py},{path:"/modelmgmt/model/:modelId/version",name:"模型版本管理",component:Jy},{path:"/modelmgmt/model/:modelId/version/:versionId/paramdefine",name:"版本参数定义",component:Vw},{path:"/modelmgmt/model/:modelId/version/:versionId/resultdefine",name:"版本结果定义",component:Yw},{path:"/modelmgmt/planmgmt",name:"执行计划管理",component:I_},{path:"/modelmgmt/model/:modelId/taskplan",name:"模型执行计划管理",component:I_},{path:"/modelmgmt/model/:modelId/version/:versionId/taskplan",name:"版本执行计划管理",component:I_},{path:"/modelmgmt/taskmgmt",name:"任务管理",component:A_},{path:"/modelmgmt/taskmgmt/plan/:planId/task",name:"计划任务管理",component:A_},{path:"/modelmgmt/model/:modelId/task",name:"模型任务管理",component:A_},{path:"/modelmgmt/model/:modelId/plan/:planId/task",name:"模型计划任务管理",component:A_},{path:"/modelmgmt/model/:modelId/version/:versionId/task",name:"版本任务管理",component:A_},{path:"/modelmgmt/model/:modelId/version/:versionId/plan/:planId/task",name:"版本计划任务管理",component:A_},{path:"/modelmgmt/baseInfoMgmtList",name:"modelManageMent",component:iy},{path:"/modelmgmt/baseConfigMgmt",name:"modelConfig",component:nC},{path:"/modelmgmt/metacatmgmt",name:"modelMetaCat",component:XC},{path:"/modelmgmt/metacat/:metacatId/metaItem",name:"modelMetaItem",component:vC},{path:"/modelmgmt/modeltask/task",name:"modelTaskInfo",component:Cw},{path:"/modelmgmt/modelversionstat/:type/:id",name:"modelversionstat",component:Aw},{path:"/modelmgmt/model/:modelId/status",name:"模型运行情况",component:Aw},{path:"/modelmgmt/model/:modelId/version/:versionId/status",name:"版本运行情况",component:Aw},{path:"/modelmgmt/dispatchnodemgmt",name:"dispatchNodeManagement",component:kC},{path:"/modelmgmt/calculatenodemgmt/:mgmtNodePk",name:"calculateNodeManagegment",component:AC},{path:"/modelmgmt/runtime/:mgmtNodePk/:proxyNodePk",name:"runtimeManagement",component:cw},{path:"/modelmgmt/datasyncmgmt",name:"dataSyncManagement",component:J_},{path:"/modelmgmt/modeltask/task/:algTaskPk",name:"modelTaskInfoById",component:Cw},{path:"/modelmgmt/taskmgmt/task/:taskId/taskinfo",name:"modelTaskInfoByTask",component:Cw},{path:"/modelmgmt/model/:modelId/plan/:planId/task/:taskId/taskinfo",name:"modelTaskInfoByModelAndPlanTask",component:Cw},{path:"/modelmgmt/model/:modelId/version/:versionId/plan/:planId/task/:taskId/taskinfo",name:"modelTaskInfoByModelVersionAndPlanTask",component:Cw},{path:"/modelmgmt/model/:modelId/version/:versionId/task/:algTaskPk",name:"modelandversiontask",component:Cw},{path:"/modelmgmt/model/:modelId/version/:versionId/task/:taskId/taskinfo",name:"modelandversionnoplantask",component:Cw},{path:"/modelmgmt/dispatchnodemgmt/publishhistory/:mgmtNodePk",name:"mgmtNodePublishHistory",component:rS}],cS=function(e){var t=Bt()(e).split("filename=\\"),a=Bt()(t[1]).split(",");return decodeURI(a[0].substring(3,a[0].length-6))},dS=function(){return mt.a.get("/egc-applicationupgradecomponent/aupackagedispatches/maindata/getProvince").then(function(e){return e.data})},uS=function(e){return console.log("get city list, param is  --\x3e   "+Bt()(e)),console.log("get city list param: province is  --\x3e   "+Bt()(e.province)),mt.a.get("/egc-applicationupgradecomponent/aupackagedispatches/maindata/getCity?province="+encodeURI(e.province)).then(function(e){return e.data})},pS=function(e){return console.log("get district, the param  province is --\x3e   "+e.province+" the param  city is ---- >"+e.city),mt.a.get("/egc-applicationupgradecomponent/aupackagedispatches/maindata/getDistrict?province="+encodeURI(e.province)+"&city="+encodeURI(e.city)).then(function(e){return e.data})},mS=function(e){var t={headers:{"Content-Type":"multipart/form-data"}};return mt.a.post("/egc-applicationupgradecomponent/auServers/importExcel",e,t).then(function(e){return e.data})},hS=function(e){var t={headers:{"Content-Type":"multipart/form-data"}};return mt.a.post("/egc-applicationupgradecomponent/auNetequip/importExcel",e,t).then(function(e){return e.data})},fS=function(e){var t={headers:{"Content-Type":"multipart/form-data"}};return mt.a.post("/egc-applicationupgradecomponent/auServices/importExcel",e,t).then(function(e){return e.data})},gS=function(e){return console.log(" generate download template params ->  "+Bt()(e)),mt.a.get("/egc-applicationupgradecomponent/download/templateDownload?downloadCls="+e,{responseType:"arraybuffer"}).then(function(e){console.log("res.headers ---\x3e  "+Bt()(e.headers));var t=cS(e.headers),a=new Blob([e.data],{type:"application/x-xls"});if("msSaveOrOpenBlob"in navigator)console.log("res filename ---\x3e  "+t.replace("\\","")),window.navigator.msSaveOrOpenBlob(a,t.replace("\\",""));else{var i=window.URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.target="_blank",s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}return e.data})},vS=function(e,t){return console.log(" download excel file params ->>>>>>>>>>>>>   "+Bt()(e)+"    >>>>>>>> the second params2:  ---\x3e   "+t),mt.a.get("/egc-applicationupgradecomponent/download/resultDownload?condition="+encodeURI(Bt()(e))+"&downloadCls="+t,{responseType:"arraybuffer"}).then(function(e){console.log("res.headers ---\x3e  "+Bt()(e.headers));var t=cS(e.headers),a=new Blob([e.data],{type:"application/x-xls"});if("msSaveOrOpenBlob"in navigator)console.log("res filename ---\x3e  "+t.replace("\\","")),window.navigator.msSaveOrOpenBlob(a,t.replace("\\",""));else{var i=window.URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.target="_blank",s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}return e.data})},bS=function(e){return console.log("<<<<<au servers params data :"+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/auServers/queryPageData",e).then(function(e){return e.data})},DS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auServers/get?id="+e).then(function(e){return e.data})},yS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auServers/update",e).then(function(e){return e.data})},CS=function(e){return console.log("refresh server param: uuid -- > "+Bt()(e)),mt.a.get("/egc-applicationupgradecomponent/auServers/updateComparsion?id="+e).then(function(e){return e.data})},_S=function(e){return mt.a.get("/egc-applicationupgradecomponent/auServers/queryHistoryById?id="+e).then(function(e){return e.data})},wS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auServices/queryPageData",e).then(function(e){return e.data})},SS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auServices/getServiceInfo?id="+e).then(function(e){return e.data})},xS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auServices/update",e).then(function(e){return e.data})},kS=function(e){return console.log("refresh app service param: uuid -- > "+Bt()(e)),mt.a.get("/egc-applicationupgradecomponent/auServices/updateComparsion?id="+e).then(function(e){return e.data})},TS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auServices/queryHistoryById?id="+e).then(function(e){return e.data})},LS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auOss/queryPageData",e).then(function(e){return e.data})},NS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auOss/get?id="+e).then(function(e){return e.data})},VS=function(e){return console.log("update para --\x3e "+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/auOss/update",e).then(function(e){return e.data})},IS=function(e){return console.log("refresh oss param: uuid -- > "+Bt()(e)),mt.a.get("/egc-applicationupgradecomponent/auOss/updateComparsion?id="+e).then(function(e){return e.data})},ES=function(e){return mt.a.get("/egc-applicationupgradecomponent/auOss/queryHistoryById?id="+e).then(function(e){return e.data})},PS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auDbms/queryPageData",e).then(function(e){return e.data})},MS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auDbms/get?id="+e).then(function(e){return e.data})},$S=function(e){return mt.a.post("/egc-applicationupgradecomponent/auDbms/update",e).then(function(e){return e.data})},US=function(e){return console.log("refresh database param: uuid -- > "+Bt()(e)),mt.a.get("/egc-applicationupgradecomponent/auDbms/updateComparsion?id="+e).then(function(e){return e.data})},FS=function(e){return console.log("database history id ---- >"+e),mt.a.get("/egc-applicationupgradecomponent/auDbms/queryHistoryById?id="+e).then(function(e){return e.data})},RS=function(e){return console.log("middle list param --\x3e "+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/auMiddleware/queryPageData?softwareType=middleware",e).then(function(e){return e.data})},zS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auMiddleware/get?id="+e).then(function(e){return e.data})},AS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auMiddleware/update",e).then(function(e){return e.data})},OS=function(e){return console.log("refresh middleware param: uuid -- > "+Bt()(e)),mt.a.get("/egc-applicationupgradecomponent/auMiddleware/updateComparsion?id="+e).then(function(e){return e.data})},qS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auMiddleware/queryHistoryById?id="+e).then(function(e){return e.data})},BS=function(e){return console.log("operation params ---\x3e  "+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/auMiddleware/queryPageData?softwareType=operation",e).then(function(e){return e.data})},WS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auMiddleware/get?id="+e).then(function(e){return e.data})},QS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auMiddleware/update",e).then(function(e){return e.data})},GS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auMiddleware/updateComparsion?id="+e).then(function(e){return e.data})},HS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auMiddleware/queryHistoryById?id="+e).then(function(e){return e.data})},jS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auNetequip/queryPageData",e).then(function(e){return e.data})},JS=function(e){return console.log("net equipment id  -- > "+e),mt.a.get("/egc-applicationupgradecomponent/auNetequip/get?id="+e).then(function(e){return e.data})},ZS=function(e){return mt.a.post("/egc-applicationupgradecomponent/auNetequip/update",e).then(function(e){return e.data})},KS=function(e){return console.log("refresh net equipment param: uuid -- > "+Bt()(e)),mt.a.get("/egc-applicationupgradecomponent/auNetequip/updateComparsion?id="+e).then(function(e){return e.data})},YS=function(e){return mt.a.get("/egc-applicationupgradecomponent/auNetequip/queryHistoryById?id="+e).then(function(e){return e.data})},XS={props:{searchConDetails:{type:Object}},data:function(){return{provinces:[],cities:[],districts:[],provParams:{},maxlength:30,formLabelWidth:"80px",isShowBtn:!1,actionBtnClsName:"action-btn",cancelBtnClsName:"cancel-btn"}},methods:{_handleClearQuery:function(){this.searchConDetails.condition="",this.searchConDetails.province="",this.searchConDetails.city="",this.searchConDetails.district="",this.$emit("handleFilterEvent",this.searchConDetails,"search")},_callHandleFilter:function(){console.log("this.searchConDetails.province -- >"+this.searchConDetails.province),this.$emit("handleFilterEvent",this.searchConDetails,"search")},_callHanderDownLoadResult:function(){this.$emit("handleFilterEvent",this.searchConDetails,"download")},_callUploadFile:function(){this.$emit("handleFilterEvent",this.searchConDetails,"upload")},setBtnVisible:function(){"hw"!==this.searchConDetails.pageFlag&&"ne"!==this.searchConDetails.pageFlag&&"as"!==this.searchConDetails.pageFlag||(this.isShowBtn=!0,this.actionBtnClsName="small-action-btn",this.cancelBtnClsName="small-cancel-btn")},validateInput:function(){return""!==this.searchConDetails.province||""!==this.searchConDetails.city||""!==this.searchConDetails.district||""!==this.searchConDetails.condition||(this.$message.warning("请选择省/市/区或输入查询关键字"),!1)},loadProvinceData:function(){this.cities=[],this.districts=[],dS().then(function(e){console.log("province --- > "+Bt()(e));for(var t=e,a=0;a<t.length;a++)this.provinces.push({label:t[a].province,value:t[a].provinceAbbr})}.bind(this)).catch(function(e){console.log(e)})},loadCityData:function(){""!==this.searchConDetails.city&&(this.searchConDetails.city=""),""!==this.searchConDetails.district&&(this.searchConDetails.district=""),this.cities=[],this.districts=[],this.provParams.province=this.searchConDetails.province.trim(),uS(this.provParams).then(function(e){console.log("city -- > "+Bt()(e));for(var t=e,a=0;a<t.length;a++)this.cities.push({label:t[a].city,value:t[a].cityAbbr})}.bind(this)).catch(function(e){console.log(e)})},loadDistrictData:function(){this.districts=[],this.provParams.province=this.searchConDetails.province.trim(),this.provParams.city=this.searchConDetails.city.trim(),""!==this.searchConDetails.city?(this.searchConDetails.district="",this.districts=[],pS(this.provParams).then(function(e){console.log("district -- > "+Bt()(e));for(var t=e,a=0;a<t.length;a++)this.districts.push({label:t[a].district,value:t[a].districtAbbr})}.bind(this)).catch(function(e){console.log(e)})):this.searchConDetails.district=""},showSelectCol:function(){this.$emit("handleFilterEvent",this.searchConDetails,"showcols")}},watch:{"searchConDetails.province":function(e,t){console.log("222"),this.loadCityData()},"searchConDetails.city":function(e,t){this.loadDistrictData()}},mounted:function(){console.log("searchConDetails -- > "+Bt()(this.searchConDetails)),this.setBtnVisible(),this.loadProvinceData()}},ex=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("el-form",{attrs:{inline:!0,model:e.searchConDetails}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"选择省"}},[a("el-select",{attrs:{placeholder:"请选择省",clearable:""},model:{value:e.searchConDetails.province,callback:function(t){e.$set(e.searchConDetails,"province",t)},expression:"searchConDetails.province"}},e._l(e.provinces,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择市","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择市",clearable:""},model:{value:e.searchConDetails.city,callback:function(t){e.$set(e.searchConDetails,"city",t)},expression:"searchConDetails.city"}},e._l(e.cities,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择区","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择区",clearable:""},model:{value:e.searchConDetails.district,callback:function(t){e.$set(e.searchConDetails,"district",t)},expression:"searchConDetails.district"}},e._l(e.districts,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"搜索条件"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入搜索关键字",clearable:"",maxlength:e.maxlength},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._callHandleFilter(t)}},model:{value:e.searchConDetails.condition,callback:function(t){e.$set(e.searchConDetails,"condition",t)},expression:"searchConDetails.condition"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{class:e.cancelBtnClsName,on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{class:e.actionBtnClsName,attrs:{type:"primary"},on:{click:e._callHandleFilter}},[e._v("搜索")]),e._v(" "),a("el-button",{class:e.actionBtnClsName,attrs:{type:"primary"},on:{click:e._callHanderDownLoadResult}},[e._v("导出")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowBtn,expression:"isShowBtn"}],class:e.actionBtnClsName,attrs:{type:"primary"},on:{click:e._callUploadFile}},[e._v("导入")])],1)],1)],1)])],1),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div")])},tx=[],ax={render:ex,staticRenderFns:tx},ix=ax,sx=a("VU/8"),ox=be,lx=sx(XS,ix,!1,ox,"data-v-7f7a4fdc",null),rx=lx.exports,nx={props:{auServerDetails:{type:Object}},data:function(){return{formLabelWidth:"200px",isInptDisabled:!0}},methods:{calNameLable:function(e){return"物理网卡"+(+e+1)+"名称"},calMacLabel:function(e){return"物理网卡"+(+e+1)+"MAC"},calSNLabel:function(e){return"硬盘"+(+e+1)+"序列号SN"},calSpaceTtotalLabel:function(e){return"硬盘"+(+e+1)+"容量"},closeDialog:function(){this.$emit("closeDialogEvent")}},watch:{auServerDetails:function(e,t){this.auServerDetails=e}}},cx=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.auServerDetails}},[0!==e.auServerDetails.courtDtoList.length?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].province,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"province",t)},expression:"auServerDetails.courtDtoList[0].province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].city,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"city",t)},expression:"auServerDetails.courtDtoList[0].city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].district,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"district",t)},expression:"auServerDetails.courtDtoList[0].district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].name,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"name",t)},expression:"auServerDetails.courtDtoList[0].name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"服务器产品名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.name,callback:function(t){e.$set(e.auServerDetails,"name",t)},expression:"auServerDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器SN","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.serialNo,callback:function(t){e.$set(e.auServerDetails,"serialNo",t)},expression:"auServerDetails.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器厂商","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.vendor,callback:function(t){e.$set(e.auServerDetails,"vendor",t)},expression:"auServerDetails.vendor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器类型/型号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.model,callback:function(t){e.$set(e.auServerDetails,"model",t)},expression:"auServerDetails.model"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CPU型号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.cpuModel,callback:function(t){e.$set(e.auServerDetails,"cpuModel",t)},expression:"auServerDetails.cpuModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CPU核数","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.numberOfCore,callback:function(t){e.$set(e.auServerDetails,"numberOfCore",t)},expression:"auServerDetails.numberOfCore"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CPU主频（GHz）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.cpuFreq,callback:function(t){e.$set(e.auServerDetails,"cpuFreq",t)},expression:"auServerDetails.cpuFreq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.uuid,callback:function(t){e.$set(e.auServerDetails,"uuid",t)},expression:"auServerDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"BIOS版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.biosVersion,callback:function(t){e.$set(e.auServerDetails,"biosVersion",t)},expression:"auServerDetails.biosVersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内存容量","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.numberOfLhd,callback:function(t){e.$set(e.auServerDetails,"numberOfLhd",t)},expression:"auServerDetails.numberOfLhd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"硬盘容量","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.numberOfPhd,callback:function(t){e.$set(e.auServerDetails,"numberOfPhd",t)},expression:"auServerDetails.numberOfPhd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"固资编号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.aeestNo,callback:function(t){e.$set(e.auServerDetails,"aeestNo",t)},expression:"auServerDetails.aeestNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.mgmtIp,callback:function(t){e.$set(e.auServerDetails,"mgmtIp",t)},expression:"auServerDetails.mgmtIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器用途","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.roles,callback:function(t){e.$set(e.auServerDetails,"roles",t)},expression:"auServerDetails.roles"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物理机房","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.deployment,callback:function(t){e.$set(e.auServerDetails,"deployment",t)},expression:"auServerDetails.deployment"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装的机柜","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.cabinet,callback:function(t){e.$set(e.auServerDetails,"cabinet",t)},expression:"auServerDetails.cabinet"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装的机柜位置（U）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.cabU,callback:function(t){e.$set(e.auServerDetails,"cabU",t)},expression:"auServerDetails.cabU"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运行状态","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.status,callback:function(t){e.$set(e.auServerDetails,"status",t)},expression:"auServerDetails.status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维护人","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.operator,callback:function(t){e.$set(e.auServerDetails,"operator",t)},expression:"auServerDetails.operator"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维保服务","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.serviceLevel,callback:function(t){e.$set(e.auServerDetails,"serviceLevel",t)},expression:"auServerDetails.serviceLevel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务到期时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.serviceDuring,callback:function(t){e.$set(e.auServerDetails,"serviceDuring",t)},expression:"auServerDetails.serviceDuring"}})],1),e._v(" "),null!==e.auServerDetails.auNetAdapters?e._l(e.auServerDetails.auNetAdapters,function(t,i){return a("div",{key:t.uuid},[a("el-form-item",{attrs:{label:e.calNameLable(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"detail.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.calMacLabel(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.mac,callback:function(a){e.$set(t,"mac",a)},expression:"detail.mac"}})],1)],1)}):e._e(),e._v(" "),null!==e.auServerDetails.auPhds?e._l(e.auServerDetails.auPhds,function(t,i){return a("div",{key:i},[a("el-form-item",{attrs:{label:e.calSNLabel(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.serialNo,callback:function(a){e.$set(t,"serialNo",a)},expression:"item.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.calSpaceTtotalLabel(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.spaceTotal,callback:function(a){e.$set(t,"spaceTotal",a)},expression:"item.spaceTotal"}})],1)],1)}):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.remark,callback:function(t){e.$set(e.auServerDetails,"remark",t)},expression:"auServerDetails.remark"}})],1),e._v(" "),e.auServerDetails.extDataList?e._l(e.auServerDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e()],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)},dx=[],ux={render:cx,staticRenderFns:dx},px=ux,mx=a("VU/8"),hx=mx(nx,px,!1,null,null,null),fx=hx.exports,gx={props:{auServerDetails:{type:Object}},data:function(){return{formLabelWidth:"200px",isInptDisabled:!0,showAddNewEvent:!1,maxlength:30,tempAeestNo:void 0,tempMgmtIp:void 0,tempFunctionName:void 0,tempDeployment:void 0,tempCabinet:void 0,tempCabu:void 0,tempStatus:void 0,tempOperator:void 0,tempServiceLevel:void 0,tempServiceDuring:void 0,tempRemark:void 0,fieldName:"",fieldValue:"",tempExtDataList:void 0}},methods:{callBackSaveEvent:function(){this.$emit("saveServInfoEvent",this.auServerDetails,"save")},calNameLable:function(e){return"物理网卡"+(+e+1)+"名称"},calMacLabel:function(e){return"物理网卡"+(+e+1)+"MAC"},calSNLabel:function(e){return"硬盘"+(+e+1)+"序列号SN"},calSpaceTtotalLabel:function(e){return"硬盘"+(+e+1)+"容量"},validateDetailsChanged:function(){return this.tempRemark!==this.auServerDetails.remark||this.tempFunctionName!==this.auServerDetails.roles||this.tempDeployment!==this.auServerDetails.deployment||this.tempDeployment!==this.auServerDetails.deployment||this.tempCabinet!==this.auServerDetails.cabinet||this.tempCabu!==this.auServerDetails.cabU||this.tempAeestNo!==this.auServerDetails.aeestNo||this.tempMgmtIp!==this.auServerDetails.mgmtIp||this.tempOperator!==this.auServerDetails.operator||this.tempServiceLevel!==this.auServerDetails.serviceLevel||this.tempServiceDuring!==this.auServerDetails.serviceDuring||this.tempExtDataList!==this.auServerDetails.extDataList},addNewEvent:function(){console.info("add new item"),""===this.fieldName.trim()?this.$message.error("请输入新增项名称"):(null===this.auServerDetails.extDataList&&(this.auServerDetails.extDataList=[]),this.auServerDetails.extDataList.push({fieldName:this.fieldName,fieldValue:this.fieldValue}),console.info(Bt()(this.auServerDetails)))},clearData:function(){console.info("clear data"),this.showAddNewEvent=!1,this.fieldName="",this.fieldValue=""},callBackCloseDialogEvent:function(){this.$emit("saveServInfoEvent",this.auServerDetails,"cancel")}},watch:{auServerDetails:function(e,t){this.auServerDetails=e}},mounted:function(){this.tempFunctionName=this.auServerDetails.roles,this.tempDeployment=this.auServerDetails.deployment,this.tempCabinet=this.auServerDetails.cabinet,this.tempCabu=this.auServerDetails.cabU,this.tempRemark=this.auServerDetails.remark,this.tempAeestNo=this.auServerDetails.aeestNo,this.tempMgmtIp=this.auServerDetails.mgmtIp,this.tempOperator=this.auServerDetails.operator,this.tempServiceLevel=this.auServerDetails.serviceLevel,this.tempServiceDuring=this.auServerDetails.serviceDuring,this.tempExtDataList=this.auServerDetails.extDataList}},vx=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.auServerDetails}},[0!==e.auServerDetails.courtDtoList.length?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].province,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"province",t)},expression:"auServerDetails.courtDtoList[0].province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].city,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"city",t)},expression:"auServerDetails.courtDtoList[0].city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].district,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"district",t)},expression:"auServerDetails.courtDtoList[0].district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.courtDtoList[0].name,callback:function(t){e.$set(e.auServerDetails.courtDtoList[0],"name",t)},expression:"auServerDetails.courtDtoList[0].name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"CPU型号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.cpuModel,callback:function(t){e.$set(e.auServerDetails,"cpuModel",t)},expression:"auServerDetails.cpuModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CPU核数","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.numberOfCore,callback:function(t){e.$set(e.auServerDetails,"numberOfCore",t)},expression:"auServerDetails.numberOfCore"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CPU主频（GHz）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.cpuFreq,callback:function(t){e.$set(e.auServerDetails,"cpuFreq",t)},expression:"auServerDetails.cpuFreq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.uuid,callback:function(t){e.$set(e.auServerDetails,"uuid",t)},expression:"auServerDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"BIOS版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.biosVersion,callback:function(t){e.$set(e.auServerDetails,"biosVersion",t)},expression:"auServerDetails.biosVersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内存容量","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.numberOfLhd,callback:function(t){e.$set(e.auServerDetails,"numberOfLhd",t)},expression:"auServerDetails.numberOfLhd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"硬盘容量","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auServerDetails.numberOfPhd,callback:function(t){e.$set(e.auServerDetails,"numberOfPhd",t)},expression:"auServerDetails.numberOfPhd"}})],1),e._v(" "),null!==e.auServerDetails.auNetAdapters?e._l(e.auServerDetails.auNetAdapters,function(t,i){return a("div",{key:t.uuid},[a("el-form-item",{attrs:{label:e.calNameLable(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"detail.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.calMacLabel(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.mac,callback:function(a){e.$set(t,"mac",a)},expression:"detail.mac"}})],1)],1)}):e._e(),e._v(" "),null!==e.auServerDetails.auPhds?e._l(e.auServerDetails.auPhds,function(t,i){return a("div",{key:i},[a("el-form-item",{attrs:{label:e.calSNLabel(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.serialNo,callback:function(a){e.$set(t,"serialNo",a)},expression:"item.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.calSpaceTtotalLabel(i),"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.spaceTotal,callback:function(a){e.$set(t,"spaceTotal",a)},expression:"item.spaceTotal"}})],1)],1)}):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"固资编号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.auServerDetails.aeestNo,callback:function(t){e.$set(e.auServerDetails,"aeestNo",t)},expression:"auServerDetails.aeestNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.auServerDetails.mgmtIp,callback:function(t){e.$set(e.auServerDetails,"mgmtIp",t)},expression:"auServerDetails.mgmtIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器用途","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auServerDetails.roles,callback:function(t){e.$set(e.auServerDetails,"roles",t)},expression:"auServerDetails.roles"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物理机房","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auServerDetails.deployment,callback:function(t){e.$set(e.auServerDetails,"deployment",t)},expression:"auServerDetails.deployment"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装的机柜","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auServerDetails.cabinet,callback:function(t){e.$set(e.auServerDetails,"cabinet",t)},expression:"auServerDetails.cabinet"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"安装的机柜位置（U）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auServerDetails.cabU,callback:function(t){e.$set(e.auServerDetails,"cabU",t)},expression:"auServerDetails.cabU"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运行状态","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.auServerDetails.status,callback:function(t){e.$set(e.auServerDetails,"status",t)},expression:"auServerDetails.status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维护人","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.auServerDetails.operator,callback:function(t){e.$set(e.auServerDetails,"operator",t)},expression:"auServerDetails.operator"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维保服务","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.auServerDetails.serviceLevel,callback:function(t){e.$set(e.auServerDetails,"serviceLevel",t)},expression:"auServerDetails.serviceLevel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务到期时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.auServerDetails.serviceDuring,callback:function(t){e.$set(e.auServerDetails,"serviceDuring",t)},expression:"auServerDetails.serviceDuring"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auServerDetails.remark,callback:function(t){e.$set(e.auServerDetails,"remark",t)},expression:"auServerDetails.remark"}})],1),e._v(" "),e.auServerDetails.extDataList?e._l(e.auServerDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.callBackSaveEvent}},[e._v("保 存")]),e._v(" "),a("el-popover",{ref:"newCIEventPop",attrs:{visible:"showAddNewCIPop",placement:"right",width:"160",hide:e.clearData},model:{value:e.showAddNewEvent,callback:function(t){e.showAddNewEvent=t},expression:"showAddNewEvent"}},[a("div",[a("div",[a("el-input",{attrs:{autofocus:!0,placeholder:"请输入新增项名称",size:"small"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),e._v(" "),a("div",{staticClass:"margin-top-5"},[a("el-input",{attrs:{placeholder:"请输入新增项值",size:"small"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1)]),e._v(" "),a("div",{staticClass:"text-right margin-top-5"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.clearData}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addNewEvent}},[e._v("添加")])],1)]),e._v(" "),a("a",{directives:[{name:"popover",rawName:"v-popover:newCIEventPop",arg:"newCIEventPop"}]},[a("span",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"}},[e._v("添加")])],1)])],1)],2)],1)},bx=[],Dx={render:vx,staticRenderFns:bx},yx=Dx,Cx=a("VU/8"),_x=Cx(gx,yx,!1,null,null,null),wx=_x.exports,Sx={props:{commHistoryList:{type:Array}},data:function(){return{}},watch:{commHistoryList:function(e,t){this.commHistoryList=e}}},xx=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.commHistoryList,border:""}},[a("el-table-column",{attrs:{label:"编号",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"日期/时间",prop:"updateTime"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作人",prop:"updateUser"}}),e._v(" "),a("el-table-column",{attrs:{label:"省（直辖市）/市/区/小区",prop:"location"}}),e._v(" "),a("el-table-column",{attrs:{label:"变更对象",prop:"changedDataDto.propertyName"}}),e._v(" "),a("el-table-column",{attrs:{label:"变更项名称",prop:"changedDataDto.desc"}}),e._v(" "),a("el-table-column",{attrs:{label:"变更项原值",prop:"changedDataDto.oldValue"}}),e._v(" "),a("el-table-column",{attrs:{label:"变化项新值",prop:"changedDataDto.newValue"}})],1)},kx=[],Tx={render:xx,staticRenderFns:kx},Lx=Tx,Nx=a("VU/8"),Vx=Nx(Sx,Lx,!1,null,null,null),Ix=Vx.exports,Ex={props:{uploadFlag:{type:String}},data:function(){return{fileList:[],actUrl:"",uploadFiles:void 0}},methods:{handleOnchange:function(e,t){this.uploadFiles=new FormData,console.info(t[0]),this.beforeUpload(e)&&this.uploadFiles.append("uploadFile",t[0].raw)},_submitUpload:function(){var e=this.$refs.upload._data.uploadFiles.length;console.log("uploadFlag --\x3e"+this.uploadFlag),e>0?"hw"===this.uploadFlag?(console.log("this.uploadFiles --\x3e"+this.uploadFiles),mS(this.uploadFiles).then(function(e){console.log("upload response -- > "+Bt()(e)),this.$emit("handleUploadSuccessEvent"),"200"===e.code?this.$message({message:"上传成功",type:"success"}):this.$message({message:"上传失败",type:"error"}),this.fileList=[]}.bind(this)).catch(function(e){console.log(e)})):"ne"===this.uploadFlag?hS(this.uploadFiles).then(function(e){this.$emit("handleUploadSuccessEvent"),"200"===e.code?this.$message({message:"上传成功",type:"success"}):this.$message({message:"上传失败",type:"error"}),this.fileList=[]}.bind(this)).catch(function(e){console.log(e)}):"as"===this.uploadFlag&&fS(this.uploadFiles).then(function(e){this.$emit("handleUploadSuccessEvent"),"200"===e.code?this.$message({message:"上传成功",type:"success"}):this.$message({message:"上传失败",type:"error"}),this.fileList=[]}.bind(this)).catch(function(e){console.log(e)}):this.$message({message:"请选择需要上传的文件",type:"warning"})},beforeUpload:function(e){var t=e.name.split(".");console.log("Xls[1] --- > "+t);var a="xls"===t[t.length-1]||"xlsx"===t[t.length-1];console.log("Xls[Xls.length - 1] --- > "+t[1]);var i=e.size/1024/1024<10;return a?i?e:(this.$message.error("上传文件大小不能超过 10MB!"),this.fileList=[],!1):(this.$message.error("上传文件只能是 xls/xlsx 格式!"),this.fileList=[],!1)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},clearFileList:function(){this.fileList=[]},_callDownTemplate:function(){console.log("download");var e=0;"hw"===this.uploadFlag?(e=70,gS(e).then(function(e){}).catch()):"ne"===this.uploadFlag?(e=71,gS(e).then(function(e){}).catch()):"as"===this.uploadFlag&&(e=72,gS(e).then(function(e){}).catch())}},mounted:function(){}},Px=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"fileUpload"}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:e.actUrl,drag:"",limit:1,"show-file-list":!0,"on-exceed":e.handleExceed,"on-change":e.handleOnchange,"auto-upload":!1,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n      "),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件，且不超过10M")])]),e._v(" "),a("el-button",{staticClass:"search-btn",staticStyle:{"margin-top":"20px"},attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:e._submitUpload}},[e._v("上传服务器")]),e._v(" "),a("el-button",{staticClass:"search-btn",staticStyle:{"margin-top":"20px","margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:e._callDownTemplate}},[e._v("模板下载")])],1)},Mx=[],$x={render:Px,staticRenderFns:Mx},Ux=$x,Fx=a("VU/8"),Rx=De,zx=Fx(Ex,Ux,!1,Rx,"data-v-53fdda6a",null),Ax=zx.exports,Ox={props:{allTableTitleList:{type:Array,default:[]}},data:function(){return{isIndeterminate:!1,checkAll:!1,checkedCols:[],tableTitleArray:[]}},methods:{handleCheckAllChange:function(e){for(var t=0;t<this.allTableTitleList.length;t++)this.tableTitleArray[t]=this.allTableTitleList[t].colName;this.checkedCols=e?this.tableTitleArray:[],this.isIndeterminate=!1},handleCheckedColsChange:function(e){var t=e.length;this.checkAll=t===this.allTableTitleList.length,this.isIndeterminate=t>0&&t<this.allTableTitleList.length},handleSave:function(){this.$emit("showColsEvent",this.checkedCols)},setDefaultColsChecked:function(){console.log("--\x3e"+Bt()(this.allTableTitleList));for(var e=0;e<this.allTableTitleList.length;e++)!0===this.allTableTitleList[e].showColumn&&this.checkedCols.push(this.allTableTitleList[e].colName)}},mounted:function(){this.setDefaultColsChecked()}},qx=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("el-checkbox-group",{staticStyle:{"margin-bottom":"15px","margin-top":"15px"},on:{change:e.handleCheckedColsChange},model:{value:e.checkedCols,callback:function(t){e.checkedCols=t},expression:"checkedCols"}},e._l(e.allTableTitleList,function(t,i){return a("el-checkbox",{key:i,attrs:{label:t.colName}},[e._v(e._s(t.colName))])})),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"action-btn",staticStyle:{margin:"0 auto"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)},Bx=[],Wx={render:qx,staticRenderFns:Bx},Qx=Wx,Gx=a("VU/8"),Hx=Gx(Ox,Qx,!1,null,null,null),jx=Hx.exports,Jx={components:{searchCondition:rx,serverHardwareDetails:fx,serverHardwareEdit:wx,CommHistory:Ix,ConfigFileUpload:Ax,SelectTableColumns:jx},data:function(){return{dialogShowColsVisible:!1,queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,dialogUploadVisible:!1,auServerListData:void 0,auServerDetails:void 0,auServerHistory:void 0,synDataLoading:!1,syncDataStatus:"",loading:!0,uploadFlag:"hw",searchConditionList:{city:"",condition:"",currentPage:1,district:"",pageSize:10,province:"",pageFlag:"hw"},allTableTitleList:[],temptableTitleList:[],tableTitleList:[{colName:"省（直辖市）",prop:"courtDto.province",showColumn:!0},{colName:"市",prop:"courtDto.city",showColumn:!0},{colName:"区",prop:"courtDto.district",showColumn:!0},{colName:"小区名称",prop:"courtDto.name",showColumn:!0},{colName:"服务器产品名称",prop:"name",showColumn:!0},{colName:"服务器SN",prop:"serialNo",showColumn:!0},{colName:"服务器厂商",prop:"vendor",showColumn:!0},{colName:"服务器类型/型号",prop:"model",showColumn:!0},{colName:"描述",prop:"remark",showColumn:!0}],detailsTitle:"查看详情",editTitle:"编辑",refreshTitle:"比对更新",historyTitle:"历史信息"}},methods:{indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.page;return a||(a=1),t*(a-1)+e+1},handleSave:function(e){console.log("begin to save columns--\x3e "+e);for(var t=0;t<this.allTableTitleList.length;t++){this.temptableTitleList[t].showColumn=!1;for(var a=0;a<e.length;a++)this.temptableTitleList[t].colName===e[a]&&(this.tableTitleList[t].showColumn=!0),this.tableTitleList=this.temptableTitleList}this.dialogShowColsVisible=!1},_handleFilter:function(e,t){if(console.log("type --\x3e"+t),delete e.pageFlag,"search"===t)this.loading=!0,bS(e).then(function(e){for(var t=0;t<e.auServersList.length;t++){var a=e.auServersList[t],i=a.courtDtoList[0];a.courtDto=i}this.auServerListData=e.auServersList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this));else if("download"===t){vS(e,1).then(function(e){this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))}else"upload"===t?(this.dialogStatus="上传硬件服务器配置信息",this.dialogUploadVisible=!0):"showcols"===t&&(this.dialogStatus="选择需要显示的列",this.dialogShowColsVisible=!0)},_handleCheckDetails:function(e){this.dialogStatus="服务器硬件信息详情";var t=this.auServerListData[e],a=t.uuid;console.log("check rowData -- >"+a),DS(a).then(function(e){console.log("details --- > "+Bt()(e.auServers)),this.auServerDetails=e.auServers,this.dialogDetailsVisible=!0}.bind(this)).catch()},_handleEdit:function(e){this.dialogStatus="服务器硬件信息修改";var t=this.auServerListData[e],a=t.uuid;DS(a).then(function(e){this.auServerDetails=e.auServers,this.dialogEditVisible=!0,console.log("edit server details -----------\x3e   "+Bt()(this.auServerDetails))}.bind(this)).catch(function(e){console.log(e)})},_updateServerInfo:function(e,t){"save"===t?yS(e).then(function(e){console.log("update response --- >"+e),"Success!"===e&&(this.dialogEditVisible=!1,this.$message({message:"保存成功",type:"success"}),this.loadData())}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleSynData:function(e){this.synDataLoading=!0;var t=this.auServerListData[e],a=t.uuid;CS(a).then(function(e){console.log("refresh middleware result -- > "+Bt()(e)),this.syncDataStatus=e,"Success!"===this.syncDataStatus?(this.synDataLoading=!1,this.loadData(),this.$message({message:"刷新成功",type:"success"})):(this.synDataLoading=!1,this.$message({message:"刷新失败",type:"error"}))}.bind(this)).catch(function(e){this.synDataLoading=!1,console.log(e)})},_handleCheckHistory:function(e){this.dialogStatus="服务器硬件历史信息详情";var t=this.auServerListData[e],a=t.uuid;console.log("history rowData -- >"+a),_S(a).then(function(e){console.log("history --\x3e "+Bt()(e)),this.auServerHistory=e.auServersHisList,this.dialogHistoryVisible=!0}.bind(this)).catch(function(e){console.log(e),this.loading=!1}.bind(this))},closeDialog:function(){this.dialogDetailsVisible=!1},loadData:function(){delete this.searchConditionList.pageFlag,bS(this.searchConditionList).then(function(e){console.log("hardware lsit --\x3e "+Bt()(e)),this.allTableTitleList=e.columnDtoList,this.temptableTitleList=e.columnDtoList;for(var t=0;t<e.auServersList.length;t++){var a=e.auServersList[t],i=a.courtDtoList[0];a.courtDto=i}this.auServerListData=e.auServersList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.page=e,this.loadData()},_handleCloseUploadDialog:function(){this.dialogUploadVisible=!1},_handleBeforClose:function(){this.dialogUploadVisible=!1,this.$refs.uploadCmpt.clearFileList()}},mounted:function(){this.loadData()}},Zx=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.synDataLoading,expression:"synDataLoading"}],staticClass:"flex-1 flex-c",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"玩命同步中..."}},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.auServerListData,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(t,i){return t.showColumn?a("el-table-column",{key:i,attrs:{prop:t.prop,label:t.colName,sortable:""}}):e._e()}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.refreshTitle},on:{click:function(a){e._handleSynData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("server-hardware-details",{attrs:{auServerDetails:e.auServerDetails},on:{closeDialogEvent:e.closeDialog}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogEditVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("server-hardware-edit",{attrs:{auServerDetails:e.auServerDetails},on:{saveServInfoEvent:e._updateServerInfo}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("comm-history",{attrs:{commHistoryList:e.auServerHistory}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogUploadVisible,width:"40%","before-close":e._handleBeforClose},on:{"update:visible":function(t){e.dialogUploadVisible=t}}},[a("config-file-upload",{ref:"uploadCmpt",attrs:{uploadFlag:e.uploadFlag},on:{handleUploadSuccessEvent:e._handleCloseUploadDialog}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogShowColsVisible},on:{"update:visible":function(t){e.dialogShowColsVisible=t}}},[a("select-table-columns",{attrs:{allTableTitleList:e.allTableTitleList},on:{showColsEvent:e.handleSave}})],1)],1)},Kx=[],Yx={render:Zx,staticRenderFns:Kx},Xx=Yx,ek=a("VU/8"),tk=ye,ak=ek(Jx,Xx,!1,tk,"data-v-12b3f0ec",null),ik=ak.exports,sk={props:{auappServiceDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},methods:{closeDialog:function(){this.$emit("closeDialogEvent")}},watch:{auappServiceDetails:function(e,t){this.auappServiceDetails=e,console.log(" details -  - - - >   "+Bt()(this.auappServiceDetails))}},mounted:function(){console.log(" ---------\x3e"+(null!==this.auappServiceDetails.applications))}},ok=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.auappServiceDetails}},[null!==e.auappServiceDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.province,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"province",t)},expression:"auappServiceDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.city,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"city",t)},expression:"auappServiceDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.district,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"district",t)},expression:"auappServiceDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.name,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"name",t)},expression:"auappServiceDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务启动用户","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.startUser,callback:function(t){e.$set(e.auappServiceDetails,"startUser",t)},expression:"auappServiceDetails.startUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.name,callback:function(t){e.$set(e.auappServiceDetails,"name",t)},expression:"auappServiceDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.version,callback:function(t){e.$set(e.auappServiceDetails,"version",t)},expression:"auappServiceDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务端口","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.port,callback:function(t){e.$set(e.auappServiceDetails,"port",t)},expression:"auappServiceDetails.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务启动用户","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.startUser,callback:function(t){e.$set(e.auappServiceDetails,"startUser",t)},expression:"auappServiceDetails.startUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务进程名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.processName,callback:function(t){e.$set(e.auappServiceDetails,"processName",t)},expression:"auappServiceDetails.processName"}})],1),e._v(" "),null!==e.auappServiceDetails.applications?[a("el-form-item",{attrs:{label:"服务安装目录","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.applications.path,callback:function(t){e.$set(e.auappServiceDetails.applications,"path",t)},expression:"auappServiceDetails.applications.path"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"配置文件路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.configPath,callback:function(t){e.$set(e.auappServiceDetails,"configPath",t)},expression:"auappServiceDetails.configPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配置文件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.configFilename,callback:function(t){e.$set(e.auappServiceDetails,"configFilename",t)},expression:"auappServiceDetails.configFilename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配置文件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.version,callback:function(t){e.$set(e.auappServiceDetails,"version",t)},expression:"auappServiceDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.oss.name,callback:function(t){e.$set(e.auappServiceDetails.oss,"name",t)},expression:"auappServiceDetails.oss.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统位数","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.oss.dataLength,callback:function(t){e.$set(e.auappServiceDetails.oss,"dataLength",t)},expression:"auappServiceDetails.oss.dataLength"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务域名","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.domainName,callback:function(t){e.$set(e.auappServiceDetails,"domainName",t)},expression:"auappServiceDetails.domainName"}})],1),e._v(" "),null!==e.auappServiceDetails.upgradeServers?[a("el-form-item",{attrs:{label:"小区云升级服务公网IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.upgradeServers.publicIp,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"publicIp",t)},expression:"auappServiceDetails.upgradeServers.publicIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区云升级服务域名","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.upgradeServers.domainName,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"domainName",t)},expression:"auappServiceDetails.upgradeServers.domainName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"升级服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.upgradeServers.hostname,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"hostname",t)},expression:"auappServiceDetails.upgradeServers.hostname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"升级服务器IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.upgradeServers.intranetIp,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"intranetIp",t)},expression:"auappServiceDetails.upgradeServers.intranetIp"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.remark,callback:function(t){e.$set(e.auappServiceDetails,"remark",t)},expression:"auappServiceDetails.remark"}})],1),e._v(" "),e.auappServiceDetails.extDataList.length>0?e._l(e.auappServiceDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e()],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)},lk=[],rk={render:ok,staticRenderFns:lk},nk=rk,ck=a("VU/8"),dk=ck(sk,nk,!1,null,null,null),uk=dk.exports,pk={props:{auappServiceDetails:void 0},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempDomain:"",tempUpgradePublicIP:"",tempUpgradeDomainName:"",tempUpgradeHostName:"",tempUpgradeIntranetIP:"",tempRemark:"",showAddNewCIPop:!1,fieldName:"",fieldValue:"",showAddNewEvent:!1,tempExtDataList:void 0}},methods:{updateAppServiceInfo:function(){this.$emit("saveAppServiceInfoEvent",this.auappServiceDetails,"save")},validateDetailsChanged:function(){if(null!==this.auappServiceDetails.upgradeServers){if(this.tempUpgradePublicIP===this.auappServiceDetails.upgradeServers.publicIp&&this.tempUpgradeDomainName===this.auappServiceDetails.upgradeServers.hostname&&this.tempUpgradeHostName===this.auappServiceDetails.upgradeServers.hostname&&this.tempUpgradeIntranetIP===this.auappServiceDetails.upgradeServers.intranetIp)return!1}else if(this.tempDomain===this.auappServiceDetails.domainName&&this.tempRemark===this.auappServiceDetails.remark&&this.tempExtDataList===this.auappServiceDetails.extDataList)return!1;return!0},addNewEvent:function(){console.info("add new item"),""===this.fieldName.trim()?this.$message.error("请输入新增项名称"):(null===this.auappServiceDetails.extDataList&&(this.auappServiceDetails.extDataList=[]),this.auappServiceDetails.extDataList.push({fieldName:this.fieldName,fieldValue:this.fieldValue}),console.info(Bt()(this.auappServiceDetails)))},clearData:function(){console.info("clear data"),this.showAddNewEvent=!1,this.newLabel="",this.newValue=""},callBackCloseDialogEvent:function(){this.$emit("saveAppServiceInfoEvent",this.auappServiceDetails,"cancel")}},watch:{auappServiceDetails:function(e,t){this.auappServiceDetails=e}},mounted:function(){this.tempDomain=this.auappServiceDetails.domainName,null!==this.auappServiceDetails.upgradeServers&&(this.tempUpgradePublicIP=this.auappServiceDetails.upgradeServers.publicIp,this.tempUpgradeDomainName=this.auappServiceDetails.upgradeServers.hostname,this.tempUpgradeHostName=this.auappServiceDetails.upgradeServers.hostname,this.tempUpgradeIntranetIP=this.auappServiceDetails.upgradeServers.intranetIp),this.tempRemark=this.auappServiceDetails.remark,this.tempExtDataList=this.auappServiceDetails.extDataList}},mk=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.auappServiceDetails}},[null!==e.auappServiceDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.province,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"province",t)},expression:"auappServiceDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.city,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"city",t)},expression:"auappServiceDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.district,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"district",t)},expression:"auappServiceDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.courtDto.name,callback:function(t){e.$set(e.auappServiceDetails.courtDto,"name",t)},expression:"auappServiceDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.name,callback:function(t){e.$set(e.auappServiceDetails,"name",t)},expression:"auappServiceDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.version,callback:function(t){e.$set(e.auappServiceDetails,"version",t)},expression:"auappServiceDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务端口","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.port,callback:function(t){e.$set(e.auappServiceDetails,"port",t)},expression:"auappServiceDetails.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&服务启动用户","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.startUser,callback:function(t){e.$set(e.auappServiceDetails,"startUser",t)},expression:"auappServiceDetails.startUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务进程名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.processName,callback:function(t){e.$set(e.auappServiceDetails,"processName",t)},expression:"auappServiceDetails.processName"}})],1),e._v(" "),e.auappServiceDetails.applications?[a("el-form-item",{attrs:{label:"服务安装目录","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.applications.path,callback:function(t){e.$set(e.auappServiceDetails.applications,"path",t)},expression:"auappServiceDetails.applications.path"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"配置文件路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.configPath,callback:function(t){e.$set(e.auappServiceDetails,"configPath",t)},expression:"auappServiceDetails.configPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配置文件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.configFilename,callback:function(t){e.$set(e.auappServiceDetails,"configFilename",t)},expression:"auappServiceDetails.configFilename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配置文件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.version,callback:function(t){e.$set(e.auappServiceDetails,"version",t)},expression:"auappServiceDetails.version"}})],1),e._v(" "),e.auappServiceDetails.oss?[a("el-form-item",{attrs:{label:"操作系统名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.oss.name,callback:function(t){e.$set(e.auappServiceDetails.oss,"name",t)},expression:"auappServiceDetails.oss.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统位数","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.auappServiceDetails.oss.dataLength,callback:function(t){e.$set(e.auappServiceDetails.oss,"dataLength",t)},expression:"auappServiceDetails.oss.dataLength"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"服务域名","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auappServiceDetails.domainName,callback:function(t){e.$set(e.auappServiceDetails,"domainName",t)},expression:"auappServiceDetails.domainName"}})],1),e._v(" "),null!==e.auappServiceDetails.upgradeServers?[a("el-form-item",{attrs:{label:"小区云升级服务公网IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auappServiceDetails.upgradeServers.publicIp,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"publicIp",t)},expression:"auappServiceDetails.upgradeServers.publicIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区云升级服务域名","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auappServiceDetails.upgradeServers.domainName,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"domainName",t)},expression:"auappServiceDetails.upgradeServers.domainName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"升级服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auappServiceDetails.upgradeServers.hostname,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"hostname",t)},expression:"auappServiceDetails.upgradeServers.hostname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"升级服务器IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auappServiceDetails.upgradeServers.intranetIp,callback:function(t){e.$set(e.auappServiceDetails.upgradeServers,"intranetIp",t)},expression:"auappServiceDetails.upgradeServers.intranetIp"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.auappServiceDetails.remark,callback:function(t){e.$set(e.auappServiceDetails,"remark",t)},expression:"auappServiceDetails.remark"}})],1),e._v(" "),null!==e.auappServiceDetails.extDataList?e._l(e.auappServiceDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateAppServiceInfo}},[e._v("保 存")]),e._v(" "),a("el-popover",{ref:"newCIEventPop",attrs:{visible:"showAddNewCIPop",placement:"right",width:"160",hide:e.clearData},model:{value:e.showAddNewEvent,callback:function(t){e.showAddNewEvent=t},expression:"showAddNewEvent"}},[a("div",[a("div",[a("el-input",{attrs:{autofocus:!0,placeholder:"请输入新增项名称",size:"small"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),e._v(" "),a("div",{staticClass:"margin-top-5"},[a("el-input",{attrs:{placeholder:"请输入新增项值",size:"small"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1)]),e._v(" "),a("div",{staticClass:"text-right margin-top-5"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.clearData}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addNewEvent}},[e._v("添加")])],1)]),e._v(" "),a("a",{directives:[{name:"popover",rawName:"v-popover:newCIEventPop",arg:"newCIEventPop"}]},[a("span",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"}},[e._v("添加")])],1)])],1)],2)],1)},hk=[],fk={render:mk,staticRenderFns:hk},gk=fk,vk=a("VU/8"),bk=vk(pk,gk,!1,null,null,null),Dk=bk.exports,yk={components:{searchCondition:rx,appServiceDetails:uk,appServiceEdit:Dk,CommHistory:Ix,ConfigFileUpload:Ax},data:function(){return{auappServiceData:void 0,queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,appServiceListData:void 0,auappServiceHistory:void 0,dialogUploadVisible:!1,synDataLoading:!1,syncDataStatus:"",loading:!0,uploadFlag:"as",searchConditionList:{city:"",condition:"",currentPage:1,district:"",pageSize:10,province:"",pageFlag:"as"},tableTitleList:[{colName:"省（直辖市）",prop:"courtDto.province",width:120},{colName:"市",prop:"courtDto.city",width:100},{colName:"区",prop:"courtDto.district",width:100},{colName:"小区名称",prop:"courtDto.name",width:120},{colName:"应用&服务名称",prop:"name",width:200},{colName:"应用&服务版本",prop:"version",width:180},{colName:"应用&服务端口",prop:"port",width:180},{colName:"服务器主机名称",prop:"oss.hostname",width:260},{colName:"描述",prop:"remark"}],detailsTitle:"查看详情",editTitle:"编辑",refreshTitle:"比对更新",historyTitle:"历史信息"}},methods:{_handleFilter:function(e,t){if(delete e.pageFlag,"search"===t)this.loading=!0,wS(e).then(function(e){this.appServiceListData=e.auServicesList,console.log("get data by page -- >"+Bt()(e)),this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)});else if("download"===t){vS(e,7).then(function(e){this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))}else"upload"===t?(this.dialogStatus="上传应用服务配置信息",this.dialogUploadVisible=!0):"downtemplate"===t&&console.log("setting table list")},_handleCheckDetails:function(e){this.dialogStatus="管理应用&服务信息详情";var t=this.appServiceListData[e],a=t.uuid;console.log("check rowData -- >"+a),SS(a).then(function(e){console.log("app service details --- >  "+Bt()(e)),this.auappServiceData=e.auServices,this.dialogDetailsVisible=!0}.bind(this)).catch()},_handleEdit:function(e){this.dialogStatus="管理应用&服务修改";var t=this.appServiceListData[e],a=t.uuid;console.log("edit rowData -- >"+a),SS(a).then(function(e){this.auappServiceData=e.auServices,console.log("app service edit details --- > "+Bt()(this.auappServiceData)),this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateAppServiceInfo:function(e,t){"save"===t?xS(e).then(function(e){"Success!"===e&&(this.dialogEditVisible=!1,this.$message({title:"成功",message:"保存成功",type:"success",duration:2e3}),this.loadData())}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleSynData:function(e){this.synDataLoading=!0;var t=this.appServiceListData[e],a=t.uuid;kS(a).then(function(e){console.log("refresh middleware result -- > "+Bt()(e)),this.syncDataStatus=e,"Success!"===this.syncDataStatus?(this.synDataLoading=!1,this.loadData(),this.$message({message:"刷新成功",type:"success"})):(this.synDataLoading=!1,this.$message({message:"刷新失败",type:"error"}))}.bind(this)).catch(function(e){console.log(e),this.synDataLoading=!1})},_handleCheckHistory:function(e){this.dialogStatus="管理应用&服务历史信息详情";var t=this.appServiceListData[e],a=t.uuid;console.log("history rowData -- >"+a),TS(a).then(function(e){console.log("history -- > "+Bt()(e)),this.auappServiceHistory=e.auServicesHisList,this.dialogHistoryVisible=!0}.bind(this)).catch(function(e){console.log(e)})},closeDialog:function(){this.dialogDetailsVisible=!1},loadData:function(){delete this.searchConditionList.pageFlag,this.loading=!0,wS(this.searchConditionList).then(function(e){this.appServiceListData=e.auServicesList,console.log("application service result -- >"+Bt()(e)),this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.page=e,this.loadData()},_handleCloseUploadDialog:function(){this.dialogUploadVisible=!1,this.loadData()},_handleBeforClose:function(){this.dialogUploadVisible=!1,this.$refs.uploadCmpt.clearFileList()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.page;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},Ck=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.synDataLoading,expression:"synDataLoading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"玩命同步中..."}},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.appServiceListData,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.refreshTitle},on:{click:function(a){e._handleSynData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("app-service-details",{attrs:{auappServiceDetails:e.auappServiceData},on:{closeDialogEvent:e.closeDialog}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogEditVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("app-service-edit",{attrs:{auappServiceDetails:e.auappServiceData},on:{saveAppServiceInfoEvent:e._updateAppServiceInfo}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("comm-history",{attrs:{commHistoryList:e.auappServiceHistory}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogUploadVisible,width:"40%","before-close":e._handleBeforClose},on:{"update:visible":function(t){e.dialogUploadVisible=t}}},[a("config-file-upload",{ref:"uploadCmpt",attrs:{uploadFlag:e.uploadFlag},on:{handleUploadSuccessEvent:e._handleCloseUploadDialog}})],1)],1)},_k=[],wk={render:Ck,staticRenderFns:_k},Sk=wk,xk=a("VU/8"),kk=Ce,Tk=xk(yk,Sk,!1,kk,"data-v-538bbccf",null),Lk=Tk.exports,Nk={props:{osDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},methods:{closeDialog:function(){this.$emit("closeDialogEvent")}},watch:{osDetails:function(e,t){this.osDetails=e}}},Vk=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.osDetails}},[null!==e.osDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.province,callback:function(t){e.$set(e.osDetails.courtDto,"province",t)},expression:"osDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.city,callback:function(t){e.$set(e.osDetails.courtDto,"city",t)},expression:"osDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.district,callback:function(t){e.$set(e.osDetails.courtDto,"district",t)},expression:"osDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.name,callback:function(t){e.$set(e.osDetails.courtDto,"name",t)},expression:"osDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"操作系统名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.name,callback:function(t){e.$set(e.osDetails,"name",t)},expression:"osDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统版本（服务包）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.version,callback:function(t){e.$set(e.osDetails,"version",t)},expression:"osDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统位数","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.dataLength,callback:function(t){e.$set(e.osDetails,"dataLength",t)},expression:"osDetails.dataLength"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.hostname,callback:function(t){e.$set(e.osDetails,"hostname",t)},expression:"osDetails.hostname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.uuid,callback:function(t){e.$set(e.osDetails,"uuid",t)},expression:"osDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.updateUser,callback:function(t){e.$set(e.osDetails,"updateUser",t)},expression:"osDetails.updateUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.remark,callback:function(t){e.$set(e.osDetails,"remark",t)},expression:"osDetails.remark"}})],1),e._v(" "),null!==e.osDetails.extDataList?e._l(e.osDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e()],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)},Ik=[],Ek={render:Vk,staticRenderFns:Ik},Pk=Ek,Mk=a("VU/8"),$k=Mk(Nk,Pk,!1,null,null,null),Uk=$k.exports,Fk={props:{osDetails:void 0},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0,showAddNewCIPop:!1,fieldName:"",fieldValue:"",showAddNewEvent:!1,tempExtDataList:void 0}},methods:{updateOsInfo:function(){console.log(Bt()(this.osDetails)),this.$emit("saveOsInfoEvent",this.osDetails,"save")},addNewEvent:function(){console.info("add new item"),""===this.fieldName.trim()?this.$message.error("请输入新增项名称"):(null===this.osDetails.extDataList&&(this.osDetails.extDataList=[]),this.osDetails.extDataList.push({fieldName:this.fieldName,fieldValue:this.fieldValue}))},clearData:function(){console.info("clear data"),this.showAddNewEvent=!1,this.newLabel="",this.newValue=""},callBackCloseDialogEvent:function(){this.$emit("saveOsInfoEvent",this.osDetails,"cancel")}},watch:{osDetails:function(e,t){this.osDetails=e}},mounted:function(){this.tempRemark=this.osDetails.remark,this.tempExtDataList=this.osDetails.extDataList}},Rk=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.osDetails}},[null!==e.osDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.province,callback:function(t){e.$set(e.osDetails.courtDto,"province",t)},expression:"osDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.city,callback:function(t){e.$set(e.osDetails.courtDto,"city",t)},expression:"osDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.district,callback:function(t){e.$set(e.osDetails.courtDto,"district",t)},expression:"osDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.courtDto.name,callback:function(t){e.$set(e.osDetails.courtDto,"name",t)},expression:"osDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"操作系统名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.name,callback:function(t){e.$set(e.osDetails,"name",t)},expression:"osDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统版本（服务包）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.version,callback:function(t){e.$set(e.osDetails,"version",t)},expression:"osDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统位数","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.dataLength,callback:function(t){e.$set(e.osDetails,"dataLength",t)},expression:"osDetails.dataLength"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.hostname,callback:function(t){e.$set(e.osDetails,"hostname",t)},expression:"osDetails.hostname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.uuid,callback:function(t){e.$set(e.osDetails,"uuid",t)},expression:"osDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDetails.updateUser,callback:function(t){e.$set(e.osDetails,"updateUser",t)},expression:"osDetails.updateUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.osDetails.remark,callback:function(t){e.$set(e.osDetails,"remark",t)},expression:"osDetails.remark"}})],1),e._v(" "),null!==e.osDetails.extDataList?e._l(e.osDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateOsInfo}},[e._v("保 存")]),e._v(" "),a("el-popover",{ref:"newCIEventPop",attrs:{visible:"showAddNewCIPop",placement:"right",width:"160",hide:e.clearData},model:{value:e.showAddNewEvent,callback:function(t){e.showAddNewEvent=t},expression:"showAddNewEvent"}},[a("div",[a("div",[a("el-input",{attrs:{autofocus:!0,placeholder:"请输入新增项名称",size:"small"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),e._v(" "),a("div",{staticClass:"margin-top-5"},[a("el-input",{attrs:{placeholder:"请输入新增项值",size:"small"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1)]),e._v(" "),a("div",{staticClass:"text-right margin-top-5"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.clearData}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addNewEvent}},[e._v("添加")])],1)]),e._v(" "),a("a",{directives:[{name:"popover",rawName:"v-popover:newCIEventPop",arg:"newCIEventPop"}]},[a("span",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"}},[e._v("添加")])],1)])],1)],2)],1)},zk=[],Ak={render:Rk,staticRenderFns:zk},Ok=Ak,qk=a("VU/8"),Bk=qk(Fk,Ok,!1,null,null,null),Wk=Bk.exports,Qk={components:{searchCondition:rx,osDetails:Uk,osEdit:Wk,CommHistory:Ix},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,osListData:void 0,osDetails:void 0,downloadData:void 0,osHistoryData:void 0,synDataLoading:!1,syncDataStatus:"",loading:!0,searchConditionList:{city:"",condition:"",currentPage:1,district:"",pageSize:10,province:""},tableTitleList:[{colName:"省（直辖市）",prop:"courtDto.province",width:120},{colName:"市",prop:"courtDto.city",width:100},{colName:"区",prop:"courtDto.district",width:100},{colName:"小区名称",prop:"courtDto.name",width:120},{colName:"操作系统名称",prop:"name",width:120},{colName:"操作系统版本",prop:"version",width:260},{colName:"操作系统位数",prop:"dataLength",width:120},{colName:"服务器主机名称",prop:"hostname",width:260},{colName:"描述",prop:"remark"}],detailsTitle:"查看详情",editTitle:"编辑",refreshTitle:"比对更新",historyTitle:"历史信息",excelData:{result:[],theah:[]},lineData:[],excelPath:"",downloadFile:""}},methods:{_handleFilter:function(e,t){if(this.loading=!0,"search"===t)LS(e).then(function(e){this.osListData=e.ossList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.$message({message:e,center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)});else if("download"===t){vS(e,3).then(function(e){this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))}},generateDataTemplate:function(e){console.log("generateDataTemplate params -- > "+Bt()(e))},_handleCheckDetails:function(e){this.dialogStatus="操作系统信息详情";var t=this.osListData[e],a=t.uuid;console.log("check rowData -- >"+a),NS(a).then(function(e){console.log(" detail result ->>>>>>>>>>>>>   "+Bt()(e)),console.log(e),this.osDetails=e.auOss,this.dialogDetailsVisible=!0}.bind(this)).catch()},_handleEdit:function(e){this.dialogStatus="操作系统信息修改";var t=this.osListData[e],a=t.uuid;console.log("edit rowData -- >"+a),NS(a).then(function(e){console.log("edit result --\x3e "+Bt()(e)),this.osDetails=e.auOss,this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateOsInfo:function(e,t){"save"===t?VS(e).then(function(e){"Success!"===e&&(this.dialogEditVisible=!1,this.$message({title:"成功",message:"保存成功",type:"success",duration:2e3})),this.loadData()}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleSynData:function(e){this.synDataLoading=!0;var t=this.osListData[e],a=t.uuid;IS(a).then(function(e){console.log("refresh oss result -- > "+Bt()(e)),this.syncDataStatus=e,"Success!"===this.syncDataStatus?(this.synDataLoading=!1,this.loadData(),this.$message({message:"刷新成功",type:"success"})):(this.synDataLoading=!1,this.$message({message:"刷新失败",type:"error"}))}.bind(this)).catch(function(e){console.log(e),this.synDataLoading=!1})},_handleCheckHistory:function(e){this.dialogStatus="操作系统历史信息详情",this.dialogHistoryVisible=!0;var t=this.osListData[e],a=t.uuid;console.log("history rowData -- >"+a),ES(a).then(function(e){console.log("History - > "+Bt()(e)),this.osHistoryData=e.auOssHisList}.bind(this)).catch(function(e){console.log(e)})},closeDialog:function(){this.dialogDetailsVisible=!1},loadData:function(){LS(this.searchConditionList).then(function(e){console.log("operating system result === > "+Bt()(e)),this.osListData=e.ossList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.currentPage;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},Gk=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.synDataLoading,expression:"synDataLoading"}],staticClass:"flex-1 flex-c",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"玩命同步中..."}},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.osListData,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.refreshTitle},on:{click:function(a){e._handleSynData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])]),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("os-details",{attrs:{osDetails:e.osDetails},on:{closeDialogEvent:e.closeDialog}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogEditVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("os-edit",{attrs:{osDetails:e.osDetails},on:{saveOsInfoEvent:e._updateOsInfo}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("comm-history",{attrs:{commHistoryList:e.osHistoryData}})],1)],1)])},Hk=[],jk={render:Gk,staticRenderFns:Hk},Jk=jk,Zk=a("VU/8"),Kk=_e,Yk=Zk(Qk,Jk,!1,Kk,"data-v-31cd61a2",null),Xk=Yk.exports,eT={props:{middlewareDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},methods:{closeDialog:function(){this.$emit("closeDialogEvent")}},watch:{middlewareDetails:function(e,t){this.middlewareDetails=e}}},tT=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.middlewareDetails}},[null!==e.middlewareDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.province,callback:function(t){e.$set(e.middlewareDetails.courtDto,"province",t)},expression:"middlewareDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.city,callback:function(t){e.$set(e.middlewareDetails.courtDto,"city",t)},expression:"middlewareDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.district,callback:function(t){e.$set(e.middlewareDetails.courtDto,"district",t)},expression:"middlewareDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.name,callback:function(t){e.$set(e.middlewareDetails.courtDto,"name",t)},expression:"middlewareDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"中间件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.name,callback:function(t){e.$set(e.middlewareDetails,"name",t)},expression:"middlewareDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.version,callback:function(t){e.$set(e.middlewareDetails,"version",t)},expression:"middlewareDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件安装路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.path,callback:function(t){e.$set(e.middlewareDetails,"path",t)},expression:"middlewareDetails.path"}})],1),e._v(" "),null!==e.middlewareDetails.server?[a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.server.name,callback:function(t){e.$set(e.middlewareDetails.server,"name",t)},expression:"middlewareDetails.server.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.serverId,callback:function(t){e.$set(e.middlewareDetails,"serverId",t)},expression:"middlewareDetails.serverId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.provider,callback:function(t){e.$set(e.middlewareDetails,"provider",t)},expression:"middlewareDetails.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.remark,callback:function(t){e.$set(e.middlewareDetails,"remark",t)},expression:"middlewareDetails.remark"}})],1),e._v(" "),null!==e.middlewareDetails.extDataList?e._l(e.middlewareDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e()],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)},aT=[],iT={render:tT,staticRenderFns:aT},sT=iT,oT=a("VU/8"),lT=oT(eT,sT,!1,null,null,null),rT=lT.exports,nT={props:{middlewareDetails:void 0},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0,showAddNewCIPop:!1,fieldName:"",fieldValue:"",showAddNewEvent:!1,tempExtDataList:void 0}},methods:{updateMiddlewareInfo:function(){this.$emit("saveMiddlewareInfoEvent",this.middlewareDetails,"save")},addNewEvent:function(){console.info("add new item"),""===this.fieldName.trim()?this.$message.error("请输入新增项名称"):(null===this.middlewareDetails.extDataList&&(this.middlewareDetails.extDataList=[]),this.middlewareDetails.extDataList.push({fieldName:this.fieldName,fieldValue:this.fieldValue}),console.info(Bt()(this.middlewareDetails)))},clearData:function(){console.info("clear data"),this.showAddNewEvent=!1,this.newLabel="",this.newValue=""},callBackCloseDialogEvent:function(){this.$emit("saveMiddlewareInfoEvent",this.middlewareDetails,"cancel")}},watch:{middlewareDetails:function(e,t){this.middlewareDetails=e}},mounted:function(){this.tempRemark=this.middlewareDetails.remark,this.tempExtDataList=this.middlewareDetails.extDataList}},cT=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.middlewareDetails}},[null!==e.middlewareDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.province,callback:function(t){e.$set(e.middlewareDetails.courtDto,"province",t)},expression:"middlewareDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.city,callback:function(t){e.$set(e.middlewareDetails.courtDto,"city",t)},expression:"middlewareDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.district,callback:function(t){e.$set(e.middlewareDetails.courtDto,"district",t)},expression:"middlewareDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.courtDto.name,callback:function(t){e.$set(e.middlewareDetails.courtDto,"name",t)},expression:"middlewareDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"中间件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.name,callback:function(t){e.$set(e.middlewareDetails,"name",t)},expression:"middlewareDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.version,callback:function(t){e.$set(e.middlewareDetails,"version",t)},expression:"middlewareDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件安装路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.path,callback:function(t){e.$set(e.middlewareDetails,"path",t)},expression:"middlewareDetails.path"}})],1),e._v(" "),null!==e.middlewareDetails.server?[a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.server.name,callback:function(t){e.$set(e.middlewareDetails.server,"name",t)},expression:"middlewareDetails.server.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.serverId,callback:function(t){e.$set(e.middlewareDetails,"serverId",t)},expression:"middlewareDetails.serverId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDetails.provider,callback:function(t){e.$set(e.middlewareDetails,"provider",t)},expression:"middlewareDetails.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.middlewareDetails.remark,callback:function(t){e.$set(e.middlewareDetails,"remark",t)},expression:"middlewareDetails.remark"}})],1),e._v(" "),null!==e.middlewareDetails.extDataList?e._l(e.middlewareDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateMiddlewareInfo}},[e._v("保 存")]),e._v(" "),a("el-popover",{ref:"newCIEventPop",attrs:{visible:"showAddNewCIPop",placement:"right",width:"160",hide:e.clearData},model:{value:e.showAddNewEvent,callback:function(t){e.showAddNewEvent=t},expression:"showAddNewEvent"}},[a("div",[a("div",[a("el-input",{attrs:{autofocus:!0,placeholder:"请输入新增项名称",size:"small"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),e._v(" "),a("div",{staticClass:"margin-top-5"},[a("el-input",{attrs:{placeholder:"请输入新增项值",size:"small"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1)]),e._v(" "),a("div",{staticClass:"text-right margin-top-5"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.clearData}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addNewEvent}},[e._v("添加")])],1)]),e._v(" "),a("a",{directives:[{name:"popover",rawName:"v-popover:newCIEventPop",arg:"newCIEventPop"}]},[a("span",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"}},[e._v("添加")])],1)])],1)],2)],1)},dT=[],uT={render:cT,staticRenderFns:dT},pT=uT,mT=a("VU/8"),hT=mT(nT,pT,!1,null,null,null),fT=hT.exports,gT={components:{searchCondition:rx,middlewareDetails:rT,middlewareEdit:fT,CommHistory:Ix},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,addressData:[],middlewareListData:void 0,middlewareDetails:void 0,middlewareHistoryData:void 0,synDataLoading:!1,syncDataStatus:"",loading:!0,searchConditionList:{city:"",condition:"",currentPage:1,district:"",pageSize:10,province:""},defaultProps:{label:"name",children:"children",value:"name"},detailsTitle:"查看详情",editTitle:"编辑",refreshTitle:"比对更新",historyTitle:"历史信息",tableTitleList:[{colName:"省（直辖市）",prop:"courtDto.province",width:120},{colName:"市",prop:"courtDto.city",width:100},{colName:"区",prop:"courtDto.district",width:100},{colName:"小区名称",prop:"courtDto.memo",width:120},{colName:"软件名称",prop:"name",width:120},{colName:"软件版本",prop:"version",width:120},{colName:"软件安装路径",prop:"path",width:240},{colName:"服务器主机名称",prop:"server.hostname",width:260},{colName:"描述",prop:"remark"}]}},methods:{_handleFilter:function(e,t){if("search"===t)this.loading=!0,RS(e).then(function(e){this.middlewareListData=e.middlewareList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)});else if("download"===t){vS(e,5).then(function(e){this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))}},_handleCheckDetails:function(e){this.dialogStatus="中间件信息详情";var t=this.middlewareListData[e],a=t.uuid;console.log("check rowData -- >"+a),zS(a).then(function(e){console.log(" detail result ->>>>>>>>>>>>>   "+Bt()(e)),this.middlewareDetails=e.auMiddleware,this.dialogDetailsVisible=!0}.bind(this)).catch()},_handleEdit:function(e){this.dialogStatus="中间件修改";var t=this.middlewareListData[e],a=t.uuid;console.log("edit rowData -- >"+a),zS(a).then(function(e){console.log(" edit result ->>>>>>>>>>>>>   "+Bt()(e)),this.middlewareDetails=e.auMiddleware,this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateMiddlewareInfo:function(e,t){"save"===t?AS(e).then(function(e){this.dialogEditVisible=!1,this.$message({title:"成功",message:"保存成功",type:"success",duration:2e3}),this.loadData()}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleSynData:function(e){this.synDataLoading=!0;var t=this.middlewareListData[e],a=t.uuid;OS(a).then(function(e){console.log("refresh middleware result -- > "+Bt()(e)),this.syncDataStatus=e,"Success!"===this.syncDataStatus?(this.synDataLoading=!1,this.loadData(),this.$message({message:"刷新成功",type:"success"})):(this.synDataLoading=!1,this.$message({message:"刷新失败",type:"error"}))}.bind(this)).catch(function(e){this.synDataLoading=!1,console.log(e)})},_handleCheckHistory:function(e){this.dialogStatus="中间件历史信息详情";var t=this.middlewareListData[e],a=t.uuid;console.log("history rowData -- >"+a),qS(a).then(function(e){console.log("history -- > "+Bt()(e)),this.middlewareHistoryData=e.auMiddlewareHisList,this.dialogHistoryVisible=!0}.bind(this)).catch(function(e){console.log(e)})},closeDialog:function(){this.dialogDetailsVisible=!1},loadData:function(){RS(this.searchConditionList).then(function(e){console.log("middleware result -- >"+Bt()(e)),this.middlewareListData=e.middlewareList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.currentPage;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},vT=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.synDataLoading,expression:"synDataLoading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"玩命同步中..."}},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.middlewareListData,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.refreshTitle},on:{click:function(a){e._handleSynData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])]),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("middleware-details",{attrs:{middlewareDetails:e.middlewareDetails},on:{closeDialogEvent:e.closeDialog}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogEditVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("middleware-edit",{attrs:{middlewareDetails:e.middlewareDetails},on:{saveMiddlewareInfoEvent:e._updateMiddlewareInfo}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("comm-history",{attrs:{commHistoryList:e.middlewareHistoryData}})],1)],1)])},bT=[],DT={render:vT,staticRenderFns:bT},yT=DT,CT=a("VU/8"),_T=we,wT=CT(gT,yT,!1,_T,null,null),ST=wT.exports,xT={props:{operMainDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},methods:{closeDialog:function(){this.$emit("closeDialogEvent")}},watch:{operMainDetails:function(e,t){this.operMainDetails=e}}},kT=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.operMainDetails}},[null!==e.operMainDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.province,callback:function(t){e.$set(e.operMainDetails.courtDto,"province",t)},expression:"operMainDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.city,callback:function(t){e.$set(e.operMainDetails.courtDto,"city",t)},expression:"operMainDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.district,callback:function(t){e.$set(e.operMainDetails.courtDto,"district",t)},expression:"operMainDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.name,callback:function(t){e.$set(e.operMainDetails.courtDto,"name",t)},expression:"operMainDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"中间件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.name,callback:function(t){e.$set(e.operMainDetails,"name",t)},expression:"operMainDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.version,callback:function(t){e.$set(e.operMainDetails,"version",t)},expression:"operMainDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件安装路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.path,callback:function(t){e.$set(e.operMainDetails,"path",t)},expression:"operMainDetails.path"}})],1),e._v(" "),null!==e.operMainDetails.server?[a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.server.name,callback:function(t){e.$set(e.operMainDetails.server,"name",t)},expression:"operMainDetails.server.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.serverId,callback:function(t){e.$set(e.operMainDetails,"serverId",t)},expression:"operMainDetails.serverId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.provider,callback:function(t){e.$set(e.operMainDetails,"provider",t)},expression:"operMainDetails.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.remark,callback:function(t){e.$set(e.operMainDetails,"remark",t)},expression:"operMainDetails.remark"}})],1),e._v(" "),null!==e.operMainDetails.extDataList?e._l(e.operMainDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e()],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)},TT=[],LT={render:kT,staticRenderFns:TT},NT=LT,VT=a("VU/8"),IT=VT(xT,NT,!1,null,null,null),ET=IT.exports,PT={props:{operMainDetails:void 0},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0,showAddNewCIPop:!1,fieldName:"",fieldValue:"",showAddNewEvent:!1,tempExtDataList:void 0}},methods:{updateMiddlewareInfo:function(){this.$emit("saveMiddlewareInfoEvent",this.operMainDetails,"save")},addNewEvent:function(){console.info("add new item"),""===this.fieldName.trim()?this.$message.error("请输入新增项名称"):(null===this.operMainDetails.extDataList&&(this.operMainDetails.extDataList=[]),this.operMainDetails.extDataList.push({fieldName:this.fieldName,fieldValue:this.fieldValue}),console.info(Bt()(this.operMainDetails)))},clearData:function(){console.info("clear data"),this.showAddNewEvent=!1,this.newLabel="",this.newValue=""},callBackCloseDialogEvent:function(){this.$emit("saveMiddlewareInfoEvent",this.operMainDetails,"cancel")}},watch:{operMainDetails:function(e,t){this.operMainDetails=e}},mounted:function(){this.tempRemark=this.operMainDetails.remark,this.tempExtDataList=this.operMainDetails.extDataList}},MT=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.operMainDetails}},[null!==e.operMainDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.province,callback:function(t){e.$set(e.operMainDetails.courtDto,"province",t)},expression:"operMainDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.city,callback:function(t){e.$set(e.operMainDetails.courtDto,"city",t)},expression:"operMainDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.district,callback:function(t){e.$set(e.operMainDetails.courtDto,"district",t)},expression:"operMainDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.courtDto.name,callback:function(t){e.$set(e.operMainDetails.courtDto,"name",t)},expression:"operMainDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"中间件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.name,callback:function(t){e.$set(e.operMainDetails,"name",t)},expression:"operMainDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.version,callback:function(t){e.$set(e.operMainDetails,"version",t)},expression:"operMainDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件安装路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.path,callback:function(t){e.$set(e.operMainDetails,"path",t)},expression:"operMainDetails.path"}})],1),e._v(" "),null!==e.operMainDetails.server?[a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.server.name,callback:function(t){e.$set(e.operMainDetails.server,"name",t)},expression:"operMainDetails.server.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.serverId,callback:function(t){e.$set(e.operMainDetails,"serverId",t)},expression:"operMainDetails.serverId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.operMainDetails.provider,callback:function(t){e.$set(e.operMainDetails,"provider",t)},expression:"operMainDetails.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.operMainDetails.remark,callback:function(t){e.$set(e.operMainDetails,"remark",t)},expression:"operMainDetails.remark"}})],1),e._v(" "),null!==e.operMainDetails.extDataList?e._l(e.operMainDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateMiddlewareInfo}},[e._v("保 存")]),e._v(" "),a("el-popover",{ref:"newCIEventPop",attrs:{visible:"showAddNewCIPop",placement:"right",width:"160",hide:e.clearData},model:{value:e.showAddNewEvent,callback:function(t){e.showAddNewEvent=t},expression:"showAddNewEvent"}},[a("div",[a("div",[a("el-input",{attrs:{autofocus:!0,placeholder:"请输入新增项名称",size:"small"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),e._v(" "),a("div",{staticClass:"margin-top-5"},[a("el-input",{attrs:{placeholder:"请输入新增项值",size:"small"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1)]),e._v(" "),a("div",{staticClass:"text-right margin-top-5"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.clearData}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addNewEvent}},[e._v("添加")])],1)]),e._v(" "),a("a",{directives:[{name:"popover",rawName:"v-popover:newCIEventPop",arg:"newCIEventPop"}]},[a("span",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"}},[e._v("添加")])],1)])],1)],2)],1)},$T=[],UT={render:MT,staticRenderFns:$T},FT=UT,RT=a("VU/8"),zT=RT(PT,FT,!1,null,null,null),AT=zT.exports,OT={components:{searchCondition:rx,OperationMaintanceDetails:ET,OperationMaintanceEdit:AT,CommHistory:Ix},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,addressData:[],operMainListData:void 0,operMainDetails:void 0,operMainHistoryData:void 0,synDataLoading:!1,syncDataStatus:"",loading:!0,searchConditionList:{city:"",condition:"",currentPage:1,district:"",pageSize:10,province:""},defaultProps:{label:"name",children:"children",value:"name"},detailsTitle:"查看详情",editTitle:"编辑",refreshTitle:"比对更新",historyTitle:"历史信息",tableTitleList:[{colName:"省（直辖市）",prop:"courtDto.province",width:120},{colName:"市",prop:"courtDto.city",width:100},{colName:"区",prop:"courtDto.district",width:100},{colName:"小区名称",prop:"courtDto.memo",width:120},{colName:"软件名称",prop:"name",width:120},{colName:"软件版本",prop:"version",width:120},{colName:"软件安装路径",prop:"path",width:240},{colName:"服务器主机名称",prop:"server.hostname",width:260},{colName:"描述",prop:"remark"}]}},methods:{_handleFilter:function(e,t){if("search"===t)this.loading=!0,BS(e).then(function(e){this.operMainListData=e.middlewareList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)});else if("download"===t){vS(e,6).then(function(e){this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))}},_handleCheckDetails:function(e){this.dialogStatus="运维管理信息详情";var t=this.operMainListData[e],a=t.uuid;console.log("check rowData -- >"+a),WS(a).then(function(e){console.log(e),this.operMainDetails=e.auMiddleware,this.dialogDetailsVisible=!0}.bind(this)).catch()},_handleEdit:function(e){this.dialogStatus="运维管理修改";var t=this.operMainListData[e],a=t.uuid;console.log("edit rowData -- >"+a),WS(a).then(function(e){this.operMainDetails=e.auMiddleware,this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateMiddlewareInfo:function(e,t){"save"===t?QS(e).then(function(e){this.dialogEditVisible=!1,this.$message({title:"成功",message:"保存成功",type:"success",duration:2e3}),this.loadData()}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleSynData:function(e){this.synDataLoading=!0;var t=this.operMainListData[e],a=t.uuid;GS(a).then(function(e){console.log("refresh oper maintance result -- > "+Bt()(e)),this.syncDataStatus=e,"Success!"===this.syncDataStatus?(this.synDataLoading=!1,this.loadData(),this.$message({message:"刷新成功",type:"success"})):(this.synDataLoading=!1,this.$message({message:"刷新失败",type:"error"}))}.bind(this)).catch(function(e){this.synDataLoading=!1,console.log(e)})},_handleCheckHistory:function(e){this.dialogStatus="运维管理历史信息详情";var t=this.operMainListData[e],a=t.uuid;console.log("history rowData -- >"+a),HS(a).then(function(e){console.log("history -- > "+Bt()(e)),this.operMainHistoryData=e.auMiddlewareHisList,this.dialogHistoryVisible=!0}.bind(this)).catch(function(e){console.log(e)})},closeDialog:function(){this.dialogDetailsVisible=!1},loadData:function(){BS(this.searchConditionList).then(function(e){console.log("middleware result -- >"+Bt()(e)),this.operMainListData=e.middlewareList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.currentPage;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},qT=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.synDataLoading,expression:"synDataLoading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"玩命同步中..."}},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.operMainListData,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.refreshTitle},on:{click:function(a){e._handleSynData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])]),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("operation-maintance-details",{attrs:{operMainDetails:e.operMainDetails},on:{closeDialogEvent:e.closeDialog}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogEditVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("operation-maintance-edit",{attrs:{operMainDetails:e.operMainDetails},on:{saveMiddlewareInfoEvent:e._updateMiddlewareInfo}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("comm-history",{attrs:{commHistoryList:e.operMainHistoryData}})],1)],1)])},BT=[],WT={render:qT,staticRenderFns:BT},QT=WT,GT=a("VU/8"),HT=Se,jT=GT(OT,QT,!1,HT,null,null),JT=jT.exports,ZT={props:{databaseDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},methods:{closeDialog:function(){this.$emit("closeDialogEvent")}},watch:{databaseDetails:function(e,t){this.databaseDetails=e}}},KT=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.databaseDetails}},[null!==e.databaseDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.courtDto.province,callback:function(t){e.$set(e.databaseDetails.courtDto,"province",t)},expression:"databaseDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.courtDto.city,callback:function(t){e.$set(e.databaseDetails.courtDto,"city",t)},expression:"databaseDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.courtDto.district,callback:function(t){e.$set(e.databaseDetails.courtDto,"district",t)},expression:"databaseDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.courtDto.name,callback:function(t){e.$set(e.databaseDetails.courtDto,"name",t)},expression:"databaseDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"数据库名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.name,callback:function(t){e.$set(e.databaseDetails,"name",t)},expression:"databaseDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.version,callback:function(t){e.$set(e.databaseDetails,"version",t)},expression:"databaseDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库安装路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.path,callback:function(t){e.$set(e.databaseDetails,"path",t)},expression:"databaseDetails.path"}})],1),e._v(" "),null!==e.databaseDetails.server?[a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.server.name,callback:function(t){e.$set(e.databaseDetails.server,"name",t)},expression:"databaseDetails.server.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.serverId,callback:function(t){e.$set(e.databaseDetails,"serverId",t)},expression:"databaseDetails.serverId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.provider,callback:function(t){e.$set(e.databaseDetails,"provider",t)},expression:"databaseDetails.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseDetails.remark,callback:function(t){e.$set(e.databaseDetails,"remark",t)},expression:"databaseDetails.remark"}})],1),e._v(" "),null!==e.databaseDetails.extDataList?e._l(e.databaseDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e()],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)},YT=[],XT={render:KT,staticRenderFns:YT},eL=XT,tL=a("VU/8"),aL=tL(ZT,eL,!1,null,null,null),iL=aL.exports,sL={props:{databaseEditDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0,showAddNewCIPop:!1,fieldName:"",fieldValue:"",showAddNewEvent:!1,tempExtDataList:void 0}},methods:{updateDatabaseInfo:function(){this.$emit("saveDatabaseInfoEvent",this.databaseEditDetails,"save")},addNewEvent:function(){console.info("add new item"),""===this.fieldName.trim()?this.$message.error("请输入新增项名称"):(null===this.databaseEditDetails.extDataList&&(this.databaseEditDetails.extDataList=[]),this.databaseEditDetails.extDataList.push({fieldName:this.fieldName,fieldValue:this.fieldValue}),console.info(Bt()(this.databaseEditDetails)))},clearData:function(){console.info("clear data"),this.showAddNewEvent=!1,this.newLabel="",this.newValue=""},callBackCloseDialogEvent:function(){this.$emit("saveDatabaseInfoEvent",this.databaseEditDetails,"cancel")}},watch:{databaseEditDetails:function(e,t){this.databaseEditDetails=e}},mounted:function(){this.tempRemark=this.databaseEditDetails.remark,this.tempExtDataList=this.databaseEditDetails.extDataList}},oL=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.databaseEditDetails}},[null!==e.databaseEditDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.courtDto.province,callback:function(t){e.$set(e.databaseEditDetails.courtDto,"province",t)},expression:"databaseEditDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.courtDto.city,callback:function(t){e.$set(e.databaseEditDetails.courtDto,"city",t)},expression:"databaseEditDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.courtDto.district,callback:function(t){e.$set(e.databaseEditDetails.courtDto,"district",t)},expression:"databaseEditDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.courtDto.name,callback:function(t){e.$set(e.databaseEditDetails.courtDto,"name",t)},expression:"databaseEditDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"数据库名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.name,callback:function(t){e.$set(e.databaseEditDetails,"name",t)},expression:"databaseEditDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.version,callback:function(t){e.$set(e.databaseEditDetails,"version",t)},expression:"databaseEditDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库安装路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.path,callback:function(t){e.$set(e.databaseEditDetails,"path",t)},expression:"databaseEditDetails.path"}})],1),e._v(" "),null!==e.databaseEditDetails.server?[a("el-form-item",{attrs:{label:"服务器主机名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.server.name,callback:function(t){e.$set(e.databaseEditDetails.server,"name",t)},expression:"databaseEditDetails.server.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所在服务器UUID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.databaseEditDetails.serverId,callback:function(t){e.$set(e.databaseEditDetails,"serverId",t)},expression:"databaseEditDetails.serverId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统提供者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled,maxlength:e.maxlength},model:{value:e.databaseEditDetails.provider,callback:function(t){e.$set(e.databaseEditDetails,"provider",t)},expression:"databaseEditDetails.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.databaseEditDetails.remark,callback:function(t){e.$set(e.databaseEditDetails,"remark",t)},expression:"databaseEditDetails.remark"}})],1),e._v(" "),null!==e.databaseEditDetails.extDataList?e._l(e.databaseEditDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateDatabaseInfo}},[e._v("保 存")]),e._v(" "),a("el-popover",{ref:"newCIEventPop",attrs:{visible:"showAddNewCIPop",placement:"right",width:"160",hide:e.clearData},model:{value:e.showAddNewEvent,callback:function(t){e.showAddNewEvent=t},expression:"showAddNewEvent"}},[a("div",[a("div",[a("el-input",{attrs:{autofocus:!0,placeholder:"请输入新增项名称",size:"small"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),e._v(" "),a("div",{staticClass:"margin-top-5"},[a("el-input",{attrs:{placeholder:"请输入新增项值",size:"small"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1)]),e._v(" "),a("div",{staticClass:"text-right margin-top-5"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.clearData}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addNewEvent}},[e._v("添加")])],1)]),e._v(" "),a("a",{directives:[{name:"popover",rawName:"v-popover:newCIEventPop",arg:"newCIEventPop"}]},[a("span",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"}},[e._v("添加")])],1)])],1)],2)],1)},lL=[],rL={render:oL,staticRenderFns:lL},nL=rL,cL=a("VU/8"),dL=cL(sL,nL,!1,null,null,null),uL=dL.exports,pL={components:{searchCondition:rx,databaseDetails:iL,databaseEdit:uL,CommHistory:Ix},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,addressData:[],databaseListData:void 0,databaseDetails:void 0,databaseEditDetails:void 0,databaseHistoryData:void 0,synDataLoading:!1,syncDataStatus:"",loading:!0,searchConditionList:{city:"",condition:"",currentPage:1,district:"",pageSize:10,province:""},defaultProps:{label:"name",children:"children",value:"name"},tableTitleList:[{colName:"省（直辖市）",prop:"courtDto.province",width:120},{colName:"市",prop:"courtDto.city",width:100},{colName:"区",prop:"courtDto.district",width:100},{colName:"小区名称",prop:"courtDto.name",width:120},{colName:"数据库名称",prop:"name",width:160},{colName:"数据库版本",prop:"version",width:120},{colName:"数据库安装路径",prop:"path",width:240},{colName:"服务器主机名称",prop:"server.name",width:220},{colName:"描述",prop:"remark"}],detailsTitle:"查看详情",editTitle:"编辑",refreshTitle:"比对更新",historyTitle:"历史信息"}},methods:{_handleFilter:function(e,t){if("search"===t)this.loading=!0,PS(e).then(function(e){console.log("database by page --- > "+Bt()(e)),this.databaseListData=e.dbmsList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){console.log(e),this.loading=!1}.bind(this));else if("download"===t){vS(e,4).then(function(e){this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))}},_handleCheckDetails:function(e){this.dialogStatus="数据库信息详情";var t=this.databaseListData[e],a=t.uuid;console.log("check rowData -- >"+a),MS(a).then(function(e){console.log(e),this.databaseDetails=e.auDbms,this.dialogDetailsVisible=!0}.bind(this)).catch()},_handleEdit:function(e){this.dialogStatus="数据库修改";var t=this.databaseListData[e],a=t.uuid;console.log("edit rowData -- >"+a),MS(a).then(function(e){this.databaseEditDetails=e.auDbms,console.log("edit each database details --- >  "+Bt()(this.databaseEditDetails)),this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateDatabaseInfo:function(e,t){"save"===t?$S(e).then(function(e){console.log("update response --- >"+e),"Success!"===e&&(this.dialogEditVisible=!1,this.$message({message:"保存成功",type:"success"}),this.loadData())}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleSynData:function(e){this.synDataLoading=!0;var t=this.databaseListData[e],a=t.uuid;US(a).then(function(e){console.log("refresh middleware result -- > "+Bt()(e)),this.syncDataStatus=e,"Success!"===this.syncDataStatus?(this.synDataLoading=!1,this.loadData(),this.$message({message:"刷新成功",type:"success"})):(this.synDataLoading=!1,this.$message({message:"刷新失败",type:"error"}))}.bind(this)).catch(function(e){console.log(e),this.synDataLoading=!1})},_handleCheckHistory:function(e){this.dialogStatus="数据库历史信息详情";var t=this.databaseListData[e],a=t.uuid;console.log("history rowData -- >"+a),FS(a).then(function(e){console.log("hisrory -- > "+Bt()(e)),this.databaseHistoryData=e.auDbmsHisList,this.dialogHistoryVisible=!0}.bind(this)).catch(function(e){console.log(e)})},closeDialog:function(){this.dialogDetailsVisible=!1},loadData:function(){PS(this.searchConditionList).then(function(e){console.log("database by page --- > "+Bt()(e)),this.databaseListData=e.dbmsList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){console.log(e),this.loading=!1}.bind(this))},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.page=e,this.loadData()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.page;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},mL=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.synDataLoading,expression:"synDataLoading"}],staticClass:"flex-1 flex-c",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"玩命同步中..."}},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.databaseListData,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.refreshTitle},on:{click:function(a){e._handleSynData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])]),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("database-details",{attrs:{databaseDetails:e.databaseDetails},on:{closeDialogEvent:e.closeDialog}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogEditVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("database-edit",{attrs:{databaseEditDetails:e.databaseEditDetails},on:{saveDatabaseInfoEvent:e._updateDatabaseInfo}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("comm-history",{attrs:{commHistoryList:e.databaseHistoryData}})],1)],1)])},hL=[],fL={render:mL,staticRenderFns:hL},gL=fL,vL=a("VU/8"),bL=xe,DL=vL(pL,gL,!1,bL,"data-v-73cb7f49",null),yL=DL.exports,CL={props:{netDeviceDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},methods:{callBackCloseDialogEvent:function(){this.$emit("closeDialogEvent")}},watch:{netDeviceDetails:function(e,t){this.netDeviceDetails=e}}},_L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.netDeviceDetails}},[null!==e.netDeviceDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.province,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"province",t)},expression:"netDeviceDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.city,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"city",t)},expression:"netDeviceDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.district,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"district",t)},expression:"netDeviceDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.name,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"name",t)},expression:"netDeviceDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"设备名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.name,callback:function(t){e.$set(e.netDeviceDetails,"name",t)},expression:"netDeviceDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型/型号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.type,callback:function(t){e.$set(e.netDeviceDetails,"type",t)},expression:"netDeviceDetails.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.osVersion,callback:function(t){e.$set(e.netDeviceDetails,"osVersion",t)},expression:"netDeviceDetails.osVersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.mgmtIp,callback:function(t){e.$set(e.netDeviceDetails,"mgmtIp",t)},expression:"netDeviceDetails.mgmtIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运行状态","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.status,callback:function(t){e.$set(e.netDeviceDetails,"status",t)},expression:"netDeviceDetails.status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备SN/设备ID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.serialNo,callback:function(t){e.$set(e.netDeviceDetails,"serialNo",t)},expression:"netDeviceDetails.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"固资编号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.aeestNo,callback:function(t){e.$set(e.netDeviceDetails,"aeestNo",t)},expression:"netDeviceDetails.aeestNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备厂商","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.vendor,callback:function(t){e.$set(e.netDeviceDetails,"vendor",t)},expression:"netDeviceDetails.vendor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备服务提供商","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.serviceProvider,callback:function(t){e.$set(e.netDeviceDetails,"serviceProvider",t)},expression:"netDeviceDetails.serviceProvider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物理机房","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.deployment,callback:function(t){e.$set(e.netDeviceDetails,"deployment",t)},expression:"netDeviceDetails.deployment"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否核心","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.isCore,callback:function(t){e.$set(e.netDeviceDetails,"isCore",t)},expression:"netDeviceDetails.isCore"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外网IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.internetIp,callback:function(t){e.$set(e.netDeviceDetails,"internetIp",t)},expression:"netDeviceDetails.internetIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外网端口","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.internetPort,callback:function(t){e.$set(e.netDeviceDetails,"internetPort",t)},expression:"netDeviceDetails.internetPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"后端IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.backendIp,callback:function(t){e.$set(e.netDeviceDetails,"backendIp",t)},expression:"netDeviceDetails.backendIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维护人","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.operator,callback:function(t){e.$set(e.netDeviceDetails,"operator",t)},expression:"netDeviceDetails.operator"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维保服务","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.serviceLevel,callback:function(t){e.$set(e.netDeviceDetails,"serviceLevel",t)},expression:"netDeviceDetails.serviceLevel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务到期时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.serviceDuring,callback:function(t){e.$set(e.netDeviceDetails,"serviceDuring",t)},expression:"netDeviceDetails.serviceDuring"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.remark,callback:function(t){e.$set(e.netDeviceDetails,"remark",t)},expression:"netDeviceDetails.remark"}})],1),e._v(" "),e.netDeviceDetails.extDataList?e._l(e.netDeviceDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e()],2),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")])],1)],1)},wL=[],SL={render:_L,staticRenderFns:wL},xL=SL,kL=a("VU/8"),TL=kL(CL,xL,!1,null,null,null),LL=TL.exports,NL={props:{netDeviceDetails:void 0},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempStatus:"",tempAssetNo:"",tempVendor:"",tempServiceVendor:"",tempDeployment:"",tempCore:"",tempIntraIP:"",tempIntraPort:"",tempBackIP:"",tempOperator:"",tempServiceLevel:"",tempServiceDuring:"",tempRemark:"",showAddNewCIPop:!1,fieldName:"",fieldValue:"",showAddNewEvent:!1,tempExtDataList:void 0}},methods:{updateNetDeviceInfo:function(){this.$emit("saveOsInfoEvent",this.netDeviceDetails,"save")},validateDetailsChanged:function(){return this.tempStatus!==this.netDeviceDetails.status||this.tempAssetNo!==this.netDeviceDetails.aeestNo||this.tempVendor!==this.netDeviceDetails.vendor||this.tempServiceVendor!==this.netDeviceDetails.serviceProvider||this.tempDeployment!==this.netDeviceDetails.deployment||this.tempCore!==this.netDeviceDetails.isCore||this.tempIntraIP!==this.netDeviceDetails.internetIp||this.tempIntraPort!==this.netDeviceDetails.internetPort||this.tempBackIP!==this.netDeviceDetails.backendIp||this.tempOperator!==this.netDeviceDetails.operator||this.tempServiceLevel!==this.netDeviceDetails.serviceLevel||this.tempServiceDuring!==this.netDeviceDetails.serviceDuring||this.tempRemark!==this.netDeviceDetails.remark||this.tempExtDataList!==this.netDeviceDetails.extDataList},addNewEvent:function(){console.info("add new item"),""===this.fieldName.trim()?this.$message.error("请输入新增项名称"):(null===this.netDeviceDetails.extDataList&&(this.netDeviceDetails.extDataList=[]),this.netDeviceDetails.extDataList.push({fieldName:this.fieldName,fieldValue:this.fieldValue}),console.info(Bt()(this.osDetails)))},clearData:function(){console.info("clear data"),this.showAddNewEvent=!1,this.newLabel="",this.newValue=""},callBackCloseDialogEvent:function(){this.$emit("saveOsInfoEvent",this.netDeviceDetails,"cancel")}},watch:{netDeviceDetails:function(e,t){this.netDeviceDetails=e}},mounted:function(){this.tempStatus=this.netDeviceDetails.status,this.tempAssetNo=this.netDeviceDetails.aeestNo,this.tempVendor=this.netDeviceDetails.vendor,this.tempServiceVendor=this.netDeviceDetails.serviceProvider,this.tempDeployment=this.netDeviceDetails.deployment,this.tempCore=this.netDeviceDetails.isCore,this.tempIntraIP=this.netDeviceDetails.internetIp,this.tempIntraPort=this.netDeviceDetails.internetPort,this.tempBackIP=this.netDeviceDetails.backendIp,this.tempOperator=this.netDeviceDetails.operator,this.tempServiceLevel=this.netDeviceDetails.serviceLevel,this.tempServiceDuring=this.netDeviceDetails.serviceDuring,this.tempRemark=this.netDeviceDetails.remark,this.tempExtDataList=this.netDeviceDetails.extDataList}},VL=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.netDeviceDetails}},[null!==e.netDeviceDetails.courtDto?[a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.province,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"province",t)},expression:"netDeviceDetails.courtDto.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.city,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"city",t)},expression:"netDeviceDetails.courtDto.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.district,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"district",t)},expression:"netDeviceDetails.courtDto.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.courtDto.name,callback:function(t){e.$set(e.netDeviceDetails.courtDto,"name",t)},expression:"netDeviceDetails.courtDto.name"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"设备名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.name,callback:function(t){e.$set(e.netDeviceDetails,"name",t)},expression:"netDeviceDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备类型/型号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.type,callback:function(t){e.$set(e.netDeviceDetails,"type",t)},expression:"netDeviceDetails.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.osVersion,callback:function(t){e.$set(e.netDeviceDetails,"osVersion",t)},expression:"netDeviceDetails.osVersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"管理IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.mgmtIp,callback:function(t){e.$set(e.netDeviceDetails,"mgmtIp",t)},expression:"netDeviceDetails.mgmtIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备SN/设备ID","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.netDeviceDetails.serialNo,callback:function(t){e.$set(e.netDeviceDetails,"serialNo",t)},expression:"netDeviceDetails.serialNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运行状态","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.status,callback:function(t){e.$set(e.netDeviceDetails,"status",t)},expression:"netDeviceDetails.status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"固资编号","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.aeestNo,callback:function(t){e.$set(e.netDeviceDetails,"aeestNo",t)},expression:"netDeviceDetails.aeestNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备厂商","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.vendor,callback:function(t){e.$set(e.netDeviceDetails,"vendor",t)},expression:"netDeviceDetails.vendor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"设备服务提供商","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.serviceProvider,callback:function(t){e.$set(e.netDeviceDetails,"serviceProvider",t)},expression:"netDeviceDetails.serviceProvider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物理机房","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.deployment,callback:function(t){e.$set(e.netDeviceDetails,"deployment",t)},expression:"netDeviceDetails.deployment"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否核心","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.isCore,callback:function(t){e.$set(e.netDeviceDetails,"isCore",t)},expression:"netDeviceDetails.isCore"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外网IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.internetIp,callback:function(t){e.$set(e.netDeviceDetails,"internetIp",t)},expression:"netDeviceDetails.internetIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外网端口","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.internetPort,callback:function(t){e.$set(e.netDeviceDetails,"internetPort",t)},expression:"netDeviceDetails.internetPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"后端IP","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.backendIp,callback:function(t){e.$set(e.netDeviceDetails,"backendIp",t)},expression:"netDeviceDetails.backendIp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维护人","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.operator,callback:function(t){e.$set(e.netDeviceDetails,"operator",t)},expression:"netDeviceDetails.operator"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"维保服务","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.serviceLevel,callback:function(t){e.$set(e.netDeviceDetails,"serviceLevel",t)},expression:"netDeviceDetails.serviceLevel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务到期时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.serviceDuring,callback:function(t){e.$set(e.netDeviceDetails,"serviceDuring",t)},expression:"netDeviceDetails.serviceDuring"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:e.netDeviceDetails.remark,callback:function(t){e.$set(e.netDeviceDetails,"remark",t)},expression:"netDeviceDetails.remark"}})],1),e._v(" "),null!==e.netDeviceDetails.extDataList?e._l(e.netDeviceDetails.extDataList,function(t){return a("el-form-item",{key:t.fieldName,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{maxlength:e.maxlength},model:{value:t.fieldValue,callback:function(a){e.$set(t,"fieldValue",a)},expression:"item.fieldValue"}})],1)}):e._e(),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateNetDeviceInfo}},[e._v("保 存")]),e._v(" "),a("el-popover",{ref:"newCIEventPop",attrs:{visible:"showAddNewCIPop",placement:"right",width:"160",hide:e.clearData},model:{value:e.showAddNewEvent,callback:function(t){e.showAddNewEvent=t},expression:"showAddNewEvent"}},[a("div",[a("div",[a("el-input",{attrs:{autofocus:!0,placeholder:"请输入新增项名称",size:"small"},model:{value:e.fieldName,callback:function(t){e.fieldName=t},expression:"fieldName"}})],1),e._v(" "),a("div",{staticClass:"margin-top-5"},[a("el-input",{attrs:{placeholder:"请输入新增项值",size:"small"},model:{value:e.fieldValue,callback:function(t){e.fieldValue=t},expression:"fieldValue"}})],1)]),e._v(" "),a("div",{staticClass:"text-right margin-top-5"},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.clearData}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addNewEvent}},[e._v("添加")])],1)]),e._v(" "),a("a",{directives:[{name:"popover",rawName:"v-popover:newCIEventPop",arg:"newCIEventPop"}]},[a("span",[a("el-button",{staticStyle:{"margin-center":"10px"},attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"}},[e._v("添加")])],1)])],1)],2)],1)},IL=[],EL={render:VL,staticRenderFns:IL},PL=EL,ML=a("VU/8"),$L=ML(NL,PL,!1,null,null,null),UL=$L.exports,FL={components:{searchCondition:rx,netDeviceDetails:LL,netDeviceEdit:UL,CommHistory:Ix,ConfigFileUpload:Ax},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,dialogUploadVisible:!1,addressData:[],netDeviceListData:void 0,netDeviceDetails:void 0,netDeviceHistoryData:void 0,synDataLoading:!1,syncDataStatus:"",loading:!0,uploadFlag:"ne",searchConditionList:{city:"",condition:"",currentPage:1,district:"",pageSize:10,province:"",pageFlag:"ne"},tableTitleList:[{colName:"省（直辖市）",prop:"courtDto.province",width:120},{colName:"市",prop:"courtDto.city",width:120},{colName:"区",prop:"courtDto.district",width:120},{colName:"小区名称",prop:"courtDto.name",width:120},{colName:"设备名称",prop:"name",width:120},{colName:"设备类型/型号",prop:"type",width:140},{colName:"管理IP",prop:"mgmtIp",width:120},{colName:"运行状态",prop:"status",width:150},{colName:"描述",prop:"remark"}],detailsTitle:"查看详情",editTitle:"编辑",refreshTitle:"比对更新",historyTitle:"历史信息"}},methods:{_handleFilter:function(e,t){if(delete e.pageFlag,console.log("_handleFilter --- > "+Bt()(e)),"search"===t)this.loading=!0,jS(e).then(function(e){this.netDeviceListData=e.netequipList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)});else if("download"===t){vS(e,2).then(function(e){this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)}.bind(this))}else"upload"===t?(this.dialogStatus="上传网络设备配置信息",this.dialogUploadVisible=!0):"downtemplate"===t&&console.log("setting table list")},_handleCheckDetails:function(e){this.dialogStatus="网络设备信息详情";var t=this.netDeviceListData[e],a=t.uuid;console.log("check rowData -- >"+a),JS(a).then(function(e){console.log(Bt()(e)),this.netDeviceDetails=e.auNetequip,this.dialogDetailsVisible=!0}.bind(this)).catch()},_handleEdit:function(e){this.dialogStatus="网络设备修改";var t=this.netDeviceListData[e],a=t.uuid;console.log("edit rowData -- >"+a),JS(a).then(function(e){this.netDeviceDetails=e.auNetequip,console.log("edit net details --- > "+Bt()(this.netDeviceDetails)),this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateOsInfo:function(e,t){"save"===t?ZS(e).then(function(e){this.dialogEditVisible=!1,"Success!"===e?(this.$message({message:"保存成功",type:"success"}),this.loadData()):this.$message({message:"保存失败",type:"success"})}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleSynData:function(e){this.synDataLoading=!0;var t=this.netDeviceListData[e],a=t.uuid;KS(a).then(function(e){console.log("refresh middleware result -- > "+Bt()(e)),this.syncDataStatus=e,"Success!"===this.syncDataStatus?(this.synDataLoading=!1,this.loadData(),this.$message({message:"刷新成功",type:"success"})):(this.synDataLoading=!1,this.$message({message:"刷新失败",type:"error"}))}.bind(this)).catch(function(e){this.synDataLoading=!1,console.log(e)})},_handleCheckHistory:function(e){this.dialogStatus="网络设备历史信息详情";var t=this.netDeviceListData[e],a=t.uuid;console.log("history rowData -- >"+a),YS(a).then(function(e){console.log("history -- > "+Bt()(e)),this.netDeviceHistoryData=e.auNetequipHisList,this.dialogHistoryVisible=!0}.bind(this)).catch(function(e){console.log(e)})},closeDialog:function(){this.dialogDetailsVisible=!1},loadData:function(){delete this.searchConditionList.pageFlag,jS(this.searchConditionList).then(function(e){console.log("netdevice result== > "+Bt()(e)),this.netDeviceListData=e.netequipList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.page=e,this.loadData()},_handleCloseUploadDialog:function(){this.dialogUploadVisible=!1},_handleBeforClose:function(){this.dialogUploadVisible=!1,this.$refs.uploadCmpt.clearFileList()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.page;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},RL=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.synDataLoading,expression:"synDataLoading"}],staticClass:"flex-1 flex-c",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"玩命同步中..."}},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.netDeviceListData,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:"","show-overflow-tooltip":""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.refreshTitle},on:{click:function(a){e._handleSynData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("net-device-details",{attrs:{netDeviceDetails:e.netDeviceDetails},on:{closeDialogEvent:e.closeDialog}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogEditVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("net-device-edit",{attrs:{netDeviceDetails:e.netDeviceDetails},on:{saveOsInfoEvent:e._updateOsInfo}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("comm-history",{attrs:{commHistoryList:e.netDeviceHistoryData}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogUploadVisible,width:"40%","before-close":e._handleBeforClose},on:{"update:visible":function(t){e.dialogUploadVisible=t}}},[a("config-file-upload",{ref:"uploadCmpt",attrs:{uploadFlag:e.uploadFlag},on:{handleUploadSuccessEvent:e._handleCloseUploadDialog}})],1)],1)},zL=[],AL={render:RL,staticRenderFns:zL},OL=AL,qL=a("VU/8"),BL=ke,WL=qL(FL,OL,!1,BL,"data-v-fb4357bc",null),QL=WL.exports,GL=[{path:"/applicationupgrade/serverhardwarecfginfo",name:"serverHardwareCfgInfo",component:ik},{path:"/applicationupgrade/appandserviceinfo",name:"applicationServiceInfo",component:Lk},{path:"/applicationupgrade/osinfo",name:"operationSystemInfo",component:Xk},{path:"/applicationupgrade/middlewaresysinfo",name:"middlewareSystemInfo",component:ST},{path:"/applicationupgrade/databasesysinfo",name:"databaseSystemInfo",component:yL},{path:"/applicationupgrade/netdevice",name:"netDeviceSystemInfo",component:QL},{path:"/applicationupgrade/operationmaintance",name:"operationMaintance",component:JT}],HL={props:{softwarePckDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",detail:void 0,isInptDisabled:!0}},watch:{softwarePckDetails:function(e,t){this.softwarePckDetails=e}},methods:{}},jL=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.softwarePckDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.name,callback:function(t){e.$set(e.softwarePckDetails,"name",t)},expression:"softwarePckDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.version,callback:function(t){e.$set(e.softwarePckDetails,"version",t)},expression:"softwarePckDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.developer,callback:function(t){e.$set(e.softwarePckDetails,"developer",t)},expression:"softwarePckDetails.developer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包功能说明","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.functionDesc,callback:function(t){e.$set(e.softwarePckDetails,"functionDesc",t)},expression:"softwarePckDetails.functionDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.lastestPreName,callback:function(t){e.$set(e.softwarePckDetails,"lastestPreName",t)},expression:"softwarePckDetails.lastestPreName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.latestPreVer,callback:function(t){e.$set(e.softwarePckDetails,"latestPreVer",t)},expression:"softwarePckDetails.latestPreVer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包登记日期/时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.createTime,callback:function(t){e.$set(e.softwarePckDetails,"createTime",t)},expression:"softwarePckDetails.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包登记者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.createUser,callback:function(t){e.$set(e.softwarePckDetails,"createUser",t)},expression:"softwarePckDetails.createUser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包英文名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.nameEn,callback:function(t){e.$set(e.softwarePckDetails,"nameEn",t)},expression:"softwarePckDetails.nameEn"}})],1),e._v(" "),null!==e.softwarePckDetails.extData?[a("el-form-item",{attrs:{label:"Git仓库名","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.gitRepository,callback:function(t){e.$set(e.softwarePckDetails,"gitRepository",t)},expression:"softwarePckDetails.gitRepository"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Maven工程名","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.mavenName,callback:function(t){e.$set(e.softwarePckDetails,"mavenName",t)},expression:"softwarePckDetails.mavenName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"War/Jar名称/contextPath名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.svrPkgName,callback:function(t){e.$set(e.softwarePckDetails,"svrPkgName",t)},expression:"softwarePckDetails.svrPkgName"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"client包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.cltPkgName,callback:function(t){e.$set(e.softwarePckDetails,"cltPkgName",t)},expression:"softwarePckDetails.cltPkgName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"功能类型","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.functionType,callback:function(t){e.$set(e.softwarePckDetails,"functionType",t)},expression:"softwarePckDetails.functionType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用类型","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.appType,callback:function(t){e.$set(e.softwarePckDetails,"appType",t)},expression:"softwarePckDetails.appType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.port,callback:function(t){e.$set(e.softwarePckDetails,"port",t)},expression:"softwarePckDetails.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包源服务器名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.uuid,callback:function(t){e.$set(e.softwarePckDetails,"uuid",t)},expression:"softwarePckDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包源路径名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.path,callback:function(t){e.$set(e.softwarePckDetails,"path",t)},expression:"softwarePckDetails.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.remark,callback:function(t){e.$set(e.softwarePckDetails,"remark",t)},expression:"softwarePckDetails.remark"}})],1)],2)],1)},JL=[],ZL={render:jL,staticRenderFns:JL},KL=ZL,YL=a("VU/8"),XL=YL(HL,KL,!1,null,null,null),eN=XL.exports,tN={props:{softwarePckDetails:{type:Object}},data:function(){return{formLabelWidth:"150px",isInptDisabled:!0}},mounted:function(){console.log("SoftwarePackageEdit.vue mounted active"),console.log(this.softwarePckDetails)},methods:{saveSoftwareInfoEvent:function(){this.$emit("updateSoftwareInfoEvent",this.softwarePckDetails)}},watch:{softwarePckDetails:function(e,t){this.softwarePckDetails=e}}},aN=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{attrs:{inline:!0,model:e.softwarePckDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.name,callback:function(t){e.$set(e.softwarePckDetails,"name",t)},expression:"softwarePckDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.version,callback:function(t){e.$set(e.softwarePckDetails,"version",t)},expression:"softwarePckDetails.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包登记日期/时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softwarePckDetails.createTime,callback:function(t){e.$set(e.softwarePckDetails,"createTime",t)},expression:"softwarePckDetails.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.developer,callback:function(t){e.$set(e.softwarePckDetails,"developer",t)},expression:"softwarePckDetails.developer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包功能说明","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.functionDesc,callback:function(t){e.$set(e.softwarePckDetails,"functionDesc",t)},expression:"softwarePckDetails.functionDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.lastestPreName,callback:function(t){e.$set(e.softwarePckDetails,"lastestPreName",t)},expression:"softwarePckDetails.lastestPreName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.latestPreVer,callback:function(t){e.$set(e.softwarePckDetails,"latestPreVer",t)},expression:"softwarePckDetails.latestPreVer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"端口","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.port,callback:function(t){e.$set(e.softwarePckDetails,"port",t)},expression:"softwarePckDetails.port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包源服务器名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.svrPkgName,callback:function(t){e.$set(e.softwarePckDetails,"svrPkgName",t)},expression:"softwarePckDetails.svrPkgName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包源路径名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.cltPkgName,callback:function(t){e.$set(e.softwarePckDetails,"cltPkgName",t)},expression:"softwarePckDetails.cltPkgName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwarePckDetails.remark,callback:function(t){e.$set(e.softwarePckDetails,"remark",t)},expression:"softwarePckDetails.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.saveSoftwareInfoEvent}},[e._v("保 存")])],1)],1)],1)},iN=[],sN={render:aN,staticRenderFns:iN},oN=sN,lN=a("VU/8"),rN=lN(tN,oN,!1,null,null,null),nN=rN.exports,cN=function(e){var t={headers:{"Content-Type":"multipart/form-data"}};return mt.a.post("/egc-applicationupgradecomponent/package/importPackageExcelTemplate",e,t).then(function(e){return console.log("---------------upload excel files  result ---------- "),console.info(e),e.data})},dN=function(e){var t={headers:{"Content-Type":"multipart/form-data"}};return mt.a.post("/egc-applicationupgradecomponent/package/importPackageDependenciesExcelTemplate",e,t).then(function(e){return console.log("---------------upload excel files  result ---------- "),console.info(e),e.data})},uN=function(e,t){var a={headers:{"Content-Type":"multipart/form-data"}};return console.log("<<<<< software register  params:"+Bt()(e)+" =============== > "+t),mt.a.post("/egc-applicationupgradecomponent/package/create?batchesId="+e.batchId+"&name="+e.name+"&version="+e.version+"&provider="+e.provider+"&latestPreVer="+e.latestPreVer+"&lastestPreName="+e.lastestPreName+"&softwareName="+e.softwareName+"&softwareNameEn="+e.softwareNameEn+"&functionDesc="+e.functionDesc+"&remark="+e.remark+"&nameEn="+e.nameEn+"&gitRepository="+e.gitRepository+"&mavenName="+e.mavenName+"&svrPkgName="+e.svrPkgName+"&cltPkgName="+e.cltPkgName+"&cltPkgName="+e.cltPkgName+"&port="+e.port+"&functionType="+e.functionType+"&appType="+e.appType,t,a).then(function(e){return e.data})},pN=function(){return console.log(" getBatchesList........... "),mt.a.get("/egc-applicationupgradecomponent/batches/queryBatches").then(function(e){return e.data})},mN=function(e){return console.log(" query software package by page1 -- > "+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/likeQuery",e).then(function(e){return e.data})},hN=function(e){return console.log(" id -- > "+e),mt.a.get("/egc-applicationupgradecomponent/package/get?id="+e).then(function(e){return e.data})},fN=function(e){return console.log("update software package id -- > "+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/update",e).then(function(e){return e.data})},gN=function(e){return console.log(">>>>>api>>>>> delete software package id  -- > "+e),mt.a.get("/egc-applicationupgradecomponent/package/delete?id="+e).then(function(e){return e.data})},vN=function(e){return console.log("get softwre package history ---- >"+e),mt.a.post("/egc-applicationupgradecomponent/package/his/listAll",e).then(function(e){return e.data})},bN=function(e){return console.log("get hardware dependency params---- >"+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/dependencies/hw/likeQuery",e).then(function(e){return e.data})},DN=function(e){return console.log("get hardware dep details id -- > "+e),mt.a.get("/egc-applicationupgradecomponent/package/dependence/hw/get?id="+e).then(function(e){return e.data})},yN=function(e){return console.log("get OS dependency ---- >"+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/dependencies/os/likeQuery",e).then(function(e){return e.data})},CN=function(e){return console.log("get os dep details id -- > "+e),mt.a.post("/scp-upgradecomponent/package/dependence/details").then(function(e){return e.data})},_N=function(e){return console.log("get middleware dependency ---- >"+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/dependencies/mw/likeQuery",e).then(function(e){return e.data})},wN=function(e){return console.log("delete software package id -- > "+e),mt.a.post("/scp-upgradecomponent/package/dependence/details").then(function(e){return e.data})},SN=function(e){return console.log("get database dependency ---- >"+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/dependencies/dbms/likeQuery",e).then(function(e){return e.data})},xN=function(e){return console.log("get database dep details id  -- > "+e),mt.a.post("/scp-upgradecomponent/package/dependence/details").then(function(e){return e.data})},kN=function(e){return console.log("get software dependency params ---- >"+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/dependencies/pkg/likeQuery",e).then(function(e){return e.data})},TN=function(e){return console.log("get  software dep details id  -- > "+e),mt.a.post("/scp-upgradecomponent/package/dependence/details").then(function(e){return e.data})},LN=function(e){return console.log("get System software dependency params ---- >"+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/package/dependencies/syssw/likeQuery",e).then(function(e){return e.data})},NN={props:{rowIdx:0,hisUuid:""},data:function(){return{changeDetails:void 0,softwarePckHistory:void 0,searchConditionHistroyList:{packageUuid:""},tableTitleList:[{colName:"日期/时间",prop:"changeDate",width:80},{colName:"操作人",prop:"operator",width:80},{colName:"变更项名称",prop:"desc",width:80},{colName:"变更项原值",prop:"oldValue",width:120},{colName:"变化项新值",prop:"newValue",width:120}]}},methods:{loadData:function(e){this.searchConditionHistroyList.packageUuid=e,console.log("get history searchConditionHistroyList -- >"+Bt()(this.searchConditionHistroyList)),vN(this.searchConditionHistroyList).then(function(e){console.log("get history result -- >"+Bt()(e));for(var t=[],a=[],i={},s=0;null!==e.data&&s<e.data.length;s++){null!==e.data[s].changedData&&(a=JSON.parse(e.data[s].changedData));for(var o=0;o<a.length;o++)i={},i=a[o],i.changeDate=e.data[s].updateTime,i.operator=e.data[s].updateUser,t.push(i)}console.log("get history result historyData-- >"+Bt()(t)),this.softwarePckHistory=t,this.total=e.pageCount}.bind(this)).catch(function(e){console.log(e)})}},watch:{softwarePckHistory:function(e,t){this.softwarePckHistory=e}},mounted:function(){this.loadData(this.hisUuid)}},VN=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticStyle:{"max-height":"100%"}},[a("el-table",{staticStyle:{"margin-top":"15px",height:"500px","overflow-y":"scroll"},attrs:{data:e.softwarePckHistory,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"编号",type:"index",width:"20"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})})],2)],1)])},IN=[],EN={render:VN,staticRenderFns:IN},PN=EN,MN=a("VU/8"),$N=Te,UN=MN(NN,PN,!1,$N,null,null),FN=UN.exports,RN={components:{softwarePackageDetails:eN,softwarePackageEdit:nN,softwarePackageHistory:FN},data:function(){return{searchConditionList:{name:"",version:"",provider:"",key:"",pageNo:1,pageSize:10},searchConditionHistroyList:{packageUuid:"",pageNo:1,pageSize:10},total:0,dialogTitle:"",dialogImportTitle:"",dialogImportVisible:!1,dialogRegisterVisible:!1,dialogDetailsVisible:!1,dialogEditVisible:!1,dialogSynDataVisible:!1,dialogHistoryVisible:!1,rowIdx:0,hisUuid:"",softwarePackListData:void 0,softwarePckDetails:void 0,batchs:void 0,softwarePckHistory:void 0,loading:!1,softwareDetails:{name:"",nameEn:"",version:"",provider:"",latestPreVer:"",remark:"",batchId:"",lastestPreName:"",functionDesc:"",gitRepository:"",mavenName:"",svrPkgName:"",cltPkgName:"",port:"",functionType:"",appType:"",serverId:"",path:"",softwareName:"",softwareNameEn:"",attachmentFiles:""},isHasSoftwareDetails:{nameIsDisable:!1,nameEnIsDisable:!1,versionIsDisable:!1,developerIsDisable:!1,latestPreVerIsDisable:!1,remarkIsDisable:!1,batchIdIsDisable:!1,lastestPreNameIsDisable:!1,functionDescIsDisable:!1,gitRepositoryIsDisable:!1,mavenNameIsDisable:!1,svrPkgNameIsDisable:!1,cltPkgNameIsDisable:!1,portIsDisable:!1,functionTypeIsDisable:!1,appTypeIsDisable:!1,uploadFilesIsDisable:!0,softwareNameIsDisable:!1,softwareNameEnIsDisable:!1,attachmentFilesIsDisable:!1},optType:"",tokenHeaders:{FrontType:"scp-admin-ui",Authorization:sessionStorage.token},uploadFiles:new FormData,uploadJarAttachmentFiles:new FormData,importFiles:new FormData,uploadFilesArray:[],excelArray:[],JarAttachmentArray:[],tableTitleList:[{colName:"软件包名称",prop:"name",width:200},{colName:"软件包版本",prop:"version",width:150},{colName:"开发者",prop:"provider",width:120},{colName:"软件包功能说明",prop:"functionDesc",width:200},{colName:"前续软件包名称",prop:"lastestPreName",width:150},{colName:"前续软件包版本",prop:"latestPreVer"},{colName:"软件包登记日期/时间",prop:"createTime",width:160},{colName:"软件包登记者",prop:"createUser",width:120}],detailsTitle:"查看详情",editTitle:"编辑",deleteTitle:"删除",historyTitle:"历史信息",formLabelWidth:"110px",fileList:[],fileJarAttachmentList:[],maxlength:30,funType:[{value:"软件",label:"软件"},{value:"工具",label:"工具"}],appType:[{value:"应用",label:"应用"},{value:"组件",label:"组件"}],rules:{name:[{required:!0,message:"请输入软件名称",trigger:"blur,change"},{max:32,message:"长度不能超过32个字符"}],version:[{required:!0,message:"请输入软件版本",trigger:"blur,change"},{max:32,message:"长度不能超过32个字符"}],provider:[{required:!0,message:"请输入开发者姓名",trigger:"blur,change"},{max:32,message:"长度不能超过32个字符"}],batchId:[{required:!0,message:"请选择注册软件包批次",trigger:"blur,change"}],latestPreVer:[{max:32,message:"长度不能超过32个字符"}],lastestPreName:[{max:32,message:"长度不能超过32个字符"}],softwareName:[{required:!0,message:"请输入开发者姓名",trigger:"blur,change"},{max:32,message:"长度不能超过32个字符"}],softwareNameEn:[{required:!0,message:"应用/组件英语英文名字",trigger:"blur,change"},{max:64,message:"长度不能超过64个字符"},{pattern:/^[a-zA-Z0-9]+$/,message:"请输入英数字"}],functionDesc:[{max:256,message:"长度不能超过256个字符"}],remark:[{max:256,message:"长度不能超过256个字符"}],nameEn:[{max:64,message:"长度不能超过64个字符"},{pattern:/^[a-zA-Z0-9]+$/,message:"请输入英数字"}],svrPkgName:[{max:32,message:"长度不能超过32个字符"}],cltPkgName:[{max:32,message:"长度不能超过32个字符"}],gitRepository:[{max:64,message:"长度不能超过64个字符"}],port:[{pattern:/^[0-9]/,message:"请输入有效的端口号（数字）"}],mavenName:[{max:64,message:"长度不能超过64个字符"}]}}},methods:{_handleFilter:function(){this.loading=!1,this.loadData()},validateInput:function(){return""!==this.searchConditionList.name.trim()||""!==this.searchConditionList.version.trim()||""!==this.searchConditionList.provider.trim()||(this.$message({message:"请输入查询条件",center:!0,showClose:!0,type:"error"}),!1)},_handleClearQuery:function(){this.searchConditionList.name="",this.searchConditionList.version="",this.searchConditionList.provider="",this.searchConditionList.key=""},_handleClearRegister:function(e){e.name="",e.nameEn="",e.version="",e.provider="",e.latestPreVer="",e.remark="",e.batchId="",e.lastestPreName="",e.functionDesc="",e.gitRepository="",e.mavenName="",e.svrPkgName="",e.cltPkgName="",e.port="",e.functionType="",e.appType="",e.serverId="",e.path="",e.softwareName="",e.softwareNameEn="",e.attachmentFiles=""},_handleRegister:function(){this.dialogTitle="软件包信息注册",this.fileList=[],null!=this.$refs.softwareDetails&&void 0!==this.$refs.addapp&&this.$refs.softwareDetails.resetFields(),this.dialogRegisterVisible=!0,this._handleClearRegister(this.softwareDetails),this.switchInputDisable("add")},_registerSoftware:function(e){var t=this;if(console.info("_registerSoftware"),console.info(Bt()(this.softwareDetails)),!this.beforeUploadCheckedFiles(this.$refs.uploadJarFiles._data.uploadFiles))return this.$message.error("上传文件中至少要有1个指定的软件包 jar/war 格式的文件!"),!1;console.info("_registerSoftware add"),console.info(this.uploadFiles);var a=this.$refs.uploadJarFiles._data.uploadFiles.length;this.$refs[e].validate(function(i){if(!i)return!1;a>0?uN(t.softwareDetails,t.uploadFiles).then(function(a){console.log("===>"+a),t.$message.success("上传成功",2e3),t.dialogRegisterVisible=!1,t.$refs[e].resetFields(),t.fileList=[],t.loadData()}).catch(function(e){this.$message({message:e.message,center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)}):t.$message({message:"请先选择需要上传的文件",type:"warning",duration:2e4,center:!0,showClose:!0})})},handleOnchange:function(e,t){if(console.info("handleOnchange"),console.info(Bt()(t)),this.uploadFiles=new FormData,!this.beforeUploadCheckedFiles(t))return this.$message.error("上传文件必须要有1个（且只能有1个）指定的软件包 jar/war 格式的文件!"),!1;for(var a=0;a<t.length;a++)console.info("handleOnchange add file"),this.uploadFiles.append("files",t[a].raw),console.info(t[a].raw),console.info(this.uploadFiles),console.info(Bt()(this.uploadFiles)),console.info("handleOnchange add file end")},beforeUploadCheckedFiles:function(e){if(null==e)return!1;console.info("beforeUploadCheckedFiles"),console.info(Bt()(e));for(var t=0;t<e.length;t++){var a=e[t].name.split(".");if(console.info("jarFileName : "+a),"jar"===a[a.length-1]||"war"===a[a.length-1])return console.info("is has jar or war"),!0}return!1},handleExceed:function(e,t){},_importFile:function(){this.dialogImportTitle="软件包批量导入",this.dialogImportVisible=!0},_importRegisterSoftware:function(){var e=this;console.info("uploadPackageExcelTemplate"),console.info(this.uploadFiles),console.info("uploadPackageJarAttachmentFiles"),console.info(this.uploadJarAttachmentFiles);var t=this.$refs.uploadPackageExcelTemplate._data.uploadFiles.length,a=this.$refs.uploadPackageJarAttachmentFiles._data.uploadFiles.length;if(t>0&&a>0){this.importFiles=new FormData,this.importFiles.append("excelfile",this.excelArray[0]),console.info("JarAttachmentArray 包含文件数:"+this.JarAttachmentArray.length);for(var i=0;i<this.JarAttachmentArray.length;i++)this.importFiles.append("multipartFiles",this.JarAttachmentArray[i]);cN(this.importFiles).then(function(t){console.log("===>"+t),e.$message.success("上传成功",2e3),e.dialogImportVisible=!1,e.fileList=[],e.fileJarAttachmentList=[],e.importFiles=new FormData,e.loadData()}).catch(function(e){console.log("上传成功失败===>"+e.message),this.$message({message:e.message,center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)})}else this.$message({message:"请先选择需要上传的文件",type:"warning",duration:2e4,center:!0,showClose:!0})},handleImportExcelTemplateOnchange:function(e,t){console.info("handleImportExcelTemplateOnchange"),console.info(e),console.info(t),this.excelArray=[];for(var a=0;a<t.length;a++)console.info("append importExcelTemp"),console.info(t[a].raw),this.excelArray.push(t[a].raw);console.info("append importFiles"),console.info(this.excelArray)},handleImportExcelTemplateExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},handleImportJarAttachmentOnchange:function(e,t){console.info("handleImportJarAttachmentOnchange"),console.info(e),console.info(t),this.JarAttachmentArray=[];for(var a=0;a<t.length;a++)console.info("append handleImportJarAttachment"),console.info(t[a].raw),this.JarAttachmentArray.push(t[a].raw);console.info("append JarAttachmentArray"),console.info(this.JarAttachmentArray)},handleImportJarAttachmentExceed:function(e,t){},beforeUpload:function(e){},closeDialog:function(){this.dialogRegisterVisible=!1,this.$refs.softwareDetails.resetFields(),this.fileList=[],console.info("closeDialog")},closeImportDialog:function(){this.dialogImportVisible=!1},_handleCheckDetails:function(e){this.dialogTitle="软件包详细信息";var t=this.softwarePackListData[e];console.log("rowData == >"+t);var a=t.uuid;console.log("check rowData -- >"+a),hN(a).then(function(e){this.dialogRegisterVisible=!0;for(var a="",i=0;null!=e.data.pkgfileList&&i<e.data.pkgfileList.length;i++)a+=e.data.pkgfileList[i].fileName,i+1<e.data.pkgfileList.length&&(a+=",  ");console.log(" attachmentFiles -----------\x3e "+a),e.data.attachmentFiles=a,this.softwareDetails=e.data,this.softwareDetails.batchId=t.batchId,this.switchInputDisable("search"),console.log(" check software details -----------\x3e "+Bt()(this.softwarePckDetails,null," "))}.bind(this)).catch()},_handleEdit:function(e){this.dialogTitle="软件包信息修改";var t=this.softwarePackListData[e],a=t.uuid;hN(a).then(function(e){this.dialogRegisterVisible=!0;for(var a="",i=0;null!=e.data.pkgfileList&&i<e.data.pkgfileList.length;i++)a+=e.data.pkgfileList[i].fileName,i+1<e.data.pkgfileList.length&&(a+=",  ");console.log(" attachmentFiles -----------\x3e "+a),e.data.attachmentFiles=a,this.softwareDetails=e.data,this.softwareDetails.batchId=t.batchId,this.switchInputDisable("edit"),console.log("edit software details -----------\x3e   "+Bt()(this.softwareDetails))}.bind(this)).catch(function(e){console.log(e)})},_updateSofwareInfo:function(e){var t=this;console.info("update software package!"),console.info(Bt()(this.softwareDetails)),this.$refs[e].validate(function(e){if(!e)return!1;fN(t.softwareDetails).then(function(e){console.log("update response --- >"+Bt()(e)),this.dialogRegisterVisible=!1,this.softwareDetails=[],this.$refs.softwareDetails.resetFields(),this.fileList=[],this.$message({message:"保存成功",type:"success"}),this.loadData()}.bind(t)).catch(function(e){console.log(e)})})},_handleDeleteData:function(e){var t=this,a=this.softwarePackListData[e],i=a.uuid;console.info("111--\x3e"+i),this.$confirm("确定要删除 "+a.name+" 软件包？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){gN(i).then(function(e){console.info("delete software package--\x3e"+Bt()(e)),this.$message.success("删除成功"),this.loadData()}.bind(t)).catch(function(e){console.log(e)})})},_handleCheckHistory:function(e){var t=this.softwarePackListData[e];console.info("histroy row index--\x3e: "+e),this.dialogTitle="软件包 "+t.name+" 版本号 "+t.version+" 历史信息",this.rowIdx=e,this.hisUuid=t.uuid,this.dialogHistoryVisible=!0,null!==this.$refs.packageHistory&&void 0!==this.$refs.packageHistory&&(this.$refs.packageHistory.softwarePckHistory=[],console.info("packageHistory loadData start --\x3e: "+e),this.$refs.packageHistory.loadData(t.uuid))},loadData:function(){mN(this.searchConditionList).then(function(e){console.log("softwaremaintance result  = >>>>  "+Bt()(e)),this.softwarePackListData=e.data.data,this.total=e.data.totalCount,this.loading=!1}.bind(this)).catch(function(e){console.log(e)})},switchInputDisable:function(e){this.optType=e,"add"===this.optType&&(this.isHasSoftwareDetails.nameIsDisable=!1,this.isHasSoftwareDetails.nameEnIsDisable=!1,this.isHasSoftwareDetails.versionIsDisable=!1,this.isHasSoftwareDetails.developerIsDisable=!1,this.isHasSoftwareDetails.latestPreVerIsDisable=!1,this.isHasSoftwareDetails.remarkIsDisable=!1,this.isHasSoftwareDetails.batchIdIsDisable=!1,this.isHasSoftwareDetails.lastestPreNameIsDisable=!1,this.isHasSoftwareDetails.functionDescIsDisable=!1,this.isHasSoftwareDetails.gitRepositoryIsDisable=!1,this.isHasSoftwareDetails.mavenNameIsDisable=!1,this.isHasSoftwareDetails.svrPkgNameIsDisable=!1,this.isHasSoftwareDetails.cltPkgNameIsDisable=!1,this.isHasSoftwareDetails.portIsDisable=!1,this.isHasSoftwareDetails.functionTypeIsDisable=!1,this.isHasSoftwareDetails.appTypeIsDisable=!1,this.isHasSoftwareDetails.uploadFilesIsDisable=!0,this.isHasSoftwareDetails.softwareNameIsDisable=!1,this.isHasSoftwareDetails.softwareNameEnIsDisable=!1,this.isHasSoftwareDetails.attachmentFilesIsDisable=!1),"edit"===this.optType&&(this.isHasSoftwareDetails.nameIsDisable=!0,this.isHasSoftwareDetails.nameEnIsDisable=!1,this.isHasSoftwareDetails.versionIsDisable=!0,this.isHasSoftwareDetails.developerIsDisable=!1,this.isHasSoftwareDetails.latestPreVerIsDisable=!1,this.isHasSoftwareDetails.remarkIsDisable=!1,this.isHasSoftwareDetails.batchIdIsDisable=!0,this.isHasSoftwareDetails.lastestPreNameIsDisable=!1,this.isHasSoftwareDetails.functionDescIsDisable=!1,this.isHasSoftwareDetails.gitRepositoryIsDisable=!1,this.isHasSoftwareDetails.mavenNameIsDisable=!1,this.isHasSoftwareDetails.svrPkgNameIsDisable=!1,this.isHasSoftwareDetails.cltPkgNameIsDisable=!1,this.isHasSoftwareDetails.portIsDisable=!1,this.isHasSoftwareDetails.functionTypeIsDisable=!1,this.isHasSoftwareDetails.appTypeIsDisable=!1,this.isHasSoftwareDetails.uploadFilesIsDisable=!1,this.isHasSoftwareDetails.softwareNameIsDisable=!0,this.isHasSoftwareDetails.softwareNameEnIsDisable=!0,this.isHasSoftwareDetails.attachmentFilesIsDisable=!0),"search"===this.optType&&(this.isHasSoftwareDetails.nameIsDisable=!0,this.isHasSoftwareDetails.nameEnIsDisable=!0,this.isHasSoftwareDetails.versionIsDisable=!0,this.isHasSoftwareDetails.developerIsDisable=!0,this.isHasSoftwareDetails.latestPreVerIsDisable=!0,this.isHasSoftwareDetails.remarkIsDisable=!0,this.isHasSoftwareDetails.batchIdIsDisable=!0,this.isHasSoftwareDetails.lastestPreNameIsDisable=!0,this.isHasSoftwareDetails.functionDescIsDisable=!0,this.isHasSoftwareDetails.gitRepositoryIsDisable=!0,this.isHasSoftwareDetails.mavenNameIsDisable=!0,this.isHasSoftwareDetails.svrPkgNameIsDisable=!0,this.isHasSoftwareDetails.cltPkgNameIsDisable=!0,this.isHasSoftwareDetails.portIsDisable=!0,this.isHasSoftwareDetails.functionTypeIsDisable=!0,this.isHasSoftwareDetails.appTypeIsDisable=!0,this.isHasSoftwareDetails.uploadFilesIsDisable=!1,this.isHasSoftwareDetails.softwareNameIsDisable=!0,this.isHasSoftwareDetails.softwareNameEnIsDisable=!0,this.isHasSoftwareDetails.attachmentFilesIsDisable=!0)},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.pageNo=e,this.loadData()}},mounted:function(){console.log("mounted start"),this._handleFilter(),pN().then(function(e){console.log(Bt()(e)),console.log("<<<<<getBatchesList:"),this.batchs=e,console.log(Bt()(e))}.bind(this)).catch(function(e){console.log(e)}),console.log("mounted end")}},zN=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{attrs:{align:"left",inline:!0}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"软件包名称"}},[a("el-input",{attrs:{placeholder:"请输入软件包名称",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.name,callback:function(t){e.$set(e.searchConditionList,"name",t)},expression:"searchConditionList.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本号"}},[a("el-input",{attrs:{placeholder:"请输入版本号",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.version,callback:function(t){e.$set(e.searchConditionList,"version",t)},expression:"searchConditionList.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者"}},[a("el-input",{attrs:{placeholder:"请输入开发者信息",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.provider,callback:function(t){e.$set(e.searchConditionList,"provider",t)},expression:"searchConditionList.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"搜索条件"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入搜索关键字",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.key,callback:function(t){e.$set(e.searchConditionList,"key",t)},expression:"searchConditionList.key"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e._handleFilter}},[e._v("查询")])],1)],1)],1)]),e._v(" "),a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e._handleRegister}},[e._v("注册")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e._importFile}},[e._v("导入")])],1)],1),e._v(" "),a("el-row",[a("div",{staticClass:"border-divide"})]),e._v(" "),a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{staticStyle:{height:"100%"}},[a("div",{staticStyle:{"margin-top":"15px","max-height":"100%"}},[a("el-table",{staticStyle:{"margin-top":"15px",height:"700px","overflow-y":"scroll"},attrs:{data:e.softwarePackListData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.deleteTitle},on:{click:function(a){e._handleDeleteData(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-time",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.historyTitle},on:{click:function(a){e._handleCheckHistory(t.$index)}}})]}}])})],2),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px","margin-bottom":"20px"},attrs:{"current-page":e.searchConditionList.pageNo,"page-sizes":[5,10,20],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"pageNo",t)}}})],1),e._v(" "),a("div")])],1),e._v(" "),a("div",{attrs:{id:"package_register"}},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogRegisterVisible,top:"8vh","before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogRegisterVisible=t}}},[a("div",[a("el-form",{ref:"softwareDetails",attrs:{model:e.softwareDetails,rules:e.rules}},[a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件包批次名称","label-width":e.formLabelWidth,prop:"batchId"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.isHasSoftwareDetails.batchIdIsDisable},model:{value:e.softwareDetails.batchId,callback:function(t){e.$set(e.softwareDetails,"batchId",t)},expression:"softwareDetails.batchId"}},e._l(e.batchs,function(e){return a("el-option",{key:e.uuid,attrs:{label:e.name,value:e.uuid}})}))],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth,prop:"provider"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.developerIsDisable},model:{value:e.softwareDetails.provider,callback:function(t){e.$set(e.softwareDetails,"provider",t)},expression:"softwareDetails.provider"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件名称","label-width":e.formLabelWidth,prop:"name",autofocus:!0}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.nameIsDisable},model:{value:e.softwareDetails.name,callback:function(t){e.$set(e.softwareDetails,"name",t)},expression:"softwareDetails.name"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"版本号","label-width":e.formLabelWidth,prop:"version"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.versionIsDisable},model:{value:e.softwareDetails.version,callback:function(t){e.$set(e.softwareDetails,"version",t)},expression:"softwareDetails.version"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"前续软件包名称","label-width":e.formLabelWidth,prop:"updateSoftwarePackage"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.lastestPreNameIsDisable},model:{value:e.softwareDetails.lastestPreName,callback:function(t){e.$set(e.softwareDetails,"lastestPreName",t)},expression:"softwareDetails.lastestPreName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth,prop:"latestPreVer"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.latestPreVerIsDisable},model:{value:e.softwareDetails.latestPreVer,callback:function(t){e.$set(e.softwareDetails,"latestPreVer",t)},expression:"softwareDetails.latestPreVer"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"应用/组件名称","label-width":e.formLabelWidth,prop:"softwareName"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.softwareNameIsDisable},model:{value:e.softwareDetails.softwareName,callback:function(t){e.$set(e.softwareDetails,"softwareName",t)},expression:"softwareDetails.softwareName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"应用/组件英语名称","label-width":e.formLabelWidth,prop:"softwareNameEn"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.softwareNameEnIsDisable},model:{value:e.softwareDetails.softwareNameEn,callback:function(t){e.$set(e.softwareDetails,"softwareNameEn",t)},expression:"softwareDetails.softwareNameEn"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件包功能说明","label-width":e.formLabelWidth,prop:"functionDesc"}},[a("el-input",{staticClass:"upgrade_el-textarea",attrs:{type:"textarea",rows:4,disabled:e.isHasSoftwareDetails.functionDescIsDisable},model:{value:e.softwareDetails.functionDesc,callback:function(t){e.$set(e.softwareDetails,"functionDesc",t)},expression:"softwareDetails.functionDesc"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{staticClass:"upgrade_el-textarea",attrs:{type:"textarea",rows:4,disabled:e.isHasSoftwareDetails.remarkIsDisable},model:{value:e.softwareDetails.remark,callback:function(t){e.$set(e.softwareDetails,"remark",t)},expression:"softwareDetails.remark"}})],1)],1)],1),e._v(" "),a("el-row"),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件包英文名称","label-width":e.formLabelWidth,prop:"nameEn"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.nameEnIsDisable},model:{value:e.softwareDetails.nameEn,callback:function(t){e.$set(e.softwareDetails,"nameEn",t)},expression:"softwareDetails.nameEn"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"Git仓库名","label-width":e.formLabelWidth,prop:"gitRepository"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.gitRepositoryIsDisable},model:{value:e.softwareDetails.gitRepository,callback:function(t){e.$set(e.softwareDetails,"gitRepository",t)},expression:"softwareDetails.gitRepository"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"Maven工程名","label-width":e.formLabelWidth,prop:"mavenName"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.mavenNameIsDisable},model:{value:e.softwareDetails.mavenName,callback:function(t){e.$set(e.softwareDetails,"mavenName",t)},expression:"softwareDetails.mavenName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"War/Jar/contextPath名称","label-width":e.formLabelWidth,prop:"svrPkgName"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.svrPkgNameIsDisable},model:{value:e.softwareDetails.svrPkgName,callback:function(t){e.$set(e.softwareDetails,"svrPkgName",t)},expression:"softwareDetails.svrPkgName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"client包名称","label-width":e.formLabelWidth,prop:"cltPkgName"}},[a("el-input",{attrs:{disabled:e.isHasSoftwareDetails.cltPkgNameIsDisable},model:{value:e.softwareDetails.cltPkgName,callback:function(t){e.$set(e.softwareDetails,"cltPkgName",t)},expression:"softwareDetails.cltPkgName"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"端口","label-width":e.formLabelWidth,prop:"port"}},[a("el-input",{attrs:{maxlength:6,disabled:e.isHasSoftwareDetails.portIsDisable},model:{value:e.softwareDetails.port,callback:function(t){e.$set(e.softwareDetails,"port",t)},expression:"softwareDetails.port"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"功能类型","label-width":e.formLabelWidth,prop:"functionType",autofocus:!0}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.isHasSoftwareDetails.functionTypeIsDisable},model:{value:e.softwareDetails.functionType,callback:function(t){e.$set(e.softwareDetails,"functionType",t)},expression:"softwareDetails.functionType"}},e._l(e.funType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"应用类型","label-width":e.formLabelWidth,prop:"appType",autofocus:!0}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.isHasSoftwareDetails.appTypeIsDisable},model:{value:e.softwareDetails.appType,callback:function(t){e.$set(e.softwareDetails,"appType",t)},expression:"softwareDetails.appType"}},e._l(e.appType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[e.isHasSoftwareDetails.uploadFilesIsDisable?[a("el-form-item",{attrs:{label:"选择软件包","label-width":e.formLabelWidth,prop:"uploadFiles"}},[a("el-upload",{ref:"uploadJarFiles",staticClass:"avatar-uploader",attrs:{action:"",drag:"",multiple:"",visible:!1,limit:100,"show-file-list":!0,"on-exceed":e.handleExceed,"on-change":e.handleOnchange,"on-remove":e.handleOnchange,headers:e.tokenHeaders,"auto-upload":!1,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1)]:e._e(),e._v(" "),e.isHasSoftwareDetails.attachmentFilesIsDisable?a("el-form-item",{attrs:{label:"软件包及其附件","label-width":e.formLabelWidth,prop:"attachmentFiles"}},[a("el-input",{staticClass:"upgrade_el-textarea",attrs:{type:"textarea",rows:4,disabled:!0},model:{value:e.softwareDetails.attachmentFiles,callback:function(t){e.$set(e.softwareDetails,"attachmentFiles",t)},expression:"softwareDetails.attachmentFiles"}})],1):e._e()],2),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件包源服务器","label-width":e.formLabelWidth,prop:"serverId"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.softwareDetails.serverId,callback:function(t){e.$set(e.softwareDetails,"serverId",t)},expression:"softwareDetails.serverId"}})],1)],1),e._v(" "),a("el-col",{staticClass:"flex-1 flex-c",attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件包源路径","label-width":e.formLabelWidth,prop:"path"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.softwareDetails.path,callback:function(t){e.$set(e.softwareDetails,"path",t)},expression:"softwareDetails.path"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),"add"===this.optType?[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e._registerSoftware("softwareDetails")}}},[e._v("注 册")])]:e._e(),e._v(" "),"edit"===this.optType?[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e._updateSofwareInfo("softwareDetails")}}},[e._v("保 存")])]:e._e()],2)],1)],1)])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogHistoryVisible,top:"8vh",width:"80%"},on:{"update:visible":function(t){e.dialogHistoryVisible=t}}},[a("software-package-history",{ref:"packageHistory",attrs:{rowIdx:e.rowIdx,hisUuid:e.hisUuid}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogImportTitle,visible:e.dialogImportVisible,"before-close":e.closeImportDialog},on:{"update:visible":function(t){e.dialogImportVisible=t}}},[a("div",[a("el-form",[a("el-row",[a("el-col",{attrs:{span:36}},[a("el-form-item",{attrs:{label:"选择导入模板","label-width":e.formLabelWidth,prop:"uploadFiles"}},[a("el-upload",{ref:"uploadPackageExcelTemplate",staticClass:"avatar-uploader",attrs:{action:"",drag:"",multiple:!1,limit:1,"show-file-list":!0,"on-exceed":e.handleImportExcelTemplateExceed,"on-change":e.handleImportExcelTemplateOnchange,"on-remove":e.handleImportExcelTemplateOnchange,headers:e.tokenHeaders,"auto-upload":!1,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1)],1),e._v(" "),a("el-col",{attrs:{span:36}},[a("el-form-item",{attrs:{label:"选择软件包以及关联附件","label-width":e.formLabelWidth,prop:"uploadJarAttachmentFiles"}},[a("el-upload",{ref:"uploadPackageJarAttachmentFiles",staticClass:"avatar-uploader",attrs:{action:"",drag:"",multiple:!0,limit:100,"show-file-list":!0,"on-exceed":e.handleImportJarAttachmentExceed,"on-change":e.handleImportJarAttachmentOnchange,"on-remove":e.handleImportJarAttachmentOnchange,headers:e.tokenHeaders,"auto-upload":!1,"file-list":e.fileJarAttachmentList}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:function(t){e._importRegisterSoftware()}}},[e._v("导入")])],1)],1)],1)])],1)],1)},AN=[],ON={render:zN,staticRenderFns:AN},qN=ON,BN=a("VU/8"),WN=Le,QN=BN(RN,qN,!1,WN,"data-v-8685c69e",null),GN=QN.exports,HN={data:function(){return{fileList:[],uploadUrl:"",uploadFiles:new FormData}},methods:{handleOnchange:function(e,t){console.info(t),this.uploadFiles=new FormData,this.beforeUpload(e)&&this.uploadFiles.append("file",t[0].raw)},_submitUpload:function(){var e=this,t=this.$refs.upload._data.uploadFiles.length;console.log(t),t>0?dN(this.uploadFiles).then(function(t){e.$message({message:"上传成功!",type:"success"}).bind(e)}).catch(function(e){this.$message({message:e.message,center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)}):this.$message({message:"请先选择需要上传的模板文件",type:"warning",duration:2e4,center:!0,showClose:!0})},beforeUpload:function(e){var t=e.name.split(".");console.log("Xls[1] --- > "+t);var a="xls"===t[t.length-1]||"xlsx"===t[t.length-1];console.log("Xls[Xls.length - 1] --- > "+t[1]);var i=e.size/1024/1024<1e3;return a?i?e:(this.$message.error("上传文件大小不能超过 10MB!"),this.fileList=[],!1):(this.$message.error("上传文件只能是 xls/xlsx 格式!"),this.fileList=[],!1)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")}}},jN=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"fileUpload"}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,drag:"",multiple:!1,limit:1,"show-file-list":!0,"on-exceed":e.handleExceed,"on-change":e.handleOnchange,"on-remove":e.handleOnchange,headers:e.tokenHeaders,"auto-upload":!1,"file-list":e.fileList}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件，且不超过10M")])]),e._v(" "),a("el-button",{staticClass:"search-btn",staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e._submitUpload}},[e._v("上传服务器")])],1)},JN=[],ZN={render:jN,staticRenderFns:JN},KN=ZN,YN=a("VU/8"),XN=Ne,eV=YN(HN,KN,!1,XN,"data-v-6be51913",null),tV=eV.exports,aV={props:{searchConDetails:{type:Object}},data:function(){return{maxlength:30}},methods:{_handleClearQuery:function(){this.searchConDetails.key=""},_callHandleFilter:function(){this.$emit("handleFilterEvent",this.searchConDetails)},validateInput:function(){return""!==this.searchConDetails.key||(this.$message({message:"输入查询关键字",center:!0,showClose:!0,type:"error",duration:2e3}),!1)}}},iV=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{attrs:{inline:!0}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"搜索条件"}},[a("el-input",{attrs:{placeholder:"请输入搜索关键字",clearable:"",maxlength:e.maxlength,width:"650"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._callHandleFilter(t)}},model:{value:e.searchConDetails.key,callback:function(t){e.$set(e.searchConDetails,"key",t)},expression:"searchConDetails.key"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("el-input")],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e._callHandleFilter}},[e._v("搜索")])],1)],1)],1)])],1)},sV=[],oV={render:iV,staticRenderFns:sV},lV=oV,rV=a("VU/8"),nV=rV(aV,lV,!1,null,null,null),cV=nV.exports,dV={props:{hardwareDepDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},watch:{hardwareDepDetails:function(e,t){this.hardwareDepDetails=e}}},uV=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.hardwareDepDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.uuid,callback:function(t){e.$set(e.hardwareDepDetails,"uuid",t)},expression:"hardwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.uuid,callback:function(t){e.$set(e.hardwareDepDetails,"uuid",t)},expression:"hardwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.uuid,callback:function(t){e.$set(e.hardwareDepDetails,"uuid",t)},expression:"hardwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&组件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.uuid,callback:function(t){e.$set(e.hardwareDepDetails,"uuid",t)},expression:"hardwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.uuid,callback:function(t){e.$set(e.hardwareDepDetails,"uuid",t)},expression:"hardwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"CPU要求（核数）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.cpuFrequency,callback:function(t){e.$set(e.hardwareDepDetails,"cpuFrequency",t)},expression:"hardwareDepDetails.cpuFrequency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"内存要求（G） ","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.ram,callback:function(t){e.$set(e.hardwareDepDetails,"ram",t)},expression:"hardwareDepDetails.ram"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"硬盘要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.storage,callback:function(t){e.$set(e.hardwareDepDetails,"storage",t)},expression:"hardwareDepDetails.storage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.hardwareDepDetails.uuid,callback:function(t){e.$set(e.hardwareDepDetails,"uuid",t)},expression:"hardwareDepDetails.uuid"}})],1)],1)],1)},pV=[],mV={render:uV,staticRenderFns:pV},hV=mV,fV=a("VU/8"),gV=fV(dV,hV,!1,null,null,null),vV=gV.exports,bV={components:{searchDepCondition:cV,hardwareDepDetails:vV},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,hardwareDepListData:void 0,hardwareDepDetails:void 0,maxlength:30,searchConditionList:{key:"",pageNo:1,pageSize:10},tableTitleList:[{colName:"批次",prop:"batchName",width:200},{colName:"软件包名称",prop:"packageName",width:200},{colName:"软件包版本",prop:"packageVersion",width:150},{colName:"CPU（核数）",prop:"numberOfCore",width:150},{colName:"内存（G）",prop:"ram",width:100},{colName:"硬盘总可用容量要求(M)",prop:"storage",width:200},{colName:"硬盘1",prop:"hd1",width:80},{colName:"硬盘2",prop:"hd2",width:80},{colName:"硬盘3",prop:"hd3",width:80}],detailsTitle:"查看详情",detailsImg:a("0TTt")}},methods:{_handleFilter:function(e){bN(e).then(function(e){this.hardwareDepListData=e.data.data,this.total=e.pageCount}.bind(this)).catch(function(e){this.$message({message:e,center:!0,showClose:!0,type:"error",duration:2e3}),console.log(e)}.bind(this))},_handleCheckDetails:function(e){this.dialogStatus="硬件运行环境依赖信息详情";var t=this.hardwareDepListData[e],a=t.uuid;console.log("check rowData -- >"+a),DN(a).then(function(e){console.log(Bt()(e)),this.hardwareDepDetails=e.data,this.dialogDetailsVisible=!0,console.log("harware dep details -----------\x3e "+Bt()(e))}.bind(this)).catch()},loadData:function(){bN(this.searchConditionList).then(function(e){console.log("hardware running env result ==== >  "+Bt()(e)),this.hardwareDepListData=e.data.data,this.total=e.data.totalCount}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()}},mounted:function(){}},DV=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-dep-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{height:"750px","overflow-y":"scroll"},attrs:{data:e.hardwareDepListData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("hardware-dep-details",{attrs:{hardwareDepDetails:e.hardwareDepDetails}})],1)],1)],1)},yV=[],CV={render:DV,staticRenderFns:yV},_V=CV,wV=a("VU/8"),SV=wV(bV,_V,!1,null,null,null),xV=SV.exports,kV={props:{osDepDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},watch:{osDepDetails:function(e,t){this.osDepDetails=e}}},TV=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.osDepDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&组件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统最低版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统补丁要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作系统最高版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.osDepDetails.uuid,callback:function(t){e.$set(e.osDepDetails,"uuid",t)},expression:"osDepDetails.uuid"}})],1)],1)],1)},LV=[],NV={render:TV,staticRenderFns:LV},VV=NV,IV=a("VU/8"),EV=IV(kV,VV,!1,null,null,null),PV=EV.exports,MV={components:{searchDepCondition:cV,osDepDetails:PV},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",dialogDetailsVisible:!1,osDepListData:void 0,osDepDetails:void 0,maxlength:30,searchConditionList:{key:"",pageNo:1,pageSize:10},tableTitleList:[{colName:"批次",prop:"batchName",width:200},{colName:"软件包名称",prop:"packageName",width:200},{colName:"软件包版本",prop:"packageVersion",width:150},{colName:"操作系统名称",prop:"osName",width:200},{colName:"操作系统版本",prop:"version",width:150},{colName:"ServicePack",prop:"servicePack",width:120}],tableOsTitleExtData:[],extMaxLenth:6,detailsTitle:"查看详情",detailsImg:a("0TTt")}},methods:{_handleFilter:function(e){yN(e).then(function(e){this.osDepListData=e.data.data,this.total=e.pageCount}.bind(this)).catch(function(e){this.$message({message:e,center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)})},_handleCheckDetails:function(e){this.dialogStatus="操作系统运行环境依赖信息详情";var t=this.osDepListData[e],a=t.uuid;console.log("check rowData -- >"+a),CN(a).then(function(e){this.osDepDetails=e.data,this.dialogDetailsVisible=!0}.bind(this)).catch()},loadData:function(){console.log("OSDEP loadData.....mounted"),this.tableOsTitleExtData=[];for(var e=1;e<this.extMaxLenth+1;e++){var t="配置项"+e,a="extData"+e,i=["colName","prop","width"],s=[t,a,"100"];this.tableOsTitleExtData.push(this.getExtData(i,s))}console.log("loadData.....mounted tableOsTitleExtData over"),console.log(Bt()(this.tableOsTitleExtData)),yN(this.searchConditionList).then(function(e){console.log("Data get ....."+e.data.data.length);for(var t=1;null!==e.data.data&&t<e.data.data.length+1;t++)for(var a=1;null!==e.data.data[t-1].extData&&a<this.extMaxLenth+1;a++){console.log("Data get2222 .....: "+e.data.data[t-1].extData[a-1].value);var i="extData"+a;e.data.data[t-1][i]=e.data.data[t-1].extData[a-1].value}this.osDepListData=e.data.data,this.total=e.data.totalCount,console.log(Bt()(this.osDepListData))}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},getExtData:function(e,t){for(var a={},i=0;i<e.length;i++){var s=e[i],o=t[i];a[s]=o}return a}},mounted:function(){}},$V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-dep-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{height:"750px","overflow-y":"scroll"},attrs:{data:e.osDepListData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})}),e._v(" "),e._l(e.tableOsTitleExtData,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])])],1)],1)},UV=[],FV={render:$V,staticRenderFns:UV},RV=FV,zV=a("VU/8"),AV=zV(MV,RV,!1,null,null,null),OV=AV.exports,qV={props:{middlewareDepDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},watch:{middlewareDepDetails:function(e,t){this.middlewareDepDetails=e}}},BV=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.middlewareDepDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&组件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件最低版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件补丁要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件最高版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中间件类型","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.middlewareDepDetails.uuid,callback:function(t){e.$set(e.middlewareDepDetails,"uuid",t)},expression:"middlewareDepDetails.uuid"}})],1)],1)],1)},WV=[],QV={render:BV,staticRenderFns:WV},GV=QV,HV=a("VU/8"),jV=HV(qV,GV,!1,null,null,null),JV=jV.exports,ZV={components:{searchDepCondition:cV,middlewareDepDetailsCom:JV},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",dialogDetailsVisible:!1,middlewareDepListData:void 0,middlewareDepDetails:void 0,maxlength:30,searchConditionList:{key:"",pageNo:1,pageSize:10},tableTitleList:[{colName:"批次",prop:"batchName",width:200},{colName:"软件包名称",prop:"packageName",width:200},{colName:"软件包版本",prop:"packageVersion",width:150},{colName:"中间件类型",prop:"softwareType",width:150},{colName:"中间件名称",prop:"name",width:150},{colName:"最低版本",prop:"earliestVer",width:120},{colName:"最高版本(可不限)",prop:"latestVer",width:150}],tableOsTitleExtData:[],extMaxLenth:6,detailsTitle:"查看详情",detailsImg:a("0TTt")}},methods:{_handleFilter:function(e){_N(e).then(function(e){this.middlewareDepListData=e.data.data,this.total=e.pageCount}.bind(this)).catch(function(e){this.$message({message:e,center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)})},_handleCheckDetails:function(e){this.dialogStatus="操作系统环境依赖信息详情";var t=this.middlewareDepListData[e],a=t.uuid;console.log("check rowData -- >"+a),wN(a).then(function(e){console.info("result --\x3e"+Bt()(e)),this.middlewareDepDetails=e.data,this.dialogDetailsVisible=!0,console.log("middleware dep details -----------\x3e "+Bt()(this.middlewareDepDetails))}.bind(this)).catch()},loadData:function(){this.tableOsTitleExtData=[];for(var e=1;e<this.extMaxLenth+1;e++){var t="配置项"+e,a="extData"+e,i=["colName","prop","width"],s=[t,a,"100"];this.tableOsTitleExtData.push(this.getExtData(i,s))}_N(this.searchConditionList).then(function(e){for(var t=1;null!==e.data.data&&t<e.data.data.length+1;t++)for(var a=1;null!==e.data.data[t-1].extData&&a<this.extMaxLenth+1;a++){console.log("Data get2222 .....: "+e.data.data[t-1].extData[a-1].value);var i="extData"+a;e.data.data[t-1][i]=e.data.data[t-1].extData[a-1].value}console.log("init middleware data -- >"+Bt()(e)),this.middlewareDepListData=e.data.data,this.total=e.data.totalCount}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},getExtData:function(e,t){for(var a={},i=0;i<e.length;i++){var s=e[i],o=t[i];a[s]=o}return a}},mounted:function(){}},KV=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-dep-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{height:"750px","overflow-y":"scroll"},attrs:{data:e.middlewareDepListData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})}),e._v(" "),e._l(e.tableOsTitleExtData,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("middleware-dep-details-com",{attrs:{middlewareDepDetails:e.middlewareDepDetails}})],1)],1)],1)},YV=[],XV={render:KV,staticRenderFns:YV},eI=XV,tI=a("VU/8"),aI=tI(ZV,eI,!1,null,null,null),iI=aI.exports,sI={props:{dbDepDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},watch:{dbDepDetails:function(e,t){this.dbDepDetails=e}}},oI=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.dbDepDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&组件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库最低版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库补丁要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库最高版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库类型","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.dbDepDetails.uuid,callback:function(t){e.$set(e.dbDepDetails,"uuid",t)},expression:"dbDepDetails.uuid"}})],1)],1)],1)},lI=[],rI={render:oI,staticRenderFns:lI},nI=rI,cI=a("VU/8"),dI=cI(sI,nI,!1,null,null,null),uI=dI.exports,pI={components:{searchDepCondition:cV,dbDepDetails:uI},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",dialogDetailsVisible:!1,dbDepListData:void 0,dbDepDetails:void 0,maxlength:30,searchConditionList:{key:"",pageNo:1,pageSize:10},tableTitleList:[{colName:"批次",prop:"batchName",width:200},{colName:"软件包名称",prop:"packageName",width:200},{colName:"软件包版本",prop:"packageVersion",width:150},{colName:"数据库类型",prop:"softwareType",width:150},{colName:"数据库名称",prop:"name",width:150},{colName:"最低版本",prop:"earliestVer",width:120},{colName:"最高版本(可不限)",prop:"latestVer",width:150}],tableOsTitleExtData:[],extMaxLenth:6,detailsTitle:"查看详情",detailsImg:a("0TTt")}},methods:{_handleFilter:function(e){SN(e).then(function(e){this.dbDepListData=e.data.data,this.total=e.pageCount}.bind(this)).catch(function(e){this.$message({message:e,center:!0,showClose:!0,type:"error",duration:2e3}),console.log(e)}.bind(this))},_handleCheckDetails:function(e){this.dialogStatus="数据库运行环境依赖信息详情";var t=this.dbDepListData[e],a=t.uuid;console.log("check rowData -- >"+a),xN(a).then(function(e){console.log(Bt()(e)),this.dbDepDetails=e.data,this.dialogDetailsVisible=!0,console.log("harware dep details -----------\x3e "+Bt()(this.dbDepDetails))}.bind(this)).catch()},loadData:function(){this.tableOsTitleExtData=[];for(var e=1;e<this.extMaxLenth+1;e++){var t="配置项"+e,a="extData"+e,i=["colName","prop","width"],s=[t,a,"100"];this.tableOsTitleExtData.push(this.getExtData(i,s))}console.log("Data this.tableOsTitleExtData .....: "+Bt()(this.tableOsTitleExtData)),SN(this.searchConditionList).then(function(e){console.log("Data get ....."+e.data.data.length);for(var t=1;null!==e.data.data&&t<e.data.data.length+1;t++)for(var a=1;null!==e.data.data[t-1].extData&&a<this.extMaxLenth+1;a++){console.log("Data get2222 .....: "+e.data.data[t-1].extData[a-1].value);var i="extData"+a;e.data.data[t-1][i]=e.data.data[t-1].extData[a-1].value}this.dbDepListData=e.data.data,this.total=e.data.totalCount,console.log("---- db dep by page  --  >  "+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},getExtData:function(e,t){for(var a={},i=0;i<e.length;i++){var s=e[i],o=t[i];a[s]=o}return a}},mounted:function(){}},mI=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-dep-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{height:"750px","overflow-y":"scroll"},attrs:{data:e.dbDepListData,tripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})}),e._v(" "),e._l(e.tableOsTitleExtData,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("db-dep-details",{attrs:{dbDepDetails:e.dbDepDetails}})],1)],1)],1)},hI=[],fI={render:mI,staticRenderFns:hI},gI=fI,vI=a("VU/8"),bI=vI(pI,gI,!1,null,null,null),DI=bI.exports,yI={props:{softpackDepDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},watch:{softpackDepDetails:function(e,t){this.softpackDepDetails=e}}},CI=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.softpackDepDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&组件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"依赖的应用&组件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"依赖的应用&组件最低版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"依赖的应用&组件最高版本 ","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"依赖的应用&组件英文名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softpackDepDetails.uuid,callback:function(t){e.$set(e.softpackDepDetails,"uuid",t)},expression:"softpackDepDetails.uuid"}})],1)],1)],1)},_I=[],wI={render:CI,staticRenderFns:_I},SI=wI,xI=a("VU/8"),kI=xI(yI,SI,!1,null,null,null),TI=kI.exports,LI={components:{searchDepCondition:cV,softpackDepDetails:TI},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,softpackDepListData:void 0,softpackDepDetails:void 0,maxlength:30,searchConditionList:{key:"",pageNo:1,pageSize:10},tableTitleList:[{colName:"批次",prop:"batchName",width:200},{colName:"软件包名称",prop:"packageName",width:200},{colName:"软件包版本",prop:"packageVersion",width:150},{colName:"应用&组件英语名称",prop:"softwareType",width:150},{colName:"应用&组件名称",prop:"name",width:150},{colName:"最低版本",prop:"earliestVer",width:120},{colName:"最高版本(可不限)",prop:"latestVer",width:150}],tableOsTitleExtData:[],extMaxLenth:6,detailsTitle:"查看详情",detailsImg:a("0TTt")}},methods:{_handleFilter:function(e){kN(e).then(function(e){this.softpackDepListData=e.data.data,this.total=e.pageCount}.bind(this)).catch(function(e){this.$message({message:e,center:!0,showClose:!0,type:"error",duration:2e3}).bind(this),console.log(e)})},_handleCheckDetails:function(e){this.dialogStatus="软件包运行环境依赖信息详情";var t=this.softpackDepListData[e],a=t.uuid;console.log("check rowData -- >"+a),TN(a).then(function(e){this.softpackDepDetails=e.data,this.dialogDetailsVisible=!0,console.log("software package dep details -----------\x3e "+Bt()(this.softpackDepDetails))}.bind(this)).catch()},loadData:function(){this.tableOsTitleExtData=[];for(var e=1;e<this.extMaxLenth+1;e++){var t="配置项"+e,a="extData"+e,i=["colName","prop","width"],s=[t,a,"100"];this.tableOsTitleExtData.push(this.getExtData(i,s))}kN(this.searchConditionList).then(function(e){console.log("software package dep by page -----------\x3e "+Bt()(e));for(var t=1;null!==e.data.data&&t<e.data.data.length+1;t++)for(var a=1;null!==e.data.data[t-1].extData&&a<this.extMaxLenth+1;a++){console.log("Data get2222 .....: "+e.data.data[t-1].extData[a-1].value);var i="extData"+a;e.data.data[t-1][i]=e.data.data[t-1].extData[a-1].value}this.softpackDepListData=e.data.data,this.total=e.data.totalCount}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},getExtData:function(e,t){for(var a={},i=0;i<e.length;i++){var s=e[i],o=t[i];a[s]=o}return a}},mounted:function(){}},NI=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-dep-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{height:"750px","overflow-y":"scroll"},attrs:{data:e.softpackDepListData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})}),e._v(" "),e._l(e.tableOsTitleExtData,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("softpack-dep-details",{attrs:{softpackDepDetails:e.softpackDepDetails}})],1)],1)],1)},VI=[],II={render:NI,staticRenderFns:VI},EI=II,PI=a("VU/8"),MI=PI(LI,EI,!1,null,null,null),$I=MI.exports,UI={props:{sysSoftwareDepDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},watch:{sysSoftwareDepDetails:function(e,t){this.sysSoftwareDepDetails=e}}},FI=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.sysSoftwareDepDetails}},[a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用&组件名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统软件要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统软件最低版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统软件补丁要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统软件最高版本要求","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"系统软件类型","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.sysSoftwareDepDetails.uuid,callback:function(t){e.$set(e.sysSoftwareDepDetails,"uuid",t)},expression:"sysSoftwareDepDetails.uuid"}})],1)],1)],1)},RI=[],zI={render:FI,staticRenderFns:RI},AI=zI,OI=a("VU/8"),qI=OI(UI,AI,!1,null,null,null),BI=qI.exports,WI={components:{searchDepCondition:cV,systemSoftwareDepDetails:BI},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",addr:"",dialogDetailsVisible:!1,sysSoftwareDepListData:void 0,sysSoftwareDepDetails:void 0,maxlength:30,searchConditionList:{key:"",pageNo:1,pageSize:10},tableTitleList:[{colName:"批次",prop:"batchName",width:200},{colName:"软件包名称",prop:"packageName",width:200},{colName:"软件包版本",prop:"packageVersion",width:150},{colName:"系统软件类型",prop:"softwareType",width:150},{colName:"系统软件名称",prop:"name",width:150},{colName:"最低版本",prop:"earliestVer",width:120},{colName:"最高版本(可不限)",prop:"latestVer",width:150}],tableOsTitleExtData:[],extMaxLenth:6,detailsTitle:"查看详情",detailsImg:a("0TTt")}},methods:{_handleFilter:function(e){LN(e).then(function(e){this.sysSoftwareDepListData=e.data.data,this.total=e.pageCount}.bind(this)).catch(function(e){this.$message({message:e,center:!0,showClose:!0,type:"error",duration:2e3}),console.log(e)}.bind(this))},_handleCheckDetails:function(e){this.dialogStatus="硬件运行环境依赖信息详情";var t=this.sysSoftwareDepListData[e],a=t.uuid;console.log("check rowData -- >"+a),xN(a).then(function(e){console.log(Bt()(e)),this.sysSoftwareDepDetails=e.data,this.dialogDetailsVisible=!0,console.log("harware dep details -----------\x3e "+Bt()(this.sysSoftwareDepDetails))}.bind(this)).catch()},loadData:function(){this.tableOsTitleExtData=[];for(var e=1;e<this.extMaxLenth+1;e++){var t="配置项"+e,a="extData"+e,i=["colName","prop","width"],s=[t,a,"100"];this.tableOsTitleExtData.push(this.getExtData(i,s))}LN(this.searchConditionList).then(function(e){console.log("Data get ....."+e.data.data.length);for(var t=1;null!==e.data.data&&t<e.data.data.length+1;t++)for(var a=1;null!==e.data.data[t-1].extData&&a<this.extMaxLenth+1;a++){console.log("Data get2222 .....: "+e.data.data[t-1].extData[a-1].value);var i="extData"+a;e.data.data[t-1][i]=e.data.data[t-1].extData[a-1].value}this.sysSoftwareDepListData=e.data.data,this.total=e.data.totalCount,console.log("---- db dep by page  --  >  "+Bt()(e))}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},getExtData:function(e,t){for(var a={},i=0;i<e.length;i++){var s=e[i],o=t[i];a[s]=o}return a}},mounted:function(){}},QI=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-dep-condition",{attrs:{searchConDetails:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{staticStyle:{height:"750px","overflow-y":"scroll"},attrs:{data:e.sysSoftwareDepListData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"No",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})}),e._v(" "),e._l(e.tableOsTitleExtData,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width}})})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("hardware-dep-details",{attrs:{sysSoftwareDepDetails:e.sysSoftwareDepDetails}})],1)],1)],1)},GI=[],HI={render:QI,staticRenderFns:GI},jI=HI,JI=a("VU/8"),ZI=JI(WI,jI,!1,null,null,null),KI=ZI.exports,YI={components:{uploadFiles:tV,hardwareDepQuery:xV,osDepQuery:OV,middlewareDepQuery:iI,dbDepQuery:DI,softwarePackageDepQuery:$I,SystemSoftwareDepQuery:KI},data:function(){return{subActiveName:"0"}},methods:{handleSubTabClick:function(e,t){console.log(e.name),"1"===e.name?(console.info("hardwareDep tab name "+e.name),this.$refs.hardwareDep.loadData()):"2"===e.name?(console.info("osDep tab name "+e.name),this.$refs.osDep.loadData()):"3"===e.name?(console.info("middlewareDep tab name "+e.name),this.$refs.middlewareDep.loadData()):"4"===e.name?(console.info("dbDep tab name "+e.name),this.$refs.dbDep.loadData()):"5"===e.name?(console.info("sofwarePckDep tab name "+e.name),this.$refs.sofwarePckDep.loadData()):"6"===e.name&&this.$refs.systemSoftwareDep.loadData()}}},XI=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-tabs",{on:{"tab-click":e.handleSubTabClick},model:{value:e.subActiveName,callback:function(t){e.subActiveName=t},expression:"subActiveName"}},[a("el-tab-pane",{attrs:{label:"依赖导入",name:"0"}},[a("div",[a("upload-files")],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"服务器硬件运行环境依赖查询",name:"1"}},[a("div",[a("hardware-dep-query",{ref:"hardwareDep"})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"操作系统依赖查询",name:"2"}},[a("div",[a("os-dep-query",{ref:"osDep"})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"系统软件依赖查询",name:"6"}},[a("div",[a("system-software-dep-query",{ref:"systemSoftwareDep"})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"中间件依赖查询",name:"3"}},[a("div",[a("middleware-dep-query",{ref:"middlewareDep"})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"数据库依赖查询",name:"4"}},[a("div",[a("db-dep-query",{ref:"dbDep"})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"应用&组件依赖",name:"5"}},[a("div",[a("software-package-dep-query",{ref:"sofwarePckDep"})],1)])],1)],1)},eE=[],tE={render:XI,staticRenderFns:eE},aE=tE,iE=a("VU/8"),sE=Ve,oE=iE(YI,aE,!1,sE,"data-v-5716b06e",null),lE=oE.exports,rE=[{path:"/applicationupgrade/softwaremaintance",name:"softwareMaintanceIndex",component:GN},{path:"/applicationupgrade/softwarepackdependency",name:"softwareDependencyIndex",component:lE}],nE=function(){return mt.a.get("/egc-applicationupgradecomponent/aupackagedispatches/listCourts").then(function(e){return e.data})},cE=function(e){return mt.a.post("/egc-applicationupgradecomponent/aupackagedispatches/listPackages",e).then(function(e){return e.data})},dE=function(e,t,a){return console.log(" dispatch software packages params1  ---\x3e   "+Bt()(e)+" ---\x3e  "+Bt()(t)+" ---\x3e  "+a),mt.a.post("/egc-applicationupgradecomponent/aupackagedispatches/appDispatch?appList="+e+"&courtList="+t+"&dispatcher="+a).then(function(e){return e.data})},uE=function(e){return console.log("dispatch history --\x3e  "+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/aupackagedispatches/listDispatchRecord",e).then(function(e){return e.data})},pE=function(e){return mt.a.get("/egc-applicationupgradecomponent/aupackagedispatches/dispatchDetail?uuid="+e).then(function(e){return e.data})},mE=function(e,t){return console.log(" download excel file params ->>>>>>>>>>>>>   "+Bt()(e)+"    >>>>>>>> the second params2:  ---\x3e   "+t),mt.a.get("/egc-applicationupgradecomponent/download/resultDownload?condition="+encodeURI(e)+"&downloadCls="+t,{responseType:"arraybuffer"}).then(function(e){var t=hE(e.headers),a=new Blob([e.data],{type:"application/x-xls"});if("msSaveOrOpenBlob"in navigator)window.navigator.msSaveOrOpenBlob(a,t);else{var i=window.URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.target="_blank",s.download=t,document.body.appendChild(s),s.click()}return e.data})},hE=function(e){var t=Bt()(e).split("filename=\\"),a=Bt()(t[1]).split(",");return decodeURI(a[0].substring(3,a[0].length-6))},fE={data:function(){return{orgsData:[],orgsDataTree:[],expandedKeys:[],defaultProps:{children:"children",label:"label"},filterText:"",houseOrgCodeList:[]}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{_loadALlOrgs:function(){nE().then(function(e){console.log("org tree data--- >   "+Bt()(e)),this.orgsData=e,0!==e.length&&this.expandedKeys.push(e[0].uuid)}.bind(this)).catch(function(e){console.log(e)})},_confirmDispatch:function(){this.houseOrgCodeList=[];for(var e=0;e<this.$refs.tree.getCheckedNodes().length;e++){var t=this.$refs.tree.getCheckedNodes()[e];console.log("node.courtUid ---\x3e  "+t.courtUid),t.courtUid&&this.houseOrgCodeList.push(t.courtUid)}console.log("selected leaf data ---\x3e  "+this.houseOrgCodeList.toString()),this.houseOrgCodeList.length>0?this.$emit("handleDispatchEvent",this.houseOrgCodeList):this.$message.error("请选择下发小区")},handleNodeClick:function(e){console.log(e)},setCheckNodes:function(e){this._loadALlOrgs()},filterNode:function(e,t){return!e||-1!==t.labelAbbr.indexOf(e)},handleCheckChange:function(e,t,a){console.log(Bt()(e))}},mounted:function(){this._loadALlOrgs()}},gE=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-input",{staticClass:"user_el-select",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("div",{staticClass:"tree"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{"node-key":"uuid",data:e.orgsData,props:e.defaultProps,"show-checkbox":"","filter-node-method":e.filterNode,"default-expanded-keys":e.expandedKeys},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px","text-align":"right"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e._confirmDispatch}},[e._v("下发到小区")])],1)],1)},vE=[],bE={render:gE,staticRenderFns:vE},DE=bE,yE=a("VU/8"),CE=Ie,_E=yE(fE,DE,!1,CE,"data-v-5514544c",null),wE=_E.exports,SE={props:{dispResultErrMsg:{type:Object}},data:function(){return{}},methods:{downloadResult:function(){this.$emit("downloadEvent",this.dispResultErrMsg.checkMsgKey)}},watch:{}},xE=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dispResultErrMsg.checkMsgList,border:""}},[a("el-table-column",{attrs:{label:"编号",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"错误信息",prop:"msg"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.downloadResult}},[e._v("导出")])],1)],1)},kE=[],TE={render:xE,staticRenderFns:kE},LE=TE,NE=a("VU/8"),VE=NE(SE,LE,!1,null,null,null),IE=VE.exports,EE={components:{orgTree:wE,DispatchedSoftwareResults:IE},data:function(){return{selectOrgVisible:!1,downloadResultVisible:!1,dispResultErrMsg:void 0,dialogTittle:"",activeNames:"",multipleSelection:[],disabled:!0,formLabelWidth:"160px",maxlength:30,queryList:{packageName:"",packageProvider:"",packageVersion:""},tableTitleList:[{colName:"软件包名称",prop:"name"},{colName:"软件包版本",prop:"version"},{colName:"开发者",prop:"provider"},{colName:"软件包源服务器",prop:"hostname"},{colName:"软件包源路径",prop:"path",width:140},{colName:"软件包登记时间",prop:"registerTime"},{colName:"软件包登记者",prop:"register"},{colName:"前续软件包名称",prop:"preName"},{colName:"前续软件包版本",prop:"latestPreVer"},{colName:"备注",prop:"remark"}],dispatchDataList:void 0,operator:""}},watch:{activeNames:function(e,t){this.loadDataAgain()},multipleSelection:function(e,t){0===e.length?this.disabled=!0:this.disabled=!1}},methods:{loadData:function(){cE(this.queryList).then(function(e){this.dispatchDataList=e,console.log("software paks ----- >  "+Bt()(this.dispatchDataList)),0!==this.dispatchDataList.length&&(this.activeNames=this.dispatchDataList[0].batchName)}.bind(this)).catch(function(e){console.log(e)})},loadDataAgain:function(){cE(this.queryList).then(function(e){this.dispatchDataList=e}.bind(this)).catch(function(e){console.log(e)})},_handleFilter:function(){this.loadData()},_handleClearQuery:function(){this.queryList={packageName:"",packageProvider:"",packageVersion:""},this.loadData()},handleSelectionChange:function(e){this.multipleSelection=e,this.disabled=!1},_selectOrg:function(){this.dialogTittle="小区组织",this.selectOrgVisible=!0},_dispatchSoftwareToCourt:function(e){this.selectOrgVisible=!1,this.operator="SystemAdmin";for(var t=[],a=0;a<this.multipleSelection.length;a++){var i=this.multipleSelection[a];t.push(i.packageId)}dE(t,e,this.operator).then(function(e){this.dispatchResult=e.checkMsgList,0===this.dispatchResult.length?(console.log("_dispatchSoftwareToCourt data === > "+Bt()(this.dispatchResult,null," ")),this.activeNames=this.dispatchDataList[0].batchName,this.loadData(),this.$message.success("下发操作成功, 请查看历史")):(console.log(Bt()(e)),this.downloadResultVisible=!0,this.dispResultErrMsg=e,this.dialogTittle="错误消息",this.resetOrgData())}.bind(this)).catch(function(e){console.log(e)})},_downloadDispatchResult:function(e){this.downloadResultVisible=!1,console.log("download dispath results"),mE(e,50).then(function(e){}).catch(function(e){console.log(e)})},resetOrgData:function(){console.log("reset org data!"),this.selectOrgVisible=!1,this.$refs.courts._loadALlOrgs()}},mounted:function(){this.loadData()}},PE=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{attrs:{inline:!0,model:e.queryList}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"软件包名称"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入软件包名称",clearable:"",maxlength:e.maxlength},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.queryList.packageName,callback:function(t){e.$set(e.queryList,"packageName",t)},expression:"queryList.packageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入软件包版本",clearable:"",maxlength:e.maxlength},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.queryList.packageVersion,callback:function(t){e.$set(e.queryList,"packageVersion",t)},expression:"queryList.packageVersion"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入开发者",clearable:"",maxlength:e.maxlength},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.queryList.packageProvider,callback:function(t){e.$set(e.queryList,"packageProvider",t)},expression:"queryList.packageProvider"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e._handleFilter}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary",disabled:e.disabled},on:{click:e._selectOrg}},[e._v("选择组织")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.dispatchDataList,function(t,i){return a("el-collapse-item",{key:i,attrs:{title:t.batchName,name:t.batchName}},[a("el-table",{ref:"softwareTable",refInFor:!0,staticStyle:{width:"100%"},attrs:{data:t.packageDataList,"tooltip-effect":"dark",stripe:"",border:"",fit:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"编号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:""}})})],2)],1)}))],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.selectOrgVisible,"before-close":e.resetOrgData},on:{"update:visible":function(t){e.selectOrgVisible=t}}},[a("org-tree",{ref:"courts",on:{handleDispatchEvent:e._dispatchSoftwareToCourt}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.downloadResultVisible},on:{"update:visible":function(t){e.downloadResultVisible=t}}},[a("dispatched-software-results",{attrs:{dispResultErrMsg:e.dispResultErrMsg},on:{downloadEvent:e._downloadDispatchResult}})],1)],1)},ME=[],$E={render:PE,staticRenderFns:ME},UE=$E,FE=a("VU/8"),RE=FE(EE,UE,!1,null,null,null),zE=RE.exports,AE=function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var s=t.getDate();s=s<10?"0"+s:s;var o=t.getHours();o=o<10?"0"+o:o;var l=t.getMinutes(),r=t.getSeconds();return l=l<10?"0"+l:l,r=r<10?"0"+r:r,a+"-"+i+"-"+s+" "+o+":"+l+":"+r},OE={props:{searchConditionList:{type:Object}},data:function(){return{provinces:[],cities:[],districts:[],provParams:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},dateValue:"",maxlength:30,formLabelWidth:"140px"}},methods:{_handleClearQuery:function(){this.searchConditionList.province="",this.searchConditionList.city="",this.searchConditionList.district="",this.searchConditionList.condition="",this.dateValue="",this.searchConditionList.startDate="",this.searchConditionList.endDate="",this.$emit("handleFilterEvent",this.searchConditionList,"search")},_callHandleFilter:function(){if(this.dateValue){var e=this.dateValue.toString().split(",");this.searchConditionList.startDate=AE(e[0]),this.searchConditionList.endDate=AE(e[1])}this.$emit("handleFilterEvent",this.searchConditionList,"search")},_callHanderDownLoadResult:function(){this.$emit("handleFilterEvent",this.searchConditionList,"download")},validateInput:function(){return""!==this.searchConditionList.province||""!==this.searchConditionList.city||""!==this.searchConditionList.district||""!==this.searchConditionList.condition||(this.$message({message:"请选择省/市/区或者输入查询关键字",type:"error"}),!1)},loadProvinceData:function(){var e=this;e.cities=[],e.districts=[],dS(e.provParams).then(function(t){for(var a=t,i=0;i<a.length;i++)e.provinces.push({label:a[i].province,value:a[i].provinceAbbr})}).catch(function(e){console.log(e)})},loadCityData:function(){var e=this;""!==e.searchConditionList.city&&(e.searchConditionList.city=""),""!==e.searchConditionList.district&&(e.searchConditionList.district=""),e.cities=[],e.districts=[],e.provParams.province=e.searchConditionList.province,uS(e.provParams).then(function(t){for(var a=t,i=0;i<a.length;i++)e.cities.push({label:a[i].city,value:a[i].cityAbbr})}).catch(function(){e.$message.error("查询市信息失败")})},loadDistrictData:function(){var e=this;e.provParams.province=e.searchConditionList.province,e.provParams.city=e.searchConditionList.city,""!==e.searchConditionList.city?(e.searchConditionList.district="",e.districts=[],pS(e.provParams).then(function(t){for(var a=t,i=0;i<a.length;i++)e.districts.push({label:a[i].district,value:a[i].districtAbbr})}).catch(function(){e.$message.error("查询区信息失败")})):e.searchConditionList.district=""}},watch:{"searchConditionList.province":function(e,t){this.loadCityData()},"searchConditionList.city":function(e,t){this.loadDistrictData()}},mounted:function(){this.loadProvinceData()}},qE=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{attrs:{inline:!0,model:e.searchConditionList}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"选择日期"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选择省","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择省",clearable:""},model:{value:e.searchConditionList.province,callback:function(t){e.$set(e.searchConditionList,"province",t)},expression:"searchConditionList.province"}},e._l(e.provinces,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择市","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择市",clearable:""},model:{value:e.searchConditionList.city,callback:function(t){e.$set(e.searchConditionList,"city",t)},expression:"searchConditionList.city"}},e._l(e.cities,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择区","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择区",clearable:""},model:{value:e.searchConditionList.district,callback:function(t){e.$set(e.searchConditionList,"district",t)},expression:"searchConditionList.district"}},e._l(e.districts,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}))],1)],1),e._v(" "),a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"软件包名称"}},[a("el-input",{staticClass:"dispthpckg_el-input",attrs:{placeholder:"请输入软件包名称",clearable:"",maxlength:e.maxlength},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._callHandleFilter(t)}},model:{value:e.searchConditionList.packageName,callback:function(t){e.$set(e.searchConditionList,"packageName",t)},expression:"searchConditionList.packageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"dispthsearch_el-input",attrs:{placeholder:"请输入软件包版本",clearable:"",maxlength:e.maxlength},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._callHandleFilter(t)}},model:{value:e.searchConditionList.version,callback:function(t){e.$set(e.searchConditionList,"version",t)},expression:"searchConditionList.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"搜索关键字","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"dispthsearch_el-input",attrs:{placeholder:"请输入搜索关键字",clearable:"",maxlength:e.maxlength},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._callHandleFilter(t)}},model:{value:e.searchConditionList.keyWord,callback:function(t){e.$set(e.searchConditionList,"keyWord",t)},expression:"searchConditionList.keyWord"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e._callHandleFilter}},[e._v("搜索")])],1)],1)],1)])],1)},BE=[],WE={render:qE,staticRenderFns:BE},QE=WE,GE=a("VU/8"),HE=Ee,jE=GE(OE,QE,!1,HE,"data-v-6bff0965",null),JE=jE.exports,ZE={props:{softDispDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0}},methods:{closeDialog:function(){this.$emit("closeDialogEvent")}},watch:{softDispDetails:function(e,t){this.softDispDetails=e}}},KE=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.softDispDetails}},[a("el-form-item",{attrs:{label:"下发日期/时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.dispatchStartTime,callback:function(t){e.$set(e.softDispDetails,"dispatchStartTime",t)},expression:"softDispDetails.dispatchStartTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.packageName,callback:function(t){e.$set(e.softDispDetails,"packageName",t)},expression:"softDispDetails.packageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"省（直辖市）","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.province,callback:function(t){e.$set(e.softDispDetails,"province",t)},expression:"softDispDetails.province"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"市","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.city,callback:function(t){e.$set(e.softDispDetails,"city",t)},expression:"softDispDetails.city"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"区","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.district,callback:function(t){e.$set(e.softDispDetails,"district",t)},expression:"softDispDetails.district"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目标小区名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.courtName,callback:function(t){e.$set(e.softDispDetails,"courtName",t)},expression:"softDispDetails.courtName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目标服务器名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.hostName,callback:function(t){e.$set(e.softDispDetails,"hostName",t)},expression:"softDispDetails.hostName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目标路径","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.path,callback:function(t){e.$set(e.softDispDetails,"path",t)},expression:"softDispDetails.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作发起人","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.dispatcher,callback:function(t){e.$set(e.softDispDetails,"dispatcher",t)},expression:"softDispDetails.dispatcher"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.remark,callback:function(t){e.$set(e.softDispDetails,"remark",t)},expression:"softDispDetails.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开发者","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.provider,callback:function(t){e.$set(e.softDispDetails,"provider",t)},expression:"softDispDetails.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包源服务器名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.pkgOrigHostName,callback:function(t){e.$set(e.softDispDetails,"pkgOrigHostName",t)},expression:"softDispDetails.pkgOrigHostName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"软件包源路径名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.pkgOrigPath,callback:function(t){e.$set(e.softDispDetails,"pkgOrigPath",t)},expression:"softDispDetails.pkgOrigPath"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.pkgPreName,callback:function(t){e.$set(e.softDispDetails,"pkgPreName",t)},expression:"softDispDetails.pkgPreName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"前续软件包版本","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.pkgPreVer,callback:function(t){e.$set(e.softDispDetails,"pkgPreVer",t)},expression:"softDispDetails.pkgPreVer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始日期/时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.dispatchStartTime,callback:function(t){e.$set(e.softDispDetails,"dispatchStartTime",t)},expression:"softDispDetails.dispatchStartTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束日期/时间","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.dispatchEndTime,callback:function(t){e.$set(e.softDispDetails,"dispatchEndTime",t)},expression:"softDispDetails.dispatchEndTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作是否成功","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.softDispDetails.dispatchResult,callback:function(t){e.$set(e.softDispDetails,"dispatchResult",t)},expression:"softDispDetails.dispatchResult"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)},YE=[],XE={render:KE,staticRenderFns:YE},eP=XE,tP=a("VU/8"),aP=tP(ZE,eP,!1,null,null,null),iP=aP.exports,sP={components:{searchCondition:JE,SoftWareDispatchHistoryDetails:iP},data:function(){return{queryInput:"",selectOpts:[],total:0,dialogStatus:"",loading:!0,dialogDetailsVisible:!1,softDispatchHisList:void 0,softDispDetails:void 0,osHistoryData:void 0,tableTitleList:[{colName:"下发日期/时间",prop:"dispatchStartTime"},{colName:"软件包名称",prop:"packageName"},{colName:"软件包版本",prop:"version"},{colName:"省（直辖市）",prop:"province"},{colName:"市",prop:"city"},{colName:"区",prop:"district"},{colName:"目标小区名称",prop:"courtName"},{colName:"目标服务器",prop:"hostName"},{colName:"操作发起人",prop:"dispatcher"},{colName:"操作结果",prop:"dispatchResult"},{colName:"备注",prop:"remark"}],detailsTitle:"查看详情",searchConditionList:{city:"",district:"",endDate:"",keyWord:"",packageName:"",pageNo:1,pageSize:10,province:"",startDate:"",version:""}}},methods:{loadData:function(){uE(this.searchConditionList).then(function(e){console.log("result - > "+Bt()(e)),this.loading=!1,this.softDispatchHisList=e.dataList,this.total=e.totalCount}.bind(this)).catch(function(e){this.loading=!0,console.log(e)})},_handleFilter:function(e,t){console.log("type -- > "+t),"search"===t?(this.loading=!0,uE(e).then(function(e){this.loading=!1,this.softDispatchHisList=e.dataList,this.total=e.totalCount}.bind(this)).catch(function(e){this.loading=!0,console.log(e)})):console.log("begin to download the data!")},_handleCheckDetails:function(e){this.dialogStatus="软件下发历史信息详情";var t=this.softDispatchHisList[e],a=t.uuid;console.log("check rowData -- >"+a),pE(a).then(function(e){this.softDispDetails=e,console.log("dispatch history details --- > "+Bt()(this.softDispDetails,null," ")),this.dialogDetailsVisible=!0}.bind(this)).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.pageNo=e,this.loadData()},closeDialog:function(){this.dialogDetailsVisible=!1},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.pageNo;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},oP=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",[a("search-condition",{attrs:{searchConditionList:e.searchConditionList},on:{handleFilterEvent:e._handleFilter}})],1),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"flex-1 flex-c"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.softDispatchHisList,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-view",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.detailsTitle},on:{click:function(a){e._handleCheckDetails(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.pageNo,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"pageNo",t)}}})],1)])]),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogDetailsVisible,top:"8vh"},on:{"update:visible":function(t){e.dialogDetailsVisible=t}}},[a("soft-ware-dispatch-history-details",{attrs:{softDispDetails:e.softDispDetails},on:{closeDialogEvent:e.closeDialog}})],1)],1)])},lP=[],rP={render:oP,staticRenderFns:lP},nP=rP,cP=a("VU/8"),dP=Pe,uP=cP(sP,nP,!1,dP,"data-v-fbf2ba22",null),pP=uP.exports,mP=[{path:"/applicationupgrade/softwaredispatch",name:"softWareDispatchIndex",component:zE},{path:"/applicationupgrade/softwaredispatchhistory",name:"softWareDispatchHistory",component:pP}],hP={props:{codeInstDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0}},methods:{updateCodeInst:function(){this.$emit("saveCodeInstEvent",this.codeInstDetails,"save")},callBackCloseDialogEvent:function(){this.$emit("saveCodeInstEvent",this.codeInstDetails,"cancel")}},watch:{codeInstDetails:function(e,t){this.codeInstDetails=e}},mounted:function(){this.tempRemark=this.codeInstDetails.remark}},fP=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.codeInstDetails}},[a("el-form-item",{attrs:{label:"代码实例值","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.codeInstDetails.code,callback:function(t){e.$set(e.codeInstDetails,"code",t)},expression:"codeInstDetails.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码实例对应名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.codeInstDetails.instanceName,callback:function(t){e.$set(e.codeInstDetails,"instanceName",t)},expression:"codeInstDetails.instanceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提供商","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.codeInstDetails.sourceVendor,callback:function(t){e.$set(e.codeInstDetails,"sourceVendor",t)},expression:"codeInstDetails.sourceVendor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码值","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.codeInstDetails.code,callback:function(t){e.$set(e.codeInstDetails,"code",t)},expression:"codeInstDetails.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.codeInstDetails.remark,callback:function(t){e.$set(e.codeInstDetails,"remark",t)},expression:"codeInstDetails.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateCodeInst}},[e._v("保 存")])],1)],1)],1)},gP=[],vP={render:fP,staticRenderFns:gP},bP=vP,DP=a("VU/8"),yP=DP(hP,bP,!1,null,null,null),CP=yP.exports,_P=function(){return mt.a.get("/egc-applicationupgradecomponent/codeTypes/queryAll").then(function(e){return e.data})},wP=function(e){return console.log("code instance code:: ---\x3e "+Bt()(e,null," ")),mt.a.get("/egc-applicationupgradecomponent/codes/queryCodes?codeTypeUuid="+e).then(function(e){return e.data})},SP=function(e){return console.log("get code instance maintance by page params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/codeInstances/queryPageData",e).then(function(e){return e.data})},xP=function(e){return console.log("get code instance maintance by details id ---\x3e "+e),mt.a.get("/egc-applicationupgradecomponent/codeInstances/findById?id="+e).then(function(e){return e.data})},kP=function(e){return console.log("update code instance maintance params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/codeInstances/update",e).then(function(e){return e.data})},TP=function(e){return console.log("register code instance maintance params ---\x3e "+Bt()(e,null,"")),mt.a.post("/egc-applicationupgradecomponent/codeInstances/insert",e).then(function(e){return e.data})},LP=function(e){return console.log("delete code instance maintance params ---\x3e "+Bt()(e,null," ")),mt.a.get("/egc-applicationupgradecomponent/codeInstances/delete?uuid="+e).then(function(e){return e.data})},NP=function(e){return console.log("get comm code by page params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/codes/queryPageData",e).then(function(e){return e.data})},VP=function(e){return console.log("get comm code maintance by details id ---\x3e "+e),mt.a.get("/egc-applicationupgradecomponent/codes/findById?id="+e).then(function(e){return e.data})},IP=function(e){return console.log("update comm code maintance params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/codes/update",e).then(function(e){return e.data})},EP=function(e){return console.log("delete comm code maintance params ---\x3e "+Bt()(e,null," ")),mt.a.get("/egc-applicationupgradecomponent/codes/delete?uuid="+e).then(function(e){return e.data})},PP=function(e){return console.log("register comm code maintance params ---\x3e "+Bt()(e)),mt.a.post("/egc-applicationupgradecomponent/codes/insert",e).then(function(e){return e.data})},MP=function(e){return console.log("get config info maintance by page params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/configs/queryPageData",e).then(function(e){return e.data})},$P=function(e){return console.log("get config info by details id ---\x3e "+e),mt.a.get("/egc-applicationupgradecomponent/configs/findById?id="+e).then(function(e){return e.data})},UP=function(e){return console.log("update config info maintance params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/configs/update/",e).then(function(e){return e.data})},FP=function(e){return console.log("register configuration infomation maintance params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/configs/insert",e).then(function(e){return e.data})},RP=function(e){return console.log("get soft batchs by page params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/batches/queryPageData",e).then(function(e){return e.data})},zP=function(e){return console.log("get soft batchs maintance by details id ---\x3e "+e),mt.a.get("/egc-applicationupgradecomponent/batches/findById?id="+e).then(function(e){return e.data})},AP=function(e){return console.log("update software batches params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/batches/update",e).then(function(e){return e.data})},OP=function(e){return console.log("register configuration infomation maintance params ---\x3e "+Bt()(e,null," ")),mt.a.post("/egc-applicationupgradecomponent/batches/insert",e).then(function(e){return e.data})},qP=function(e){return console.log("delete soft batchs maintance params ---\x3e "+Bt()(e,null," ")),mt.a.get("/egc-applicationupgradecomponent/batches/delete?uuid="+e).then(function(e){return e.data})},BP={components:{CodeInstanceEdit:CP},data:function(){return{dialogEditVisible:!1,dialogRegisterVisible:!1,codeInstList:void 0,total:0,loading:!0,codeInstDetails:void 0,dialogTittle:"",formLabelWidth:"140px",instanceValues:[],instanceCodes:[],editTitle:"编辑",deleteTitle:"删除",tableTitleList:[{colName:"代码实例值",prop:"code",width:220},{colName:"代码实例对应名称",prop:"instanceName",width:220},{colName:"提供商",prop:"sourceVendor",width:220},{colName:"代码值",prop:"code",width:220},{colName:"备注",prop:"remark"}],searchConditionList:{currentPage:1,pageSize:10,codeName:"",code:"",vendor:""},registerParaList:{instanceValue:"",instanceName:"",code:"",sourceVendor:"",ramark:""},rules:{instanceValue:[{required:!0,message:"请选择代码实例值",trigger:"blur,change"}],code:[{required:!0,message:"请输入软件版本",trigger:"blur,change"}],instanceName:[{required:!0,message:"请输入开发者姓名",trigger:"blur,change"}]}}},methods:{loadData:function(){this.loading=!0,SP(this.searchConditionList).then(function(e){console.log("code instance -- >"+Bt()(e)),this.codeInstList=e.codesInstanceList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)})},_handleFilter:function(){this.loadData()},handleRegister:function(){this.dialogTittle="代码实例注册",this.dialogRegisterVisible=!0,this.instanceValues=[],this._getCodeInstances()},_getCodeInstances:function(){this.instanceCodes=[],_P().then(function(e){console.log(Bt()(e));for(var t=e,a=0;a<t.length;a++)this.instanceValues.push({label:t[a].typeName,value:t[a].uuid})}.bind(this)).catch(function(e){console.log(e)})},_getCodeCategories:function(){this.registerParaList.code="",this.instanceCodes=[],console.log("this.registerParaList.instanceValue"+this.registerParaList.instanceValue),wP(this.registerParaList.instanceValue).then(function(e){console.log("codes ---\x3e>>"+Bt()(e));for(var t=e,a=0;a<t.length;a++)this.instanceCodes.push({label:t[a].code,value:t[a].code})}.bind(this)).catch(function(e){console.log(e)})},_registerCodeInstance:function(e){var t=this;this.$refs[e].validate(function(e){e&&TP(t.registerParaList).then(function(e){t.dialogRegisterVisible=!1,t.$message({message:"保存成功",type:"success"}),t.beforeCloseDialog(),t.loadData()}).catch(function(e){console.log(e)})})},_handleClearQuery:function(){this.searchConditionList={currentPage:1,pageSize:10,codeName:"",code:"",vendor:""},this.loadData()},beforeCloseDialog:function(){this.dialogRegisterVisible=!1,this.$refs.registerParaList.resetFields()},_handleEdit:function(e){this.dialogTittle="代码实例修改";var t=this.codeInstList[e],a=t.uuid;console.log("edit rowData -- >"+a),xP(a).then(function(e){console.log("code instance  details -- >"+Bt()(e)),this.codeInstDetails=e,this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateCodeInstInfo:function(e,t){"save"===t?kP(e).then(function(e){this.dialogEditVisible=!1,this.$message.success("保存成功"),this.loadData()}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleDeleteData:function(e){var t=this,a=this.codeInstList[e],i=a.uuid;console.log(a.instanceName),this.$confirm("确定要删除代码实例'"+a.instanceName+"'?', '提示'",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){LP(i).then(function(e){this.$message({message:"删除成功",type:"success"}),this.loadData()}.bind(t)).catch(function(e){console.log(e)})})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.currentPage;return a||(a=1),t*(a-1)+e+1}},watch:{"registerParaList.instanceValue":function(e,t){this._getCodeCategories()}},mounted:function(){this.loadData()}},WP=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-c flex-1"},[a("el-form",{attrs:{inline:!0,model:e.searchConditionList}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"代码实例值"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入代码实例值"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.code,callback:function(t){e.$set(e.searchConditionList,"code",t)},expression:"searchConditionList.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码实例对应名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入代码实例对应名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.codeName,callback:function(t){e.$set(e.searchConditionList,"codeName",t)},expression:"searchConditionList.codeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提供商","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入提供商"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.vendor,callback:function(t){e.$set(e.searchConditionList,"vendor",t)},expression:"searchConditionList.vendor"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e._handleFilter}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleRegister}},[e._v("添加")])],1)]),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"flex-1 flex-c"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.codeInstList,stripe:"",border:"",id:"codeInstanceTable",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,"show-overflow-tooltip":"",sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.deleteTitle},on:{click:function(a){e._handleDeleteData(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogEditVisible},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("code-instance-edit",{attrs:{codeInstDetails:e.codeInstDetails},on:{saveCodeInstEvent:e._updateCodeInstInfo}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogRegisterVisible,"before-close":e.beforeCloseDialog},on:{"update:visible":function(t){e.dialogRegisterVisible=t}}},[a("div",[a("el-form",{ref:"registerParaList",attrs:{model:e.registerParaList,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码实例值","label-width":e.formLabelWidth,prop:"instanceValue"}},[a("el-select",{attrs:{placeholder:"请选择代码实例值",clearable:""},model:{value:e.registerParaList.instanceValue,callback:function(t){e.$set(e.registerParaList,"instanceValue",t)},expression:"registerParaList.instanceValue"}},e._l(e.instanceValues,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码值","label-width":e.formLabelWidth,prop:"code"}},[a("el-select",{attrs:{placeholder:"请选择代码值",clearable:""},model:{value:e.registerParaList.code,callback:function(t){e.$set(e.registerParaList,"code",t)},expression:"registerParaList.code"}},e._l(e.instanceCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码实例对应名称","label-width":e.formLabelWidth,prop:"instanceName"}},[a("el-input",{model:{value:e.registerParaList.instanceName,callback:function(t){e.$set(e.registerParaList,"instanceName",t)},expression:"registerParaList.instanceName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提供商","label-width":e.formLabelWidth,prop:"sourceVendor"}},[a("el-input",{model:{value:e.registerParaList.sourceVendor,callback:function(t){e.$set(e.registerParaList,"sourceVendor",t)},expression:"registerParaList.sourceVendor"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{model:{value:e.registerParaList.remark,callback:function(t){e.$set(e.registerParaList,"remark",t)},expression:"registerParaList.remark"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.beforeCloseDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e._registerCodeInstance("registerParaList")}}},[e._v("注 册")])],1)],1)],1)])],1)},QP=[],GP={render:WP,staticRenderFns:QP},HP=GP,jP=a("VU/8"),JP=Me,ZP=jP(BP,HP,!1,JP,"data-v-322abed1",null),KP=ZP.exports,YP={props:{commCodeDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0}},methods:{updateCommCodeEvent:function(){this.$emit("saveCommCodeEvent",this.commCodeDetails,"save")},callBackCloseDialogEvent:function(){this.$emit("saveCommCodeEvent",this.commCodeDetails,"cancel")}},watch:{commCodeDetails:function(e,t){this.commCodeDetails=e}}},XP=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.commCodeDetails}},[a("el-form-item",{attrs:{label:"代码中文名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.commCodeDetails.name,callback:function(t){e.$set(e.commCodeDetails,"name",t)},expression:"commCodeDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码英文名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.commCodeDetails.nameEn,callback:function(t){e.$set(e.commCodeDetails,"nameEn",t)},expression:"commCodeDetails.nameEn"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码值","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.commCodeDetails.code,callback:function(t){e.$set(e.commCodeDetails,"code",t)},expression:"commCodeDetails.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码大类名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.commCodeDetails.typeCode,callback:function(t){e.$set(e.commCodeDetails,"typeCode",t)},expression:"commCodeDetails.typeCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.commCodeDetails.remark,callback:function(t){e.$set(e.commCodeDetails,"remark",t)},expression:"commCodeDetails.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateCommCodeEvent}},[e._v("保 存")])],1)],1)],1)},eM=[],tM={render:XP,staticRenderFns:eM},aM=tM,iM=a("VU/8"),sM=iM(YP,aM,!1,null,null,null),oM=sM.exports,lM={components:{CommCodeEdit:oM},data:function(){return{dialogEditVisible:!1,dialogRegisterVisible:!1,commCodeDataList:void 0,total:0,loading:!0,commCodeDetails:[],codeCategories:[],dialogTittle:"",editTitle:"编辑",deleteTitle:"删除",formLabelWidth:"140px",tableTitleList:[{colName:"代码中文名称",prop:"name",width:220},{colName:"代码英文名称",prop:"nameEn",width:220},{colName:"代码值",prop:"code",width:220},{colName:"代码大类名称",prop:"codeTypes.typeName",width:320},{colName:"备注",prop:"remark"}],searchConditionList:{currentPage:1,pageSize:10,codeName:"",code:"",vendor:""},registerParaList:{name:"",nameEn:"",code:"",typeCode:"",ramark:""},rules:{typeCode:[{required:!0,message:"请选择代码大类名称",trigger:"blur,change"}],name:[{required:!0,message:"请输入代码中文名称",trigger:"blur,change"}],nameEn:[{required:!0,message:"请输入代码英文名称",trigger:"blur,change"}],code:[{required:!0,message:"请输入代码值",trigger:"blur,change"}]}}},methods:{loadData:function(){this.loading=!0,NP(this.searchConditionList).then(function(e){console.log("comm code result -- >"+Bt()(e)),this.commCodeDataList=e.codesList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)})},_handleFilter:function(){this.loadData()},handleRegister:function(){this.dialogTittle="公共代码注册",this.dialogRegisterVisible=!0,this.codeCategories=[],this.getCodeCategories()},getCodeCategories:function(){var e=this;_P().then(function(t){console.log(Bt()(t));for(var a=t,i=0;i<a.length;i++)e.codeCategories.push({label:a[i].typeName,value:a[i].typeCode})}).catch(function(e){console.log(e)})},_registerCommCode:function(e){var t=this;this.$refs[e].validate(function(e){e&&PP(t.registerParaList).then(function(e){console.log("===>"+Bt()(e)),t.beforeCloseDialog(),t.$message({message:"保存成功",type:"success"}),t.loadData()}).catch(function(e){console.log(e)})})},_handleClearQuery:function(){this.searchConditionList={currentPage:1,pageSize:10,codeName:"",code:"",vendor:""},this.loadData()},beforeCloseDialog:function(){this.dialogRegisterVisible=!1,this.$refs.registerParaList.resetFields()},_handleEdit:function(e){this.dialogTittle="公共代码修改";var t=this.commCodeDataList[e],a=t.uuid;console.log("edit codeTypeUuid -- >"+a),VP(a).then(function(e){console.log("comm code  details -- >"+Bt()(e,null," ")),this.commCodeDetails=e,this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateCommCode:function(e,t){"save"===t?IP(e).then(function(e){this.dialogEditVisible=!1,this.$message({message:"保存成功",type:"success"}),this.loadData()}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleDeleteData:function(e){var t=this,a=this.commCodeDataList[e],i=a.uuid;this.$confirm("确定要删除公共代码'"+a.name+"'?', '提示'",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){EP(i).then(function(e){this.$message({message:"删除成功",type:"success"}),this.loadData()}.bind(t)).catch(function(e){console.log(e)})})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},changeCodeCategory:function(){console.log(this.registerParaList.typeCode)},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.currentPage;return a||(a=1),t*(a-1)+e+1}},watch:{"registerParaList.typeCode":function(e,t){this.changeCodeCategory()}},mounted:function(){this.loadData()}},rM=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-c flex-1"},[a("el-form",{attrs:{inline:!0,model:e.searchConditionList}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"代码中文名称"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入代码中文名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.codeName,callback:function(t){e.$set(e.searchConditionList,"codeName",t)},expression:"searchConditionList.codeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码值","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入代码值"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.code,callback:function(t){e.$set(e.searchConditionList,"code",t)},expression:"searchConditionList.code"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e._handleFilter}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("div",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleRegister}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"flex-1 flex-c"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.commCodeDataList,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width,"show-overflow-tooltip":"",sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.deleteTitle},on:{click:function(a){e._handleDeleteData(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogEditVisible},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("comm-code-edit",{attrs:{commCodeDetails:e.commCodeDetails},on:{saveCommCodeEvent:e._updateCommCode}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogRegisterVisible,"before-close":e.beforeCloseDialog},on:{"update:visible":function(t){e.dialogRegisterVisible=t}}},[a("div",[a("el-form",{ref:"registerParaList",attrs:{model:e.registerParaList,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码大类名称","label-width":e.formLabelWidth,prop:"typeCode"}},[a("el-select",{attrs:{placeholder:"请选择代码大类名称",clearable:""},model:{value:e.registerParaList.typeCode,callback:function(t){e.$set(e.registerParaList,"typeCode",t)},expression:"registerParaList.typeCode"}},e._l(e.codeCategories,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码值","label-width":e.formLabelWidth,prop:"code"}},[a("el-input",{model:{value:e.registerParaList.code,callback:function(t){e.$set(e.registerParaList,"code",t)},expression:"registerParaList.code"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码中文名称","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{model:{value:e.registerParaList.name,callback:function(t){e.$set(e.registerParaList,"name",t)},expression:"registerParaList.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码英文名称","label-width":e.formLabelWidth,prop:"nameEn"}},[a("el-input",{model:{value:e.registerParaList.nameEn,callback:function(t){e.$set(e.registerParaList,"nameEn",t)},expression:"registerParaList.nameEn"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{model:{value:e.registerParaList.remark,callback:function(t){e.$set(e.registerParaList,"remark",t)},expression:"registerParaList.remark"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.beforeCloseDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e._registerCommCode("registerParaList")}}},[e._v("注 册")])],1)],1)],1)])],1)},nM=[],cM={render:rM,staticRenderFns:nM},dM=cM,uM=a("VU/8"),pM=$e,mM=uM(lM,dM,!1,pM,"data-v-0359dd10",null),hM=mM.exports,fM={props:{configInfoDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0,checkStatus:!1,inputType:"text",showFlag:!1}},methods:{updateConfigInfo:function(){this.$emit("saveConfigInfoEvent",this.configInfoDetails,"save")},callBackCloseDialogEvent:function(){this.$emit("saveConfigInfoEvent",this.configInfoDetails,"cancel")},setConfValueFlag:function(){console.log("return encryptFlag --\x3e "+this.configInfoDetails.encryptFlag),this.configInfoDetails&&(0===this.configInfoDetails.encryptFlag?(this.checkStatus=!0,this.showFlag=!0,this.inputType="password"):1===this.configInfoDetails.encryptFlag&&(this.checkStatus=!1,this.showFlag=!1))}},watch:{configInfoDetails:function(e,t){this.configInfoDetails=e,this.setConfValueFlag()},checkStatus:function(e,t){this.inputType=!0===e?"password":"text"},deep:!0},mounted:function(){this.setConfValueFlag()}},gM=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.configInfoDetails}},[a("el-form-item",{attrs:{label:"配置项名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.configInfoDetails.configItem,callback:function(t){e.$set(e.configInfoDetails,"configItem",t)},expression:"configInfoDetails.configItem"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配置项的值","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{type:e.inputType},model:{value:e.configInfoDetails.value,callback:function(t){e.$set(e.configInfoDetails,"value",t)},expression:"configInfoDetails.value"}})],1),e._v(" "),e.showFlag?[a("el-form-item",{attrs:{label:"",prop:"checkStatus"}},[a("el-checkbox",{model:{value:e.checkStatus,callback:function(t){e.checkStatus=t},expression:"checkStatus"}},[e._v("是否明文显示")])],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"配置项类别代码","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",attrs:{disabled:e.isInptDisabled},model:{value:e.configInfoDetails.configTypeCode,callback:function(t){e.$set(e.configInfoDetails,"configTypeCode",t)},expression:"configInfoDetails.configTypeCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.configInfoDetails.remark,callback:function(t){e.$set(e.configInfoDetails,"remark",t)},expression:"configInfoDetails.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateConfigInfo}},[e._v("保 存")])],1)],2)],1)},vM=[],bM={render:gM,staticRenderFns:vM},DM=bM,yM=a("VU/8"),CM=yM(fM,DM,!1,null,null,null),_M=CM.exports,wM={components:{ConfigInfoEdit:_M},data:function(){return{dialogEditVisible:!1,dialogRegisterVisible:!1,configInfoDataList:void 0,configInfoDetails:void 0,codeCategories:[],instanceCodes:[],total:0,loading:!0,codeInstDetails:void 0,dialogTittle:"",checkStatus:!1,editTitle:"编辑",deleteTitle:"删除",inputType:"text",formLabelWidth:"140px",tableTitleList:[{colName:"配置项名称",prop:"configItem",width:360},{colName:"配置项的值",prop:"value",width:360},{colName:"配置项类别代码",prop:"configTypeCode",width:360},{colName:"备注",prop:"remark"}],searchConditionList:{currentPage:1,pageSize:10,codeName:"",code:"",vendor:""},registerParaList:{codeTypeUuid:"",configTypeCode:"",configItem:"",value:"",encryptFlag:1,remark:""},rules:{codeTypeUuid:[{required:!0,message:"请选择公共代码",trigger:"blur,change"}],configTypeCode:[{required:!0,message:"请选择公共代码",trigger:"blur,change"}],configItem:[{required:!0,message:"请输入配置项名称",trigger:"blur,change"}],value:[{required:!0,message:"请输入配置项值",trigger:"blur,change"}]}}},methods:{loadData:function(){this.loading=!0,MP(this.searchConditionList).then(function(e){console.log("config info result -- >"+Bt()(e)),this.configInfoDataList=e.configsList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)})},_handleFilter:function(){this.loadData()},handleRegister:function(){this.dialogTittle="配置项注册",this.dialogRegisterVisible=!0,this.codeCategories=[],this.instanceCodes=[],this.getCodeCategories()},getCodeCategories:function(){_P().then(function(e){console.log(Bt()(e));for(var t=e,a=0;a<t.length;a++)this.codeCategories.push({label:t[a].typeName,value:t[a].uuid})}.bind(this)).catch(function(e){console.log(e)})},_getCodeCategories:function(){this.registerParaList.configTypeCode="",this.instanceCodes=[],console.log("this.registerParaList.codeTypeUuid -- > "+this.registerParaList.codeTypeUuid),wP(this.registerParaList.codeTypeUuid).then(function(e){console.log("codes ---\x3e>>"+Bt()(e));for(var t=e,a=0;a<t.length;a++)this.instanceCodes.push({label:t[a].code,value:t[a].code})}.bind(this)).catch(function(e){console.log(e)})},_registerConfigInfo:function(e){var t=this;console.log("checkedstatus : "+this.checkStatus),this.$refs[e].validate(function(e){e&&FP(t.registerParaList).then(function(e){console.log("===>"+e),t.$message({message:"保存成功",type:"success"}),t.beforeCloseDialog(),t.loadData()}).catch(function(e){console.log(e)})})},_handleClearQuery:function(){this.searchConditionList={currentPage:1,pageSize:10,codeName:"",code:"",vendor:""},this.loadData()},beforeCloseDialog:function(){this.dialogRegisterVisible=!1,this.checkStatus=!1,this.registerParaList.encryptFlag=0,this.$refs.registerParaList.resetFields()},_handleEdit:function(e){this.dialogTittle="配置项信息修改";var t=this.configInfoDataList[e],a=t.uuid;console.log("edit rowData -- >"+a),$P(a).then(function(e){console.log(Bt()(e,null," ")),this.configInfoDetails=e,this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateConigInfo:function(e,t){"save"===t?UP(e).then(function(e){this.dialogEditVisible=!1,this.$message({message:"保存成功",type:"success"}),this.loadData()}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.currentPage;return a||(a=1),t*(a-1)+e+1}},watch:{"registerParaList.codeTypeUuid":function(e,t){this._getCodeCategories()},checkStatus:function(e,t){!0===e?(this.inputType="password",this.registerParaList.encryptFlag=0):(this.inputType="text",this.registerParaList.encryptFlag=1)}},mounted:function(){this.loadData()}},SM=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-c flex-1"},[a("el-form",{attrs:{inline:!0,model:e.searchConditionList}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"配置项名称"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入配置项名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.codeName,callback:function(t){e.$set(e.searchConditionList,"codeName",t)},expression:"searchConditionList.codeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码值","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入配置项的值"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.code,callback:function(t){e.$set(e.searchConditionList,"code",t)},expression:"searchConditionList.code"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e._handleFilter}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleRegister}},[e._v("添加")])],1)]),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"flex-1 flex-c"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.configInfoDataList,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width,"show-overflow-tooltip":"",sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogEditVisible},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("config-info-edit",{ref:"editPage",attrs:{configInfoDetails:e.configInfoDetails},on:{saveConfigInfoEvent:e._updateConigInfo}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogRegisterVisible,"before-close":e.beforeCloseDialog},on:{"update:visible":function(t){e.dialogRegisterVisible=t}}},[a("div",[a("el-form",{ref:"registerParaList",attrs:{model:e.registerParaList,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码类别","label-width":e.formLabelWidth,prop:"codeTypeUuid"}},[a("el-select",{attrs:{placeholder:"请选择代码类别",clearable:""},model:{value:e.registerParaList.codeTypeUuid,callback:function(t){e.$set(e.registerParaList,"codeTypeUuid",t)},expression:"registerParaList.codeTypeUuid"}},e._l(e.codeCategories,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公共代码","label-width":e.formLabelWidth,prop:"configTypeCode"}},[a("el-select",{attrs:{placeholder:"请选择公共代码",clearable:""},model:{value:e.registerParaList.configTypeCode,callback:function(t){e.$set(e.registerParaList,"configTypeCode",t)},expression:"registerParaList.configTypeCode"}},e._l(e.instanceCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"配置项名称","label-width":e.formLabelWidth,prop:"configItem"}},[a("el-input",{model:{value:e.registerParaList.configItem,callback:function(t){e.$set(e.registerParaList,"configItem",t)},expression:"registerParaList.configItem"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"配置项的值","label-width":"100px",prop:"value"}},[a("el-input",{attrs:{type:e.inputType},model:{value:e.registerParaList.value,callback:function(t){e.$set(e.registerParaList,"value",t)},expression:"registerParaList.value"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:2}},[a("el-form-item",{attrs:{label:"",prop:"checkStatus"}},[a("el-checkbox",{model:{value:e.checkStatus,callback:function(t){e.checkStatus=t},expression:"checkStatus"}},[e._v("是否加密")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{model:{value:e.registerParaList.remark,callback:function(t){e.$set(e.registerParaList,"remark",t)},expression:"registerParaList.remark"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.beforeCloseDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e._registerConfigInfo("registerParaList")}}},[e._v("注 册")])],1)],1)],1)])],1)},xM=[],kM={render:SM,staticRenderFns:xM},TM=kM,LM=a("VU/8"),NM=Ue,VM=LM(wM,TM,!1,NM,"data-v-420e216e",null),IM=VM.exports,EM={props:{softwareBatchDetails:{type:Object}},data:function(){return{formLabelWidth:"160px",isInptDisabled:!0,maxlength:30,tempRemark:void 0}},methods:{updateSoftwareBatchEvent:function(){this.$emit("saveSoftwareBatchEvent",this.softwareBatchDetails,"save")},callBackCloseDialogEvent:function(){this.$emit("saveSoftwareBatchEvent",this.softwareBatchDetails,"cancel")}},watch:{softwareBatchDetails:function(e,t){this.softwareBatchDetails=e}},mounted:function(){this.tempRemark=this.softwareBatchDetails.remark}},PM=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.softwareBatchDetails}},[a("el-form-item",{attrs:{label:"软件包批次名称","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwareBatchDetails.name,callback:function(t){e.$set(e.softwareBatchDetails,"name",t)},expression:"softwareBatchDetails.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"upgrade_el-input",model:{value:e.softwareBatchDetails.remark,callback:function(t){e.$set(e.softwareBatchDetails,"remark",t)},expression:"softwareBatchDetails.remark"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.callBackCloseDialogEvent}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e.updateSoftwareBatchEvent}},[e._v("保 存")])],1)],1)],1)},MM=[],$M={render:PM,staticRenderFns:MM},UM=$M,FM=a("VU/8"),RM=FM(EM,UM,!1,null,null,null),zM=RM.exports,AM={components:{SoftwarePckBatchEdit:zM},data:function(){return{dialogEditVisible:!1,dialogRegisterVisible:!1,softwareBatchDataList:void 0,total:0,loading:!0,softwareBatchDetails:void 0,dialogTittle:"",editTitle:"编辑",deleteTitle:"删除",formLabelWidth:"140px",tableTitleList:[{colName:"软件包批次名称",prop:"name",width:700},{colName:"备注",prop:"remark"}],searchConditionList:{currentPage:1,pageSize:10,codeName:""},registerParaList:{name:"",remark:""},rules:{name:[{required:!0,message:"请输入软件包批次名称",trigger:"blur,change"}]}}},methods:{loadData:function(){this.loading=!0,RP(this.searchConditionList).then(function(e){console.log("software batches result -- >"+Bt()(e)),this.softwareBatchDataList=e.batchesList,this.total=e.pageCount,this.loading=!1}.bind(this)).catch(function(e){this.loading=!1,console.log(e)})},_handleFilter:function(){this.loadData()},handleRegister:function(){this.dialogTittle="软件包批次注册",this.dialogRegisterVisible=!0},_registerSoftwareBatchs:function(e){var t=this;this.$refs[e].validate(function(e){e&&OP(t.registerParaList).then(function(e){console.log("===>"+e),t.beforeCloseDialog(),t.$message({message:"注册成功",type:"success"}),t.loadData()}).catch(function(e){console.log(e)})})},_handleClearQuery:function(){this.searchConditionList={currentPage:1,pageSize:10,codeName:""},this.loadData()},beforeCloseDialog:function(){this.dialogRegisterVisible=!1,this.$refs.registerParaList.resetFields(),this.loadData()},_handleEdit:function(e){this.dialogTittle="软件包批次修改";var t=this.softwareBatchDataList[e],a=t.uuid;console.log("edit rowData -- >"+a),zP(a).then(function(e){console.log("each software details: --\x3e "+Bt()(e)),this.softwareBatchDetails=e,this.dialogEditVisible=!0}.bind(this)).catch(function(e){console.log(e)})},_updateSoftwareBatchInfo:function(e,t){"save"===t?AP(e).then(function(e){this.dialogEditVisible=!1,this.$message.success("保存成功"),this.loadData()}.bind(this)).catch(function(e){console.log(e)}):"cancel"===t&&(this.dialogEditVisible=!1)},_handleDeleteData:function(e){var t=this,a=this.softwareBatchDataList[e],i=a.uuid;this.$confirm("确定要删除公共代码'"+a.name+"'?', '提示'",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){qP(i).then(function(e){this.$message({message:"删除成功",type:"success"}),this.loadData()}.bind(t)).catch(function(e){console.log(e)})})},handleSizeChange:function(e){this.searchConditionList.pageSize=e,this.loadData()},handleCurrentChange:function(e){this.searchConditionList.currentPage=e,this.loadData()},indexMethod:function(e){var t=this.searchConditionList.pageSize;t||(t=10);var a=this.searchConditionList.currentPage;return a||(a=1),t*(a-1)+e+1}},mounted:function(){this.loadData()}},OM=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("div",{staticClass:"flex-c flex-1"},[a("el-form",{attrs:{inline:!0,model:e.searchConditionList}},[a("div",{staticClass:"search-container"},[a("el-form-item",{attrs:{label:"软件包批次名称"}},[a("el-input",{staticClass:"appupgrade_el-select",attrs:{placeholder:"请输入软件包批次名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e._handleFilter(t)}},model:{value:e.searchConditionList.codeName,callback:function(t){e.$set(e.searchConditionList,"codeName",t)},expression:"searchConditionList.codeName"}})],1),e._v(" "),a("div",{staticClass:"btn-container"},[a("el-form-item",[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e._handleClearQuery}},[e._v("清空")]),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{type:"primary"},on:{click:e._handleFilter}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",plain:"",type:"primary"},on:{click:e.handleRegister}},[e._v("添加")])],1)]),e._v(" "),a("div",{staticClass:"border-divide"}),e._v(" "),a("div",{staticClass:"flex-1 flex-c"},[a("div",{staticStyle:{"margin-top":"15px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.softwareBatchDataList,stripe:"",border:"",height:"680"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"50"}}),e._v(" "),e._l(e.tableTitleList,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.colName,width:e.width,"show-overflow-tooltip":"",sortable:""}})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"el-icon-edit",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.editTitle},on:{click:function(a){e._handleEdit(t.$index)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",staticStyle:{"font-size":"15px",color:"#0078f4"},attrs:{type:"text",title:e.deleteTitle},on:{click:function(a){e._handleDeleteData(t.$index)}}})]}}])})],2)],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.searchConditionList.currentPage,"page-sizes":[10,20,50],"page-size":e.searchConditionList.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.searchConditionList,"currentPage",t)}}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogEditVisible},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("software-pck-batch-edit",{attrs:{softwareBatchDetails:e.softwareBatchDetails},on:{saveSoftwareBatchEvent:e._updateSoftwareBatchInfo}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTittle,visible:e.dialogRegisterVisible,"before-close":e.beforeCloseDialog},on:{"update:visible":function(t){e.dialogRegisterVisible=t}}},[a("div",[a("el-form",{ref:"registerParaList",attrs:{model:e.registerParaList,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"软件包批次名称","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{model:{value:e.registerParaList.name,callback:function(t){e.$set(e.registerParaList,"name",t)},expression:"registerParaList.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{model:{value:e.registerParaList.remark,callback:function(t){e.$set(e.registerParaList,"remark",t)},expression:"registerParaList.remark"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"cancel-btn",attrs:{type:"primary"},on:{click:e.beforeCloseDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:function(t){e._registerSoftwareBatchs("registerParaList")}}},[e._v("注 册")])],1)],1)],1)])],1)},qM=[],BM={render:OM,staticRenderFns:qM},WM=BM,QM=a("VU/8"),GM=Fe,HM=QM(AM,WM,!1,GM,"data-v-96c621fe",null),jM=HM.exports,JM=[{path:"/applicationupgrade/codeinstancemaintance",name:"CodeInstanceMaintance",component:KP},{path:"/applicationupgrade/commcodemaintance",name:"CommCodeMaintance",component:hM},{path:"/applicationupgrade/configinfomaintance",name:"ConfigInfoMaintance",component:IM},{path:"/applicationupgrade/softwarepckbatchmaintance",name:"SoftwarePckBatchMaintance",component:jM}],ZM=function(e){return mt.a.post("/egc-logservicecomponent/logservice/listLogs",e).then(function(e){return e.data})},KM=function(e){return mt.a.get("/egc-logservicecomponent/logservice/listSysCode",e).then(function(e){return e.data})},YM={data:function(){return{value:"",tableData:[],datevalue3:[],formInline:{ip:"",beginDate:"",endDate:""},currentPage:1,total:0,pageSize:10,pickerOptions0:{},dialogFormVisible:!1,formLabelWidth:"120px",form:{ip:"",url:"",operatorId:"",operatorName:"",type:"",dbusiness:"",operation:"",operateTime:"",completeTime:"",isSucess:"",errorDetail:"",responseMessage:"",requestMessage:"",sourcesysid:"",targetsysid:"",consuming:""},loading2:!1,systemCodeOptions:[],selectedSystemCodeOptions:[],multipleSelection:[]}},mounted:function(){this.getLogserviceSysCode(),this.loadData()},methods:{loadData:function(){this.loading2=!0;var e={currentPage:this.currentPage,pageSize:this.pageSize,beginDate:this.formInline.beginDate,endDate:this.formInline.endDate,userName:"",targetUrl:"",ip:this.formInline.ip,url:this.formInline.url,systemCode:this.value};ZM(e).then(function(e){this.tableData=e.logListVo,this.total=e.pageCount,this.loading2=!1}.bind(this)).catch(function(e){this.loading2=!1,console.log(e)}.bind(this))},onSubmit:function(){void 0!==this.datevalue3&&null!==this.datevalue3&&this.datevalue3.length>1&&(this.formInline.beginDate=this.datevalue3[0],this.formInline.endDate=this.datevalue3[1]),this.loadData()},resetForm:function(e){this.formInline.beginDate="",this.formInline.endDate="",this.formInline.ip="",this.formInline.url="",this.value="",this.formInline.datevalue3=[]},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e,this.loadData()},showEditDialog:function(e){var t=this.tableData[e];this.form.ip=t.ip,this.form.url=t.url,this.form.operatorId=t.operatorId,this.form.operatorName=t.operatorName,this.form.type=t.type,this.form.dbusiness=t.dbusiness,this.form.operation=t.operation,this.form.operateTime=t.operateTime,this.form.completeTime=t.completeTime,this.form.isSucess=t.isSucess,this.form.errorDetail=t.errorDetail,this.form.responseMessage=t.responseMessage,this.form.requestMessage=t.requestMessage,this.form.consuming=t.consuming,this.form.sourcesysid=t.sourcesysid,this.form.targetsysid=t.targetsysid,this.dialogFormVisible=!0},update:function(){this.dialogFormVisible=!1},removeData:function(e){var t=this,a=this.tableData[e];this.$confirm('确定要删除"'+a.name+'"?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},batchRemove:function(){this.multipleSelection.forEach(function(e){console.log(e.id)})},getLogserviceSysCode:function(){KM({}).then(function(e){this.systemCodeOptions=e}.bind(this)).catch(function(e){console.log(e)})}}},XM=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"LogServicediv"}},[a("el-form",{ref:"formInline1",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"系统"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.systemCodeOptions,function(e){return a("el-option",{key:e.description,attrs:{label:e.description,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用户IP"}},[a("el-input",{attrs:{placeholder:"用户IP"},model:{value:e.formInline.ip,callback:function(t){e.$set(e.formInline,"ip",t)},expression:"formInline.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"URL地址"}},[a("el-input",{attrs:{placeholder:"URL地址"},model:{value:e.formInline.url,callback:function(t){e.$set(e.formInline,"url",t)},expression:"formInline.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"时间范围"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.datevalue3,callback:function(t){e.datevalue3=t},expression:"datevalue3"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.resetForm("formInline1")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"拼命加载中"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===e.tableData[t.$index].isSucess?a("i",{staticClass:"el-icon-success"}):e._e(),e._v(" "),"0"===e.tableData[t.$index].isSucess?a("i",{staticClass:"el-icon-error"}):e._e(),e._v(" "),""===e.tableData[t.$index].isSucess?a("i",{staticClass:"el-icon-error"}):e._e(),e._v(" "),null===e.tableData[t.$index].isSucess?a("i",{staticClass:"el-icon-error"}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"integrate",label:"集成方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"响应类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"consuming",label:"耗时"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sourcesysid",label:"来源系统"}}),e._v(" "),a("el-table-column",{attrs:{prop:"targetsysid",label:"目标系统"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showEditDialog(t.$index)}}},[e._v("查看详细")])]}}])})],1),e._v(" "),a("div",{staticClass:"block text-center"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查看详细信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"记录用户IP","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请求报文","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0,type:"textarea",rows:2},model:{value:e.form.requestMessage,callback:function(t){e.$set(e.form,"requestMessage",t)},expression:"form.requestMessage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"响应报文","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0,type:"textarea",rows:2},model:{value:e.form.responseMessage,callback:function(t){e.$set(e.form,"responseMessage",t)},expression:"form.responseMessage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请求的URL地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"耗时","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.consuming,callback:function(t){e.$set(e.form,"consuming",t)},expression:"form.consuming"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作人ID","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.operatorId,callback:function(t){e.$set(e.form,"operatorId",t)},expression:"form.operatorId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作人姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.operatorName,callback:function(t){e.$set(e.form,"operatorName",t)},expression:"form.operatorName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作时间","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.operateTime,callback:function(t){e.$set(e.form,"operateTime",t)},expression:"form.operateTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"错误详细信息","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.errorDetail,callback:function(t){e.$set(e.form,"errorDetail",t)},expression:"form.errorDetail"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"来源系统","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.sourcesysid,callback:function(t){e.$set(e.form,"sourcesysid",t)},expression:"form.sourcesysid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目标系统","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.form.targetsysid,callback:function(t){e.$set(e.form,"targetsysid",t)},expression:"form.targetsysid"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)],1)],1)},e$=[],t$={render:XM,staticRenderFns:e$},a$=t$,i$=a("VU/8"),s$=Re,o$=i$(YM,a$,!1,s$,"data-v-1495c4ad",null),l$=o$.exports,r$=[{path:"/logservicecomponent/logserviceindex",name:"日志管理",component:l$}],n$=function(e){return mt.a.get("/egc-ismgcomponent/ismg/searchsms/list?"+e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},c$=function(e){return mt.a.post("/egc-ismgcomponent/ismg/sendsms",e).then(function(e){return e.data}).catch(function(e){return console.log(e)})},d$={data:function(){return{msg:"Welcome to Your Vue.js App index1,user group ! ",smsList:null,total:0,searchInSendChk:"",searchFixSendChk:"",searchSendTime:"",searchSMSCx:"",currentPage:1,dialogFormVisible:!1,detailRow:{smsId:void 0,sendTimeStr:void 0,mobiles:void 0,smsContent:void 0,addSerial:void 0,srcCharset:void 0,smsPriority:void 0},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value4:"",form:{smsId:void 0,sendTimeStr:void 0,mobiles:void 0,smsContent:void 0,addSerial:void 0,srcCharset:void 0,smsPriority:void 0}}},mounted:function(){this.initScrean(),this.handleFilter()},methods:{initScrean:function(){this.dialogFormVisible=!1},showDetailDialog:function(e){this.detailRow.smsId=e.smsId,this.detailRow.sendTimeStr=e.sendTimeStr,this.detailRow.smsContent=e.smsContent,this.detailRow.mobiles=e.mobiles,this.detailRow.addSerial=e.addSerial,this.detailRow.srcCharset=e.srcCharset,this.detailRow.smsPriority=e.smsPriority,this.dialogFormVisible=!0},handleFilter:function(){void 0===this.pagesize?this.handleSizeChange(10):this.handleSizeChange(this.pagesize)},handleSizeChange:function(e){this.pagesize=e;var t="";""!==this.searchInSendChk&&(t=t+"searchInSendChk="+this.searchInSendChk+"&"),""!==this.searchFixSendChk&&(t=t+"searchFixSendChk="+this.searchFixSendChk+"&"),""!==this.searchSendTime&&(t=t+"searchSendTime="+this.searchSendTime+"&"),""!==this.searchSMSCx&&(t=t+"searchSMSCx="+encodeURI(this.searchSMSCx)+"&"),""!==e&&(t=t+"pagesize="+e+"&"),""!==this.currentPage&&(t=t+"currentPage="+this.currentPage),n$(t).then(function(e){this.smsList=e.resultlist,this.total=e.total}.bind(this)).catch(function(e){return console.log(e)})},handleCurrentChange:function(e){this.currentPage=e,this.handleSizeChange(this.pagesize)}}},u$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-checkbox",{attrs:{label:"即时发送短信"},model:{value:e.searchInSendChk,callback:function(t){e.searchInSendChk=t},expression:"searchInSendChk"}})],1),e._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{label:"定时发送时间"},model:{value:e.searchFixSendChk,callback:function(t){e.searchFixSendChk=t},expression:"searchFixSendChk"}})],1),e._v(" "),a("el-form-item",[e.searchFixSendChk?a("div",{attrs:{align:"right"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss",align:"right"},model:{value:e.searchSendTime,callback:function(t){e.searchSendTime=t},expression:"searchSendTime"}})],1):a("div",{staticStyle:{float:"right"}},[a("el-date-picker",{attrs:{type:"datetimerange",disabled:"","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.searchSendTime,callback:function(t){e.searchSendTime=t},expression:"searchSendTime"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"短信内容"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:10,placeholder:"请输入要搜索的短信内容","prefix-icon":"el-icon-search"},model:{value:e.searchSMSCx,callback:function(t){e.searchSMSCx=t},expression:"searchSMSCx"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"action-btn",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticStyle:{clear:"both"}}),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.smsList,"default-sort":{prop:"sendTimeStr",order:"ascending"},height:"100%"}},[a("el-table-column",{attrs:{width:"170",label:"定时时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[""!=t.row.sendTimeStr&&null!==t.row.sendTimeStr?a("span",[e._v(e._s(t.row.sendTimeStr))]):a("span",[e._v("即时发送")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"400",label:"手机号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobiles))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"400",label:"短信内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.smsContent))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"扩展号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.addSerial)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"字符编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.srcCharset))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"90",label:"短信等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.smsPriority))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"短信ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.smsId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发送状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sendStatus))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showDetailDialog(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper","current-page":e.currentPage,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"短信细节",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("span",[e._v("短信ID："+e._s(e.detailRow.smsId))])]),e._v(" "),a("el-col",{staticStyle:{width:"5px"},attrs:{span:2}}),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[""!=e.detailRow.sendTimeStr&&null!==e.detailRow.sendTimeStr?a("span",[e._v("发送方式："+e._s(e.detailRow.sendTimeStr))]):a("span",[e._v("发送方式：即时发送")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("扩展号码："+e._s(e.detailRow.addSerial))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("span",[e._v("短信等级："+e._s(e.detailRow.smsPriority))])]),e._v(" "),a("el-col",{staticStyle:{width:"5px"},attrs:{span:2}},[e._v(" ")]),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:11}},[a("span",[e._v("字符编码："+e._s(e.detailRow.srcCharset))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("手机号码")]),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,readonly:""},model:{value:e.detailRow.mobiles,callback:function(t){e.$set(e.detailRow,"mobiles",t)},expression:"detailRow.mobiles"}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",[e._v("短信内容")]),e._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,readonly:""},model:{value:e.detailRow.smsContent,callback:function(t){e.$set(e.detailRow,"smsContent",t)},expression:"detailRow.smsContent"}})],1)],1)],1)],1)},p$=[],m$={render:u$,staticRenderFns:p$},h$=m$,f$=a("VU/8"),g$=ze,v$=f$(d$,h$,!1,g$,"data-v-a96aafaa",null),b$=v$.exports,D$={data:function(){var e=this,t=function(t,a,i){if(e.inputMobilesError=!1,""!==a){var s=a;s=","===s.substring(s.length-1)?s.substring(0,s.length-1):s,s=","===s.substring(0,1)?s.substring(1,s.length):s;var o,l=s.split(",");for(o in l){if(11!==l[o].length&&0!==l[o].length){e.inputMobilesError=!0,i(new Error("请输入有效的手机号码:"+l[o]+"出错"));break}if(0===l[o].length){e.inputMobilesError=!0,i(new Error("请输入有效的手机号码:某个手机号码为空号，请排查。"));break}if(!/^(((13)|(15)|(18))+\d{9})$/.test(l[o])){e.inputMobilesError=!0,i(new Error("请输入有效的手机号码:"+l[o]+"出错"));break}}e.inputMobilesError||i()}else e.inputMobilesError=!1,i()},a=function(e,t,a){""===t?a(new Error("请输入短信内容")):(t.replace(/[^\x00-\xFF]/g,"**").length>1e3&&a(new Error("短信内容过长")),a())},i=function(e,t,a){if(""===t)a(new Error("请输入短信ID"));else{/^(\d{1,19})$/.test(t)||a(new Error("请输入有效的短信ID: 数字位数最大19位")),a()}};return{pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"明天",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}},{text:"一周后",onClick:function(e){var t=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",t)}}]},sendModeRadio:"1",priorityOptions:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"}],value:"",inputMobilesError:!1,sendSMSForm:{sendTime:"",inputMobiles:"",mobiles:"",smsContent:"",addSerial:"",srcCharset:"",smsPriority:"3",smsId:"0"},rules:{inputMobiles:[{validator:t,trigger:"blur"}],mobiles:[{required:!0,message:"请输入电话号码",trigger:"blur"},{validator:t,trigger:"blur"}],smsContent:[{required:!0,message:"请输入短信内容",trigger:"blur"},{validator:a,trigger:"blur"}],smsId:[{required:!0,message:"请输入短信ID",trigger:"blur"},{validator:i,trigger:"blur"}]}}},mounted:function(){this.initScrean()},methods:{initScrean:function(){},autoGenID:function(){var e=new Date,t=e.getFullYear().toString()+e.getMonth()+e.getDate();t=t+e.getHours().toString()+e.getMinutes()+e.getSeconds()+e.getMilliseconds(),this.sendSMSForm.smsId=t},addMobile:function(){if(!this.inputMobilesError){this.sendSMSForm.mobiles=this.sendSMSForm.mobiles+","+this.sendSMSForm.inputMobiles;var e=this.sendSMSForm.mobiles;e=","===e.substring(e.length-1)?e.substring(0,e.length-1):e,e=","===e.substring(0,1)?e.substring(1,e.length):e,this.sendSMSForm.mobiles=e,this.sendSMSForm.inputMobiles=""}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;c$(t.sendSMSForm).then(function(e){return t.$msgbox(e,"返回执行结果")}).catch(function(e){return console.log(e)})})}}},y$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui-common"},[a("el-form",{ref:"sendSMSForm",staticStyle:{padding:"14px"},attrs:{model:e.sendSMSForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{float:"left","margin-top":"10px"}},[a("el-radio-group",{model:{value:e.sendModeRadio,callback:function(t){e.sendModeRadio=t},expression:"sendModeRadio"}},[a("el-radio",{attrs:{label:"1"}},[e._v("即时")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("定时")])],1)],1),e._v(" "),"2"===e.sendModeRadio?a("div",[a("el-date-picker",{staticStyle:{float:"right"},attrs:{type:"datetime",placeholder:"选择日期时间","picker-options":e.pickerOptions},model:{value:e.sendSMSForm.sendTime,callback:function(t){e.$set(e.sendSMSForm,"sendTime",t)},expression:"sendSMSForm.sendTime"}})],1):a("div",[a("el-date-picker",{staticStyle:{float:"right"},attrs:{type:"datetime",placeholder:"选择日期时间","picker-options":e.pickerOptions,disabled:""},model:{value:e.sendSMSForm.sendTime,callback:function(t){e.$set(e.sendSMSForm,"sendTime",t)},expression:"sendSMSForm.sendTime"}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"短信ID",prop:"smsId"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{maxlength:19},model:{value:e.sendSMSForm.smsId,callback:function(t){e.$set(e.sendSMSForm,"smsId",t)},expression:"sendSMSForm.smsId"}}),e._v(" "),a("el-button",{on:{click:function(t){e.autoGenID()}}},[e._v("生成ID")])],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"扩展号码",prop:"addSerial"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.sendSMSForm.addSerial,callback:function(t){e.$set(e.sendSMSForm,"addSerial",t)},expression:"sendSMSForm.addSerial"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticStyle:{float:"left"},attrs:{label:"短信等级",prop:"smsPriority"}},[a("el-select",{attrs:{placeholder:"请选择短信等级"},model:{value:e.sendSMSForm.smsPriority,callback:function(t){e.$set(e.sendSMSForm,"smsPriority",t)},expression:"sendSMSForm.smsPriority"}},e._l(e.priorityOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{float:"right"}},[e._v("手机号码")])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"inputMobiles"}},[a("el-input",{staticStyle:{width:"530px"},model:{value:e.sendSMSForm.inputMobiles,callback:function(t){e.$set(e.sendSMSForm,"inputMobiles",t)},expression:"sendSMSForm.inputMobiles"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2,align:"center"}},[a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(t){e.addMobile()}}},[e._v("添加")])],1)],1)],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:8}},[e._v(" ")]),e._v(" "),a("el-col",{attrs:{span:13}},[a("span",[e._v("例：13xxxxxxxxx,15xxxxxxxxx或18xxxxxxxxx")])])],1)],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{float:"right"}},[e._v("(字符串数组,最多为200个手机号码)")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:" ",prop:"mobiles"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6},placeholder:"添加电话号码"},model:{value:e.sendSMSForm.mobiles,callback:function(t){e.$set(e.sendSMSForm,"mobiles",t)},expression:"sendSMSForm.mobiles"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:2,align:"center"}})],1)],1),e._v(" "),a("div",[a("el-row",{staticStyle:{height:"5px"}})],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{float:"right"}},[e._v("短信内容"),a("br"),e._v("(最多500个汉字或1000个纯英文)")])]),e._v(" "),a("span"),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:" ",prop:"smsContent"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10},placeholder:"请输入内容"},model:{value:e.sendSMSForm.smsContent,callback:function(t){e.$set(e.sendSMSForm,"smsContent",t)},expression:"sendSMSForm.smsContent"}})],1)],1)],1)],1),e._v(" "),a("div",[a("el-row",[e._v(" ")]),e._v(" "),a("el-row",[e._v(" ")])],1),e._v(" "),a("div",[a("el-col",{attrs:{span:2}},[e._v(" ")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-phone",type:"primary"},on:{click:function(t){e.submitForm("sendSMSForm")}}},[e._v("发送")])],1)],1)],1)},C$=[],_$={render:y$,staticRenderFns:C$},w$=_$,S$=a("VU/8"),x$=Ae,k$=S$(D$,w$,!1,x$,"data-v-e9695f14",null),T$=k$.exports,L$=[{path:"/ismgapp/sendsms",name:"发送短信",component:T$},{path:"/ismgapp/searchsms",name:"发送历史记录查询",component:b$}];Oe.default.use(tt.a);var N$,V$=new tt.a({mode:"history",routes:[{path:"/",redirect:"/login"},{path:"/login",component:function(e){return new Promise(function(e){e()}).then(function(){var t=[a("mUOH")];e.apply(null,t)}.bind(this)).catch(a.oe)}},{path:"/401",name:"无权访问",component:function(e){return a.e(2).then(function(){var t=[a("+d21")];e.apply(null,t)}.bind(this)).catch(a.oe)}},{path:"/404",name:"找不到页面",component:function(e){return a.e(1).then(function(){var t=[a("aJif")];e.apply(null,t)}.bind(this)).catch(a.oe)}},{path:"/home",component:function(e){return a.e(0).then(function(){var t=[a("M9M8")];e.apply(null,t)}.bind(this)).catch(a.oe)},children:[{path:"/",component:function(e){return a.e(4).then(function(){var t=[a("Mxtm")];e.apply(null,t)}.bind(this)).catch(a.oe)}}].concat(et()(Tt),et()(Ot),et()(Uu),et()(Bm),et()(Jf),et()(_b),et()(vD),et()(GL),et()(nS),et()(r$),et()(rE),et()(mP),et()(JM),et()(L$))}]}),I$=a("NYxO"),E$=a("bOdI"),P$=a.n(E$),M$={getWindowHeight:function(e){return e.windowHeight},getHeaderStatus:function(e){return e.headerStatus},getUserInfo:function(e){var t=sessionStorage.getItem("userInfo");if(void 0!==t&&null!==t){var a=JSON.parse(t);console.log(a),e.userinfo=a}return e.userinfo},getUserResourcePermission:function(e){return e.userResourcePermission},getUserRouters:function(e){return e.userRouters}},$$={code:"00000",data:{userId:"linzhong123",userName:"lz",department:"用户与权限管理",roles:[{code:"3e50e1b79469412ea0f0177c0b9ce88c",name:"软件工程师"},{code:"c03de7fc47bd4b119f3bdfa12b6bad15",name:"写诗的人"}],uiResources:[{id:"1",title:"首页",icon:"el-icon-setting",url:"/home",menus:null},{id:"2",title:"智慧社区",icon:"el-icon-menu",url:"/mapanalysisapp/mapanalysisappindex",menus:[{icon:null,url:"/mapanalysisapp/index",title:"地图分析",subs:null}]},{id:"3",title:"主数据管理",icon:"el-icon-menu",url:"/mdmapp/mdmappindex",menus:[{id:null,title:"房屋主数据",url:"/mdmapp/housemanager",icon:null,submenus:null,items:null},{id:null,title:"人员主数据",url:"/mdmapp/personmanager",icon:null,submenus:null,items:null},{id:null,title:"设备主数据",url:"/mdmmgmt/device",icon:null,submenus:null,items:null},{id:null,title:"供应商主数据",url:"/mdmmgmt/providerlist",icon:null,submenus:null,items:null}]},{id:"2",title:"模型管理",icon:"el-icon-menu",url:"/modelmgmt/modelmgmtindex",menus:[{id:null,title:"模型算法管理",url:"/modelmgmt/modelalgorithmmgmt",icon:null,submenus:[{id:null,title:"基本信息管理",url:"/modelmgmt/baseinfomgmt",icon:null,submenus:null,items:null}],items:null},{id:null,title:"模型执行管理",url:"/modelmgmt/modelexcutionmgmt",icon:null,submenus:[{id:null,title:"计划管理",url:"/modelmgmt/planmgmt",icon:null,submenus:null,items:null},{id:null,title:"任务管理",url:"/modelmgmt/taskmgmt",icon:null,submenus:null,items:null}],items:null},{id:null,title:"系统管理",url:"/modelmgmt/systemmgmt",icon:null,submenus:[{id:null,title:"系统参数管理",url:"/modelmgmt/baseConfigMgmt",icon:null,submenus:null,items:null},{id:null,title:"元数据管理",url:"/modelmgmt/metacatmgmt",icon:null,submenus:null,items:null},{id:null,title:"节点管理",url:"/modelmgmt/dispatchnodemgmt",icon:null,submenus:null,items:null},{id:null,title:"数据同步管理",url:"/modelmgmt/datasyncmgmt",icon:null,submenus:null,items:null}],items:null}]},{id:"4",title:"更新升级",icon:"el-icon-menu",url:"/applicationupgrade/applicationupgradeindex",menus:[{id:null,title:"配置管理",url:"/applicationupgrade/configurationmgmt",icon:null,submenus:[{id:null,title:"服务器硬件",url:"/applicationupgrade/serverhardwarecfginfo",icon:null,submenus:null,items:null},{id:null,title:"网络设备",url:"/applicationupgrade/netdevice",icon:null,submenus:null,items:null},{id:null,title:"操作系统",url:"/applicationupgrade/osinfo",icon:null,submenus:null,items:null},{id:null,title:"数据库系统",url:"/applicationupgrade/databasesysinfo",icon:null,submenus:null,items:null},{id:null,title:"中间件",url:"/applicationupgrade/middlewaresysinfo",icon:null,submenus:null,items:null},{id:null,title:"运维管理",url:"/applicationupgrade/operationmaintance",icon:null,submenus:null,items:null},{id:null,title:"应用&服务",url:"/applicationupgrade/appandserviceinfo",icon:null,submenus:null,items:null}],items:null},{id:null,title:"软件包管理",url:"/applicationupgrade/sofwarepackagemgmt",icon:null,submenus:[{id:null,title:"软件包维护",url:"/applicationupgrade/softwaremaintance",icon:null,submenus:null,items:null},{id:null,title:"软件包依赖",url:"/applicationupgrade/softwarepackdependency",icon:null,submenus:null,items:null}],items:null},{id:null,title:"软件包下发",url:"/applicationupgrade/softwarepackagedispatch",icon:null,submenus:[{id:null,title:"下发操作",url:"/applicationupgrade/softwaredispatch",icon:null,submenus:null,items:null},{id:null,title:"下发历史",url:"/applicationupgrade/softwaredispatchhistory",icon:null,submenus:null,items:null}],items:null},{id:null,title:"元数据维护",url:"applicationupgrade/metadatamaintance",icon:null,submenus:[{id:null,title:"公共代码维护",url:"/applicationupgrade/commcodemaintance",icon:null,submenus:null,items:null},{id:null,title:"代码实例维护",url:"/applicationupgrade/codeinstancemaintance",icon:null,submenus:null,items:null},{id:null,title:"软件包批次维护",url:"/applicationupgrade/softwarepckbatchmaintance",icon:null,submenus:null,items:null},{id:null,title:"配置信息维护",url:"/applicationupgrade/configinfomaintance",icon:null,submenus:null,items:null}],items:null}]},{id:"5",title:"系统管理",icon:"el-icon-menu",url:"13",menus:[{id:null,title:"用户权限管理",icon:"el-icon-menu",url:"/usermgmt/userauthmgmt",submenus:[{id:null,title:"用户管理",url:"/userMgmt/userManagement/user",icon:null,submenus:null,items:null},{id:null,title:"部门管理",url:"/userMgmt/userManagement/department",icon:null,submenus:null,items:null},{id:null,title:"用户组管理",url:"/userMgmt/userManagement/userGroup",icon:null,submenus:null,items:null},{id:null,title:"角色管理",url:"/userMgmt/userManagement/role",icon:null,submenus:null,items:null},{id:null,title:"资源管理",url:"/userMgmt/userManagement/resource",icon:null,submenus:null,items:null},{id:null,title:"修改密码",url:"/usermgmt/userManagement/pwdedit",icon:null,submenus:null,items:null}]},{id:null,title:"查看小区用户",icon:"el-icon-menu",url:"/usermgmt/communityuserauthmgmt",submenus:[{id:null,title:"查看用户",url:"/userMgmt/userManagement/CommunityUser",icon:null,submenus:null,items:null},{id:null,title:"查看部门",url:"/userMgmt/userManagement/CommunityDepartment",icon:null,submenus:null,items:null},{id:null,title:"查看用户组",url:"/userMgmt/userManagement/CommunityUserGroup",icon:null,submenus:null,items:null},{id:null,title:"查看角色",url:"/userMgmt/userManagement/CommunityRole",icon:null,submenus:null,items:null},{id:null,title:"查看资源",url:"/userMgmt/userManagement/CommunityResource",icon:null,submenus:null,items:null}]},{id:"11",title:"短信网关",icon:"el-icon-menu",url:"33",submenus:[{id:null,title:"发送短信",url:"/ismgapp/sendsms",icon:null,submenus:null,items:null},{id:null,title:"发送历史记录查询",url:"/ismgapp/searchsms",icon:null,submenus:null,items:null}]},{id:"12",title:"日志管理",icon:"el-icon-menu",url:"33",submenus:[{id:null,title:"日志管理",url:"/logservicecomponent/logserviceindex",icon:null,submenus:null,items:null}]}]},{id:"6",title:"设备管理",icon:"el-icon-menu",url:"/devicemgmt/devicemgmtindex",menus:[{title:"信息维护",url:"/devicemgmt/deviceInfoMaintain",icon:null,subs:null},{title:"固件升级",url:"/devicemgmt/devicefirmwareupdate",icon:null,subs:null}]}],token:"eyJhbGciOiJSUzUxMiJ9.eyJzdWIiOiJsaW56aG9uZzEyMyIsImV4cCI6MTUxNTQ5NDI0Mn0.ERXV7NOoodRngLCVSemsxxJ_pdj3TxF92z5hkb7NMeKMPxJ3HCy4rogD-ndCDLw3A1AhTMxOgfLNCRYZG_vQfLwaFIlbNInmk0Q2wetMgN0EgwIt2LWDjEXkFfIst7aIS_0j6dAQHWnpEiKloyBUWWO-RGbgbbXjqdbaBfFIF98"},message:""},U$={headerStatus:!0,windowHeight:window.innerHeight,userinfo:$$.data,userResourcePermission:{},userRouters:""},F$=(N$={},P$()(N$,"SHOW_HEADER",function(e){e.headerStatus=!0}),P$()(N$,"HIDE_HEADER",function(e){e.headerStatus=!1}),P$()(N$,"SET_WINDOWHEIGHT",function(e,t){e.windowHeight=t}),P$()(N$,"SET_USERINFO",function(e,t){e.userinfo=t}),P$()(N$,"SET_USERRESOURCEPERMISSION",function(e,t){e.userResourcePermission=t}),P$()(N$,"SET_USERROUTERS",function(e,t){e.userRouters=t}),N$),R$={state:U$,mutations:F$,getters:M$},z$={showHeader:function(e){(0,e.commit)("SHOW_HEADER")},hideHeader:function(e){(0,e.commit)("HIDE_HEADER")},setWindowHeight:function(e,t){(0,e.commit)("SET_WINDOWHEIGHT",t)},setUserInfo:function(e,t){(0,e.commit)("SET_USERINFO",t)},setUserResourcePermission:function(e,t){(0,e.commit)(["SET_USERRESOURCEPERMISSION"],t)},setUserRouters:function(e,t){(0,e.commit)(["SET_USERROUTERS"],t)}};Oe.default.use(I$.a);var A$=new I$.a.Store({modules:{mutations:R$},actions:z$}),O$=a("XLwt"),q$=a.n(O$);Oe.default.prototype.$http=mt.a,Oe.default.use(Be.a),Oe.default.prototype.$echarts=q$.a,Oe.default.config.productionTip=!1,V$.beforeEach(function(e,t,a){if("/login"!==e.path&&"/401"!==e.path&&"/404"!==e.path){var i=sessionStorage.getItem("token");console.log(" beforeEach token: "+i),null===i?a({path:"/login"}):a()}else a()}),Oe.default.directive("has",{bind:function(e,t){Oe.default.prototype.$_has(t.value)||e.parentNode.removeChild(e)}}),Oe.default.prototype.$_has=function(e){var t=!1,i=[];return Array.isArray(e)?e.forEach(function(e){i=i.concat(e)}):i=i.concat(e),i.forEach(function(e){var i=sessionStorage.getItem("userResourcePermission");a("mw3O").parse(i)[e]&&(t=!0)}),t},new Oe.default({store:A$,el:"#app",router:V$,template:"<App/>",components:{App:Ye}})},NSss:function(e,t){},P1PD:function(e,t){},PLYA:function(e,t){},Q0dh:function(e,t,a){e.exports=a.p+"static/img/err.2f19166.png"},R7rF:function(e,t){},ROXV:function(e,t){},RUd5:function(e,t){},Rd7u:function(e,t){},Rl25:function(e,t){},S9Mz:function(e,t){},"TW/6":function(e,t){},Tgmq:function(e,t){},U4Lg:function(e,t){},UDos:function(e,t){},UG6m:function(e,t){},V0Z8:function(e,t){},V4w5:function(e,t){},X8ql:function(e,t){},"XXB+":function(e,t){},"Xit+":function(e,t){},Xm31:function(e,t){},XrzA:function(e,t){},Yf3Q:function(e,t){},YoQs:function(e,t){},Z2s9:function(e,t){},a63x:function(e,t){},aYyN:function(e,t){},bZVm:function(e,t){},"c/Op":function(e,t){},g2i7:function(e,t){},goBI:function(e,t){},hSND:function(e,t){},iQ58:function(e,t){},jFbp:function(e,t){},jV5P:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDE0IDc5LjE1Njc5NywgMjAxNC8wOC8yMC0wOTo1MzowMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTk2QkI4RkE3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTk2QkI4Rjk3NjE2MTFFNUE4NEU4RkIxNjQ5MTYyRDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjU2QTEyNzk3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjU2QTEyN0E3NjkyMTFFMzkxODk4RDkwQkY4Q0U0NzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WHowqAAAXNElEQVR42uxda4xd1XVe53XvvD2eGQ/lXQcKuDwc2eFlCAGnUn7kT6T86J/+aNTgsWPchJJYciEOCQ8hF+G0hFCIHRSEqAuJBCqRaUEIEbmBppAIBGnESwZje8COZ+y587j3PLq+ffadGJix53HvPevcuz60xPjec89ZZ+39nf04+9vLSZKEFArFzHA1BAqFEkShUIIoFEoQhUIJolAoQRQKJYhCoQRRKJQgCoUSRKFQKEEUCiWIQrFo+Gv/8/YH+f/nsMWSHHMChyhxqPTTdyncWyJ3ScD/ztipiB3wXSqu6P17avN+TyFC5ggv4tRnmoxWTP1+5F+Mz17GPvPl49EKBWd3UsfXllPiso8VcYtmPba3fNuKrBVXrGFCbrdPwXndFL49ltI367roOpSUI4pGypv9s7q+ltj6JxqOQ07Bo/DgxGb2/a8cX0CnAWXJ5etz2TqdHiXHKlKj9w6i9XX8Ic41DmI8FVHhmmXk85MmRhCzJoiTWnig9LfJRHihgydxzAxJhBr7Bh/hK3yu+p9568FliTJF2aKMZfVd/kQOcKP6OBmS9+Rjm4zJ6faoeN0gOUn61MncLX4CJ+MRhe+P/dRxhfew2Df4CF/hs4jWg8vQYUKYMuWyRRkLjeHQ8YP0Z9mekVjA8Qj3VVcuoeDiXu63lkUE0ym6FA5PXBaNVr7qtPumGyPR4Bt8hK/wWUR5chn6XJYoU5StUHL8l+XEx2axhkS6yk+chJuP4rXLyOkIKJkS0B67adcqfL/0Y4pixxSysK6V8Yl9Mz7i3272NRFlhzJsu24Z5l9E9Ahmwfrpoj7uw3fZtktsRZKjIXnndlLxin7+W8ZTBwPf6I+Tg9HwxK2Ob8citbCoBoaxBxMCvsFH+CqjHCtUvLzflKWUcpwB91gupG5f9/Rtx39ZZBtmWyJtphKzHTQW0diP36b4aJmcLj/zGaSkHJPb4SWFi/tOJd8bTqd9s48VBRh4RKeUX/vjgXg8cpyCmz05xkJylxSoa8M5RF0eJaVIIkGOsg2yTc3UgpD94psiWxEOqDNYoOIXuHnGwE5AXUTFi46FTnRw4l/dwEm7/pSxcYnCF/gE3zInh52RRJkVP7/MlKFQcgCbjifHTAQBfsb2qsgBO3e1Cpf3UXBej3nRJKKrxU/rcH/pKzz4vNIQuRJTEmZklbg6EL4SPsE3GQPzinmfhbJDGQolB+r8w58abs5y8DqRt4ABeptLRR7koY9NleybEYw/MPisvF/ayT1/SvDewcnIcG32wfiCAbEvoCZyGaGsitdyz6XdTctQJq6fcT5mloNfYvu5yFZkpEz+RT0UrFoqpxVBV+vQxIrkaPnrbqdvXs6hcjbU+Jq4Nvvwd/BFRNeq2npwWfkX95iyE9p6PM72P/MhCPANTBSKu5WITHcC074Y9CUTkYglKBgcV/aVtlM5Kpp/RHFjDdfka7MP/2wG6m72661QNigjlBXKTGBtsjWKNs5atCf44Uds3xc5YD8Wknd2BxWuGjCzIxLWQzlFj+IjU108OL7bafM5sm5DDdfka/8T+9AJXyTMpqFsUEYoK5SZ0NbjVlvX500Q4Ha2A+JuCcEvhVS8qp/8MzspHhMSfO7mVPaP35BMRp9JsCQldbX+hmvxNfnamzJfqVvtWnGZoGxQRigroYs6UbfvOGHn4ORVkTaIbEWwtqg3MNO+Zql0JGCdVuCayhDuG9uJB7vp+oR17FbZc+NauCauLWLmKkqXr6NsUEYoK6GtxwY6CXXnEs0n2faIHLCPhhR8bikFKwRN+xZddHWu5a7Ol9yCZ2ZwHKdOxufGNeKRqS/hmnLWW1VMmQSrl5oyEkqOPbZu02IJAsic9sU7B+5uF9cOmqUfeLOdOaAZYb/CA+M/Ic9NxUoYMNfD/PT84f7xB807EAnrrbgMUBZt1w1SEpCIqfjF1Om5EuQNth0iu1r8tPLP76LCpX2yWpHDk2dGH018p6brtD5hOHf04cR3okOTZ0lqPVAW3gVdlMhdrfsTW6drRhDgRrYJcbeKZQxTkenvegNt6YBQwrQvOxG+P3ZHEia9TuClS9Br1XKge8XnxLlxjelzZ/2w4tijDMxyoHIsVQg1zvYPcy7KeZx4jG2zyFakFJF7Whu1XT2QvhfJeryeVNdplYPo4Pi9hKd7VVxVC8O5cH4+N65hXgoKuGfEHmWAskjGxI49Ntu6XHOCAD9ie1PcLSepjDNY00fB8m6KpSyJx/jgg9LfJEfLK40818w+LXY5e5zKaMfKl+DcIlSCZp0cd3U59igDI4+WOa2LunvfvDoD9RrcNLqAjDy3yzfrtKqbAkggSDIZmSlYxzz9a8BaJ101zF2rh3BuSTJaCKGMDEGujHbedXch0X2ebbdEkkDC6a9cQoWVguS53P0JP5xcHY1W/tppD9KxgrdAw5QxnwPn4nOukrPeqkzBJb0m9oJltLtt3a07QYD1IkMAeS7/hw0BXMhzJwXJc/eV7kuiyIN8OOGuUhLP06JUeoxz4FxiZLRouTsDM9WO2OdBRtsIgrzHtk3kgH00JO+cTipc2S9jqyCaluf2xwcnfuB6LndHuEsSzdP4N/gtzoFzSZHRIsaQQiPmidyXgttsnW0YQYDvsh2ROGBPxkMqXjNA/qlCFsnZ8UdlX+kfk0pymlnMWH2JOBfz0sWI+C3OMS1dzPphhPVWHOPC5wdMzIUOzFFHb1lwB2ARF+ZOPt0gshWBPLe/wCRZlu6CIkSei/cE0fD4g2ZbVWceyxH5WPwGvzXrrSTJaDnG7oBoGS3qaCULggCPsv1W5IAd8tzLllJwvpx1WthMIfyg9OVotHy1WVQ4V37wsfgNfkuSZLQcW8Q4lruU/RVbRykrggDXiwwN3uQWnXTa1xMkz2W/on2lndNajpNtAGePw2/MOicBMlqs+8K7GBNbjrFgGe2iX0nUgiAvs+0S2YpgndaFPVRc3SdmVanZlfGjifOiw5PrT/oGvPpG/vDkEH4jZ70Vt86rl5rYimmdP41/s3Uzc4Isup9XNxwvz+0tyNAlONPrtO6hctR+QnluKqNt52O3pxvtClhvxTH0egtmEwbBMlrUxU21OFGtCHKYbavIATv3j90z26kIea4QZRtahfhIuT0anrjH7O3rpjNVHzPIaLG3Lh8Tj5TbRQihjlNyehxTwTLarbZOiiEIcBfbPnGhMtroChXW9JN/VqeYdyPEY4nwwPj6ZCL8C1T+T61JhDqRv8MxZgwlJG2BxzEsrBmgeEzseqt9ti6SNIIA8t6wm901eFDZ66d7M4UkQ56LVgTTvvtKaRqFqoTWymjxGb6LpUzrImYcuzaOIWKJmAptPWpaB2sd+V+yvSB1wB6s7qXgwiUyBpbJdBqFq6MjU18mKCKhRsTyEbx558/wnRmYJzLiV+DYBat6JQ/MX7B1UCxBAKHy3IQrH6W7MhY9MWkUMNAN948/8Mm35/jMDIKlpC3gmBWQtsAjifkE61b36kGQP7DdL7KrVZXnXiYpjYKZxj09Gh7f4kB4yIa/8ZmU1brIIYiYIXaJ3Nbjflv3xBME+DZbSVwIzfIIK89dJkSea18Ihu+XflD9yPztCJnW5Ri5VRntpNh8giVb5ygvBIHu9yaRrchYRO6fFU0CSTPQlDLte6zshx9O3g3D3yJajySd4EDaAsQMsRPaetxk61zty+YTCXRqjf9jO19cOLnyYV+p8QffpcreMXJ7BeRgh77Ds6SIYhGbMBgB2tld1DW0nGL4VxbZfKBbdUHdhol1dl7mOi0MOjttGgWT11lAwU9r1mMSsX0oxwSxgYyWOvKXtiAvBPkV239I7GqZdVqX9FDw2V5+UoYipn2nt/WRMK3LMQlW9poYCZ7WfcrWsdwSBNggMrRYdcLdhjas0+q28lzJOc8bOU7jWLh2AwzEyLxclYm6Z2ZuBEE+YLtTZEVA9tzPdBh5biJ3q5rGD8yRjXbNAPkcm0RuyjTUqf3NQBDge2yHJFaGeDyi4tUD5J3WIXmzs8Y9NDgG3un80OCYIDZCHxqHbJ2iZiEIGmnB8twgzYIkd7vMxiBON59GLJyBQLKMdiM1qOPXyMn2f2f7X5EDdshzkUbhAtED0oZMXCAGiIXgtAW/YXusURdr9NsoufLcgmP20zKy2ErrNSNGRuunMUAshL7zABq61q/RBPkd2yNSn57+X3ZTQZA8t7H3H5p7RwwEt6KP2DrUtAQBIIUsiwt99Kf+tydFntuocVhVRltNWyBTRlumGslopRNkhO1mkRVlLCT3jHYzqyU48WSN+1ZWRou0BZDRyp3Ju9nWnaYnCHA3216JlQWy0gKy557dJSaNQn0nKNL1VrhnwTLavbbOUKsQBBApzzVpFHqsPFdIGoW6AfeG7cMwrcv3TC0io80LQZ5me07kU3WkYqSlhYvkpFGoz8C8bO7RyGjlpi14ztaVliMIIFOeizQKbpI+WdsDGfLcWvcmsaK53b4gdUW3lENZXjxrgrzNdq/IAftohbzzOql4eV/zjUUcu96K7w33KFhGi7rxVisTBEBSxWPiiqYqz71mGfmDQuS5tSIHstHyPZnd7+XKaI+RgKSxEggySWmKaXkVaSwi5xSbRmGiSdZpxVZGy/eEexMso73R1o2WJwiwk+11kQNZrNO6oo+Cc7vz39Wy07q4l+CKfnNvQu/ndVsnSAkifcCOAXq7R8W1y9JdRvI87QvfnTRtgdPeujLavBLkv9meEPnUHS2Tf1EPFT67lOKRnE77munrsrkH/+IeydPXqAO/VoLMDMhz5T2irTzXpFHoKeRPnluV0XYX0mlduTLamIRJtKUR5CDbbSIrGPfX/eUdVFyTQ3luku6OaNIW/HmH5LQFt9k6oAQ5Ab7PNiyxkmGndUhRvTNyJM9F1wrZaM9IZbQmG63MocewxIejRIKg+DaKbEXGI3KWBtT2hUFKyonUZeEfB3xkX4vsM3wXvIx/IwmMqCu0WH/B9qLIpzG6Wp/rpWBFj/x1WnaCAb4G7LPgad0XbZmTEmTukDnti0yzgZvKcwNPtDzXyGjZR5ONFincVEbbVAR5je0hkU/lkTL5F3TZzQ2EvjysJr1hH/0LuiVPTz9ky1oJsgB8iwQsN5hplISns5Hn9hXl9eurMlr2zUzrVsQuk5m0ZUxKkIXhKNsWkQN2yHNPhzx3WbqQMRZGYCOjXWZ8FDzjtsWWsRJkEfgh2zvyOvhWnovsucu75GTPtdlo4RN8i+W+s3nHli0pQRaPIXEeVeW53V46YJciz2Uf4IvxiX0juW/9h/JQ8fJCkGfZnpE5YK9QsHIJBZcIkOdW141d3Gt8EiyjfcaWqRKk6Z84kOc6duODjmzluUZGyz4g6Q18UhltaxHkXbbtIgfsRyvknQt5bobZc6dltP3Gl0SudmW7LUslSJ1mPUbFeWVUepDnDpB3SgazRtW0BXxt+ABfhE7rypyVbCKCTLF9U2QrgjQKg3b7zskGv3eI0+XsuDZ8EJy2YJMtQyVIHfEztldFDtghz728j4LzGphGoZq2gK9ZMDuwiH3ngTJ7OG+VLY8EAeTKc9ts9lwk42zEOi2st+JrYZIA1xYso12Xx4qWV4K8xPZzka3ISCrPDVY1YJ1WtfVYZWW0ctdbPW7LTAnSQHyDJCoykEYhTNdpuUsK6YDZqQ85cG5cw6y3CsWmLYBXG/NayfJMkI8oVR/KG7AfC8k7u4MKVw2kM1r1eB2RpDNXuAauJVhGe6stKyVIBrid7YA4r6o5N5BG4cxOI3mtaeWtymj53LiG4FwmKJs78lzB8k4QVIsN4ryqynN7AzP1ShXIc2tYg3GuSpJO6/aKltHK3KWmhQgCPMm2R+SAfTSkANlzV9Rw2rc6MDcyWtHZaPfYsiElSPaQOYVYiSnxiIprB8kpeGn+v8U2mZD8FjxzTpybKjqtqwQ5Od5g2yGyq4Xsued3UeHSvsW3IlUZLZ8L5xSctmCHLRMliCBgN/AJcV7F6SpbjBe8gUWkUaimLeBzmOUsU2JltOMkcbd+JQiNkYB8ErNVbPe0Nmq72i4kXMiwNUnfe+AcOJfgfCWbbVkoQQTiR2xvivPKynODNX0ULF9AGoVq2gL+Lc4hWEaL2N/XTBWq2Qgic3BYled2+ekeVfOV51az0WKNF59DsIx2XbNVpmYkyPNsuyWSBBJYf+USKsxHnlvNRsu/8WXLaHfb2CtBcoD1Ir2CPJf/wxSt2xmkupGT9c6QtoCPNdO66FfJldGub8aK1KwEeY9tm8gB+2hI3jmdVLii/+RbBdktfHAsfpPIfSm4zcZcCZIjfJftiMQBO1IQQBrrn3qCRYZ20SOOMTLacbHrrRDjW5q1EjUzQbiTTzeIbEUgz+232XNne59RfX+CbLT9omW0iHFFCZJPPMr2W5EDdshzL1tKwfkzrNOqrrfi73CMYBntKzbGpATJL64X6RXWZRVtxlnP+VgaBZO2wEu/wzGatkAJUk+8zLZLZCuCdVoXciux+rhVuXYVMD7Dd7Hc9Va7bGyVIE0Amf3kaXnuIHm9qTwXhr/xmWAZbUXk+E4JsmAcZtsqcsAOee6Z7VS08lwY/sZngmW0W21MlSBNhLvY9onzCqtIxipUuKqf3L6iMfyNz4RO6+6zsWwJ+NRawNvep8S1IhMxucie+8VT0o+6PIqPiB17rG+lCtNqBPkl2wts14gbsCONwqVLzT8Fr7d6wcawZeBS60Hm1GSSTu+a6d5EY6cEyQ5/YLtf4oCd4iQ1ma3H/TZ2SpAWwLfZSqSYK0o2ZqQEaQ1AN32T1vs54yYbMyVIC+GBVuwyLLBL+kCr3rzb4oV/vdZ/jZESZHb8iqS9F5GFp2yMlCAtjCENgcZGCTI79rPdqWH4FO60sVGCKOh7bIc0DNM4ZGNCShAFEFKOsyDVARttTJQgGoJpPMb2Gw2DicFjGgYlyExYpyHQGChBZsfv2B5p4ft/xMZAoQSZFZso3TKo1VC2965QgpwQI2w3t+B932zvXaEEOSnuZtvbQve7196zQgkyZ6zXe1UoQWbH02zPtcB9PmfvVaEEmTeG9B6VIIrZ8RbbvU18f/fae1QoQRYMJKU81oT3dYwkJj1VguQOk9REaY2Pw4323hRKkEVjJ9vrTXQ/r9t7UihBaobr9V6UIIrZ8Wu2J5rgPp6w96JQgtQcG2jmhGl5QWzvQaEEqQsOst2WY/9vs/egUILUtZIN59Dv4ZyTWwmSEyDnUx7luRtJar4qJUjT4RdsL+bI3xetzwolSMOwTn1Vgihmx2tsD+XAz4esrwolSMPxLZK9XGPS+qhQgmSCo2xbBPu3xfqoUIJkhh+yvSPQr3esbwolSOYYUp+UIIrZ8SzbM4L8ecb6pFCC6BNbWw8lSB7wLtt2AX5st74olCDikPWskfRZNSVIi2OKst2+c5P1QaEEEYuH2V7N4Lqv2msrlCDisa5FrqkEUSwIL7E93sDrPW6vqVCC5AaN0l/kVZ+iBGlxfMR2awOuc6u9lkIJkjvcwXagjuc/YK+hUILkEgnVdxeRDfYaCiVIbvEk2546nHePPbdCCZJ7rMvJORVKkEzwBtuOGp5vhz2nQgnSNMBu6uM1OM84Nedu80qQFscY1SYfx2Z7LoUSpOlwH9ubi/j9m/YcCiWIDth1YK4EaUU8z7Z7Ab/bbX+rUII0PdY36DcKJUgu8R7btnkcv83+RqEEaRncwnZkDscdsccqlCAthQrbDXM47gZ7rEIJ0nJ4lO2VE3z/ij1GoQRpWaxb4HcKJUhL4GW2XTN8vst+p1CCtDw+Oc6Y6/hEoQRpCRxm23rcv7fazxRKEIXFXZRuwBDZvxUC4GsIREHflguDkyQqaVYotIulUChBFAoliEKhBFEolCAKhRJEoVCCKBRKEIVCCaJQKJQgCoUSRKFQgigUShCFIhP8vwADACog5YM65zugAAAAAElFTkSuQmCC"},jjAq:function(e,t){},"kN+3":function(e,t){},kO6s:function(e,t){},kgOi:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"c",function(){return l}),a.d(t,"a",function(){return r}),a.d(t,"d",function(){return n});var i=a("AWPb"),s="/egc-usermgmtcomponent",o=function(e){return i.a.post(s+"/admin/login",e).then(function(e){return e.data})},l=function(e){return i.a.post(s+"/admin/logout",e).then(function(e){return e.data})},r=function(e,t){return i.a.get(s+"/usermgmt/user/checkUserPwd?userName="+e+"&passWord="+t).then(function(e){return e.data})},n=function(e,t){return i.a.post(s+"/usermgmt/user/resetPassword?userUuid="+e+"&passWord="+encodeURIComponent(t)).then(function(e){return e.data})}},lBdV:function(e,t){},ltFl:function(e,t){},mKfZ:function(e,t){},mUOH:function(e,t,a){"use strict";function i(e){a("Z2s9")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),o=a.n(s),l={name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:16},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:160},contentHeight:{type:Number,default:40}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){return"rgb("+this.randomNum(e,t)+","+this.randomNum(e,t)+","+this.randomNum(e,t)+")"},drawPic:function(){var e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(var a=0;a<this.identifyCode.length;a++)this.drawText(t,this.identifyCode[a],a);this.drawLine(t),this.drawDot(t)},drawText:function(e,t,a){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var i=(a+1)*(this.contentWidth/(this.identifyCode.length+1)),s=this.randomNum(this.fontSizeMax,this.contentHeight-5),o=this.randomNum(-45,45);e.translate(i,s),e.rotate(o*Math.PI/180),e.fillText(t,0,0),e.rotate(-o*Math.PI/180),e.translate(-i,-s)},drawLine:function(e){for(var t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot:function(e){for(var t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"s-canvas"},[a("canvas",{attrs:{id:"s-canvas",width:e.contentWidth,height:e.contentHeight}})])},n=[],c={render:r,staticRenderFns:n},d=c,u=a("VU/8"),p=u(l,d,!1,null,null,null),m=p.exports,h=a("kgOi"),f=a("LOkV"),g=a("Av7u"),v=a.n(g),b={components:{SIdentify:m},data:function(){var e=this;return{identifyCodes:"1234567890",identifyCode:"",contentWidth:330,contentHeight:40,ruleForm:{username:"test",password:"test",verifycode:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],verifycode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:function(t,a,i){console.log("validateVerifycode:"+a),""===a?i(new Error("请输入验证码")):a!==e.identifyCode?i(new Error("验证码不正确!")):i()},trigger:"blur"}]},isBtnLoading:!1}},computed:{btnText:function(){return this.isBtnLoading?"登录中...":"登录"}},methods:{submitForm:function(e){var t=this,i=this,s=a("mw3O");i.$refs[e].validate(function(e){if(!e)return i.isBtnLoading=!1,console.log("error submit!!"),!1;var a=v.a.enc.Utf8.parse(i.ruleForm.password),l=v.a.enc.Base64.stringify(a);console.log(" base64: "+l);var r=s.stringify({username:i.ruleForm.username,password:l});i.isBtnLoading=!0,Object(h.b)(r).then(function(e){i.isBtnLoading=!1,console.log(e);if(e.data.token){sessionStorage.setItem("login_username",i.ruleForm.username),sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("userInfo",o()(e.data)),console.log(e.data),t.$store.dispatch("setUserInfo",e.data);var a=o()(e.data.uiResources);sessionStorage.setItem("meuns",a);var s={},l="";l=Object(f.c)(t.$store.getters.getUserInfo,s),sessionStorage.setItem("userRouters",o()(l)),sessionStorage.setItem("userResourcePermission",o()(s))}else i.isBtnLoading=!1,i.$message.error("登录不成功，请重试。。。");void 0!==e.data.status?"2"===e.data.status||"5"===e.data.status?i.$router.push("/usermgmt/userManagement/pwdedit"):"3"===e.data.status?(i.isBtnLoading=!1,i.$message.error("登录不成功，您登录太频繁已拒绝您的登录。。。")):"4"===e.data.status?(i.isBtnLoading=!1,i.$message.error("登录不成功，您的帐号被管理员暂停使用")):i.$router.push("/home"):i.$router.push("/home")}).catch(function(e){i.isBtnLoading=!1,Object(f.b)(e)})})},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var a=0;a<t;a++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]}},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)}},D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrap"},[a("div",{staticClass:"ms-login"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[a("div",{staticClass:"ms-title"},[e._v("恒大集团智慧云平台")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"verifycode"}},[a("el-input",{attrs:{placeholder:"验证码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.submitForm("ruleForm")}},model:{value:e.ruleForm.verifycode,callback:function(t){e.$set(e.ruleForm,"verifycode",t)},expression:"ruleForm.verifycode"}})],1),e._v(" "),a("el-form-item",[a("s-identify",{attrs:{identifyCode:e.identifyCode,contentWidth:e.contentWidth,contentHeight:e.contentHeight},on:{click:e.refreshCode}}),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",attrs:{type:"text"},on:{click:e.refreshCode}},[e._v("看不清，换一张验证码")])],1),e._v(" "),a("div",{staticClass:"login-btn"},[a("el-button",{attrs:{type:"primary",loading:e.isBtnLoading},nativeOn:{click:function(t){e.submitForm("ruleForm")}}},[e._v(e._s(e.btnText))])],1)],1)],1)])},y=[],C={render:D,staticRenderFns:y},_=C,w=a("VU/8"),S=i,x=w(b,_,!1,S,"data-v-7c14ab38",null);t.default=x.exports},mZ47:function(e,t){},n7eO:function(e,t){},o6Ha:function(e,t){},oP9q:function(e,t){},oXOz:function(e,t){},p87K:function(e,t){},pGp6:function(e,t){},qCjU:function(e,t){},r1qB:function(e,t){},sDj5:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAQXklEQVR4Xu2dfYxc1XnGn3d2DbueOxhKQkjbQD5agVqsJNSS/yhERC5BxXGkRknauFEIShsgShU7gZ1ZIPECNXuvkWqifEGkENoGkjSqmhQ7TZFoKXFVWaIOCkQJUUMiiEJDqhCYO7vG9s5bXRsDxt49H/Nx77nn8b/7vOec9/eex/e8M2dmBPxHAiSwLAEhGxIggeUJ0CDcHSSwAgEahNuDBGgQ7gES8CPAJ4gfN0ZFQoAGiaTQTNOPAA3ix41RkRCgQSIpNNP0I0CD+HFjVCQEaJBICs00/QjQIH7cGBUJARokkkIzTT8CNIgfN0ZFQoAGiaTQTNOPAA3ix41RkRCgQSIpNNP0I0CD+HFjVCQEaJBICs00/QjQIH7cGBUJARokkkIzTT8CNIgfN0ZFQoAGiaTQTNOPAA3ix41RkRCgQSIpNNP0I0CD+HFjVCQEaJBICs00/QjQIH7cGBUJARokkkIzTT8CNIgfN0ZFQoAGiaTQTNOPAA3ix41RkRCgQSIpNNP0I0CD+HFjVCQEaJBICs00/QjU0yAdPQ1LC6+DyGvR6J8N6Bo/PIFGpa25QFdeuWXXxyBzOoXFhcsAvQqCN1aO9DgXlCb1qes4uZ1grnqAbOfvh+BmAL9VMs9qTE+DDK0OYRtki56Kk3tfhmDj0IjUYSAaZGhVDNcg1+RvwgR28alxgr1Ag0RukJn8YjRw79Ao1G0gGmRoFQ3vCTL73LnoH3wQgubQKNRtIBpkaBUNyyBzegoWew9DcNbQCNRxIBpkaFUNyyDt/F4ILh5a9nUdiAYZWmXDMUindyWgnx9a5nUeKESDdHrbgL4gTW4ARKtSnjAMcnX3DEzIY+59h/4HVB6C6K+rAnws6wjtnfTZ3qVQvQdAA8Au9JubsUO6Y2FlmCQMg3TyvwGw1R6Y5tDG+5A1v2kfQ2UpBGb2nwM5uBciL14HUn0UjVXvwPzUj0pZ00smrb5BZvV09HtPQDBtBUvxFHTyLdgx9aiVnqLyCBQvuuzP9wJy7vGL0Gehjc3ImrvLWyBQfYN0ujcC8gk7SPo0sGod0qnH7PRUlUqgne9a8RaEQiF6Y5l9SbUNMqcnYTF/EiK/YVVI1fcia33VSktRuQTaeQeCectFlNaXVNsg7e57IPI1a4hpsslSS1mZBNr5JRB823EJM0iTWxxjBpZX3SBfh8i7rLJUPQ9Z6/tWWorKI3Cipty0GsVuZM1NZbz8W3GD5AtWzbniPmTJH5k48+8lE9iq0zg533fipnyZtSkex3RzLebk2TJWX12DzHTfiob8mxUUkU2YbxY3e/mvygTa+V0QbHZY4gIgFyBtftchZqjS6hqk3fskRG8wZqtYxNPNNfiCHDRqKSiPgFtTfnSdm5EmXylv0VV+mbeT/yuAtxnhqH4DWetPjDoKyiNw7DvltuvIkCYdW/GodNV9gnTy/wXwKnPi8kGkzTvMOipKIXDdwmtwaOnhY94pNy1E9QFkyUVlNOUvX1o1DdLWNZCe3f2phq7Fza1HTMz59xIIFE35Sb09EJxvPXvRlDd0HeZbv7SOGaGwogZZvACy9B2rvEO8uWqVWA1EATblgTxB8s0Q3GXcIoqHkCVvNuooGD+BQJvyUAxyNQQ275p+DWnyZ+OvPmdckcDs4oXQpfufv75uB0vxKWTJFjvx+FQVPWJ1b4LI9UYMii8iS/7CqKNgfAQON+X94jsDzrCetGjKp5MNmJND1jFjEoZukFuRJQ6fExkT1VinqUFTHsgRy/IJAr0JaeuTse7HyuVdg6Y8DIN0unOAbDNvAL0BoX281JxUmIqZfAsa2Om4+MuRJnc6xoxVXs0jFg0y1k0w8GRFU95fug+CVdZjqd6OrHWltb4kIQ1SEvjaTFuzppxHrNrszAokUsOmnAapwL6qzRI6edE/XGadj+IgRNaXeX3deq3PC3nEciVG/RECXl/kJ1chbd4WEkIaJKRqVWWtNW7KecSqyiYLdR01b8ppkFA3ZhXWPaeTWOztdby+/hQael5Vrq+7YuQRy5VYzPp29zaIXGGNoGjKGxMbMD9t99EF64HHJ6RBxsc67Jkiacp5xAp7m5az+oiachqknC0W7qyz3VeiL4+4XV/HPkw311fx+rprIXjEciUWk/5wU57fB5G3WKddfLv+ZGMdtq9+wjqmwkIapMLFKX1pETblPGKVvusCWUCkTTkNEsj+LHWZnd6boVq832F/fR34W6TJB0pd9wgm5xFrBFCDHvJIU158ptz+p7YV+3CgeQF2ymLQuZ9g8TRI3So6SD5syo+jR4MMsqHqFsumnAap254eWj6dvOgfvuQ0Xh9bsSO51SkmMDGfIIEVbCTLLZpy6B4Aq63HV9yNLPlza32gQhok0MINbdlsyldESYMMbacFOBCbcmPRaBAjohoL2vmtEHzUIcM+ZOKikK+vO+R6WEqDuBKri76TvxfA3U7pKGaRJalTTOBiGiTwAnotn025NTYaxBpVTYRsyp0KSYM44QpdrIJ2fr/b9XV9BpMTa+tyfd21gjSIK7GQ9Z286B/aDin0ceQ36L/lEFMrKQ1Sq3KukAybcq9K0yBe2AILYlPuXTAaxBtdIIFzegoWew87XV+H/hDPJefX8fq6a9VoEFdiQemLprx3DwQbrZet+gx01XrsmHrUOqbGQhqkxsUFm/KBq0uDDIywogOwKR9KYWiQoWCs2CAz+89B49A+x+vru5Elb69EJp1crdaRJiPfvyOfwCrRl4v4G4Ve2A4HFU35/nwvIOfaD6I/xFRSfNHbs/YxI1TSIAa4NIjn7qtJU06D0CCeDlg5rC5NOQ1CgwzdILO9S6G6223civ7OPA1Cg7htZIO6aMrl4F6IrLEeV7EbWXMTIHYNsfXAQxDSIDTIELbRkSHq0JQf9yINX8UynKW7c4BsM2+iih4RzAsfkqImTTkN4rgf+CqWHTBrTi8ZTmRj5a+v84jFI5adA1ZQHWnK7wHQcBgrQ5p0HPTlSGkQGmSgnVe3ppxHLMftYH10iLAHqWNTToPQII4Elpe3811O19eBBfQnzw/q+jqPWDxieRmmnXcgmHeM3Yw0+YpjTLlyGoQGcd6BdW7KecRy3A7sQY4FVvemnAahQRwJvCjfqtM4Od/ndH1d8Timm2src33dNXkesXjEst4z7fwuCDZb64umHHIB0uZ3HWKqJaVBaBCrHRlLU84jltV2eFHEHgSIqSmnQWgQJwLXLbwGh5Yedru+rg8gSy6q5PV1p+QB8IjFI9ayBIqm/KTeHgjOt95XRVPe0HWYb/3SOqbKQhqEBlmWQIxNOY9Yjv9dxdqDxNqU0yA0iJHA7OKF0KX7na6vKz6FLNliHDs0AY9YPGIdQ+BwU95/EIIzrPey6gOYTjZgTg5Zx4QipEFokBcIsCk/fjPQIDTICwTYlNMgzk/2WJr0mXwLGtjpyOdypMmdjjFhyfkE4RMERVPeX7oPglXWu1f1dmStK631oQppkMgNwqZ85Q1Ag0RsEDbl5ucaDRKxQTp50T9cZt4lzysUByGyPujr69bJPi+kQSI1SKd3JaCfd9svchXS5m1uMYGraZAIDcKm3N61NEhkBmFTbm+OQkmDRGSQOZ3EYm+v4/X1p9DQ82pzfd3NHjSIkVed3ihsd2+DyBXGnI8Kiqa8MbEB89PfsY6pm5BPkEieIGzK/axLg0RikJnuW9HA1wE53WqnxPJOuQkGDRKJQYo024tnAUv/DMEbV8xasQ/TzeKnmOt3fd1kiJf/nQaJyCBFqnM6hf294g3CPz1h5oqnMNlYh+2rn3DdS7XU0yCRGeRoup3841BkEEy8QIBN+fGbgQaJ1CBF2sf1JRG+U2567NEgERvk2L7kIaTJB0z7Jbq/0yCRG+RIX7IaQB9zsj86A5gSpkFoENMeifrvNIih/O3e9RC9ybhJVG9E1rL4PXXjSBRUiQANYjJIfjUEt1jUbCfS5GMWOkpCIbBFT8VU72nzcvVZpK01Zt1gChksfETRne5HAPm0xeh3IE0+aKGjJBQCncXXAks/sVjuL5AmZ1roBpJU0yDtfDMEd5kz039E2nqXWUdFMASuyd+ECZh//Ef1B8havzfqvKppkE63+Br/fzcmr7oHWetCo46CcAi080sg+LbFgu9FmlxioRtIUk2DXLP/dzFx6EfGzFR/jax1mlFHQTgE2vkMBJnFgsdyvK6mQea0gcXegWOuZCxHTCfORjb9uAVQSkIgYPtNk4o2smTHqFOqpkGKrNv59yBYawQgsgnzzV1GHQVhEGjnj0Dw+xaL/WOkic1RzGKo5SVVNojdr7sqbkWWbB2IAoOrQeDa3qvR159bLaaBM3Fz8gsr7QCi6hrE9qVe1R8ja/3OAAwYWhUC7d5fQvQLxuUofoIseb1RNwRBdQ1i+3JfAUEmz8H8lLmpHwIwDjFCAp3uNwF5h3EGxd8hS+y/fM84YIhHrGLNne7/2X1cVbcjbV0/AAeGlk3gmvxMTOBJq2UI3o/55O+ttAOKqvsEKRJr53dAcLkxR9Vf4UDy29gpi0YtBdUk0MlvBjBrXJxiCdPNUzEnuVE7BEG1DTLbuxSqu+3y1L9C2vqMnZaqShGY0RYkfxwipxrXpfgXZMmlRt2QBNU2CFTQ6RWP3VcZ81V9BgeS12On/MqopaBaBDrdzwLyYbtFNd6JdPU/2WkHV1XcIMUxq3ctRLdbpar4B2TJib8YwWoAisZOYHbhD6H9PVbzKn6GrHkWIGqlH4IoAIPoGkj+M0ASq3xV/xpZ6xNWWorKJXBt9zz0cb/dCzHFUsd/jK6+QQou7bz4JpAZ62ryC9isUZUmnMk3oKHfsP6PD3gSafKb415vGAaZ1dPRz//Hqok7SlDxIBqNLehPP4JMnhk3WM63DIHZ586FHngfINe5MZIrkDbNbyK6DWpUh2GQIo1O70OA3m7MiII6EvhvpMm6MhILxyBHjlr3QnBxGaA4Z0kEFD3o5B9gx9SjZawgLIN09DRor7jtOfazaBnF4ZzFNSLZiPnmt8piEZZBjjxFiivw/wVBsyxonHdMBFS2IWveOKbZTjhNeAY5bJLeRojyMyBl7pzRz30n0sR8zWjE6wjTIAWU2YX10H7xjuqrR8yIw4+TQHHXCrgeWZKOc9rl5grXIIdNoqdDe3cDeFsVYHINAxN4EtJ4N+ZX/+fAIw1pgLANchRC8RKw9rdD5BVD4sJhxk1A5dOQ1duQisWXxo1vcfUwSMHram2icfgTaR+ByBvGh5AzeRMoLphCvoj+5Odwy9SPvccZYWB9DPJSSB/XV2DVwuvQl7Mh/bMgesoIGXJoWwLaOISGPgFMPIaG/jSEX9Sqp0FsC0YdCRgI0CDcIiSwAgEahNuDBGgQ7gES8CPAJ4gfN0ZFQoAGiaTQTNOPAA3ix41RkRCgQSIpNNP0I0CD+HFjVCQEaJBICs00/QjQIH7cGBUJARokkkIzTT8CNIgfN0ZFQoAGiaTQTNOPAA3ix41RkRCgQSIpNNP0I0CD+HFjVCQEaJBICs00/QjQIH7cGBUJARokkkIzTT8CNIgfN0ZFQoAGiaTQTNOPAA3ix41RkRCgQSIpNNP0I/D/FfmOI+jRD8oAAAAASUVORK5CYII="},todT:function(e,t){},tugZ:function(e,t){},tvR6:function(e,t){},"u8/i":function(e,t){},uL5P:function(e,t){},wTjo:function(e,t){},woQt:function(e,t){},xlaU:function(e,t){},xmwT:function(e,t){},y55A:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAANTklEQVR4Xu2ca4ycVRnH/2e70bYzo0D5ogQINjUmoiREUPCSSNQYNUQxAiJqiB8E5JIqdGbhS721M1ZtIdw/EC8RNCEQgzHxgsZ4IYC1XIKJiRGJqFFTKOw726rsHDMtjaXdnXnf5zzzvu+wv/18nuec8zv772/P2Z0G8QUBCCxLIMAGAhBYngAB4bsDAiMIEBC+PSBAQPgegICNAAaxcaNqhRAgICvkoNmmjQABsXGjaoUQICAr5KDZpo0AAbFxo2qFECAgK+Sg2aaNAAGxcaNqhRAgICvkoNmmjQABsXGjaoUQICAr5KDZpo0AAbFx86u6du+JWlx8m6KOVwj/VIw71Ws+4jcBnVIIEJAUeqm17f4lCvGmI9pE7VCvuTG1PfXpBAhIOkNbh00Lp2tm8MDyxfFydVs32JpT5UWAgHiRLNqnk90n6awRAXlG3dYxRdsy3pcAAfHlmb9bO8sU1BhdMLte3dV/yt+Ukd4ECIg30Tz9PhJXaX3/+bFD46q3q7fmV2PHMWBiBAjIxNCOaExAqqBumpOAmLAlFhGQRIDllROQ8lj/fyYCUgV105wExIQtsYiAJAIsr5yAlMcag1TBOnFOApII0FSOQUzYqigiIFVQJyBVUDfNSUBM2BKLCEgiwPLKCUh5rLmDVME6cU4CkgjQVI5BTNiqKCIgVVAnIFVQN81JQEzYEosISCLA8soJSHmsuYNUwTpxTgKSCNBUjkFM2KooIiBVUCcgVVA3zUlATNgSiwhIIsDyyglIeay5g1TBOnHO9IB0svdK2qwYNygEPkOdeCCUmwn8VVEPK8xe4fkx5bSAdOYvlcKN5i1RCAFvAlF7NdCZ2tZ82KO1PSDX9F+lQfyjpLUeC6EHBBwJPKBu8y0e/ewB6WQflXSHxyLoAQF3Av9urNP28HRq34SA9K+V4pdSF0A9BCZCIM68Vb21v0ntbQ/Icv9tZuqKqIeAB4EQX6+trd+ntrIHZG7hDMVBckJTN0A9BJYgsE/d5hoPMvaADGdvZ99T0LkeC6EHBBwJXKNuc6tHv7SADFfQybZImvNYDD0gkEwghhvVa1yW3OeFBukBGTbaHNdqb3+9QlxnXlicOVMhfnlM/U4pZuY5KHyJEgiLinpQIdytbuMhz036BMRjRe1sh4KuHNkqak69ZtdjOnpAIA+BOgXkOwq6YHRA4s3qtS7NszHGQMCDQJ0CcqeCzh8TkFvVa13ssXF6QCAPAQKShxJjViwBArJij56N5yFAQPJQYsyKJVCngOS5pHMHmfZv1av3bVAYrNNsfFJbGn+v+3bqFJDpuaR39r1GcfFChbhXg5kn9J81P9WOsKcWh73/b+R0rAbxKYX4oHqtx2uxrrnskxrE6xTCKw9Zz0PS7AXqrh5+bKKWXwSk6LG0syODHPU3zay6QFvX/KJoO7fxw48fxHiTQjjqsJ49dZsdt3ksjeayjyvqW0uXxt2KzfXqhWctrSddU5+AdLLhZ0uGnzFZ/ivGan/E6mTDX1K2lznoZxSaG7Q17J70oR3R/5rsjRrokRHzXqRu8xulr+vghO35fymEY0fMv13d5mcrW9+IiesTkKX+ZT584VUGpL33BIXFJ0cfYtisbuPzpR90O/uxgt49Yt4/q9s8qfR1DSdsZ29Q0KNj5t6pbvNNlaxvzKR1Cki9L+mbsos0o9tH84z3qNs6p/SD7mRx7JyxcVQlP8a0++9XiD8Y85PBHvVaR4/dQwUD6hSQel/S2/OXK4Trx5zRLnWbp5Z6jptiSzP958bOOaNTtKU57l/ysW0KD5jrf0Ax3jvmH5ZM3VarcO8SCghIXshz81cohuvGDH9U3eYpeVu6jNscX6F9/RwX3HCquo1dLnMWaUJAitAaMbbudxACYjtoAmLjdkQVAbGBxCA2bjmr+BErJyhhkLykXjwOg9i4YRAnbhjECeTSbTBIXrwYJC8pDGIjNaaKO4gNKwaxcctZhUFyguIOkhfUYeO4gxjBHV6GQWwgMYiNW84qDJITFAbJCwqDGElxB5kIOAwyEawHm2KQvHh5xcpLilcsGykMMhFuGGQiWDFIUawYpCixA+N5xbJxO6KKVywbSAxi45azijtITlC8YuUFxSuWkRR3kImAwyATwcodpChW7iBFiXEHsRFbpoo7iA0nBrFxy1nFHSQnKO4geUFxBzGS4g4yEXAYZCJYuYMUxcodpCgx7iA2YtxBXLlhEFechzfjDpIXLwbJS+rF4/hNuo3bEVW8YtlAYhAbt5xVGCQnKF6x8oLiFctIilesiYDDIBPByitWUazcQYoS4xXLRoxXLFduGMQVJ69YVpwYxEaOVywbN16xnLhhECeQS7fhFSsvXgySlxS/B7GR4hVrItwwyESw8opVFCsGKUqMVywbMV6xXLlhEFecvGJZcWIQGzlesWzceMVy4oZBnEDyipUGEoPY+GEQGzcM4sQNgziBxCBpIDGIjR8GsXHDIE7cMIgTSAySBhKD2PhhEBs3DOLEDYM4gcQgaSAxiI0fBrFxwyBO3DCIE0gMkgYSg9j4YRAbNwzixA2DOIHEIGkgMYiNHwaxccMgTtwwiBNIDJIGEoPY+GEQGzcM4sQNgziBxCBpIDGIjR8GsXHDIE7cMIgTSAySBhKD2PhhEBs3DOLEDYM4gcQgaSAxiI0fBrFxwyBO3DCIE0gMkgYSg9j4YRAbNwzixA2DOIHEIGkgMYiNHwaxccMgTtwwiBNIDJIGEoPY+GEQGzcM4sQNgziBxCBpIDGIjR8GsXHDIE7cMIgTSAySBhKD2PhhEBs3DOLEDYM4gcQgaSAxiI0fBrFxwyBO3DCIE0gMkgYSg9j4YRAbNwzixA2DOIHEIGkgMYiNHwaxccMgTtwwiBNIDJIGEoPY+GEQGzcM4sQNgziBxCBpIDGIjR8GsXHDIE7cMIgTSAySBhKD2PhhEBs3DOLEDYM4gcQgaSAxiI0fBrFxwyBO3DCIE0gMkgYSg9j4YRAbNwzixA2DOIHEIGkgMYiNHwaxccMgTtwwiBNIDJIGEoPY+GEQGzcM4sQNgziBxCBpIDGIjR8GsXHDIE7cMIgTSAySBhKD2PhhEBs3DOLEDYM4gcQgaSAxiI0fBrFxwyBO3DCIE0gMkgYSg9j4YRAbNwzixA2DOIHEIGkgMYiNHwaxccMgTtwwiBNIDJIGEoPY+GEQGzcM4sQNgziBxCBpIDv9i6V488gmUb9Vr3la2kSG6k4Wx1bFeLJ6rcfHjvMegEGciLazOxV0/uhvwHireq2LnWYs1qaTvUvST8YE5A71mh8r1thhdCd7StJxIzoN9HRjtW4L/3WYrVgLAlKM17Kj6x6QubhOg/5fFLRm+R2HT6vbuM2JSP42Y9nF+9VtnZm/oeNIAuIEc+whS4oVGmS4zc78eVL47tI7jveo2zrHiUaxNp+Lx2q2v1NBJxxZGHfr+dnT9NU1TxRr6jSagDiBnIaADLc6t/BmDQbXK+j0F3b+D0nb1G1+zYmErU07vlLqb1fQeZLW7m8S411aFS7TluZwjdV8ERAn7tMSkIPb3RiP0cv6x6nXfMyJgF+bq/unalvjd34NEzoRkAR4h5ZOW0Cctv2Sb0NAnI6YgDiBrFkbAuJ0IATECWTN2hAQpwMhIE4ga9aGgDgdCAFxAlmzNgTE6UAIiBPImrUhIE4H0s6+raALx3S7Xd3mp5xmpE0ZBDoLH5IGd4+cKsY96rWOLmM5RecIRQsmNr6TfV3SxtH94y/Vbb1jYmugsT+BdtZR0NYxAfmDeq3X+U+e3rE+AWlnVylo2xiQzyo2j9dXwnz61ulQCoFO9iNJ7xl9rvq5es2zSllPwUnqE5C5/tmK8fvj11/h3zyNXxwjDiXQnv+MQrhhLJQYb1avdenYcRUMqE9ArooNzfazXAyGn7uYmblCW9fen2s8g8olcNXekzS7+EVJ+f70P4az1WvcW+4i881Wn4AM19vOfqagd+Zb+v4/xntW0iMKGv+BodxNGZhEIOrVCmFDoR6rGw1tDguFakoaXK+AdBY+LA3uKmnvTFMLAvEWdVuX1GIpSyyiXgHZb5H5XyuEaj7cU9dTesmuKz6nfc0TtSPsqesWaxiQ7BQFPVxXYKzLk0C4RN3GLZ4dvXvVLyAH7iJXKmiH92bpVyMCwxfLXuuDNVrRkkupZ0AOhOSbCvpE3QGyPgOB4StkbJw1Db/Pqm9Ahtw3ZRdpRsN39AMfIeVrugnE/a+N2/VMo1PJ/7BioFfvgAw3dO3C8VocfEHab5MZwx4pqQOBqPsUwtXqNnbVYTl511D/gBzcydy+12qweK7C4H1SOCPvBhlXIYGoxxX0Q4WZe6b1l7rTE5BDz3ljXKOXL5ysQTxZM/HECr8FmPpwAlG7FfSYYnOXemH4i9yp/prOgEw1chY/TQQIyDSdFmstnQABKR05E04TAQIyTafFWksnQEBKR86E00SAgEzTabHW0gkQkNKRM+E0ESAg03RarLV0AgSkdORMOE0ECMg0nRZrLZ0AASkdORNOEwECMk2nxVpLJ0BASkfOhNNE4H818EN9KNVAeQAAAABJRU5ErkJggg=="},ztsp:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.df50b93059ffeff17fa6.js.map